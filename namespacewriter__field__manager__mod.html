<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: writer_field_manager_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">writer_field_manager_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The writer field manager will manage aspects of the fields being provided to the writer federator. There are two major aspects to this, firstly extraction of fields from the data sent directly from MONC and then passed on if these fields are needed. Secondly, this will queue up the data to ensure that it is sent to the writer federator in strict order and that only one piece of a fields data is in the writer federator at any one time.  
<a href="namespacewriter__field__manager__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacewriter__field__manager__mod_1_1provide__field__to__writer__federator.html">provide_field_to_writer_federator</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a061c34fe0697d9639defd2f0926e2e74"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74">initialise_writer_field_manager</a> (io_configuration, continuation_run)</td></tr>
<tr class="memdesc:a061c34fe0697d9639defd2f0926e2e74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the writer field manager.  <a href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74">More...</a><br /></td></tr>
<tr class="separator:a061c34fe0697d9639defd2f0926e2e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a6d32479542864e64f1f15714fd0b15"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a8a6d32479542864e64f1f15714fd0b15">finalise_writer_field_manager</a> ()</td></tr>
<tr class="memdesc:a8a6d32479542864e64f1f15714fd0b15"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalises the writer field manager.  <a href="namespacewriter__field__manager__mod.html#a8a6d32479542864e64f1f15714fd0b15">More...</a><br /></td></tr>
<tr class="separator:a8a6d32479542864e64f1f15714fd0b15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81d1680737e86e5f70cb286e39bd91b"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#af81d1680737e86e5f70cb286e39bd91b">is_write_field_manager_up_to_date</a> (timestep)</td></tr>
<tr class="memdesc:af81d1680737e86e5f70cb286e39bd91b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the state of the write field manager is up to date with respect to the timestep that has been provided, checks each entry to see if it is missing data or not.  <a href="namespacewriter__field__manager__mod.html#af81d1680737e86e5f70cb286e39bd91b">More...</a><br /></td></tr>
<tr class="separator:af81d1680737e86e5f70cb286e39bd91b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfd94b193f4f73b22d6a48314f7fd2e0"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0">provide_monc_data_to_writer_federator</a> (io_configuration, source, data_id, data_dump)</td></tr>
<tr class="memdesc:acfd94b193f4f73b22d6a48314f7fd2e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data communicated from MONC is provided to this write federator and then included if the configuration has selected to use that MONC field (as opposed to a field produced by the diagnostics federator)  <a href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0">More...</a><br /></td></tr>
<tr class="separator:acfd94b193f4f73b22d6a48314f7fd2e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af479a611799a55972a738e3da695f0fe"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structconfiguration__parser__mod_1_1data__values__type.html">data_values_type</a>) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#af479a611799a55972a738e3da695f0fe">get_value_from_monc_data</a> (io_configuration, source, data_id, data_dump, field_name, field_namespace)</td></tr>
<tr class="memdesc:af479a611799a55972a738e3da695f0fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a value from the communicated MONC data. If this was an integer then converts to a real.  <a href="namespacewriter__field__manager__mod.html#af479a611799a55972a738e3da695f0fe">More...</a><br /></td></tr>
<tr class="separator:af479a611799a55972a738e3da695f0fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8624dc61ca0e9b620128a64a7e43582"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#ae8624dc61ca0e9b620128a64a7e43582">get_type_of_field</a> (fields, field_name, field_namespace, field_type, data_type)</td></tr>
<tr class="memdesc:ae8624dc61ca0e9b620128a64a7e43582"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the data type of a field or 0 if the field was not found.  <a href="namespacewriter__field__manager__mod.html#ae8624dc61ca0e9b620128a64a7e43582">More...</a><br /></td></tr>
<tr class="separator:ae8624dc61ca0e9b620128a64a7e43582"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61030ab70e43ed5b49c6ca3900d9bfb3"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3">provide_field_to_writer_federator_rvalues_src</a> (io_configuration, field_name, field_namespace, field_values, timestep, time, frequency, source)</td></tr>
<tr class="separator:a61030ab70e43ed5b49c6ca3900d9bfb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c173bbbc4904ac12141d3ca6c494e38"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38">provide_field_to_writer_federator_rvalues_nosrc</a> (io_configuration, field_name, field_namespace, field_values, timestep, time, frequency)</td></tr>
<tr class="separator:a7c173bbbc4904ac12141d3ca6c494e38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae55118a13d09d6d75229e0cc6f748e31"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31">provide_field_to_writer_federator_nosrc</a> (io_configuration, field_name, field_namespace, field_values, timestep, time, frequency)</td></tr>
<tr class="memdesc:ae55118a13d09d6d75229e0cc6f748e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a field to the write federator with no source (a none collective diagnostic)  <a href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31">More...</a><br /></td></tr>
<tr class="separator:ae55118a13d09d6d75229e0cc6f748e31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0edc2294f387e9906c4b106396415b63"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63">provide_field_to_writer_federator_src</a> (io_configuration, field_name, field_namespace, field_values, timestep, time, frequency, source, terminated_case)</td></tr>
<tr class="memdesc:a0edc2294f387e9906c4b106396415b63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides a field to the write federator (a collective diagnostic or prognostic)  <a href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63">More...</a><br /></td></tr>
<tr class="separator:a0edc2294f387e9906c4b106396415b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd6a0f59e9d20b22f8dad6922d86998"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998">process_queued_items</a> (io_configuration, field_ordering)</td></tr>
<tr class="memdesc:abdd6a0f59e9d20b22f8dad6922d86998"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes queued up items for a specific field's ordering. This will send any available fields to the write federator with a guaranteed ordering and clean up the memory associated with them.  <a href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998">More...</a><br /></td></tr>
<tr class="separator:abdd6a0f59e9d20b22f8dad6922d86998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebb301dcdc31bd2df054fc507d95478"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478">get_field_ordering_value_at_timestep</a> (collection, timestep)</td></tr>
<tr class="memdesc:acebb301dcdc31bd2df054fc507d95478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a specific field ordering value at the corresponding timestep or null if none is found.  <a href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478">More...</a><br /></td></tr>
<tr class="separator:acebb301dcdc31bd2df054fc507d95478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f899ca545b2a0c0774bb67300ef887e"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a8f899ca545b2a0c0774bb67300ef887e">generate_value_container</a> (field_name, field_namespace, field_values, timestep, time, frequency, source)</td></tr>
<tr class="memdesc:a8f899ca545b2a0c0774bb67300ef887e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the field value container which is then filled in with appropriate values and added into the overall field ordering data structure.  <a href="namespacewriter__field__manager__mod.html#a8f899ca545b2a0c0774bb67300ef887e">More...</a><br /></td></tr>
<tr class="separator:a8f899ca545b2a0c0774bb67300ef887e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad49beb9dd156cfcd8d5c7d5d6d7a1132"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132">get_or_add_field_ordering</a> (field_name, field_namespace, frequency, source)</td></tr>
<tr class="memdesc:ad49beb9dd156cfcd8d5c7d5d6d7a1132"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves or adds ordering for a specific field (and MONC source)  <a href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132">More...</a><br /></td></tr>
<tr class="separator:ad49beb9dd156cfcd8d5c7d5d6d7a1132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac1622fb73e8ded7d3fcb54b7a5b1d1f"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f">get_field_ordering</a> (field_name, do_lock)</td></tr>
<tr class="memdesc:aac1622fb73e8ded7d3fcb54b7a5b1d1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a field ordering based upon the name or null if none can be found.  <a href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f">More...</a><br /></td></tr>
<tr class="separator:aac1622fb73e8ded7d3fcb54b7a5b1d1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc4601639f2049fcc401bc00ae4678cb"><td class="memItemLeft" align="right" valign="top">integer(kind=8) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#abc4601639f2049fcc401bc00ae4678cb">prepare_to_serialise_field_manager_state</a> ()</td></tr>
<tr class="memdesc:abc4601639f2049fcc401bc00ae4678cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares to serialise the field manager state, both determines storage needed and also issues any locks.  <a href="namespacewriter__field__manager__mod.html#abc4601639f2049fcc401bc00ae4678cb">More...</a><br /></td></tr>
<tr class="separator:abc4601639f2049fcc401bc00ae4678cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31bcf976f2e1d1219d3ae96bbe259eaf"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a31bcf976f2e1d1219d3ae96bbe259eaf">serialise_field_manager_state</a> (byte_data)</td></tr>
<tr class="memdesc:a31bcf976f2e1d1219d3ae96bbe259eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialises the current field manager, releases any locks issued during preparation.  <a href="namespacewriter__field__manager__mod.html#a31bcf976f2e1d1219d3ae96bbe259eaf">More...</a><br /></td></tr>
<tr class="separator:a31bcf976f2e1d1219d3ae96bbe259eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f881e178ecfba1f19867dfd796506ae"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a5f881e178ecfba1f19867dfd796506ae">unserialise_field_manager_state</a> (byte_data)</td></tr>
<tr class="memdesc:a5f881e178ecfba1f19867dfd796506ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unserialses from some byte data into the state.  <a href="namespacewriter__field__manager__mod.html#a5f881e178ecfba1f19867dfd796506ae">More...</a><br /></td></tr>
<tr class="separator:a5f881e178ecfba1f19867dfd796506ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a352be271cabc65e0dd69092e006b999e"><td class="memItemLeft" align="right" valign="top">integer(kind=8) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a352be271cabc65e0dd69092e006b999e">prepare_to_serialise_specific_field_ordering</a> (specific_field_ordering)</td></tr>
<tr class="memdesc:a352be271cabc65e0dd69092e006b999e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares to serialise a specific field ordering, both determines storage size and issues locks.  <a href="namespacewriter__field__manager__mod.html#a352be271cabc65e0dd69092e006b999e">More...</a><br /></td></tr>
<tr class="separator:a352be271cabc65e0dd69092e006b999e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e92286d1da4eaa895b726ea9ad7e737"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a1e92286d1da4eaa895b726ea9ad7e737">serialise_specific_field_ordering</a> (specific_field_ordering, byte_data, current_data_point)</td></tr>
<tr class="memdesc:a1e92286d1da4eaa895b726ea9ad7e737"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialises a specific fields ordering and releases any locks issued during preparation.  <a href="namespacewriter__field__manager__mod.html#a1e92286d1da4eaa895b726ea9ad7e737">More...</a><br /></td></tr>
<tr class="separator:a1e92286d1da4eaa895b726ea9ad7e737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3280f532aae1d9f5cfb11374e052ecdb"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a3280f532aae1d9f5cfb11374e052ecdb">unserialise_specific_field_ordering</a> (byte_data)</td></tr>
<tr class="memdesc:a3280f532aae1d9f5cfb11374e052ecdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unserialises some field ordering.  <a href="namespacewriter__field__manager__mod.html#a3280f532aae1d9f5cfb11374e052ecdb">More...</a><br /></td></tr>
<tr class="separator:a3280f532aae1d9f5cfb11374e052ecdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af341837f6738c9f4527d8f030e268ac0"><td class="memItemLeft" align="right" valign="top">integer(kind=8) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#af341837f6738c9f4527d8f030e268ac0">prepare_to_serialise_field_ordering_value</a> (specific_field_value)</td></tr>
<tr class="memdesc:af341837f6738c9f4527d8f030e268ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares to serialise a specific field ordering value, determines both the storage size and issues locks.  <a href="namespacewriter__field__manager__mod.html#af341837f6738c9f4527d8f030e268ac0">More...</a><br /></td></tr>
<tr class="separator:af341837f6738c9f4527d8f030e268ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae17821d78ad07337100dd83424da5c46"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#ae17821d78ad07337100dd83424da5c46">serialise_field_ordering_value</a> (specific_field_value, byte_data, current_data_point)</td></tr>
<tr class="memdesc:ae17821d78ad07337100dd83424da5c46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialises a field ordering value and releases any issued locks.  <a href="namespacewriter__field__manager__mod.html#ae17821d78ad07337100dd83424da5c46">More...</a><br /></td></tr>
<tr class="separator:ae17821d78ad07337100dd83424da5c46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf58f8343222912d3c6872c8bca40bad"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#aaf58f8343222912d3c6872c8bca40bad">unserialise_field_ordering_value</a> (byte_data)</td></tr>
<tr class="memdesc:aaf58f8343222912d3c6872c8bca40bad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unseralises some field ordering from its byte representation.  <a href="namespacewriter__field__manager__mod.html#aaf58f8343222912d3c6872c8bca40bad">More...</a><br /></td></tr>
<tr class="separator:aaf58f8343222912d3c6872c8bca40bad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab447ee3320a5644b9326cdb36e03a80d"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#ab447ee3320a5644b9326cdb36e03a80d">field_lock</a></td></tr>
<tr class="separator:ab447ee3320a5644b9326cdb36e03a80d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92aae971af8878516b817fb8b59c45b9"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacewriter__field__manager__mod.html#a92aae971af8878516b817fb8b59c45b9">field_orderings</a></td></tr>
<tr class="separator:a92aae971af8878516b817fb8b59c45b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The writer field manager will manage aspects of the fields being provided to the writer federator. There are two major aspects to this, firstly extraction of fields from the data sent directly from MONC and then passed on if these fields are needed. Secondly, this will queue up the data to ensure that it is sent to the writer federator in strict order and that only one piece of a fields data is in the writer federator at any one time. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a8a6d32479542864e64f1f15714fd0b15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a6d32479542864e64f1f15714fd0b15">&#9670;&nbsp;</a></span>finalise_writer_field_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public writer_field_manager_mod::finalise_writer_field_manager</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalises the writer field manager. </p>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00071">71</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_destroy(field_lock))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_cgraph" id="anamespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_cgraph">
<area shape="rect" title="Finalises the writer field manager." alt="" coords="5,31,147,87"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="199,5,353,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a1ba0d6ac9839191688aeea507ae27ec8" title=" " alt="" coords="195,71,357,112"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="405,13,548,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="596,5,763,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_icgraph" id="anamespacewriter__field__manager__mod_a8a6d32479542864e64f1f15714fd0b15_icgraph">
<area shape="rect" title="Finalises the writer field manager." alt="" coords="385,5,527,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="a8f899ca545b2a0c0774bb67300ef887e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f899ca545b2a0c0774bb67300ef887e">&#9670;&nbsp;</a></span>generate_value_container()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>) function, pointer writer_field_manager_mod::generate_value_container </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1data__values__type.html">data_values_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), intent(in)&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates the field value container which is then filled in with appropriate values and added into the overall field ordering data structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The field name </td></tr>
    <tr><td class="paramname">field_values</td><td>The fields values </td></tr>
    <tr><td class="paramname">timestep</td><td>The corresponding MONC model timestep </td></tr>
    <tr><td class="paramname">time</td><td>The corresponding MONC model time </td></tr>
    <tr><td class="paramname">frequency</td><td>Configured sampling frequency </td></tr>
    <tr><td class="paramname">source</td><td>MONC source pid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A value container which can be added into the field ordering data structure </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00375">375</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, frequency, source</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">type</span>(data_values_type), <span class="keywordtype">intent(in)</span> :: field_values</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">intent(in)</span> :: time</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <span class="keywordtype">type</span>(field_ordering_value_type), <span class="keywordtype">pointer</span> :: generate_value_container</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160; </div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="keyword">allocate</span>(generate_value_container)</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    generate_value_container%field_name=field_name</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    generate_value_container%field_namespace=field_namespace</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    generate_value_container%timestep=timestep</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    generate_value_container%frequency=frequency</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    generate_value_container%time=time</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    generate_value_container%source=source</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">allocate</span>(generate_value_container%field_values, source=field_values)</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a8f899ca545b2a0c0774bb67300ef887e_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a8f899ca545b2a0c0774bb67300ef887e_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a8f899ca545b2a0c0774bb67300ef887e_icgraph" id="anamespacewriter__field__manager__mod_a8f899ca545b2a0c0774bb67300ef887e_icgraph">
<area shape="rect" title="Generates the field value container which is then filled in with appropriate values and added into th..." alt="" coords="1504,85,1652,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="1305,85,1456,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31" title="Provides a field to the write federator with no source (a none collective diagnostic)" alt="" coords="1081,5,1240,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3" title=" " alt="" coords="1064,85,1257,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1074,165,1247,221"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38" title=" " alt="" coords="809,85,1016,141"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="837,173,988,214"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,165,761,221"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,173,536,214"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,180,337,207"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,180,99,207"/>
</map>
</div>

</div>
</div>
<a id="aac1622fb73e8ded7d3fcb54b7a5b1d1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac1622fb73e8ded7d3fcb54b7a5b1d1f">&#9670;&nbsp;</a></span>get_field_ordering()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>) function, pointer writer_field_manager_mod::get_field_ordering </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>do_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves a field ordering based upon the name or null if none can be found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The name of the field to look up </td></tr>
    <tr><td class="paramname">do_lock</td><td>Whether to issue a read lock or not </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding field ordering data structure or null if none is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00431">431</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: do_lock</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordtype">type</span>(field_ordering_type), <span class="keywordtype">pointer</span> :: get_field_ordering</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160; </div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> (do_lock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(field_lock))</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    generic=&gt;c_get_generic(field_orderings, field_name)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordflow">if</span> (do_lock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(field_lock))</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="keywordflow">        type is</span> (field_ordering_type)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          get_field_ordering=&gt;generic</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="keywordflow">      end select</span>      </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      get_field_ordering=&gt;null()</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_cgraph" id="anamespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_cgraph">
<area shape="rect" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="5,71,167,112"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="219,5,373,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="215,71,377,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="215,136,377,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="425,13,568,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="616,5,783,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_icgraph" id="anamespacewriter__field__manager__mod_aac1622fb73e8ded7d3fcb54b7a5b1d1f_icgraph">
<area shape="rect" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="1707,93,1868,134"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="1504,85,1659,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="1305,85,1456,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31" title="Provides a field to the write federator with no source (a none collective diagnostic)" alt="" coords="1081,5,1240,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3" title=" " alt="" coords="1064,85,1257,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1074,165,1247,221"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38" title=" " alt="" coords="809,85,1016,141"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="837,173,988,214"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,165,761,221"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,173,536,214"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,180,337,207"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,180,99,207"/>
</map>
</div>

</div>
</div>
<a id="acebb301dcdc31bd2df054fc507d95478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acebb301dcdc31bd2df054fc507d95478">&#9670;&nbsp;</a></span>get_field_ordering_value_at_timestep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>) function, pointer writer_field_manager_mod::get_field_ordering_value_at_timestep </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>collection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves a specific field ordering value at the corresponding timestep or null if none is found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">collection</td><td>The map of timesteps to field ordering values that we are looking up </td></tr>
    <tr><td class="paramname">timestep</td><td>The timestep to look up </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding field ordering or null if none is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00348">348</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">intent(inout)</span> :: collection</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordtype">type</span>(field_ordering_value_type), <span class="keywordtype">pointer</span> :: get_field_ordering_value_at_timestep</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160; </div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    generic=&gt;c_get_generic(collection, conv_to_string(timestep))</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keywordflow">        type is</span> (field_ordering_value_type)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;          get_field_ordering_value_at_timestep=&gt;generic</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="keywordflow">      end select</span>      </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      get_field_ordering_value_at_timestep=&gt;null()</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_acebb301dcdc31bd2df054fc507d95478_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_acebb301dcdc31bd2df054fc507d95478_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_acebb301dcdc31bd2df054fc507d95478_icgraph" id="anamespacewriter__field__manager__mod_acebb301dcdc31bd2df054fc507d95478_icgraph">
<area shape="rect" title="Retrieves a specific field ordering value at the corresponding timestep or null if none is found." alt="" coords="1747,85,1908,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="1504,93,1699,134"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="1305,85,1456,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31" title="Provides a field to the write federator with no source (a none collective diagnostic)" alt="" coords="1081,5,1240,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3" title=" " alt="" coords="1064,85,1257,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1074,165,1247,221"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38" title=" " alt="" coords="809,85,1016,141"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="837,173,988,214"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,165,761,221"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,173,536,214"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,180,337,207"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,180,99,207"/>
</map>
</div>

</div>
</div>
<a id="ad49beb9dd156cfcd8d5c7d5d6d7a1132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad49beb9dd156cfcd8d5c7d5d6d7a1132">&#9670;&nbsp;</a></span>get_or_add_field_ordering()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>) function, pointer writer_field_manager_mod::get_or_add_field_ordering </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves or adds ordering for a specific field (and MONC source) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The field name </td></tr>
    <tr><td class="paramname">frequency</td><td>The sampling frequency of this field </td></tr>
    <tr><td class="paramname">source</td><td>MONC source PID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Either the existing or a newly created field ordering </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00397">397</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: frequency, source</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordtype">type</span>(field_ordering_type), <span class="keywordtype">pointer</span> :: get_or_add_field_ordering</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: entry_key</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (source .gt. -1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      entry_key=trim(field_name)//<span class="stringliteral">&quot;#&quot;</span>//trim(field_namespace)//<span class="stringliteral">&quot;#&quot;</span>//trim(conv_to_string(source))</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      entry_key=field_name</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    get_or_add_field_ordering=&gt;get_field_ordering(entry_key, .true.)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(get_or_add_field_ordering)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_wrlock(field_lock))</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      get_or_add_field_ordering=&gt;get_field_ordering(entry_key, .false.)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(get_or_add_field_ordering)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keyword">allocate</span>(get_or_add_field_ordering)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        get_or_add_field_ordering%last_timestep_access=0</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        get_or_add_field_ordering%frequency=frequency</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_mutex_init(get_or_add_field_ordering%access_mutex, -1))</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        generic=&gt;get_or_add_field_ordering</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keyword">call </span>c_put_generic(field_orderings, entry_key, generic, .false.)</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(field_lock))</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_cgraph" id="anamespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_cgraph">
<area shape="rect" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="5,94,160,150"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="423,7,577,48"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="208,36,371,78"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="419,196,581,238"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="208,167,371,208"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="209,102,370,143"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="629,14,772,41"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="820,7,987,48"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="419,102,581,143"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_icgraph" id="anamespacewriter__field__manager__mod_ad49beb9dd156cfcd8d5c7d5d6d7a1132_icgraph">
<area shape="rect" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="1504,85,1659,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="1305,85,1456,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31" title="Provides a field to the write federator with no source (a none collective diagnostic)" alt="" coords="1081,5,1240,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3" title=" " alt="" coords="1064,85,1257,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1074,165,1247,221"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38" title=" " alt="" coords="809,85,1016,141"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="837,173,988,214"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,165,761,221"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,173,536,214"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,180,337,207"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,180,99,207"/>
</map>
</div>

</div>
</div>
<a id="ae8624dc61ca0e9b620128a64a7e43582"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8624dc61ca0e9b620128a64a7e43582">&#9670;&nbsp;</a></span>get_type_of_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::get_type_of_field </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__field__type.html">io_configuration_field_type</a>), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>field_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>data_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the data type of a field or 0 if the field was not found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fields</td><td>Array of fields to search </td></tr>
    <tr><td class="paramname">field_name</td><td>The name of the field to locate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The data type of this field or 0 if the field was not found </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00203">203</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">type</span>(io_configuration_field_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: fields</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: field_type, data_type</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160; </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160; </div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(fields)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">if</span> (fields(i)%name .eq. field_name .and. fields(i)%namespace .eq. field_namespace) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        data_type=fields(i)%data_type</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        field_type=fields(i)%field_type</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordflow">return</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keywordflow">      end if</span>      </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    data_type=0</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    field_type=0</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_ae8624dc61ca0e9b620128a64a7e43582_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_ae8624dc61ca0e9b620128a64a7e43582_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_ae8624dc61ca0e9b620128a64a7e43582_icgraph" id="anamespacewriter__field__manager__mod_ae8624dc61ca0e9b620128a64a7e43582_icgraph">
<area shape="rect" title="Retrieves the data type of a field or 0 if the field was not found." alt="" coords="1427,13,1584,54"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#af479a611799a55972a738e3da695f0fe" title="Retrieves a value from the communicated MONC data. If this was an integer then converts to a real." alt="" coords="1229,5,1379,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1008,5,1181,61"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="809,13,960,54"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,5,761,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,13,536,54"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="af479a611799a55972a738e3da695f0fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af479a611799a55972a738e3da695f0fe">&#9670;&nbsp;</a></span>get_value_from_monc_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structconfiguration__parser__mod_1_1data__values__type.html">data_values_type</a>) function writer_field_manager_mod::get_value_from_monc_data </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>data_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(in), allocatable&#160;</td>
          <td class="paramname"><em>data_dump</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves a value from the communicated MONC data. If this was an integer then converts to a real. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration of the IO server </td></tr>
    <tr><td class="paramname">source</td><td>The source PID of the MONC process </td></tr>
    <tr><td class="paramname">data_id</td><td>The ID of the data definition that is represented by the dump </td></tr>
    <tr><td class="paramname">data_dump</td><td>The data we have received from MONC </td></tr>
    <tr><td class="paramname">field_name</td><td>The field to retrieve </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Data value wrapper containing the values and meta-data </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00158">158</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: source, data_id</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(in)</span> :: data_dump</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordtype">type</span>(data_values_type) :: get_value_from_monc_data</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="keywordtype">type</span>(map_type) :: retrieved_map</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: map_entry</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160; </div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordtype">integer</span> :: field_data_type, field_field_type, i</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: int_values</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keyword">call </span>get_type_of_field(io_configuration%data_definitions(data_id)%fields, field_name, field_namespace, &amp;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;         field_field_type, field_data_type)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordflow">if</span> (field_data_type == 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;No data type for field &#39;&quot;</span>//trim(field_name)//<span class="stringliteral">&quot;&#39;&quot;</span>)</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (field_data_type == double_data_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      get_value_from_monc_data%values=get_array_double_from_monc(io_configuration, source, data_id, data_dump, field_name)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      get_value_from_monc_data%data_type=double_data_type</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_data_type == integer_data_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      get_value_from_monc_data%data_type=double_data_type</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      int_values=get_array_integer_from_monc(io_configuration, source, data_id, data_dump, field_name)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keyword">allocate</span>(get_value_from_monc_data%values(<span class="keyword">size</span>(int_values)))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(int_values)</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        get_value_from_monc_data%values(i)=conv_to_real(int_values(i))</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keyword">deallocate</span>(int_values)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_data_type == string_data_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      get_value_from_monc_data%data_type=string_data_type</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keywordflow">if</span> (field_field_type == scalar_field_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="keyword">allocate</span>(get_value_from_monc_data%string_values(1))</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        get_value_from_monc_data%string_values(1)=get_string_from_monc(io_configuration, source, data_id, data_dump, field_name)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_field_type == map_field_type) <span class="keywordflow">then</span>        </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        get_value_from_monc_data%map_values=get_map_from_monc(io_configuration, source, data_id, data_dump, field_name)        </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_cgraph" id="anamespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_cgraph">
<area shape="rect" title="Retrieves a value from the communicated MONC data. If this was an integer then converts to a real." alt="" coords="5,162,155,218"/>
<area shape="rect" href="namespacedata__utils__mod.html#ae3451c3a141c979be42ec6dc9dfd3010" title="Retreives an array of doubles with a corresponding key from the raw data dump. The size depends on th..." alt="" coords="203,5,377,47"/>
<area shape="rect" href="namespacedata__utils__mod.html#a510d6d68bd7f6fc1ba42ea1f03a0640a" title="Retreives an array of integers with a corresponding key from the raw data dump. The size depends on t..." alt="" coords="203,71,377,112"/>
<area shape="rect" href="namespacedata__utils__mod.html#a4eb3b2f8d1d8a9eb123debc18da81a98" title="Retrieves a map data structure with key&#45;&gt;value pairs, each of which are strings." alt="" coords="223,136,357,177"/>
<area shape="rect" href="namespacedata__utils__mod.html#ababcb4786126b96a6badf8857e831e40" title="Retrieves a string from the data dump." alt="" coords="223,201,357,243"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae8624dc61ca0e9b620128a64a7e43582" title="Retrieves the data type of a field or 0 if the field was not found." alt="" coords="211,267,369,308"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="219,333,361,359"/>
<area shape="rect" href="namespacedata__utils__mod.html#ae2655fd2a18fe02aba0b3eb90cd8198f" title="Retreives an array of doubles with a corresponding key from the raw data dump. The size depends on th..." alt="" coords="441,5,576,47"/>
<area shape="rect" href="namespacedata__utils__mod.html#ae11f9a29502ddd6ee34686a99e43ebdd" title="Retreives an array of integers with a corresponding key from the raw data dump. The size depends on t..." alt="" coords="441,71,576,112"/>
<area shape="rect" href="namespacedata__utils__mod.html#af8e53b2d1fcadf6b273699a0ddf21395" title="Retrieves a map data structure with key&#45;&gt;value pairs, each of which are strings." alt="" coords="425,143,592,170"/>
<area shape="rect" href="namespacedata__utils__mod.html#ab376cafca515260cc68a7b1f1502641d" title="Retrieves a string from the data dump." alt="" coords="441,201,576,243"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="425,325,592,367"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_icgraph" id="anamespacewriter__field__manager__mod_af479a611799a55972a738e3da695f0fe_icgraph">
<area shape="rect" title="Retrieves a value from the communicated MONC data. If this was an integer then converts to a real." alt="" coords="1229,5,1379,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1008,5,1181,61"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="809,13,960,54"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,5,761,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,13,536,54"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="a061c34fe0697d9639defd2f0926e2e74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a061c34fe0697d9639defd2f0926e2e74">&#9670;&nbsp;</a></span>initialise_writer_field_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public writer_field_manager_mod::initialise_writer_field_manager </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>continuation_run</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the writer field manager. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration of the IO server </td></tr>
    <tr><td class="paramname">continuation_run</td><td>Whether or not this is a continuation run </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00058">58</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: continuation_run</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160; </div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_init(field_lock, -1))</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keyword">call </span>set_serialise_write_field_manager_state(serialise_field_manager_state, prepare_to_serialise_field_manager_state, &amp;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         is_write_field_manager_up_to_date)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span> (continuation_run) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <span class="keyword">call </span>reactivate_writer_field_manager_state(io_configuration, unserialise_field_manager_state)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_cgraph" id="anamespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_cgraph">
<area shape="rect" title="Initialises the writer field manager." alt="" coords="5,635,152,691"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="728,500,883,541"/>
<area shape="rect" href="namespaceforthread__mod.html#a84f66d5153e8adc21918d4b4d627087f" title=" " alt="" coords="207,1004,369,1045"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#af81d1680737e86e5f70cb286e39bd91b" title="Determines whether the state of the write field manager is up to date with respect to the timestep th..." alt="" coords="213,530,363,586"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abc4601639f2049fcc401bc00ae4678cb" title="Prepares to serialise the field manager state, both determines storage needed and also issues any loc..." alt="" coords="200,439,376,495"/>
<area shape="rect" href="namespaceio__server__state__reader__mod.html#ac3ee89021b7ad8db947b5a370ab647cc" title="Reactivates the writer field manager state from the checkpoint file, for memory reasons this will ope..." alt="" coords="210,783,366,839"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a31bcf976f2e1d1219d3ae96bbe259eaf" title="Serialises the current field manager, releases any locks issued during preparation." alt="" coords="217,317,359,373"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#aa969280ae677aaaa78ee93da265284d5" title="Sets the procedure to call for serialises the field manager state, this is handled in this manner due..." alt="" coords="204,667,372,723"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a5f881e178ecfba1f19867dfd796506ae" title="Unserialses from some byte data into the state." alt="" coords="212,925,364,981"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="978,703,1121,730"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1211,696,1378,737"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="462,500,625,541"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="462,383,625,424"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a352be271cabc65e0dd69092e006b999e" title="Prepares to serialise a specific field ordering, both determines storage size and issues locks." alt="" coords="455,251,631,307"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="724,255,887,296"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#af341837f6738c9f4527d8f030e268ac0" title="Prepares to serialise a specific field ordering value, determines both the storage size and issues lo..." alt="" coords="717,319,893,375"/>
<area shape="rect" href="namespacewriter__types__mod.html#aa4c1edaaebbfa64ad4dc2a09632cefba" title="Prepares to serialise a specific data values type, both determines the byte size required and also is..." alt="" coords="948,327,1151,368"/>
<area shape="rect" href="namespacewriter__types__mod.html#a09de0017a289827e5b114043878ee8b2" title="Prepares a map for serialisation, both determines the size of storage required and also issues any lo..." alt="" coords="1208,327,1381,368"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="722,725,889,767"/>
<area shape="rect" href="namespaceio__server__state__reader__mod.html#ae6fa2d9320b51df852a8091efe4eaeab" title="Retrieves some IO server serialised bytes which will make up the state of a specific facet...." alt="" coords="424,849,663,891"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#af2aeb42c9fdb961702216042b0330088" title="Retrieves a string value from the database that matches the provided key." alt="" coords="469,915,618,956"/>
<area shape="rect" href="namespaceio__server__state__reader__mod.html#ad750d4f0fe0a79ee6fd675fcc5bb14e9" title="Will restart the field manager state from the checkpoint file." alt="" coords="452,718,635,774"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a13bbeb6272c82308e3d4a42f7c36c862" title="Determines whether a specific options key exists in the database or not, if it doesn&#39;t then this resu..." alt="" coords="731,907,880,963"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#ab4f16a670bed755586806647da3cfa8d" title="Gets a key corresponding to the correct options key and index combination." alt="" coords="727,843,884,884"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a4b187d310f786ed3c207a3060e09b156" title="Determines whether a specific key is in the database." alt="" coords="975,889,1124,931"/>
<area shape="rect" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20" title="Will log just from the master process." alt="" coords="711,674,900,701"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="977,143,1122,184"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a1e92286d1da4eaa895b726ea9ad7e737" title="Serialises a specific fields ordering and releases any locks issued during preparation." alt="" coords="464,121,623,177"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="724,5,887,47"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae17821d78ad07337100dd83424da5c46" title="Serialises a field ordering value and releases any issued locks." alt="" coords="735,70,876,126"/>
<area shape="rect" href="namespacewriter__types__mod.html#ab5bd556b7aece3ad191a87331c70663d" title="Serialises some data values to store or transmit. This releases any locks issued during preparation." alt="" coords="960,77,1139,119"/>
<area shape="rect" href="namespacewriter__types__mod.html#a427401c0dfd6265375770ccf333f1675" title="Serialises a string map, where the values are assumed to be strings. This releases any locks issued d..." alt="" coords="1205,77,1384,119"/>
<area shape="rect" href="namespacedata__utils__mod.html#ab3602147fea5dd8f50911c7f4c93ff76" title="Unpacks a scalar integer from some byte data, this is a very simple unpack routine wrapping the trans..." alt="" coords="950,1085,1149,1127"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a3280f532aae1d9f5cfb11374e052ecdb" title="Unserialises some field ordering." alt="" coords="457,987,630,1043"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="724,1119,887,1160"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aaf58f8343222912d3c6872c8bca40bad" title="Unseralises some field ordering from its byte representation." alt="" coords="729,987,881,1043"/>
<area shape="rect" href="namespacedata__utils__mod.html#a3b50dff5f8dae4a3bc361d1dce5f7711" title="Unpacks a double precision scalar real from some byte data, this is a very simple unpack routine wrap..." alt="" coords="948,955,1151,996"/>
<area shape="rect" href="namespacewriter__types__mod.html#a536a4c1352bbc1d7a21aedec40ba4f8e" title="Unserialises some byte data into data values." alt="" coords="953,1020,1145,1061"/>
<area shape="rect" href="namespacewriter__types__mod.html#a0c1e3ad6ff464304020f0be57e7e7df0" title="Inflates some byte data into a string map." alt="" coords="1199,1020,1391,1061"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_icgraph" id="anamespacewriter__field__manager__mod_a061c34fe0697d9639defd2f0926e2e74_icgraph">
<area shape="rect" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="af81d1680737e86e5f70cb286e39bd91b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af81d1680737e86e5f70cb286e39bd91b">&#9670;&nbsp;</a></span>is_write_field_manager_up_to_date()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public writer_field_manager_mod::is_write_field_manager_up_to_date </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the state of the write field manager is up to date with respect to the timestep that has been provided, checks each entry to see if it is missing data or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestep</td><td>The timestep to check against </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the write field manager is up to date or not </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00079">79</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: mapentry</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160; </div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    is_write_field_manager_up_to_date=.true.</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(field_lock))</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    iterator=c_get_iterator(field_orderings)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      mapentry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      generic=&gt;c_get_generic(mapentry)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="keywordflow">        type is</span> (field_ordering_type)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;          <span class="keywordflow">if</span> (generic%last_timestep_access .lt. timestep) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            is_write_field_manager_up_to_date=.false.</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">exit</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keywordflow">      end select</span>      </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="keywordflow">    end do</span>    </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(field_lock))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_cgraph" id="anamespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_cgraph">
<area shape="rect" title="Determines whether the state of the write field manager is up to date with respect to the timestep th..." alt="" coords="5,63,156,119"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="208,5,363,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="204,71,367,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="204,136,367,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="415,13,557,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="605,5,772,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_icgraph" id="anamespacewriter__field__manager__mod_af81d1680737e86e5f70cb286e39bd91b_icgraph">
<area shape="rect" title="Determines whether the state of the write field manager is up to date with respect to the timestep th..." alt="" coords="580,5,731,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="abc4601639f2049fcc401bc00ae4678cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc4601639f2049fcc401bc00ae4678cb">&#9670;&nbsp;</a></span>prepare_to_serialise_field_manager_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind=8) function writer_field_manager_mod::prepare_to_serialise_field_manager_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares to serialise the field manager state, both determines storage needed and also issues any locks. </p>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes needed to store the serialised state </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00453">453</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: map_entry</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(field_lock))</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    prepare_to_serialise_field_manager_state=kind(prepare_to_serialise_field_manager_state)</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160; </div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    iterator=c_get_iterator(field_orderings)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      map_entry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      generic=&gt;c_get_generic(map_entry)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="keywordflow">        type is</span> (field_ordering_type)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          prepare_to_serialise_field_manager_state=prepare_to_serialise_field_manager_state+&amp;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;               prepare_to_serialise_specific_field_ordering(generic)+&amp;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;               (kind(prepare_to_serialise_field_manager_state)*2)+len(trim(map_entry%key))</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="keywordflow">        end select</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_cgraph" id="anamespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_cgraph">
<area shape="rect" title="Prepares to serialise the field manager state, both determines storage needed and also issues any loc..." alt="" coords="5,41,181,97"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="464,5,619,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="236,48,399,89"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a352be271cabc65e0dd69092e006b999e" title="Prepares to serialise a specific field ordering, both determines storage size and issues locks." alt="" coords="229,113,405,169"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="707,13,850,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="931,5,1098,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="460,103,623,144"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#af341837f6738c9f4527d8f030e268ac0" title="Prepares to serialise a specific field ordering value, determines both the storage size and issues lo..." alt="" coords="453,167,629,223"/>
<area shape="rect" href="namespacewriter__types__mod.html#aa4c1edaaebbfa64ad4dc2a09632cefba" title="Prepares to serialise a specific data values type, both determines the byte size required and also is..." alt="" coords="677,175,880,216"/>
<area shape="rect" href="namespacewriter__types__mod.html#a09de0017a289827e5b114043878ee8b2" title="Prepares a map for serialisation, both determines the size of storage required and also issues any lo..." alt="" coords="928,175,1101,216"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_icgraph" id="anamespacewriter__field__manager__mod_abc4601639f2049fcc401bc00ae4678cb_icgraph">
<area shape="rect" title="Prepares to serialise the field manager state, both determines storage needed and also issues any loc..." alt="" coords="580,5,756,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="af341837f6738c9f4527d8f030e268ac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af341837f6738c9f4527d8f030e268ac0">&#9670;&nbsp;</a></span>prepare_to_serialise_field_ordering_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind=8) function writer_field_manager_mod::prepare_to_serialise_field_ordering_value </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>specific_field_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares to serialise a specific field ordering value, determines both the storage size and issues locks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specific_field_value</td><td>The specific value to prepare for serialisation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes needed to store the serialised state </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00644">644</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordtype">type</span>(field_ordering_value_type), <span class="keywordtype">intent(inout)</span> :: specific_field_value</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    prepare_to_serialise_field_ordering_value=prepare_to_serialise_data_values_type(specific_field_value%field_values)</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    prepare_to_serialise_field_ordering_value=prepare_to_serialise_field_ordering_value+&amp;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         (kind(specific_field_value%timestep) * 6) + len(trim(specific_field_value%field_name)) + &amp;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         len(trim(specific_field_value%field_namespace)) + kind(specific_field_value%time)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_cgraph" id="anamespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_cgraph">
<area shape="rect" title="Prepares to serialise a specific field ordering value, determines both the storage size and issues lo..." alt="" coords="5,5,181,61"/>
<area shape="rect" href="namespacewriter__types__mod.html#aa4c1edaaebbfa64ad4dc2a09632cefba" title="Prepares to serialise a specific data values type, both determines the byte size required and also is..." alt="" coords="229,13,432,54"/>
<area shape="rect" href="namespacewriter__types__mod.html#a09de0017a289827e5b114043878ee8b2" title="Prepares a map for serialisation, both determines the size of storage required and also issues any lo..." alt="" coords="480,13,653,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_icgraph" id="anamespacewriter__field__manager__mod_af341837f6738c9f4527d8f030e268ac0_icgraph">
<area shape="rect" title="Prepares to serialise a specific field ordering value, determines both the storage size and issues lo..." alt="" coords="1028,5,1204,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a352be271cabc65e0dd69092e006b999e" title="Prepares to serialise a specific field ordering, both determines storage size and issues locks." alt="" coords="804,5,980,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abc4601639f2049fcc401bc00ae4678cb" title="Prepares to serialise the field manager state, both determines storage needed and also issues any loc..." alt="" coords="580,5,756,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="a352be271cabc65e0dd69092e006b999e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a352be271cabc65e0dd69092e006b999e">&#9670;&nbsp;</a></span>prepare_to_serialise_specific_field_ordering()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind=8) function writer_field_manager_mod::prepare_to_serialise_specific_field_ordering </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>specific_field_ordering</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares to serialise a specific field ordering, both determines storage size and issues locks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specific_field_ordering</td><td>The field ordering to prepare for serialisation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes needed to store the serialised state </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00541">541</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordtype">type</span>(field_ordering_type), <span class="keywordtype">intent(inout)</span> :: specific_field_ordering</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160; </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: map_entry</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160; </div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(specific_field_ordering%access_mutex))</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160; </div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;    prepare_to_serialise_specific_field_ordering=kind(prepare_to_serialise_specific_field_ordering) * 3</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    iterator=c_get_iterator(specific_field_ordering%timestep_to_value)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      map_entry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      generic=&gt;c_get_generic(map_entry)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keywordflow">        type is</span> (field_ordering_value_type)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;          prepare_to_serialise_specific_field_ordering=prepare_to_serialise_specific_field_ordering+&amp;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;               prepare_to_serialise_field_ordering_value(generic)+(kind(prepare_to_serialise_specific_field_ordering)*2)+&amp;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;               len(trim(map_entry%key))</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="keywordflow">        end select</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_cgraph" id="anamespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_cgraph">
<area shape="rect" title="Prepares to serialise a specific field ordering, both determines storage size and issues locks." alt="" coords="5,63,181,119"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="240,5,395,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="236,71,399,112"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#af341837f6738c9f4527d8f030e268ac0" title="Prepares to serialise a specific field ordering value, determines both the storage size and issues lo..." alt="" coords="229,135,405,191"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="483,13,626,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="707,5,874,47"/>
<area shape="rect" href="namespacewriter__types__mod.html#aa4c1edaaebbfa64ad4dc2a09632cefba" title="Prepares to serialise a specific data values type, both determines the byte size required and also is..." alt="" coords="453,143,656,184"/>
<area shape="rect" href="namespacewriter__types__mod.html#a09de0017a289827e5b114043878ee8b2" title="Prepares a map for serialisation, both determines the size of storage required and also issues any lo..." alt="" coords="704,143,877,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_icgraph" id="anamespacewriter__field__manager__mod_a352be271cabc65e0dd69092e006b999e_icgraph">
<area shape="rect" title="Prepares to serialise a specific field ordering, both determines storage size and issues locks." alt="" coords="804,5,980,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abc4601639f2049fcc401bc00ae4678cb" title="Prepares to serialise the field manager state, both determines storage needed and also issues any loc..." alt="" coords="580,5,756,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="abdd6a0f59e9d20b22f8dad6922d86998"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdd6a0f59e9d20b22f8dad6922d86998">&#9670;&nbsp;</a></span>process_queued_items()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::process_queued_items </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>field_ordering</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Processes queued up items for a specific field's ordering. This will send any available fields to the write federator with a guaranteed ordering and clean up the memory associated with them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The IO server configuration </td></tr>
    <tr><td class="paramname">field_ordering</td><td>The field ordering status associated with this field </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00315">315</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordtype">type</span>(field_ordering_type), <span class="keywordtype">intent(inout)</span> :: field_ordering</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordtype">integer</span> :: next_timestep</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordtype">type</span>(field_ordering_value_type), <span class="keywordtype">pointer</span> :: field_ordering_value_at_timestep</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (.not. c_is_empty(field_ordering%timestep_to_value))</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      next_timestep=field_ordering%last_timestep_access + field_ordering%frequency</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      <span class="keywordflow">if</span> (c_contains(field_ordering%timestep_to_value, conv_to_string(next_timestep))) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        field_ordering_value_at_timestep=&gt;get_field_ordering_value_at_timestep(field_ordering%timestep_to_value, next_timestep)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keyword">call </span>c_remove(field_ordering%timestep_to_value, conv_to_string(next_timestep))</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        field_ordering%last_timestep_access=next_timestep</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keyword">call </span>provide_ordered_field_to_writer_federator(io_configuration, field_ordering_value_at_timestep%field_name, &amp;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;             field_ordering_value_at_timestep%field_namespace, field_ordering_value_at_timestep%field_values, &amp;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;             field_ordering_value_at_timestep%timestep, field_ordering_value_at_timestep%time, &amp;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;             field_ordering_value_at_timestep%source)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(field_ordering_value_at_timestep%field_values)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(field_ordering_value_at_timestep%field_values%values)) &amp;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;               <span class="keyword">deallocate</span>(field_ordering_value_at_timestep%field_values%values)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;          <span class="keyword">deallocate</span>(field_ordering_value_at_timestep%field_values)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        <span class="keyword">deallocate</span>(field_ordering_value_at_timestep)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">exit</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_cgraph" id="anamespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_cgraph">
<area shape="rect" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="5,2155,200,2197"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478" title="Retrieves a specific field ordering value at the corresponding timestep or null if none is found." alt="" coords="248,2108,409,2164"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a7149ce030c6fa05c7789b5e1e10be905" title=" " alt="" coords="253,2188,404,2244"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="3177,701,3332,742"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="3384,1032,3527,1059"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a303133afee5100e6a9b0b19ead391dfa" title="For a specific field wil determine and handle any outstanding fields writes until an outstanding writ..." alt="" coords="943,2109,1117,2165"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="3173,2105,3336,2146"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="3173,2459,3336,2501"/>
<area shape="rect" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9" title="Retrieves the current logging level." alt="" coords="2247,381,2390,422"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9379ee9a358faa87a63d2f2459f202b9" title="Retrieves the index of the next writer which uses a specific field. If none is found then returns fal..." alt="" coords="958,2611,1102,2667"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9b04288042049d5e432068c5923b026d" title="Provides fields (either diagnostics or prognostics) to the write federator which will action these as..." alt="" coords="457,2293,668,2349"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="3575,1025,3741,1066"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a37589f9aced0f51f811ed15c462d33cb" title="Closes the diagnostics file, this is done via a global callback to issue the closes synchronously (co..." alt="" coords="1173,755,1328,797"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a3df9fda1cc189c370e8599947191e559" title="Determines if a file can be written to its overarching write representation. If so then a write is is..." alt="" coords="2023,2161,2167,2217"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9ec7f85e388c7212a8aa98acefc2b9d0" title="Call back for the inter IO reduction which actually does the NetCDF file closing which is a collectiv..." alt="" coords="1376,683,1553,739"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4e6cf3c74ee165c8ece3735913e75e0a" title="Will check whether there are any pending writes and if so will issue a chain write for this." alt="" coords="1601,683,1752,739"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ab6600fa0faed86a8d9f6d22b2903da62" title="Cleans out old timepoints which are no longer going to be of any relavence to the file writing...." alt="" coords="2681,347,2825,389"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9271347f390a41c78caacc174002d0b4" title="Issues the actual file creation, write of available fields and closure if all completed." alt="" coords="1800,722,1944,763"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6c970a34b31a068f500ae6a1235d9906" title="Defines a NetCDF file &#45; which creates it, defines all dimensions and variables. This must be called b..." alt="" coords="2441,1025,2601,1066"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a472ec41d11538e384f05791c3d6037d7" title="Determines whether it can optimise a specific collective field. If the field fits into certain limite..." alt="" coords="1992,649,2199,705"/>
<area shape="rect" href="namespacewriter__federator__mod.html#af717d0c9b90eb4744fe7bec75086e25d" title="Extracts the applicable time points from the overall map that lie within a specific range." alt="" coords="2681,412,2825,468"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="2931,962,3097,1003"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a1ce0c117e268cee4460b6385bc8629c3" title="Defines a coordinate variable in the NetCDF file." alt="" coords="2673,1188,2834,1244"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="2929,1027,3099,1069"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="2929,1145,3099,1186"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a9492c076905001a53f8cb3085739d6db" title="Defines spatial dimensions in the diagnostics file." alt="" coords="2670,913,2837,954"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#adb0cc64b982ca21514e74a881b1ee30f" title="Defines the options_database variable in the NetCDF file." alt="" coords="2652,1057,2855,1113"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a66915aa056fc8a300dbedbc0c7b0c3ca" title="Defines dimensions for all required dimensions. This is usually the number required plus one,..." alt="" coords="2669,977,2837,1033"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a58faae9f572a8860a586d47251df2ab4" title="Defines all variables in the file writer state." alt="" coords="2677,1319,2830,1361"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="2933,515,3095,557"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#acb05fbdc64a670792cd9cec7f238951d" title="Retrieves a file state based upon its timestep or null if none is found." alt="" coords="2681,491,2825,533"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a41e86c7b84afdea863ca626a2599bf1d" title="Retrieves the field key, corresponding to the field name in the NetCDF file and what we store against..." alt="" coords="2942,1631,3086,1673"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="2933,398,3095,439"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a797c4ff7ba5863cdff2746729ec8e1fc" title="Writes the contents of a variable to the NetCDF file. This also removes the written entries from the ..." alt="" coords="2247,1774,2391,1815"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a10f13979aff7110f8df58356fb4e398d" title="Writes collective variables, where we are working with the values from multiple MONCs and storing the..." alt="" coords="2671,1879,2836,1935"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#abc1e910adcd0ef7c86299b5286fc365f" title="Writes contiguous collective variable blocks into the NetCDF files. These are blocks of data spanning..." alt="" coords="2442,1759,2601,1830"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a605f56b2d81bbaf34377388f9d3f6ec1" title="Writes independent variables to the diagnostics file. This writes the entire variable and works by wr..." alt="" coords="2439,1617,2604,1673"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aacc77c78537724e3eac2bfc2537d9a30" title="Translates a dimension name to its numeric corresponding identifier." alt="" coords="2915,1850,3113,1891"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aff299f33f5701bfddd073cd0a06be5f7" title="Retrieves the original size of a specific dimension (which is auto)" alt="" coords="2903,1915,3125,1957"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6da2f8c99dc13a7d24ec60861a2a48aa" title="Given the file state and the output frequency of a field will retrive the appropriate time series dim..." alt="" coords="2916,2032,3112,2088"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aaff250f828a91818f15f82b3838701cf" title="Retrieves the next collective descriptor based upon the iterator." alt="" coords="2668,2060,2839,2116"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aef4805588ccfc47ddd145e9c20e34218" title="Retrieves the next specific monc information item from the iterator." alt="" coords="2673,1799,2833,1855"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="2668,1487,2839,1529"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="2921,1210,3107,1251"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a527dfbc289976e0eefcc432bb077040e" title=" " alt="" coords="2681,1553,2826,1594"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a646b3fed89978ea8212eece9494f7c54" title=" " alt="" coords="2672,1617,2835,1673"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ad5f57429aef78615f84f59d4f2758747" title="Retrieves the data size for each Q entry of a collective Q field for the specific source MONC that ha..." alt="" coords="716,2439,887,2481"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4d77a55167cf260497e14e1f86a8e54b" title="Provides a single ordered field, i.e. Q fields have been split by this point." alt="" coords="718,2320,885,2376"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#ae5be635b15f2c5670d91275e34c74105" title="A helper function to get the location of a MONC&#39;s configuration in the IO data structure." alt="" coords="945,2546,1115,2587"/>
<area shape="rect" href="namespacewriter__federator__mod.html#acac4d8c09e5e6c8566f9548a71339e7b" title="Writes the collective values, this is held differently to independent values which are written direct..." alt="" coords="935,2327,1125,2369"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_icgraph" id="anamespacewriter__field__manager__mod_abdd6a0f59e9d20b22f8dad6922d86998_icgraph">
<area shape="rect" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="1504,93,1699,134"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="1305,85,1456,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31" title="Provides a field to the write federator with no source (a none collective diagnostic)" alt="" coords="1081,5,1240,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3" title=" " alt="" coords="1064,85,1257,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1074,165,1247,221"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38" title=" " alt="" coords="809,85,1016,141"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="837,173,988,214"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,165,761,221"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,173,536,214"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,180,337,207"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,180,99,207"/>
</map>
</div>

</div>
</div>
<a id="ae55118a13d09d6d75229e0cc6f748e31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae55118a13d09d6d75229e0cc6f748e31">&#9670;&nbsp;</a></span>provide_field_to_writer_federator_nosrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::provide_field_to_writer_federator_nosrc </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1data__values__type.html">data_values_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), intent(in)&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Provides a field to the write federator with no source (a none collective diagnostic) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The IO server configuration </td></tr>
    <tr><td class="paramname">field_name</td><td>The field name </td></tr>
    <tr><td class="paramname">field_values</td><td>The fields values </td></tr>
    <tr><td class="paramname">timestep</td><td>The corresponding model timestep </td></tr>
    <tr><td class="paramname">time</td><td>Corresponding MONC model time </td></tr>
    <tr><td class="paramname">frequency</td><td>Configured sampling frequency </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00257">257</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, frequency</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordtype">type</span>(data_values_type), <span class="keywordtype">intent(inout)</span> :: field_values</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">intent(in)</span> :: time</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keyword">call </span>provide_field_to_writer_federator_src(io_configuration, field_name, field_namespace, &amp;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;         field_values, timestep, time, frequency, -1)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_ae55118a13d09d6d75229e0cc6f748e31_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_ae55118a13d09d6d75229e0cc6f748e31_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_ae55118a13d09d6d75229e0cc6f748e31_cgraph" id="anamespacewriter__field__manager__mod_ae55118a13d09d6d75229e0cc6f748e31_cgraph">
<area shape="rect" title="Provides a field to the write federator with no source (a none collective diagnostic)" alt="" coords="5,1178,164,1234"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="212,1178,363,1234"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="3551,1476,3705,1517"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="3547,2662,3709,2704"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="3547,1045,3709,1086"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a8f899ca545b2a0c0774bb67300ef887e" title="Generates the field value container which is then filled in with appropriate values and added into th..." alt="" coords="434,1178,582,1234"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="3065,754,3220,810"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="411,1257,605,1298"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a7149ce030c6fa05c7789b5e1e10be905" title=" " alt="" coords="659,1140,809,1196"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="3757,1567,3900,1594"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="3948,1560,4115,1601"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="3306,805,3469,846"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="3547,469,3709,510"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="3306,870,3469,912"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="3307,637,3468,678"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="3547,637,3709,678"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478" title="Retrieves a specific field ordering value at the corresponding timestep or null if none is found." alt="" coords="653,1250,815,1306"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a303133afee5100e6a9b0b19ead391dfa" title="For a specific field wil determine and handle any outstanding fields writes until an outstanding writ..." alt="" coords="1349,1274,1522,1330"/>
<area shape="rect" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9" title="Retrieves the current logging level." alt="" coords="2653,1122,2795,1164"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9379ee9a358faa87a63d2f2459f202b9" title="Retrieves the index of the next writer which uses a specific field. If none is found then returns fal..." alt="" coords="1363,1107,1507,1163"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9b04288042049d5e432068c5923b026d" title="Provides fields (either diagnostics or prognostics) to the write federator which will action these as..." alt="" coords="863,427,1073,483"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a37589f9aced0f51f811ed15c462d33cb" title="Closes the diagnostics file, this is done via a global callback to issue the closes synchronously (co..." alt="" coords="1579,1033,1733,1074"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a3df9fda1cc189c370e8599947191e559" title="Determines if a file can be written to its overarching write representation. If so then a write is is..." alt="" coords="2429,1339,2573,1395"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9ec7f85e388c7212a8aa98acefc2b9d0" title="Call back for the inter IO reduction which actually does the NetCDF file closing which is a collectiv..." alt="" coords="1781,910,1959,966"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4e6cf3c74ee165c8ece3735913e75e0a" title="Will check whether there are any pending writes and if so will issue a chain write for this." alt="" coords="2007,910,2157,966"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ab6600fa0faed86a8d9f6d22b2903da62" title="Cleans out old timepoints which are no longer going to be of any relavence to the file writing...." alt="" coords="3315,469,3459,510"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9271347f390a41c78caacc174002d0b4" title="Issues the actual file creation, write of available fields and closure if all completed." alt="" coords="2205,981,2349,1022"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6c970a34b31a068f500ae6a1235d9906" title="Defines a NetCDF file &#45; which creates it, defines all dimensions and variables. This must be called b..." alt="" coords="3063,1006,3223,1048"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a472ec41d11538e384f05791c3d6037d7" title="Determines whether it can optimise a specific collective field. If the field fits into certain limite..." alt="" coords="2397,1006,2604,1062"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="3304,1560,3471,1601"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#acb05fbdc64a670792cd9cec7f238951d" title="Retrieves a file state based upon its timestep or null if none is found." alt="" coords="3315,936,3459,977"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="3302,1794,3473,1836"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="3302,1677,3473,1718"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a797c4ff7ba5863cdff2746729ec8e1fc" title="Writes the contents of a variable to the NetCDF file. This also removes the written entries from the ..." alt="" coords="2652,1641,2796,1682"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a10f13979aff7110f8df58356fb4e398d" title="Writes collective variables, where we are working with the values from multiple MONCs and storing the..." alt="" coords="3060,2198,3225,2254"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#abc1e910adcd0ef7c86299b5286fc365f" title="Writes contiguous collective variable blocks into the NetCDF files. These are blocks of data spanning..." alt="" coords="2847,1784,3006,1854"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a605f56b2d81bbaf34377388f9d3f6ec1" title="Writes independent variables to the diagnostics file. This writes the entire variable and works by wr..." alt="" coords="2844,1634,3009,1690"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aacc77c78537724e3eac2bfc2537d9a30" title="Translates a dimension name to its numeric corresponding identifier." alt="" coords="3288,2376,3487,2417"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aff299f33f5701bfddd073cd0a06be5f7" title="Retrieves the original size of a specific dimension (which is auto)" alt="" coords="3276,2310,3499,2352"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a41e86c7b84afdea863ca626a2599bf1d" title="Retrieves the field key, corresponding to the field name in the NetCDF file and what we store against..." alt="" coords="3315,2114,3459,2156"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6da2f8c99dc13a7d24ec60861a2a48aa" title="Given the file state and the output frequency of a field will retrive the appropriate time series dim..." alt="" coords="3289,2179,3485,2235"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aaff250f828a91818f15f82b3838701cf" title="Retrieves the next collective descriptor based upon the iterator." alt="" coords="3057,1987,3228,2043"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aef4805588ccfc47ddd145e9c20e34218" title="Retrieves the next specific monc information item from the iterator." alt="" coords="3063,2067,3223,2123"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="3057,1689,3228,1730"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a527dfbc289976e0eefcc432bb077040e" title=" " alt="" coords="3070,1572,3215,1613"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a646b3fed89978ea8212eece9494f7c54" title=" " alt="" coords="3061,1856,3224,1912"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ad5f57429aef78615f84f59d4f2758747" title="Retrieves the data size for each Q entry of a collective Q field for the specific source MONC that ha..." alt="" coords="1121,424,1292,465"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4d77a55167cf260497e14e1f86a8e54b" title="Provides a single ordered field, i.e. Q fields have been split by this point." alt="" coords="1123,839,1290,895"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#ae5be635b15f2c5670d91275e34c74105" title="A helper function to get the location of a MONC&#39;s configuration in the IO data structure." alt="" coords="1351,402,1520,444"/>
<area shape="rect" href="namespacewriter__federator__mod.html#acac4d8c09e5e6c8566f9548a71339e7b" title="Writes the collective values, this is held differently to independent values which are written direct..." alt="" coords="1340,570,1531,612"/>
</map>
</div>

</div>
</div>
<a id="a7c173bbbc4904ac12141d3ca6c494e38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c173bbbc4904ac12141d3ca6c494e38">&#9670;&nbsp;</a></span>provide_field_to_writer_federator_rvalues_nosrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::provide_field_to_writer_federator_rvalues_nosrc </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), intent(in)&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>frequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00238">238</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, frequency</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: field_values</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">intent(in)</span> :: time</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keyword">call </span>provide_field_to_writer_federator_rvalues_src(io_configuration, field_name, field_namespace, &amp;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;         field_values, timestep, time, frequency, -1)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a7c173bbbc4904ac12141d3ca6c494e38_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a7c173bbbc4904ac12141d3ca6c494e38_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a7c173bbbc4904ac12141d3ca6c494e38_cgraph" id="anamespacewriter__field__manager__mod_a7c173bbbc4904ac12141d3ca6c494e38_cgraph">
<area shape="rect" title=" " alt="" coords="5,1010,212,1066"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3" title=" " alt="" coords="260,1010,453,1066"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="501,1010,652,1066"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="3777,1371,3932,1412"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="3773,2604,3936,2645"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="3773,860,3936,901"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a8f899ca545b2a0c0774bb67300ef887e" title="Generates the field value container which is then filled in with appropriate values and added into th..." alt="" coords="723,1010,871,1066"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="3292,478,3447,534"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="700,1089,895,1131"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a7149ce030c6fa05c7789b5e1e10be905" title=" " alt="" coords="948,973,1099,1029"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="3984,1146,4127,1173"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="4175,1139,4341,1180"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="3533,492,3695,533"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="3773,259,3936,300"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="3533,711,3695,752"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="3533,324,3695,365"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="3773,324,3936,365"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478" title="Retrieves a specific field ordering value at the corresponding timestep or null if none is found." alt="" coords="943,1082,1104,1138"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a303133afee5100e6a9b0b19ead391dfa" title="For a specific field wil determine and handle any outstanding fields writes until an outstanding writ..." alt="" coords="1638,1106,1811,1162"/>
<area shape="rect" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9" title="Retrieves the current logging level." alt="" coords="2879,929,3022,971"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9379ee9a358faa87a63d2f2459f202b9" title="Retrieves the index of the next writer which uses a specific field. If none is found then returns fal..." alt="" coords="1653,939,1797,995"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9b04288042049d5e432068c5923b026d" title="Provides fields (either diagnostics or prognostics) to the write federator which will action these as..." alt="" coords="1152,291,1363,347"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a37589f9aced0f51f811ed15c462d33cb" title="Closes the diagnostics file, this is done via a global callback to issue the closes synchronously (co..." alt="" coords="1868,871,2023,912"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a3df9fda1cc189c370e8599947191e559" title="Determines if a file can be written to its overarching write representation. If so then a write is is..." alt="" coords="2687,1171,2831,1227"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9ec7f85e388c7212a8aa98acefc2b9d0" title="Call back for the inter IO reduction which actually does the NetCDF file closing which is a collectiv..." alt="" coords="2071,798,2248,854"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4e6cf3c74ee165c8ece3735913e75e0a" title="Will check whether there are any pending writes and if so will issue a chain write for this." alt="" coords="2296,798,2447,854"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ab6600fa0faed86a8d9f6d22b2903da62" title="Cleans out old timepoints which are no longer going to be of any relavence to the file writing...." alt="" coords="3542,259,3686,300"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9271347f390a41c78caacc174002d0b4" title="Issues the actual file creation, write of available fields and closure if all completed." alt="" coords="2495,871,2639,912"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6c970a34b31a068f500ae6a1235d9906" title="Defines a NetCDF file &#45; which creates it, defines all dimensions and variables. This must be called b..." alt="" coords="3289,828,3449,869"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="3531,1837,3697,1879"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#acb05fbdc64a670792cd9cec7f238951d" title="Retrieves a file state based upon its timestep or null if none is found." alt="" coords="3542,776,3686,817"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="3529,1669,3699,1711"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="3529,1400,3699,1441"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a797c4ff7ba5863cdff2746729ec8e1fc" title="Writes the contents of a variable to the NetCDF file. This also removes the written entries from the ..." alt="" coords="2879,1527,3023,1568"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a10f13979aff7110f8df58356fb4e398d" title="Writes collective variables, where we are working with the values from multiple MONCs and storing the..." alt="" coords="3287,2203,3452,2259"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#abc1e910adcd0ef7c86299b5286fc365f" title="Writes contiguous collective variable blocks into the NetCDF files. These are blocks of data spanning..." alt="" coords="3074,1429,3233,1500"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a605f56b2d81bbaf34377388f9d3f6ec1" title="Writes independent variables to the diagnostics file. This writes the entire variable and works by wr..." alt="" coords="3071,1771,3236,1827"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aacc77c78537724e3eac2bfc2537d9a30" title="Translates a dimension name to its numeric corresponding identifier." alt="" coords="3515,2353,3713,2395"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aff299f33f5701bfddd073cd0a06be5f7" title="Retrieves the original size of a specific dimension (which is auto)" alt="" coords="3503,2419,3725,2460"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a41e86c7b84afdea863ca626a2599bf1d" title="Retrieves the field key, corresponding to the field name in the NetCDF file and what we store against..." alt="" coords="3542,2157,3686,2199"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6da2f8c99dc13a7d24ec60861a2a48aa" title="Given the file state and the output frequency of a field will retrive the appropriate time series dim..." alt="" coords="3516,2222,3712,2278"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aaff250f828a91818f15f82b3838701cf" title="Retrieves the next collective descriptor based upon the iterator." alt="" coords="3284,1365,3455,1421"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aef4805588ccfc47ddd145e9c20e34218" title="Retrieves the next specific monc information item from the iterator." alt="" coords="3289,1445,3449,1501"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="3284,1300,3455,1341"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a527dfbc289976e0eefcc432bb077040e" title=" " alt="" coords="3297,1779,3442,1820"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a646b3fed89978ea8212eece9494f7c54" title=" " alt="" coords="3288,1905,3451,1961"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ad5f57429aef78615f84f59d4f2758747" title="Retrieves the data size for each Q entry of a collective Q field for the specific source MONC that ha..." alt="" coords="1411,305,1581,347"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4d77a55167cf260497e14e1f86a8e54b" title="Provides a single ordered field, i.e. Q fields have been split by this point." alt="" coords="1413,682,1579,738"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#ae5be635b15f2c5670d91275e34c74105" title="A helper function to get the location of a MONC&#39;s configuration in the IO data structure." alt="" coords="1640,305,1809,347"/>
<area shape="rect" href="namespacewriter__federator__mod.html#acac4d8c09e5e6c8566f9548a71339e7b" title="Writes the collective values, this is held differently to independent values which are written direct..." alt="" coords="1629,473,1820,515"/>
</map>
</div>

</div>
</div>
<a id="a61030ab70e43ed5b49c6ca3900d9bfb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61030ab70e43ed5b49c6ca3900d9bfb3">&#9670;&nbsp;</a></span>provide_field_to_writer_federator_rvalues_src()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::provide_field_to_writer_federator_rvalues_src </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), intent(in)&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00221">221</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, frequency, source</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: field_values</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">intent(in)</span> :: time</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">type</span>(data_values_type) :: packaged_data</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">allocate</span>(packaged_data%values(<span class="keyword">size</span>(field_values)))</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    packaged_data%values=field_values</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    packaged_data%data_type=double_data_type</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">call </span>provide_field_to_writer_federator_src(io_configuration, field_name, field_namespace, packaged_data, &amp;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;         timestep, time, frequency, source)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_cgraph" id="anamespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_cgraph">
<area shape="rect" title=" " alt="" coords="5,1178,199,1234"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="247,1178,397,1234"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="3585,1476,3740,1517"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="3581,2662,3744,2704"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="3581,1045,3744,1086"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a8f899ca545b2a0c0774bb67300ef887e" title="Generates the field value container which is then filled in with appropriate values and added into th..." alt="" coords="469,1178,617,1234"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="3100,754,3255,810"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="445,1257,640,1298"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a7149ce030c6fa05c7789b5e1e10be905" title=" " alt="" coords="693,1140,844,1196"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="3792,1567,3935,1594"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="3983,1560,4149,1601"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="3341,805,3503,846"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="3581,469,3744,510"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="3341,870,3503,912"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="3341,637,3503,678"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="3581,637,3744,678"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478" title="Retrieves a specific field ordering value at the corresponding timestep or null if none is found." alt="" coords="688,1250,849,1306"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a303133afee5100e6a9b0b19ead391dfa" title="For a specific field wil determine and handle any outstanding fields writes until an outstanding writ..." alt="" coords="1383,1274,1557,1330"/>
<area shape="rect" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9" title="Retrieves the current logging level." alt="" coords="2687,1122,2830,1164"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9379ee9a358faa87a63d2f2459f202b9" title="Retrieves the index of the next writer which uses a specific field. If none is found then returns fal..." alt="" coords="1398,1107,1542,1163"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9b04288042049d5e432068c5923b026d" title="Provides fields (either diagnostics or prognostics) to the write federator which will action these as..." alt="" coords="897,427,1108,483"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a37589f9aced0f51f811ed15c462d33cb" title="Closes the diagnostics file, this is done via a global callback to issue the closes synchronously (co..." alt="" coords="1613,1033,1768,1074"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a3df9fda1cc189c370e8599947191e559" title="Determines if a file can be written to its overarching write representation. If so then a write is is..." alt="" coords="2463,1339,2607,1395"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9ec7f85e388c7212a8aa98acefc2b9d0" title="Call back for the inter IO reduction which actually does the NetCDF file closing which is a collectiv..." alt="" coords="1816,910,1993,966"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4e6cf3c74ee165c8ece3735913e75e0a" title="Will check whether there are any pending writes and if so will issue a chain write for this." alt="" coords="2041,910,2192,966"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ab6600fa0faed86a8d9f6d22b2903da62" title="Cleans out old timepoints which are no longer going to be of any relavence to the file writing...." alt="" coords="3350,469,3494,510"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9271347f390a41c78caacc174002d0b4" title="Issues the actual file creation, write of available fields and closure if all completed." alt="" coords="2240,981,2384,1022"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6c970a34b31a068f500ae6a1235d9906" title="Defines a NetCDF file &#45; which creates it, defines all dimensions and variables. This must be called b..." alt="" coords="3097,1006,3257,1048"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a472ec41d11538e384f05791c3d6037d7" title="Determines whether it can optimise a specific collective field. If the field fits into certain limite..." alt="" coords="2432,1006,2639,1062"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="3339,1560,3505,1601"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#acb05fbdc64a670792cd9cec7f238951d" title="Retrieves a file state based upon its timestep or null if none is found." alt="" coords="3350,936,3494,977"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="3337,1794,3507,1836"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="3337,1677,3507,1718"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a797c4ff7ba5863cdff2746729ec8e1fc" title="Writes the contents of a variable to the NetCDF file. This also removes the written entries from the ..." alt="" coords="2687,1641,2831,1682"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a10f13979aff7110f8df58356fb4e398d" title="Writes collective variables, where we are working with the values from multiple MONCs and storing the..." alt="" coords="3095,2198,3260,2254"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#abc1e910adcd0ef7c86299b5286fc365f" title="Writes contiguous collective variable blocks into the NetCDF files. These are blocks of data spanning..." alt="" coords="2882,1784,3041,1854"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a605f56b2d81bbaf34377388f9d3f6ec1" title="Writes independent variables to the diagnostics file. This writes the entire variable and works by wr..." alt="" coords="2879,1634,3044,1690"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aacc77c78537724e3eac2bfc2537d9a30" title="Translates a dimension name to its numeric corresponding identifier." alt="" coords="3323,2376,3521,2417"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aff299f33f5701bfddd073cd0a06be5f7" title="Retrieves the original size of a specific dimension (which is auto)" alt="" coords="3311,2310,3533,2352"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a41e86c7b84afdea863ca626a2599bf1d" title="Retrieves the field key, corresponding to the field name in the NetCDF file and what we store against..." alt="" coords="3350,2114,3494,2156"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6da2f8c99dc13a7d24ec60861a2a48aa" title="Given the file state and the output frequency of a field will retrive the appropriate time series dim..." alt="" coords="3324,2179,3520,2235"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aaff250f828a91818f15f82b3838701cf" title="Retrieves the next collective descriptor based upon the iterator." alt="" coords="3092,1987,3263,2043"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aef4805588ccfc47ddd145e9c20e34218" title="Retrieves the next specific monc information item from the iterator." alt="" coords="3097,2067,3257,2123"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="3092,1689,3263,1730"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a527dfbc289976e0eefcc432bb077040e" title=" " alt="" coords="3105,1572,3250,1613"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a646b3fed89978ea8212eece9494f7c54" title=" " alt="" coords="3096,1856,3259,1912"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ad5f57429aef78615f84f59d4f2758747" title="Retrieves the data size for each Q entry of a collective Q field for the specific source MONC that ha..." alt="" coords="1156,424,1327,465"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4d77a55167cf260497e14e1f86a8e54b" title="Provides a single ordered field, i.e. Q fields have been split by this point." alt="" coords="1158,839,1325,895"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#ae5be635b15f2c5670d91275e34c74105" title="A helper function to get the location of a MONC&#39;s configuration in the IO data structure." alt="" coords="1385,402,1555,444"/>
<area shape="rect" href="namespacewriter__federator__mod.html#acac4d8c09e5e6c8566f9548a71339e7b" title="Writes the collective values, this is held differently to independent values which are written direct..." alt="" coords="1375,570,1565,612"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_icgraph" id="anamespacewriter__field__manager__mod_a61030ab70e43ed5b49c6ca3900d9bfb3_icgraph">
<area shape="rect" title=" " alt="" coords="260,5,453,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38" title=" " alt="" coords="5,5,212,61"/>
</map>
</div>

</div>
</div>
<a id="a0edc2294f387e9906c4b106396415b63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0edc2294f387e9906c4b106396415b63">&#9670;&nbsp;</a></span>provide_field_to_writer_federator_src()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::provide_field_to_writer_federator_src </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1data__values__type.html">data_values_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), intent(in)&#160;</td>
          <td class="paramname"><em>time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>frequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in), optional&#160;</td>
          <td class="paramname"><em>terminated_case</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Provides a field to the write federator (a collective diagnostic or prognostic) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The IO server configuration </td></tr>
    <tr><td class="paramname">field_name</td><td>The field name </td></tr>
    <tr><td class="paramname">field_values</td><td>The fields values </td></tr>
    <tr><td class="paramname">timestep</td><td>The corresponding model timestep </td></tr>
    <tr><td class="paramname">time</td><td>Corresponding MONC model time </td></tr>
    <tr><td class="paramname">frequency</td><td>Configured sampling frequency </td></tr>
    <tr><td class="paramname">source</td><td>The MONC source ID </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00277">277</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, frequency, source</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">type</span>(data_values_type), <span class="keywordtype">intent(inout)</span> :: field_values</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">intent(in)</span> :: time</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span> :: terminated_case</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">type</span>(field_ordering_type), <span class="keywordtype">pointer</span> :: field_ordering</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">logical</span> :: this_is_termination</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(terminated_case)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      this_is_termination=terminated_case</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      this_is_termination=.false.</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    field_ordering=&gt;get_or_add_field_ordering(field_name, field_namespace, frequency, source)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(field_ordering%access_mutex))</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordflow">if</span> (timestep == field_ordering%last_timestep_access + frequency .or. this_is_termination) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">if</span> (.not. this_is_termination) field_ordering%last_timestep_access=timestep</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <span class="keyword">call </span>provide_ordered_field_to_writer_federator(io_configuration, field_name, field_namespace, &amp;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;           field_values, timestep, time, source)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(field_values%values)) <span class="keyword">deallocate</span>(field_values%values)      </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      generic=&gt;generate_value_container(field_name, field_namespace, field_values, timestep, time, frequency, source)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keyword">call </span>c_put_generic(field_ordering%timestep_to_value, conv_to_string(timestep), generic, .false.)</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">call </span>process_queued_items(io_configuration, field_ordering)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(field_ordering%access_mutex))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_cgraph" id="anamespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_cgraph">
<area shape="rect" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="5,2356,156,2412"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="3344,2297,3499,2338"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="3340,1569,3503,1610"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="3340,477,3503,518"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a8f899ca545b2a0c0774bb67300ef887e" title="Generates the field value container which is then filled in with appropriate values and added into th..." alt="" coords="227,2843,375,2899"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="2859,2691,3013,2747"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="204,2288,399,2329"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a7149ce030c6fa05c7789b5e1e10be905" title=" " alt="" coords="452,1959,603,2015"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="3551,1178,3693,1204"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="3741,1170,3908,1212"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="3099,2692,3262,2733"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="3340,2916,3503,2957"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="3099,2574,3262,2616"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="3100,2809,3261,2850"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="3340,2848,3503,2889"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478" title="Retrieves a specific field ordering value at the corresponding timestep or null if none is found." alt="" coords="447,2280,608,2336"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a303133afee5100e6a9b0b19ead391dfa" title="For a specific field wil determine and handle any outstanding fields writes until an outstanding writ..." alt="" coords="1142,1820,1315,1876"/>
<area shape="rect" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9" title="Retrieves the current logging level." alt="" coords="2446,2032,2589,2073"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9379ee9a358faa87a63d2f2459f202b9" title="Retrieves the index of the next writer which uses a specific field. If none is found then returns fal..." alt="" coords="1157,2190,1301,2246"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9b04288042049d5e432068c5923b026d" title="Provides fields (either diagnostics or prognostics) to the write federator which will action these as..." alt="" coords="656,160,867,216"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a37589f9aced0f51f811ed15c462d33cb" title="Closes the diagnostics file, this is done via a global callback to issue the closes synchronously (co..." alt="" coords="1372,2089,1527,2130"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a3df9fda1cc189c370e8599947191e559" title="Determines if a file can be written to its overarching write representation. If so then a write is is..." alt="" coords="2222,1856,2366,1912"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9ec7f85e388c7212a8aa98acefc2b9d0" title="Call back for the inter IO reduction which actually does the NetCDF file closing which is a collectiv..." alt="" coords="1575,2139,1752,2195"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4e6cf3c74ee165c8ece3735913e75e0a" title="Will check whether there are any pending writes and if so will issue a chain write for this." alt="" coords="1800,2190,1951,2246"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ab6600fa0faed86a8d9f6d22b2903da62" title="Cleans out old timepoints which are no longer going to be of any relavence to the file writing...." alt="" coords="3109,2953,3253,2994"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9271347f390a41c78caacc174002d0b4" title="Issues the actual file creation, write of available fields and closure if all completed." alt="" coords="1999,2161,2143,2202"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6c970a34b31a068f500ae6a1235d9906" title="Defines a NetCDF file &#45; which creates it, defines all dimensions and variables. This must be called b..." alt="" coords="2856,2102,3016,2144"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a472ec41d11538e384f05791c3d6037d7" title="Determines whether it can optimise a specific collective field. If the field fits into certain limite..." alt="" coords="2191,2088,2397,2144"/>
<area shape="rect" href="namespacewriter__federator__mod.html#af717d0c9b90eb4744fe7bec75086e25d" title="Extracts the applicable time points from the overall map that lie within a specific range." alt="" coords="3109,2874,3253,2930"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="3097,1229,3264,1270"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#acb05fbdc64a670792cd9cec7f238951d" title="Retrieves a file state based upon its timestep or null if none is found." alt="" coords="3109,2356,3253,2397"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="3095,1630,3266,1672"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="3095,1565,3266,1606"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a797c4ff7ba5863cdff2746729ec8e1fc" title="Writes the contents of a variable to the NetCDF file. This also removes the written entries from the ..." alt="" coords="2445,1538,2589,1580"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a10f13979aff7110f8df58356fb4e398d" title="Writes collective variables, where we are working with the values from multiple MONCs and storing the..." alt="" coords="2853,1011,3019,1067"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#abc1e910adcd0ef7c86299b5286fc365f" title="Writes contiguous collective variable blocks into the NetCDF files. These are blocks of data spanning..." alt="" coords="2641,1524,2799,1594"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a605f56b2d81bbaf34377388f9d3f6ec1" title="Writes independent variables to the diagnostics file. This writes the entire variable and works by wr..." alt="" coords="2637,1346,2803,1402"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aacc77c78537724e3eac2bfc2537d9a30" title="Translates a dimension name to its numeric corresponding identifier." alt="" coords="3081,814,3280,856"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aff299f33f5701bfddd073cd0a06be5f7" title="Retrieves the original size of a specific dimension (which is auto)" alt="" coords="3069,880,3292,921"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a41e86c7b84afdea863ca626a2599bf1d" title="Retrieves the field key, corresponding to the field name in the NetCDF file and what we store against..." alt="" coords="3109,1448,3253,1489"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a6da2f8c99dc13a7d24ec60861a2a48aa" title="Given the file state and the output frequency of a field will retrive the appropriate time series dim..." alt="" coords="3083,1047,3279,1103"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aaff250f828a91818f15f82b3838701cf" title="Retrieves the next collective descriptor based upon the iterator." alt="" coords="2851,1418,3021,1474"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#aef4805588ccfc47ddd145e9c20e34218" title="Retrieves the next specific monc information item from the iterator." alt="" coords="2856,1498,3016,1554"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="2851,1629,3021,1670"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a527dfbc289976e0eefcc432bb077040e" title=" " alt="" coords="2863,1353,3009,1394"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a646b3fed89978ea8212eece9494f7c54" title=" " alt="" coords="2855,1222,3017,1278"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ad5f57429aef78615f84f59d4f2758747" title="Retrieves the data size for each Q entry of a collective Q field for the specific source MONC that ha..." alt="" coords="915,168,1085,209"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4d77a55167cf260497e14e1f86a8e54b" title="Provides a single ordered field, i.e. Q fields have been split by this point." alt="" coords="917,455,1083,511"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#ae5be635b15f2c5670d91275e34c74105" title="A helper function to get the location of a MONC&#39;s configuration in the IO data structure." alt="" coords="1144,168,1313,209"/>
<area shape="rect" href="namespacewriter__federator__mod.html#acac4d8c09e5e6c8566f9548a71339e7b" title="Writes the collective values, this is held differently to independent values which are written direct..." alt="" coords="1133,418,1324,460"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_icgraph" id="anamespacewriter__field__manager__mod_a0edc2294f387e9906c4b106396415b63_icgraph">
<area shape="rect" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="1305,85,1456,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae55118a13d09d6d75229e0cc6f748e31" title="Provides a field to the write federator with no source (a none collective diagnostic)" alt="" coords="1081,5,1240,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a61030ab70e43ed5b49c6ca3900d9bfb3" title=" " alt="" coords="1064,85,1257,141"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acfd94b193f4f73b22d6a48314f7fd2e0" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1074,165,1247,221"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a7c173bbbc4904ac12141d3ca6c494e38" title=" " alt="" coords="809,85,1016,141"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="837,173,988,214"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,165,761,221"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,173,536,214"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,180,337,207"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,180,99,207"/>
</map>
</div>

</div>
</div>
<a id="acfd94b193f4f73b22d6a48314f7fd2e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfd94b193f4f73b22d6a48314f7fd2e0">&#9670;&nbsp;</a></span>provide_monc_data_to_writer_federator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public writer_field_manager_mod::provide_monc_data_to_writer_federator </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>data_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(in), allocatable&#160;</td>
          <td class="paramname"><em>data_dump</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Data communicated from MONC is provided to this write federator and then included if the configuration has selected to use that MONC field (as opposed to a field produced by the diagnostics federator) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration of the IO server </td></tr>
    <tr><td class="paramname">source</td><td>The source PID of the MONC process </td></tr>
    <tr><td class="paramname">data_id</td><td>The ID of the data definition that is represented by the dump </td></tr>
    <tr><td class="paramname">data_dump</td><td>The data we have received from MONC </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00109">109</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: source, data_id</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(in)</span> :: data_dump</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160; </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">integer</span> :: i, num_fields, timestep</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: field_name, field_namespace</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>) :: time</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">type</span>(data_values_type) :: monc_value</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keywordtype">logical</span> :: terminated_case</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">if</span> (is_field_present(io_configuration, source, data_id, <span class="stringliteral">&quot;timestep&quot;</span>) .and. &amp;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;         is_field_present(io_configuration, source, data_id, <span class="stringliteral">&quot;time&quot;</span>)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      timestep=get_scalar_integer_from_monc(io_configuration, source, data_id, data_dump, <span class="stringliteral">&quot;timestep&quot;</span>)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      time=get_scalar_real_from_monc(io_configuration, source, data_id, data_dump, <span class="stringliteral">&quot;time&quot;</span>)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">if</span> (is_field_present(io_configuration, source, data_id, <span class="stringliteral">&quot;terminated&quot;</span>)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        terminated_case=get_scalar_logical_from_monc(io_configuration, source, data_id, data_dump, <span class="stringliteral">&quot;terminated&quot;</span>) .and. &amp;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;             io_configuration%data_definitions(data_id)%send_on_terminate</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        terminated_case=.false.</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      num_fields=io_configuration%data_definitions(data_id)%number_of_data_fields</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">do</span> i=1, num_fields</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        field_name=io_configuration%data_definitions(data_id)%fields(i)%name</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        field_namespace=io_configuration%data_definitions(data_id)%fields(i)%namespace</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keywordflow">if</span> (is_field_present(io_configuration, source, data_id, field_name) .and. &amp;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;             (is_field_used_by_writer_federator(field_name, field_namespace) .or. is_field_split_on_q(field_name))) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          monc_value=get_value_from_monc_data(io_configuration, source, data_id, data_dump, field_name, field_namespace)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          <span class="keyword">call </span>provide_field_to_writer_federator_src(io_configuration, field_name, field_namespace, monc_value, timestep, time, &amp;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;               io_configuration%data_definitions(data_id)%frequency, source, terminated_case)</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;          <span class="comment">!deallocate(monc_value)</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">log_warn</a>, <span class="stringliteral">&quot;Can not run pass MONC fields to writer federator without a time and timestep&quot;</span>)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_cgraph" id="anamespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_cgraph">
<area shape="rect" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="5,565,179,621"/>
<area shape="rect" href="namespacedata__utils__mod.html#a56c7a3c668c3abef4e4d43fea2f73b5b" title="Retrieves a single integer element (scalar) from the data dump." alt="" coords="227,29,409,71"/>
<area shape="rect" href="namespacedata__utils__mod.html#a29da67d2bfdfc17765e1105f9295c6be" title="Retrieves a single logical element (scalar) from the data dump." alt="" coords="228,119,408,160"/>
<area shape="rect" href="namespacedata__utils__mod.html#ae97bbc021128cf42a987facc1c1e7fee" title="Retreives a scalar real with a corresponding key from the raw data dump." alt="" coords="236,231,400,272"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#af479a611799a55972a738e3da695f0fe" title="Retrieves a value from the communicated MONC data. If this was an integer then converts to a real." alt="" coords="243,390,393,446"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="2480,774,2623,801"/>
<area shape="rect" href="namespacedata__utils__mod.html#ac64f12e860548e106a50f9be09a7bcb8" title=" " alt="" coords="255,1339,381,1380"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ac6aefade0899178fd2ba9c7c723af5d1" title="Determines whether a field is split on Q or not." alt="" coords="246,1404,390,1445"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ab10af49e026b9e11d113f702bb7f3113" title="Determines whether a field is used by the writer federator or not." alt="" coords="939,1558,1101,1614"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a0edc2294f387e9906c4b106396415b63" title="Provides a field to the write federator (a collective diagnostic or prognostic)" alt="" coords="243,1259,393,1315"/>
<area shape="rect" href="namespacedata__utils__mod.html#ab248d898201d14574800dd321c8a5dde" title="Retrieves a single integer element (scalar) from the data dump." alt="" coords="487,5,622,47"/>
<area shape="rect" href="namespacedata__utils__mod.html#a07f32dc1887f01ab3b818c89dd5e34f7" title="Retrieves a single logical element (scalar) from the data dump." alt="" coords="487,71,622,112"/>
<area shape="rect" href="namespacedata__utils__mod.html#a15c2c4edba1f23d89fd83d173b54774d" title="Retreives a scalar real with a corresponding key from the raw data dump." alt="" coords="487,136,622,177"/>
<area shape="rect" href="namespacedata__utils__mod.html#ae3451c3a141c979be42ec6dc9dfd3010" title="Retreives an array of doubles with a corresponding key from the raw data dump. The size depends on th..." alt="" coords="467,201,642,243"/>
<area shape="rect" href="namespacedata__utils__mod.html#a510d6d68bd7f6fc1ba42ea1f03a0640a" title="Retreives an array of integers with a corresponding key from the raw data dump. The size depends on t..." alt="" coords="467,267,642,308"/>
<area shape="rect" href="namespacedata__utils__mod.html#a4eb3b2f8d1d8a9eb123debc18da81a98" title="Retrieves a map data structure with key&#45;&gt;value pairs, each of which are strings." alt="" coords="487,332,622,373"/>
<area shape="rect" href="namespacedata__utils__mod.html#ababcb4786126b96a6badf8857e831e40" title="Retrieves a string from the data dump." alt="" coords="487,397,622,439"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae8624dc61ca0e9b620128a64a7e43582" title="Retrieves the data type of a field or 0 if the field was not found." alt="" coords="476,463,633,504"/>
<area shape="rect" href="namespacedata__utils__mod.html#ae2655fd2a18fe02aba0b3eb90cd8198f" title="Retreives an array of doubles with a corresponding key from the raw data dump. The size depends on th..." alt="" coords="716,201,851,243"/>
<area shape="rect" href="namespacedata__utils__mod.html#ae11f9a29502ddd6ee34686a99e43ebdd" title="Retreives an array of integers with a corresponding key from the raw data dump. The size depends on t..." alt="" coords="716,267,851,308"/>
<area shape="rect" href="namespacedata__utils__mod.html#af8e53b2d1fcadf6b273699a0ddf21395" title="Retrieves a map data structure with key&#45;&gt;value pairs, each of which are strings." alt="" coords="700,339,867,366"/>
<area shape="rect" href="namespacedata__utils__mod.html#ab376cafca515260cc68a7b1f1502641d" title="Retrieves a string from the data dump." alt="" coords="716,397,851,439"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="2671,767,2837,808"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9379ee9a358faa87a63d2f2459f202b9" title="Retrieves the index of the next writer which uses a specific field. If none is found then returns fal..." alt="" coords="1415,1457,1559,1513"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="2273,1580,2428,1621"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="1841,1479,2003,1520"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="1841,917,2003,959"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a8f899ca545b2a0c0774bb67300ef887e" title="Generates the field value container which is then filled in with appropriate values and added into th..." alt="" coords="481,1609,629,1665"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ad49beb9dd156cfcd8d5c7d5d6d7a1132" title="Retrieves or adds ordering for a specific field (and MONC source)" alt="" coords="1845,1831,1999,1887"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#abdd6a0f59e9d20b22f8dad6922d86998" title="Processes queued up items for a specific field&#39;s ordering. This will send any available fields to the..." alt="" coords="457,1136,652,1177"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a7149ce030c6fa05c7789b5e1e10be905" title=" " alt="" coords="708,1049,859,1105"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="2059,1871,2221,1912"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="2269,1805,2432,1847"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="2059,1936,2221,1977"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aac1622fb73e8ded7d3fcb54b7a5b1d1f" title="Retrieves a field ordering based upon the name or null if none can be found." alt="" coords="2059,1805,2221,1847"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="2269,1740,2432,1781"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#acebb301dcdc31bd2df054fc507d95478" title="Retrieves a specific field ordering value at the corresponding timestep or null if none is found." alt="" coords="703,1129,864,1185"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a303133afee5100e6a9b0b19ead391dfa" title="For a specific field wil determine and handle any outstanding fields writes until an outstanding writ..." alt="" coords="1401,1167,1574,1223"/>
<area shape="rect" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9" title="Retrieves the current logging level." alt="" coords="1851,983,1993,1024"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9b04288042049d5e432068c5923b026d" title="Provides fields (either diagnostics or prognostics) to the write federator which will action these as..." alt="" coords="915,870,1125,926"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a37589f9aced0f51f811ed15c462d33cb" title="Closes the diagnostics file, this is done via a global callback to issue the closes synchronously (co..." alt="" coords="1631,1369,1785,1411"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a3df9fda1cc189c370e8599947191e559" title="Determines if a file can be written to its overarching write representation. If so then a write is is..." alt="" coords="1636,1137,1780,1193"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a9ec7f85e388c7212a8aa98acefc2b9d0" title="Call back for the inter IO reduction which actually does the NetCDF file closing which is a collectiv..." alt="" coords="1833,1385,2011,1441"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4e6cf3c74ee165c8ece3735913e75e0a" title="Will check whether there are any pending writes and if so will issue a chain write for this." alt="" coords="2065,1385,2215,1441"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ab6600fa0faed86a8d9f6d22b2903da62" title="Cleans out old timepoints which are no longer going to be of any relavence to the file writing...." alt="" coords="2068,1740,2212,1781"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#a797c4ff7ba5863cdff2746729ec8e1fc" title="Writes the contents of a variable to the NetCDF file. This also removes the written entries from the ..." alt="" coords="1850,1100,1994,1141"/>
<area shape="rect" href="namespacewriter__federator__mod.html#ad5f57429aef78615f84f59d4f2758747" title="Retrieves the data size for each Q entry of a collective Q field for the specific source MONC that ha..." alt="" coords="1173,884,1344,925"/>
<area shape="rect" href="namespacewriter__federator__mod.html#a4d77a55167cf260497e14e1f86a8e54b" title="Provides a single ordered field, i.e. Q fields have been split by this point." alt="" coords="1175,1095,1342,1151"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#ae5be635b15f2c5670d91275e34c74105" title="A helper function to get the location of a MONC&#39;s configuration in the IO data structure." alt="" coords="1403,833,1572,875"/>
<area shape="rect" href="namespacewriter__federator__mod.html#acac4d8c09e5e6c8566f9548a71339e7b" title="Writes the collective values, this is held differently to independent values which are written direct..." alt="" coords="1392,1103,1583,1144"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_icgraph" id="anamespacewriter__field__manager__mod_acfd94b193f4f73b22d6a48314f7fd2e0_icgraph">
<area shape="rect" title="Data communicated from MONC is provided to this write federator and then included if the configuratio..." alt="" coords="1008,5,1181,61"/>
<area shape="rect" href="namespaceio__server__mod.html#a96c2285d5c9b5badb426a0e065abdf4a" title="Handles the command for data download from a specific process. This will allocate the receive buffer ..." alt="" coords="809,13,960,54"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="584,5,761,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="385,13,536,54"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="a31bcf976f2e1d1219d3ae96bbe259eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31bcf976f2e1d1219d3ae96bbe259eaf">&#9670;&nbsp;</a></span>serialise_field_manager_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::serialise_field_manager_state </td>
          <td>(</td>
          <td class="paramtype">character, dimension(:), intent(inout), allocatable&#160;</td>
          <td class="paramname"><em>byte_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serialises the current field manager, releases any locks issued during preparation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">byte_data</td><td>Packaged field manager serialised state. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00478">478</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span> :: byte_data</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordtype">integer</span> :: current_data_point, prev_pt</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: map_entry</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    current_data_point=1</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, c_size(field_orderings))</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160; </div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    iterator=c_get_iterator(field_orderings)</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      map_entry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      generic=&gt;c_get_generic(map_entry)</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="keywordflow">        type is</span> (field_ordering_type)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;          current_data_point=pack_scalar_field(byte_data, current_data_point, len(trim(map_entry%key)))</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;          byte_data(current_data_point:current_data_point+len(trim(map_entry%key))-1) = transfer(trim(map_entry%key), &amp;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;               byte_data(current_data_point:current_data_point+len(trim(map_entry%key))-1))</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;          current_data_point=current_data_point+len(trim(map_entry%key))</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;          prev_pt=current_data_point</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;          current_data_point=current_data_point+kind(current_data_point)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;          <span class="keyword">call </span>serialise_specific_field_ordering(generic, byte_data, current_data_point)          </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;          prev_pt=pack_scalar_field(byte_data, prev_pt, (current_data_point-kind(current_data_point))-prev_pt)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="keywordflow">        end select</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="keywordflow">    end do</span>    </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    </div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(field_lock))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_cgraph" id="anamespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_cgraph">
<area shape="rect" title="Serialises the current field manager, releases any locks issued during preparation." alt="" coords="5,103,147,159"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="409,5,564,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="195,75,357,116"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="633,208,778,249"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a1e92286d1da4eaa895b726ea9ad7e737" title="Serialises a specific fields ordering and releases any locks issued during preparation." alt="" coords="197,139,355,195"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="634,13,777,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="849,5,1015,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="405,149,568,191"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae17821d78ad07337100dd83424da5c46" title="Serialises a field ordering value and releases any issued locks." alt="" coords="416,70,557,126"/>
<area shape="rect" href="namespacewriter__types__mod.html#ab5bd556b7aece3ad191a87331c70663d" title="Serialises some data values to store or transmit. This releases any locks issued during preparation." alt="" coords="616,77,795,119"/>
<area shape="rect" href="namespacewriter__types__mod.html#a427401c0dfd6265375770ccf333f1675" title="Serialises a string map, where the values are assumed to be strings. This releases any locks issued d..." alt="" coords="843,77,1021,119"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_icgraph" id="anamespacewriter__field__manager__mod_a31bcf976f2e1d1219d3ae96bbe259eaf_icgraph">
<area shape="rect" title="Serialises the current field manager, releases any locks issued during preparation." alt="" coords="580,5,721,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="ae17821d78ad07337100dd83424da5c46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae17821d78ad07337100dd83424da5c46">&#9670;&nbsp;</a></span>serialise_field_ordering_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::serialise_field_ordering_value </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>specific_field_value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout), allocatable&#160;</td>
          <td class="paramname"><em>byte_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>current_data_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serialises a field ordering value and releases any issued locks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specific_field_value</td><td>The specific value to serialise </td></tr>
    <tr><td class="paramname">byte_data</td><td>Target byte data whihc is allocated here </td></tr>
    <tr><td class="paramname">current_data_point</td><td>The current write point in the byte data, is updated during call so represents next point on return </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00657">657</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordtype">type</span>(field_ordering_value_type), <span class="keywordtype">intent(inout)</span> :: specific_field_value</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span> :: byte_data</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(inout)</span> :: current_data_point</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordtype">integer</span> :: prev_pt    </div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, specific_field_value%timestep)</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, specific_field_value%frequency)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, specific_field_value%source)</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, len(trim(specific_field_value%field_name)))</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    byte_data(current_data_point:current_data_point+len(trim(specific_field_value%field_name))-1) = &amp;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         transfer(trim(specific_field_value%field_name), byte_data(current_data_point:current_data_point+&amp;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         len(trim(specific_field_value%field_name))-1))</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    current_data_point=current_data_point+len(trim(specific_field_value%field_name))</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, len(trim(specific_field_value%field_namespace)))</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    byte_data(current_data_point:current_data_point+len(trim(specific_field_value%field_namespace))-1) = &amp;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;         transfer(trim(specific_field_value%field_namespace), byte_data(current_data_point:current_data_point+&amp;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         len(trim(specific_field_value%field_namespace))-1))</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    current_data_point=current_data_point+len(trim(specific_field_value%field_namespace))</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, double_real_value=specific_field_value%time)</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160; </div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    prev_pt=current_data_point</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    current_data_point=current_data_point+kind(current_data_point)</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keyword">call </span>serialise_data_values_type(specific_field_value%field_values, byte_data, current_data_point)    </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    prev_pt=pack_scalar_field(byte_data, prev_pt, (current_data_point-kind(current_data_point))-prev_pt)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_cgraph" id="anamespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_cgraph">
<area shape="rect" title="Serialises a field ordering value and releases any issued locks." alt="" coords="5,31,147,87"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="211,5,357,47"/>
<area shape="rect" href="namespacewriter__types__mod.html#ab5bd556b7aece3ad191a87331c70663d" title="Serialises some data values to store or transmit. This releases any locks issued during preparation." alt="" coords="195,71,373,112"/>
<area shape="rect" href="namespacewriter__types__mod.html#a427401c0dfd6265375770ccf333f1675" title="Serialises a string map, where the values are assumed to be strings. This releases any locks issued d..." alt="" coords="421,71,600,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_icgraph" id="anamespacewriter__field__manager__mod_ae17821d78ad07337100dd83424da5c46_icgraph">
<area shape="rect" title="Serialises a field ordering value and releases any issued locks." alt="" coords="976,5,1117,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a1e92286d1da4eaa895b726ea9ad7e737" title="Serialises a specific fields ordering and releases any locks issued during preparation." alt="" coords="769,5,928,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a31bcf976f2e1d1219d3ae96bbe259eaf" title="Serialises the current field manager, releases any locks issued during preparation." alt="" coords="580,5,721,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="a1e92286d1da4eaa895b726ea9ad7e737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e92286d1da4eaa895b726ea9ad7e737">&#9670;&nbsp;</a></span>serialise_specific_field_ordering()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::serialise_specific_field_ordering </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>specific_field_ordering</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout), allocatable&#160;</td>
          <td class="paramname"><em>byte_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout)&#160;</td>
          <td class="paramname"><em>current_data_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serialises a specific fields ordering and releases any locks issued during preparation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specific_field_ordering</td><td>The field ordering to serialise </td></tr>
    <tr><td class="paramname">byte_data</td><td>Byte data which contains the packaged state of the field ordering </td></tr>
    <tr><td class="paramname">current_data_point</td><td>The current write point in the byte data, is updated during call so represents next point on return </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00571">571</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordtype">type</span>(field_ordering_type), <span class="keywordtype">intent(inout)</span> :: specific_field_ordering</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span> :: byte_data</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(inout)</span> :: current_data_point</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160; </div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    <span class="keywordtype">integer</span> :: prev_pt</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: map_entry</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, specific_field_ordering%last_timestep_access)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, specific_field_ordering%frequency)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, c_size(specific_field_ordering%timestep_to_value))</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160; </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    iterator=c_get_iterator(specific_field_ordering%timestep_to_value)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      map_entry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      generic=&gt;c_get_generic(map_entry)</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="keywordflow">        type is</span> (field_ordering_value_type)</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;          current_data_point=pack_scalar_field(byte_data, current_data_point, len(trim(map_entry%key)))</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;          byte_data(current_data_point:current_data_point+len(trim(map_entry%key))-1) = transfer(trim(map_entry%key), &amp;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;               byte_data(current_data_point:current_data_point+len(trim(map_entry%key))-1))</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          current_data_point=current_data_point+len(trim(map_entry%key))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160; </div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;          prev_pt=current_data_point</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;          current_data_point=current_data_point+kind(current_data_point)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;          <span class="keyword">call </span>serialise_field_ordering_value(generic, byte_data, current_data_point)          </div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;          prev_pt=pack_scalar_field(byte_data, prev_pt, (current_data_point-kind(current_data_point))-prev_pt)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="keywordflow">        end select</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    </div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(specific_field_ordering%access_mutex))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_cgraph" id="anamespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_cgraph">
<area shape="rect" title="Serialises a specific fields ordering and releases any locks issued during preparation." alt="" coords="5,93,164,149"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="216,5,371,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="212,71,375,112"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="439,129,585,171"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#ae17821d78ad07337100dd83424da5c46" title="Serialises a field ordering value and releases any issued locks." alt="" coords="223,187,364,243"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="441,13,583,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="655,5,822,47"/>
<area shape="rect" href="namespacewriter__types__mod.html#ab5bd556b7aece3ad191a87331c70663d" title="Serialises some data values to store or transmit. This releases any locks issued during preparation." alt="" coords="423,195,601,236"/>
<area shape="rect" href="namespacewriter__types__mod.html#a427401c0dfd6265375770ccf333f1675" title="Serialises a string map, where the values are assumed to be strings. This releases any locks issued d..." alt="" coords="649,195,828,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_icgraph" id="anamespacewriter__field__manager__mod_a1e92286d1da4eaa895b726ea9ad7e737_icgraph">
<area shape="rect" title="Serialises a specific fields ordering and releases any locks issued during preparation." alt="" coords="769,5,928,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a31bcf976f2e1d1219d3ae96bbe259eaf" title="Serialises the current field manager, releases any locks issued during preparation." alt="" coords="580,5,721,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="a5f881e178ecfba1f19867dfd796506ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f881e178ecfba1f19867dfd796506ae">&#9670;&nbsp;</a></span>unserialise_field_manager_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine writer_field_manager_mod::unserialise_field_manager_state </td>
          <td>(</td>
          <td class="paramtype">character, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>byte_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unserialses from some byte data into the state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">byte_data</td><td>Serialised byte data to inflate and initialise from </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00514">514</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: byte_data</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <span class="keywordtype">integer</span> :: current_data_point, number_of_entries, i, byte_size, key_size</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: value_key</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160; </div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    current_data_point=1</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    number_of_entries=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    <span class="keywordflow">if</span> (number_of_entries .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="keywordflow">do</span> i=1, number_of_entries</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        key_size=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        value_key=transfer(byte_data(current_data_point:current_data_point+key_size-1), value_key)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        value_key(key_size+1:)=<span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        current_data_point=current_data_point+key_size</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        byte_size=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)        </div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        generic=&gt;unserialise_specific_field_ordering(byte_data(current_data_point:current_data_point+byte_size-1))</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        <span class="keyword">call </span>c_put_generic(field_orderings, value_key, generic, .false.)</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        current_data_point=current_data_point+byte_size</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_cgraph" id="anamespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_cgraph">
<area shape="rect" title="Unserialses from some byte data into the state." alt="" coords="5,31,157,87"/>
<area shape="rect" href="namespacedata__utils__mod.html#ab3602147fea5dd8f50911c7f4c93ff76" title="Unpacks a scalar integer from some byte data, this is a very simple unpack routine wrapping the trans..." alt="" coords="639,5,838,47"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a3280f532aae1d9f5cfb11374e052ecdb" title="Unserialises some field ordering." alt="" coords="205,89,379,145"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="431,168,585,209"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="427,233,589,275"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aaf58f8343222912d3c6872c8bca40bad" title="Unseralises some field ordering from its byte representation." alt="" coords="432,89,584,145"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="667,202,810,229"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="901,195,1067,236"/>
<area shape="rect" href="namespacedata__utils__mod.html#a3b50dff5f8dae4a3bc361d1dce5f7711" title="Unpacks a double precision scalar real from some byte data, this is a very simple unpack routine wrap..." alt="" coords="637,136,840,177"/>
<area shape="rect" href="namespacewriter__types__mod.html#a536a4c1352bbc1d7a21aedec40ba4f8e" title="Unserialises some byte data into data values." alt="" coords="643,71,835,112"/>
<area shape="rect" href="namespacewriter__types__mod.html#a0c1e3ad6ff464304020f0be57e7e7df0" title="Inflates some byte data into a string map." alt="" coords="888,71,1080,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_icgraph" id="anamespacewriter__field__manager__mod_a5f881e178ecfba1f19867dfd796506ae_icgraph">
<area shape="rect" title="Unserialses from some byte data into the state." alt="" coords="580,5,732,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="aaf58f8343222912d3c6872c8bca40bad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf58f8343222912d3c6872c8bca40bad">&#9670;&nbsp;</a></span>unserialise_field_ordering_value()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__value__type.html">field_ordering_value_type</a>) function, pointer writer_field_manager_mod::unserialise_field_ordering_value </td>
          <td>(</td>
          <td class="paramtype">character, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>byte_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unseralises some field ordering from its byte representation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">byte_data</td><td>The serialised representation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding initialised and completed ordering value </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00688">688</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: byte_data</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordtype">type</span>(field_ordering_value_type), <span class="keywordtype">pointer</span> :: unserialise_field_ordering_value</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160; </div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="keywordtype">integer</span> :: current_data_point, byte_size, str_size</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160; </div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keyword">allocate</span>(unserialise_field_ordering_value)</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    current_data_point=1</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    unserialise_field_ordering_value%timestep=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    unserialise_field_ordering_value%frequency=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    unserialise_field_ordering_value%source=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    str_size=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    unserialise_field_ordering_value%field_name=transfer(byte_data(current_data_point:current_data_point+str_size-1), &amp;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;         unserialise_field_ordering_value%field_name)</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    unserialise_field_ordering_value%field_name(str_size+1:)=<span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    current_data_point=current_data_point+str_size</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    str_size=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    unserialise_field_ordering_value%field_namespace=transfer(byte_data(current_data_point:current_data_point+str_size-1), &amp;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;         unserialise_field_ordering_value%field_namespace)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    unserialise_field_ordering_value%field_namespace(str_size+1:)=<span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    current_data_point=current_data_point+str_size</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    unserialise_field_ordering_value%time=unpack_scalar_dp_real_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    byte_size=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)        </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    unserialise_field_ordering_value%field_values=unserialise_data_values_type(byte_data(current_data_point:&amp;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;         current_data_point+byte_size-1))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_cgraph" id="anamespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_cgraph">
<area shape="rect" title="Unseralises some field ordering from its byte representation." alt="" coords="5,63,157,119"/>
<area shape="rect" href="namespacedata__utils__mod.html#a3b50dff5f8dae4a3bc361d1dce5f7711" title="Unpacks a double precision scalar real from some byte data, this is a very simple unpack routine wrap..." alt="" coords="205,5,408,47"/>
<area shape="rect" href="namespacedata__utils__mod.html#ab3602147fea5dd8f50911c7f4c93ff76" title="Unpacks a scalar integer from some byte data, this is a very simple unpack routine wrapping the trans..." alt="" coords="207,71,406,112"/>
<area shape="rect" href="namespacewriter__types__mod.html#a536a4c1352bbc1d7a21aedec40ba4f8e" title="Unserialises some byte data into data values." alt="" coords="211,136,403,177"/>
<area shape="rect" href="namespacewriter__types__mod.html#a0c1e3ad6ff464304020f0be57e7e7df0" title="Inflates some byte data into a string map." alt="" coords="456,136,648,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_icgraph" id="anamespacewriter__field__manager__mod_aaf58f8343222912d3c6872c8bca40bad_icgraph">
<area shape="rect" title="Unseralises some field ordering from its byte representation." alt="" coords="1001,5,1153,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a3280f532aae1d9f5cfb11374e052ecdb" title="Unserialises some field ordering." alt="" coords="780,5,953,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a5f881e178ecfba1f19867dfd796506ae" title="Unserialses from some byte data into the state." alt="" coords="580,5,732,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<a id="a3280f532aae1d9f5cfb11374e052ecdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3280f532aae1d9f5cfb11374e052ecdb">&#9670;&nbsp;</a></span>unserialise_specific_field_ordering()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structwriter__field__manager__mod_1_1field__ordering__type.html">field_ordering_type</a>) function, pointer writer_field_manager_mod::unserialise_specific_field_ordering </td>
          <td>(</td>
          <td class="paramtype">character, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>byte_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unserialises some field ordering. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">byte_data</td><td>The serialised representation which we work from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The initialised field ordering represented by the provided byte data </dd></dl>

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00611">611</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: byte_data</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keywordtype">type</span>(field_ordering_type), <span class="keywordtype">pointer</span> :: unserialise_specific_field_ordering</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160; </div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keywordtype">integer</span> :: current_data_point, number_of_values, byte_size, i, key_size</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: value_key</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keyword">allocate</span>(unserialise_specific_field_ordering)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    </div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    current_data_point=1</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    unserialise_specific_field_ordering%last_timestep_access=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    unserialise_specific_field_ordering%frequency=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    number_of_values=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160; </div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    <span class="keywordflow">if</span> (number_of_values .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">do</span> i=1, number_of_values</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        key_size=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        value_key=transfer(byte_data(current_data_point:current_data_point+key_size-1), value_key)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        value_key(key_size+1:)=<span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        current_data_point=current_data_point+key_size</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;        byte_size=unpack_scalar_integer_from_bytedata(byte_data, current_data_point)</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;        generic=&gt;unserialise_field_ordering_value(byte_data(current_data_point:current_data_point+byte_size-1))</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keyword">call </span>c_put_generic(unserialise_specific_field_ordering%timestep_to_value, value_key, generic, .false.)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        current_data_point=current_data_point+byte_size</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_init(unserialise_specific_field_ordering%access_mutex, -1))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_cgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_cgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_cgraph" id="anamespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_cgraph">
<area shape="rect" title="Unserialises some field ordering." alt="" coords="5,93,179,149"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="231,5,385,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="227,71,389,112"/>
<area shape="rect" href="namespacedata__utils__mod.html#ab3602147fea5dd8f50911c7f4c93ff76" title="Unpacks a scalar integer from some byte data, this is a very simple unpack routine wrapping the trans..." alt="" coords="439,129,638,171"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#aaf58f8343222912d3c6872c8bca40bad" title="Unseralises some field ordering from its byte representation." alt="" coords="232,187,384,243"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="467,13,610,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="701,5,867,47"/>
<area shape="rect" href="namespacedata__utils__mod.html#a3b50dff5f8dae4a3bc361d1dce5f7711" title="Unpacks a double precision scalar real from some byte data, this is a very simple unpack routine wrap..." alt="" coords="437,195,640,236"/>
<area shape="rect" href="namespacewriter__types__mod.html#a536a4c1352bbc1d7a21aedec40ba4f8e" title="Unserialises some byte data into data values." alt="" coords="443,260,635,301"/>
<area shape="rect" href="namespacewriter__types__mod.html#a0c1e3ad6ff464304020f0be57e7e7df0" title="Inflates some byte data into a string map." alt="" coords="688,260,880,301"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_icgraph.png" border="0" usemap="#anamespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_icgraph" alt=""/></div>
<map name="namespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_icgraph" id="anamespacewriter__field__manager__mod_a3280f532aae1d9f5cfb11374e052ecdb_icgraph">
<area shape="rect" title="Unserialises some field ordering." alt="" coords="780,5,953,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a5f881e178ecfba1f19867dfd796506ae" title="Unserialses from some byte data into the state." alt="" coords="580,5,732,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="385,5,532,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,20,337,47"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,20,99,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab447ee3320a5644b9326cdb36e03a80d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab447ee3320a5644b9326cdb36e03a80d">&#9670;&nbsp;</a></span>field_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile writer_field_manager_mod::field_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00048">48</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span> :: field_lock</div>
</div><!-- fragment -->
</div>
</div>
<a id="a92aae971af8878516b817fb8b59c45b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92aae971af8878516b817fb8b59c45b9">&#9670;&nbsp;</a></span>field_orderings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile writer_field_manager_mod::field_orderings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writer__field__manager_8F90_source.html#l00049">49</a> of file <a class="el" href="writer__field__manager_8F90_source.html">writer_field_manager.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span> :: field_orderings</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_ad68309846cd8f9e77edaa6abd02f65a0"><div class="ttname"><a href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">logging_mod::log_error</a></div><div class="ttdeci">integer, parameter, public log_error</div><div class="ttdoc">Only log ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00011">logging.F90:11</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_a10e28447dd10ef9f92d205bc98fb26d3"><div class="ttname"><a href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">logging_mod::log_warn</a></div><div class="ttdeci">integer, parameter, public log_warn</div><div class="ttdoc">Log WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00012">logging.F90:12</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac4f13ac385499c85190cb184030e4f45"><div class="ttname"><a href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">logging_mod::log_log</a></div><div class="ttdeci">subroutine, public log_log(level, message, str)</div><div class="ttdoc">Logs a message at the specified level. If the level is above the current level then the message is ig...</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00074">logging.F90:75</a></div></div>
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
