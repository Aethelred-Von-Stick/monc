<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: checkpointer_write_checkpoint_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">checkpointer_write_checkpoint_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Writes out model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> to a checkpoint NetCDF file.  
<a href="namespacecheckpointer__write__checkpoint__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a08632fad9f022817094703d57bc025d4"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4">write_checkpoint_file</a> (current_state, filename)</td></tr>
<tr class="memdesc:a08632fad9f022817094703d57bc025d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will write out the current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> into a NetCDF checkpoint file.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4">More...</a><br /></td></tr>
<tr class="separator:a08632fad9f022817094703d57bc025d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7342fc51a7d35ca054e51ed7b115b0ac"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a7342fc51a7d35ca054e51ed7b115b0ac">write_out_global_attributes</a> (ncid)</td></tr>
<tr class="memdesc:a7342fc51a7d35ca054e51ed7b115b0ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes out global attributes into the checkpoint.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a7342fc51a7d35ca054e51ed7b115b0ac">More...</a><br /></td></tr>
<tr class="separator:a7342fc51a7d35ca054e51ed7b115b0ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa959a8a7dc86c1fd0e72214216f4824d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#aa959a8a7dc86c1fd0e72214216f4824d">write_out_q_indices</a> (ncid, q_indices_id)</td></tr>
<tr class="memdesc:aa959a8a7dc86c1fd0e72214216f4824d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes out the specific Q indicies that are active and need writing.  <a href="namespacecheckpointer__write__checkpoint__mod.html#aa959a8a7dc86c1fd0e72214216f4824d">More...</a><br /></td></tr>
<tr class="separator:aa959a8a7dc86c1fd0e72214216f4824d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8384fe30c1e212ba4a767c9f3f343404"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a8384fe30c1e212ba4a767c9f3f343404">write_out_options</a> (current_state, ncid, options_id)</td></tr>
<tr class="memdesc:a8384fe30c1e212ba4a767c9f3f343404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes out the options that the model was run with.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a8384fe30c1e212ba4a767c9f3f343404">More...</a><br /></td></tr>
<tr class="separator:a8384fe30c1e212ba4a767c9f3f343404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e6e050a6e9619e701c184208c6f9db"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a73e6e050a6e9619e701c184208c6f9db">write_out_all_fields</a> (current_state, ncid, u_id, v_id, w_id, zu_id, zv_id, zw_id, th_id, zth_id, q_id, zq_id, p_id)</td></tr>
<tr class="memdesc:a73e6e050a6e9619e701c184208c6f9db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will write out all prognostic model fields to the checkpoint. It will work in 1, 2 or 3D depending on the model.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a73e6e050a6e9619e701c184208c6f9db">More...</a><br /></td></tr>
<tr class="separator:a73e6e050a6e9619e701c184208c6f9db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5352203890f60b8b82394b6ef8a05e89"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a5352203890f60b8b82394b6ef8a05e89">write_out_velocity_field</a> (ncid, local_grid, field, variable_id, multi_process, fourth_dim_loc)</td></tr>
<tr class="memdesc:a5352203890f60b8b82394b6ef8a05e89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will write out a single velocity field to the checkpoint file. If there are multiple processes then will determine the bounds, otherwise for serial just dump data field.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a5352203890f60b8b82394b6ef8a05e89">More...</a><br /></td></tr>
<tr class="separator:a5352203890f60b8b82394b6ef8a05e89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba9917fd77c4bed7294e70be739be1f1"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#aba9917fd77c4bed7294e70be739be1f1">write_out_grid</a> (ncid, grid)</td></tr>
<tr class="memdesc:aba9917fd77c4bed7294e70be739be1f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will write out the grid to the checkpoint, it will work in 1, 2 or 3D depending on what is in the model.  <a href="namespacecheckpointer__write__checkpoint__mod.html#aba9917fd77c4bed7294e70be739be1f1">More...</a><br /></td></tr>
<tr class="separator:aba9917fd77c4bed7294e70be739be1f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa723fdef3f077e77458941c430ef6ed5"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#aa723fdef3f077e77458941c430ef6ed5">write_out_mean_fields</a> (ncid, grid)</td></tr>
<tr class="separator:aa723fdef3f077e77458941c430ef6ed5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91f9eaba02d296874f9ec4cdfe57f154"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a91f9eaba02d296874f9ec4cdfe57f154">write_z_grid_gimension</a> (ncid, vertical_grid)</td></tr>
<tr class="memdesc:a91f9eaba02d296874f9ec4cdfe57f154"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes out the Z dimension of the <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a> points which are explicitly calculated.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a91f9eaba02d296874f9ec4cdfe57f154">More...</a><br /></td></tr>
<tr class="separator:a91f9eaba02d296874f9ec4cdfe57f154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e7fec66f180085dfd14db76973407e"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a26e7fec66f180085dfd14db76973407e">define_options_variable</a> (current_state, ncid, string_dim_id, key_value_dim_id, options_id)</td></tr>
<tr class="memdesc:a26e7fec66f180085dfd14db76973407e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the NetCDF options variable which is basically a 3D character array to form key-value pair strings for each entry.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a26e7fec66f180085dfd14db76973407e">More...</a><br /></td></tr>
<tr class="separator:a26e7fec66f180085dfd14db76973407e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66deb0782306f1b184fa5d01f3c2d54"><td class="memItemLeft" align="right" valign="top">logical function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#ae66deb0782306f1b184fa5d01f3c2d54">define_q_indices_variable</a> (ncid, string_dim_id, key_value_dim_id, q_indices_id)</td></tr>
<tr class="memdesc:ae66deb0782306f1b184fa5d01f3c2d54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the NetCDF Q indices variable which is, same as the options, stored as key-value pair of strings. This will only store and create these dimensions if there are any Q indicies to store.  <a href="namespacecheckpointer__write__checkpoint__mod.html#ae66deb0782306f1b184fa5d01f3c2d54">More...</a><br /></td></tr>
<tr class="separator:ae66deb0782306f1b184fa5d01f3c2d54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d4b23fe298b318b8047f68a69e7b70d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a3d4b23fe298b318b8047f68a69e7b70d">define_q_field_dimension</a> (current_state, ncid, q_dim_id)</td></tr>
<tr class="memdesc:a3d4b23fe298b318b8047f68a69e7b70d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the Q field dimension in the NetCDF.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a3d4b23fe298b318b8047f68a69e7b70d">More...</a><br /></td></tr>
<tr class="separator:a3d4b23fe298b318b8047f68a69e7b70d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f1b08fe03a160c2a18e85f4d71b2b22"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a6f1b08fe03a160c2a18e85f4d71b2b22">define_grid_dimensions</a> (current_state, ncid, z_dim_id, y_dim_id, x_dim_id)</td></tr>
<tr class="memdesc:a6f1b08fe03a160c2a18e85f4d71b2b22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will define the grid dimensions and works for 1, 2 or 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a>.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a6f1b08fe03a160c2a18e85f4d71b2b22">More...</a><br /></td></tr>
<tr class="separator:a6f1b08fe03a160c2a18e85f4d71b2b22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9157db199f1be3e63985ae677c5d82c"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#ad9157db199f1be3e63985ae677c5d82c">define_grid_variables</a> (current_state, ncid)</td></tr>
<tr class="memdesc:ad9157db199f1be3e63985ae677c5d82c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the NetCDF grid variables. This works for 1, 2 or 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a>.  <a href="namespacecheckpointer__write__checkpoint__mod.html#ad9157db199f1be3e63985ae677c5d82c">More...</a><br /></td></tr>
<tr class="separator:ad9157db199f1be3e63985ae677c5d82c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a004907514a9203ca52d7c50370d48184"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a004907514a9203ca52d7c50370d48184">define_mean_fields</a> (current_state, ncid)</td></tr>
<tr class="separator:a004907514a9203ca52d7c50370d48184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a86b0ab2565a0bf88389d78e3ce9d6"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#ae2a86b0ab2565a0bf88389d78e3ce9d6">define_q_variable</a> (ncid, multi_process, q_dim_id, z_dim_id, y_dim_id, x_dim_id, q_id, zq_id)</td></tr>
<tr class="memdesc:ae2a86b0ab2565a0bf88389d78e3ce9d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the Q variable in the checkpoint file.  <a href="namespacecheckpointer__write__checkpoint__mod.html#ae2a86b0ab2565a0bf88389d78e3ce9d6">More...</a><br /></td></tr>
<tr class="separator:ae2a86b0ab2565a0bf88389d78e3ce9d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71abced711d4fdda1c5c90d48817095d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a71abced711d4fdda1c5c90d48817095d">define_prognostic_variables</a> (current_state, multi_process, ncid, z_dim_id, y_dim_id, x_dim_id, u_id, v_id, w_id, th_id, p_id, zu_id, zv_id, zw_id, zth_id)</td></tr>
<tr class="memdesc:a71abced711d4fdda1c5c90d48817095d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines prognostic variables in the NetCDF. This handles 1, 2 and 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a> and 1, 2 and 3D fields, which most likely have the same dimensions but this is not mandatory here. All prognostic fields are 3D, if the grid is not 3D then the empty (size 1) dimension is used in that dimension.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a71abced711d4fdda1c5c90d48817095d">More...</a><br /></td></tr>
<tr class="separator:a71abced711d4fdda1c5c90d48817095d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2773f7a0ed4033d835f032524411556"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#ad2773f7a0ed4033d835f032524411556">define_misc_variables</a> (ncid, timestep_id, time_id, ugal_id, vgal_id, number_q_fields_id, dtm_id, dtm_new_id, absolute_new_dtm_id)</td></tr>
<tr class="memdesc:ad2773f7a0ed4033d835f032524411556"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines misc variables in the NetCDF file.  <a href="namespacecheckpointer__write__checkpoint__mod.html#ad2773f7a0ed4033d835f032524411556">More...</a><br /></td></tr>
<tr class="separator:ad2773f7a0ed4033d835f032524411556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a6696ac40ce911ed409836c874ab5e3"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a9a6696ac40ce911ed409836c874ab5e3">write_out_misc_variables</a> (current_state, ncid, timestep_id, time_id, ugal_id, vgal_id, number_q_fields_id, dtm_id, dtm_new_id, absolute_new_dtm_id)</td></tr>
<tr class="memdesc:a9a6696ac40ce911ed409836c874ab5e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will dump out (write) misc model data to the checkpoint.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a9a6696ac40ce911ed409836c874ab5e3">More...</a><br /></td></tr>
<tr class="separator:a9a6696ac40ce911ed409836c874ab5e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad2677e3782e11733a679754fc33760"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#afad2677e3782e11733a679754fc33760">define_velocity_variable</a> (ncid, multi_process, dimone, dimtwo, dimthree, field_name, field_id)</td></tr>
<tr class="memdesc:afad2677e3782e11733a679754fc33760"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will define a single velocity variable in the NetCDF file.  <a href="namespacecheckpointer__write__checkpoint__mod.html#afad2677e3782e11733a679754fc33760">More...</a><br /></td></tr>
<tr class="separator:afad2677e3782e11733a679754fc33760"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a4013dc3d6d6bead4d0b1ab34e9de09"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a4a4013dc3d6d6bead4d0b1ab34e9de09">define_pdf_fields</a> (current_state, ncid)</td></tr>
<tr class="separator:a4a4013dc3d6d6bead4d0b1ab34e9de09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2091b86fc06f2248d0ee75d3ed29974f"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a2091b86fc06f2248d0ee75d3ed29974f">write_out_pdf_fields</a> (ncid, grid)</td></tr>
<tr class="separator:a2091b86fc06f2248d0ee75d3ed29974f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a4ebb515bae6f42943ffaef4a54f4212f"><td class="memItemLeft" align="right" valign="top">character(len= *), parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__write__checkpoint__mod.html#a4ebb515bae6f42943ffaef4a54f4212f">checkpoint_title</a> = &quot;MONC checkpoint file&quot;</td></tr>
<tr class="memdesc:a4ebb515bae6f42943ffaef4a54f4212f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Title of the NetCDF file.  <a href="namespacecheckpointer__write__checkpoint__mod.html#a4ebb515bae6f42943ffaef4a54f4212f">More...</a><br /></td></tr>
<tr class="separator:a4ebb515bae6f42943ffaef4a54f4212f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Writes out model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> to a checkpoint NetCDF file. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a6f1b08fe03a160c2a18e85f4d71b2b22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f1b08fe03a160c2a18e85f4d71b2b22">&#9670;&nbsp;</a></span>define_grid_dimensions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_grid_dimensions </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>z_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>y_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>x_dim_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will define the grid dimensions and works for 1, 2 or 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">z_dim_id</td><td>The NetCDF z dimension id that is provided by this procedure </td></tr>
    <tr><td class="paramname">y_dim_id</td><td>The NetCDF y dimension id that is provided by this procedure </td></tr>
    <tr><td class="paramname">x_dim_id</td><td>The NetCDF x dimension id that is provided by this procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00402">402</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: z_dim_id, y_dim_id, x_dim_id</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160; </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordtype">integer</span> :: empty_dim_id</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160; </div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_dim(ncid, empty_dim_key, 1, empty_dim_id))</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(z_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_dim(ncid, z_dim_key, current_state%global_grid%size(z_index), z_dim_id))</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_dim(ncid, zn_dim_key, current_state%global_grid%size(z_index), z_dim_id))</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      z_dim_id = empty_dim_id</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(y_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_dim(ncid, y_dim_key, current_state%global_grid%size(y_index), y_dim_id))</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      y_dim_id = empty_dim_id</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(x_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_dim(ncid, x_dim_key, current_state%global_grid%size(x_index), x_dim_id))</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      x_dim_id = empty_dim_id</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_cgraph">
<area shape="rect" title="Will define the grid dimensions and works for 1, 2 or 3D grids_mod." alt="" coords="5,61,169,117"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="226,35,379,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a0139e4b2be09ae08293ae0db646cc802" title=" " alt="" coords="217,100,388,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="450,13,593,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="436,64,607,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="655,5,821,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a6f1b08fe03a160c2a18e85f4d71b2b22_icgraph">
<area shape="rect" title="Will define the grid dimensions and works for 1, 2 or 3D grids_mod." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="ad9157db199f1be3e63985ae677c5d82c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9157db199f1be3e63985ae677c5d82c">&#9670;&nbsp;</a></span>define_grid_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_grid_variables </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines the NetCDF grid variables. This works for 1, 2 or 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">z_dim_id</td><td>The NetCDF z dimension id </td></tr>
    <tr><td class="paramname">y_dim_id</td><td>The NetCDF y dimension id </td></tr>
    <tr><td class="paramname">x_dim_id</td><td>The NetCDF x dimension id </td></tr>
    <tr><td class="paramname">x_id</td><td>The NetCDF x variable id provided by this procedure </td></tr>
    <tr><td class="paramname">y_id</td><td>The NetCDF y variable id provided by this procedure </td></tr>
    <tr><td class="paramname">z_id</td><td>The NetCDF z variable id provided by this procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00438">438</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">integer</span> :: var_id, z_dim_id</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160; </div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(x_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, x_resolution, nf90_double, var_id))</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, x_top, nf90_double, var_id))</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, x_bottom, nf90_double, var_id))</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(y_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, y_resolution, nf90_double, var_id))</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, y_top, nf90_double, var_id))</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, y_bottom, nf90_double, var_id))</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(z_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, z_dim_key, z_dim_id))</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, z_key, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, zn_dim_key, z_dim_id))</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, zn_key, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_att(ncid, var_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m&quot;</span>))</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, z_dim_key, z_dim_id))</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, thref, nf90_double, z_dim_id, var_id))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_cgraph">
<area shape="rect" title="Defines the NetCDF grid variables. This works for 1, 2 or 3D grids_mod." alt="" coords="5,61,169,117"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="226,35,379,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab71a7c3fe5681033eabdab1c258a321b" title=" " alt="" coords="217,100,388,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="450,13,593,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="436,64,607,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="655,5,821,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_ad9157db199f1be3e63985ae677c5d82c_icgraph">
<area shape="rect" title="Defines the NetCDF grid variables. This works for 1, 2 or 3D grids_mod." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a004907514a9203ca52d7c50370d48184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a004907514a9203ca52d7c50370d48184">&#9670;&nbsp;</a></span>define_mean_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_mean_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00472">472</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordtype">integer</span> :: var_id, z_dim_id, q_dim_id, qdimids(2)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160; </div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, z_dim_key, z_dim_id))</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160; </div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olubar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, olubar, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="keywordflow">    end if</span>    </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olzubar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, olzubar, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olvbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, olvbar, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olzvbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, olzvbar, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olthbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, olthbar, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="keywordflow">    end if</span>    </div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olzthbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, olzthbar, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olqbar) .or. &amp;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;         <span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olzqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, q_dim_key, q_dim_id))</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      qdimids=(/ z_dim_id, q_dim_id /)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        <span class="keyword">call </span>check_status(nf90_def_var(ncid, olqbar, nf90_double, qdimids, var_id))</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olzqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;        <span class="keyword">call </span>check_status(nf90_def_var(ncid, olzqbar, nf90_double, qdimids, var_id))</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_cgraph">
<area shape="rect" title=" " alt="" coords="5,27,169,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="217,35,371,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="433,13,575,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="419,64,589,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="637,5,804,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a004907514a9203ca52d7c50370d48184_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="ad2773f7a0ed4033d835f032524411556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2773f7a0ed4033d835f032524411556">&#9670;&nbsp;</a></span>define_misc_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_misc_variables </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>timestep_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>time_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>ugal_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>vgal_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>number_q_fields_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>dtm_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>dtm_new_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>absolute_new_dtm_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines misc variables in the NetCDF file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">timestep_id</td><td>The NetCDF timestep variable </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00586">586</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: timestep_id, time_id, ugal_id, vgal_id, number_q_fields_id, dtm_id, dtm_new_id, absolute_new_dtm_id</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160; </div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, timestep, nf90_int, timestep_id))</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, time_key, nf90_double, time_id))</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, ugal, nf90_double, ugal_id))</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, vgal, nf90_double, vgal_id))</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, nqfields, nf90_int, number_q_fields_id))</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, dtm_key, nf90_double, dtm_id))</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, dtm_new_key, nf90_double, dtm_new_id))</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, absolute_new_dtm_key, nf90_double, absolute_new_dtm_id))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_cgraph">
<area shape="rect" title="Defines misc variables in the NetCDF file." alt="" coords="5,27,169,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="217,35,371,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="433,13,575,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="419,64,589,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="637,5,804,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_ad2773f7a0ed4033d835f032524411556_icgraph">
<area shape="rect" title="Defines misc variables in the NetCDF file." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a26e7fec66f180085dfd14db76973407e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26e7fec66f180085dfd14db76973407e">&#9670;&nbsp;</a></span>define_options_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_options_variable </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>string_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>key_value_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>options_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines the NetCDF options variable which is basically a 3D character array to form key-value pair strings for each entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">options_id</td><td>The NetCDF options variable id that is created in this procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00341">341</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: string_dim_id, key_value_dim_id, options_id</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordtype">integer</span> :: options_dim_id, command_dimensions(3)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_dim(ncid, string_dim_key, string_length, string_dim_id))</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_dim(ncid, key_value_pair_key, 2, key_value_dim_id))</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_dim(ncid, options_dim_key, options_size(current_state%options_database), options_dim_id))</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160; </div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    command_dimensions = (/ string_dim_id, key_value_dim_id, options_dim_id /)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, options_key, nf90_char, command_dimensions, options_id))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_cgraph">
<area shape="rect" title="Defines the NetCDF options variable which is basically a 3D character array to form key&#45;value pair st..." alt="" coords="5,93,169,149"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="226,35,379,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a0139e4b2be09ae08293ae0db646cc802" title=" " alt="" coords="217,100,388,141"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a7eeb8b8d74d261f80bb0a64db10b22e2" title="Returns the number of entries in the options database." alt="" coords="228,165,377,207"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="450,13,593,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="436,64,607,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="655,5,821,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a26e7fec66f180085dfd14db76973407e_icgraph">
<area shape="rect" title="Defines the NetCDF options variable which is basically a 3D character array to form key&#45;value pair st..." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a4a4013dc3d6d6bead4d0b1ab34e9de09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a4013dc3d6d6bead4d0b1ab34e9de09">&#9670;&nbsp;</a></span>define_pdf_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_pdf_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00658">658</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    <span class="keywordtype">integer</span> :: var_id, z_dim_id</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, z_dim_key, z_dim_id))</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160; </div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%w_up)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, wup, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%w_dwn)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, wdwn, nf90_double, z_dim_id, var_id))</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_cgraph">
<area shape="rect" title=" " alt="" coords="5,27,169,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="217,35,371,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="433,13,575,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="419,64,589,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="637,5,804,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a4a4013dc3d6d6bead4d0b1ab34e9de09_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a71abced711d4fdda1c5c90d48817095d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71abced711d4fdda1c5c90d48817095d">&#9670;&nbsp;</a></span>define_prognostic_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_prognostic_variables </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>multi_process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>z_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>y_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>x_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>u_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>v_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>w_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>th_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>p_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>zu_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>zv_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>zw_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>zth_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines prognostic variables in the NetCDF. This handles 1, 2 and 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a> and 1, 2 and 3D fields, which most likely have the same dimensions but this is not mandatory here. All prognostic fields are 3D, if the grid is not 3D then the empty (size 1) dimension is used in that dimension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">z_dim_id</td><td>The NetCDF z dimension id </td></tr>
    <tr><td class="paramname">y_dim_id</td><td>The NetCDF y dimension id </td></tr>
    <tr><td class="paramname">x_dim_id</td><td>The NetCDF x dimension id </td></tr>
    <tr><td class="paramname">u_id</td><td>The u prognostic field id provided by this procedure </td></tr>
    <tr><td class="paramname">v_id</td><td>The v prognostic field id provided by this procedure </td></tr>
    <tr><td class="paramname">w_id</td><td>The w prognostic field id provided by this procedure </td></tr>
    <tr><td class="paramname">th_id</td><td>The theta prognostic field id provided by this procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00555">555</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: multi_process</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, z_dim_id, y_dim_id, x_dim_id</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: u_id, v_id, w_id, th_id, p_id, zu_id, zv_id, zw_id, zth_id</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160; </div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="preprocessor">#ifdef U_ACTIVE</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=u_key, field_id=u_id)</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=zu_key, field_id=zu_id)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef V_ACTIVE</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=v_key, field_id=v_id)</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=zv_key, field_id=zv_id)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef W_ACTIVE</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=w_key, field_id=w_id)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=zw_key, field_id=zw_id)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (current_state%th%active) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=th_key, field_id=th_id)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=zth_key, field_id=zth_id)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    <span class="keywordflow">if</span> (current_state%p%active) <span class="keywordflow">then</span> </div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keyword">call </span>define_velocity_variable(ncid, multi_process, z_dim_id, y_dim_id, x_dim_id, field_name=p_key, field_id=p_id)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_cgraph">
<area shape="rect" title="Defines prognostic variables in the NetCDF. This handles 1, 2 and 3D grids_mod and 1,..." alt="" coords="5,61,169,117"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#afad2677e3782e11733a679754fc33760" title="Will define a single velocity variable in the NetCDF file." alt="" coords="217,61,381,117"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="438,35,591,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab71a7c3fe5681033eabdab1c258a321b" title=" " alt="" coords="429,100,600,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="662,13,805,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="648,64,819,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="867,5,1033,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a71abced711d4fdda1c5c90d48817095d_icgraph">
<area shape="rect" title="Defines prognostic variables in the NetCDF. This handles 1, 2 and 3D grids_mod and 1,..." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a3d4b23fe298b318b8047f68a69e7b70d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d4b23fe298b318b8047f68a69e7b70d">&#9670;&nbsp;</a></span>define_q_field_dimension()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_q_field_dimension </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>q_dim_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines the Q field dimension in the NetCDF. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">q_dim_id</td><td>Corresponding NetCDF Q dimension id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00388">388</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: q_dim_id</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160; </div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_dim(ncid, q_dim_key, current_state%number_q_fields, q_dim_id))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_cgraph">
<area shape="rect" title="Defines the Q field dimension in the NetCDF." alt="" coords="5,61,169,117"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="226,35,379,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a0139e4b2be09ae08293ae0db646cc802" title=" " alt="" coords="217,100,388,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="450,13,593,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="436,64,607,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="655,5,821,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a3d4b23fe298b318b8047f68a69e7b70d_icgraph">
<area shape="rect" title="Defines the Q field dimension in the NetCDF." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="ae66deb0782306f1b184fa5d01f3c2d54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66deb0782306f1b184fa5d01f3c2d54">&#9670;&nbsp;</a></span>define_q_indices_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical function checkpointer_write_checkpoint_mod::define_q_indices_variable </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>string_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>key_value_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>q_indices_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines the NetCDF Q indices variable which is, same as the options, stored as key-value pair of strings. This will only store and create these dimensions if there are any Q indicies to store. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">string_dim_id</td><td>The id of the string dimension </td></tr>
    <tr><td class="paramname">key_value_dim_id</td><td>The id of the key value pair dimension </td></tr>
    <tr><td class="paramname">q_indices_id</td><td>The id that represents this variable in the NetCDF </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether or not the dimensions and variable has been declared (it won't be if there are no active Q indicies) </dd></dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00364">364</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, string_dim_id, key_value_dim_id</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: q_indices_id</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160; </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">integer</span> :: q_indices_dim_id, command_dimensions(3), number_active_q</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    number_active_q=get_number_active_q_indices()</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordflow">if</span> (number_active_q == 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      define_q_indices_variable=.false.</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_dim(ncid, q_indices_dim_key, number_active_q, q_indices_dim_id))</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      command_dimensions = (/ string_dim_id, key_value_dim_id, q_indices_dim_id /)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var(ncid, q_indices_key, nf90_char, command_dimensions, q_indices_id))</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      define_q_indices_variable=.true.</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_cgraph">
<area shape="rect" title="Defines the NetCDF Q indices variable which is, same as the options, stored as key&#45;value pair of stri..." alt="" coords="5,93,169,149"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="229,35,382,76"/>
<area shape="rect" href="namespaceq__indices__mod.html#a9ae545612c89aa205f6a295c6b2e0706" title="Gets the number of active Q indicies (i.e. those allocated to specific uses)" alt="" coords="217,100,393,141"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a0139e4b2be09ae08293ae0db646cc802" title=" " alt="" coords="220,165,391,207"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="455,13,598,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="441,64,612,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="660,5,827,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_ae66deb0782306f1b184fa5d01f3c2d54_icgraph">
<area shape="rect" title="Defines the NetCDF Q indices variable which is, same as the options, stored as key&#45;value pair of stri..." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="ae2a86b0ab2565a0bf88389d78e3ce9d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2a86b0ab2565a0bf88389d78e3ce9d6">&#9670;&nbsp;</a></span>define_q_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_q_variable </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>multi_process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>q_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>z_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>y_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>x_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>zq_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines the Q variable in the checkpoint file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">multi_process</td><td>Whether to support parallel IO operations or not </td></tr>
    <tr><td class="paramname">q_dim_id</td><td>The NetCDF q dimension id </td></tr>
    <tr><td class="paramname">z_dim_id</td><td>The NetCDF z dimension id </td></tr>
    <tr><td class="paramname">y_dim_id</td><td>The NetCDF y dimension id </td></tr>
    <tr><td class="paramname">x_dim_id</td><td>The NetCDF x dimension id </td></tr>
    <tr><td class="paramname">q_id</td><td>The NetCDF q variable id provided by this procedure </td></tr>
    <tr><td class="paramname">zq_id</td><td>The NetCDF zq variable id provided by this procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00520">520</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: multi_process</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, z_dim_id, y_dim_id, x_dim_id, q_dim_id</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: q_id, zq_id</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: dimids</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keyword">allocate</span>(dimids(4))</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    dimids = (/ z_dim_id, y_dim_id, x_dim_id, q_dim_id /)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, q_key, merge(nf90_double, nf90_real, &amp;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;         <a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a> == double_precision), dimids, q_id))</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, zq_key, merge(nf90_double, nf90_real, &amp;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;         <a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a> == double_precision), dimids, zq_id))</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    </div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> (multi_process) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var_fill(ncid, q_id, 1, 1))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var_fill(ncid, zq_id, 1, 1))</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keyword">call </span>check_status(nf90_var_par_access(ncid, q_id, nf90_collective))</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keyword">call </span>check_status(nf90_var_par_access(ncid, zq_id, nf90_collective))</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_cgraph">
<area shape="rect" title="Defines the Q variable in the checkpoint file." alt="" coords="5,27,169,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="217,35,371,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="433,13,575,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="419,64,589,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="637,5,804,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_ae2a86b0ab2565a0bf88389d78e3ce9d6_icgraph">
<area shape="rect" title="Defines the Q variable in the checkpoint file." alt="" coords="212,5,376,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="afad2677e3782e11733a679754fc33760"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afad2677e3782e11733a679754fc33760">&#9670;&nbsp;</a></span>define_velocity_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::define_velocity_variable </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>multi_process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dimone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>dimtwo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>dimthree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>field_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will define a single velocity variable in the NetCDF file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">dimone</td><td>Size in first dimension </td></tr>
    <tr><td class="paramname">dimtwo</td><td>Size in second dimension (optional) </td></tr>
    <tr><td class="paramname">dimthree</td><td>Size in third dimension (optional) </td></tr>
    <tr><td class="paramname">field_name</td><td>The NetCDF name of the variable </td></tr>
    <tr><td class="paramname">field_id</td><td>The NetCDF variable id produced by this procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00629">629</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, dimone</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span> :: dimtwo, dimthree</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: field_id</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: multi_process</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160; </div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: dimids</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(dimtwo) .and. <span class="keyword">present</span>(dimthree)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keyword">allocate</span>(dimids(3))</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      dimids = (/ dimone, dimtwo, dimthree /)</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(dimtwo) .or. <span class="keyword">present</span>(dimthree)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keyword">allocate</span>(dimids(2))</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      dimids = (/ dimone, merge(dimtwo, dimthree, <span class="keyword">present</span>(dimtwo)) /)</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keyword">allocate</span>(dimids(1))</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      dimids = (/ dimone /)</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160; </div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    <span class="keyword">call </span>check_status(nf90_def_var(ncid, field_name, merge(nf90_double, nf90_real, <a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a> == double_precision), &amp;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         dimids, field_id))</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordflow">if</span> (multi_process) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keyword">call </span>check_status(nf90_def_var_fill(ncid, field_id, 1, 1))</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keyword">call </span>check_status(nf90_var_par_access(ncid, field_id, nf90_collective))</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_att(ncid, field_id, <span class="stringliteral">&quot;units&quot;</span>, <span class="stringliteral">&quot;m/s&quot;</span>))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_cgraph">
<area shape="rect" title="Will define a single velocity variable in the NetCDF file." alt="" coords="5,61,169,117"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="226,35,379,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab71a7c3fe5681033eabdab1c258a321b" title=" " alt="" coords="217,100,388,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="450,13,593,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="436,64,607,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="655,5,821,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_afad2677e3782e11733a679754fc33760_icgraph">
<area shape="rect" title="Will define a single velocity variable in the NetCDF file." alt="" coords="429,45,593,101"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a71abced711d4fdda1c5c90d48817095d" title="Defines prognostic variables in the NetCDF. This handles 1, 2 and 3D grids_mod and 1,..." alt="" coords="217,5,381,61"/>
<area shape="rect" href="namespacetest__checkpointer__mod.html#a9e75a0d839f24c6a15449724caa685e5" title=" " alt="" coords="221,85,378,141"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="8,5,167,61"/>
<area shape="rect" href="test__checkpointer_8F90.html#ac066cbcd389adebfd7162022ed08de09" title=" " alt="" coords="5,100,169,127"/>
</map>
</div>

</div>
</div>
<a id="a08632fad9f022817094703d57bc025d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08632fad9f022817094703d57bc025d4">&#9670;&nbsp;</a></span>write_checkpoint_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public checkpointer_write_checkpoint_mod::write_checkpoint_file </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will write out the current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> into a NetCDF checkpoint file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentState</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the NetCDF file that will be written </td></tr>
  </table>
  </dd>
</dl>
<p>writeout pdf fields in checkpoint file</p>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00040">40</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: filename</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">integer</span> :: ncid, z_dim_id, y_dim_id, x_dim_id, q_dim_id, x_id, y_id, z_id, th_id, p_id, time_id,&amp;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;         u_id, v_id, w_id, q_id, zu_id, zv_id, zw_id, zth_id, zq_id, timestep_id, ugal_id, &amp;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;         vgal_id, number_q_fields_id, string_dim_id, key_value_dim_id, options_id, q_indices_id, &amp;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;         dtm_id, dtm_new_id, absolute_new_dtm_id</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordtype">logical</span> :: q_indices_declared</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#ifdef SINGLE_MONC_DO_SEQUENTIAL_NETCDF</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (current_state%parallel%processes .gt. 1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;      <span class="keyword">call </span>check_status(nf90_create(filename, ior(nf90_netcdf4, nf90_mpiio), ncid, &amp;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;           comm = current_state%parallel%monc_communicator, info = mpi_info_null))</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      <span class="keyword">call </span>check_status(nf90_create(filename, nf90_clobber, ncid))</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>check_status(nf90_create(filename, ior(nf90_netcdf4, nf90_mpiio), ncid, &amp;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;         comm = current_state%parallel%monc_communicator, info = mpi_info_null))</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>write_out_global_attributes(ncid)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keyword">call </span>define_grid_dimensions(current_state, ncid, z_dim_id, y_dim_id, x_dim_id)    </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (current_state%number_q_fields .gt. 0) <span class="keyword">call </span>define_q_field_dimension(current_state, ncid, q_dim_id)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">call </span>define_options_variable(current_state, ncid, string_dim_id, key_value_dim_id, options_id)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    q_indices_declared=define_q_indices_variable(ncid, string_dim_id, key_value_dim_id, q_indices_id)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keyword">call </span>define_grid_variables(current_state, ncid)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">call </span>define_mean_fields(current_state, ncid)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (current_state%number_q_fields .gt. 0) <span class="keyword">call </span>define_q_variable(ncid, current_state%parallel%processes .gt. 1, &amp;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;         q_dim_id, z_dim_id, y_dim_id, x_dim_id, q_id, zq_id)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">call </span>define_prognostic_variables(current_state, current_state%parallel%processes .gt. 1, ncid, z_dim_id, y_dim_id, &amp;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;         x_dim_id, u_id, v_id, w_id, th_id, p_id, zu_id, zv_id, zw_id, zth_id)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keyword">call </span>define_misc_variables(ncid, timestep_id, time_id, ugal_id, vgal_id, number_q_fields_id, &amp;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;         dtm_id, dtm_new_id, absolute_new_dtm_id)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="keyword">call </span>check_status(nf90_enddef(ncid))</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (current_state%parallel%my_rank==0) <span class="keyword">call </span>write_out_grid(ncid, current_state%global_grid)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (current_state%parallel%my_rank==0) <span class="keyword">call </span>write_out_mean_fields(ncid, current_state%global_grid)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keyword">call </span>write_out_all_fields(current_state, ncid, u_id, v_id, w_id, zu_id, zv_id, zw_id, th_id, zth_id, q_id, zq_id, p_id)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (current_state%parallel%my_rank==0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keyword">call </span>write_out_options(current_state, ncid, options_id)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <span class="keywordflow">if</span> (q_indices_declared) <span class="keyword">call </span>write_out_q_indices(ncid, q_indices_id)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keyword">call </span>write_out_misc_variables(current_state, ncid, timestep_id, time_id, &amp;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;           ugal_id, vgal_id, number_q_fields_id, dtm_id, dtm_new_id, absolute_new_dtm_id)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">call </span>define_pdf_fields(current_state, ncid)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (current_state%parallel%my_rank==0) <span class="keyword">call </span>write_out_pdf_fields(ncid, current_state%global_grid)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">call </span>check_status(nf90_close(ncid))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a08632fad9f022817094703d57bc025d4_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a08632fad9f022817094703d57bc025d4_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a08632fad9f022817094703d57bc025d4_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a08632fad9f022817094703d57bc025d4_cgraph">
<area shape="rect" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,860,164,916"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="663,626,817,667"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a6f1b08fe03a160c2a18e85f4d71b2b22" title="Will define the grid dimensions and works for 1, 2 or 3D grids_mod." alt="" coords="215,667,379,723"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#ad9157db199f1be3e63985ae677c5d82c" title="Defines the NetCDF grid variables. This works for 1, 2 or 3D grids_mod." alt="" coords="437,5,601,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a004907514a9203ca52d7c50370d48184" title=" " alt="" coords="437,1299,601,1355"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#ad2773f7a0ed4033d835f032524411556" title="Defines misc variables in the NetCDF file." alt="" coords="215,231,379,287"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a26e7fec66f180085dfd14db76973407e" title="Defines the NetCDF options variable which is basically a 3D character array to form key&#45;value pair st..." alt="" coords="215,957,379,1013"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a4a4013dc3d6d6bead4d0b1ab34e9de09" title=" " alt="" coords="215,311,379,367"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a71abced711d4fdda1c5c90d48817095d" title="Defines prognostic variables in the NetCDF. This handles 1, 2 and 3D grids_mod and 1,..." alt="" coords="215,93,379,149"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a3d4b23fe298b318b8047f68a69e7b70d" title="Defines the Q field dimension in the NetCDF." alt="" coords="215,827,379,883"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#ae66deb0782306f1b184fa5d01f3c2d54" title="Defines the NetCDF Q indices variable which is, same as the options, stored as key&#45;value pair of stri..." alt="" coords="215,747,379,803"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#ae2a86b0ab2565a0bf88389d78e3ce9d6" title="Defines the Q variable in the checkpoint file." alt="" coords="215,391,379,447"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a9eb15dfe81c035d99d54d239837f9df1" title=" " alt="" coords="212,1509,383,1550"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a4cbd0d30dafdaae9516943dfdbe99c22" title=" " alt="" coords="212,1574,383,1615"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#afbd20f2bb9d19b5731371744c136f555" title=" " alt="" coords="212,1639,383,1681"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a73e6e050a6e9619e701c184208c6f9db" title="Will write out all prognostic model fields to the checkpoint. It will work in 1, 2 or 3D depending on..." alt="" coords="218,471,377,527"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a7342fc51a7d35ca054e51ed7b115b0ac" title="Writes out global attributes into the checkpoint." alt="" coords="439,165,598,221"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#aba9917fd77c4bed7294e70be739be1f1" title="Will write out the grid to the checkpoint, it will work in 1, 2 or 3D depending on what is in the mod..." alt="" coords="218,551,377,607"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#aa723fdef3f077e77458941c430ef6ed5" title=" " alt="" coords="439,892,598,948"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a9a6696ac40ce911ed409836c874ab5e3" title="Will dump out (write) misc model data to the checkpoint." alt="" coords="439,1023,598,1079"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a8384fe30c1e212ba4a767c9f3f343404" title="Writes out the options that the model was run with." alt="" coords="218,1349,377,1405"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a2091b86fc06f2248d0ee75d3ed29974f" title=" " alt="" coords="439,1219,598,1275"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#aa959a8a7dc86c1fd0e72214216f4824d" title="Writes out the specific Q indicies that are active and need writing." alt="" coords="218,1429,377,1485"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="887,604,1030,631"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="873,655,1044,697"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1092,597,1259,638"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a0139e4b2be09ae08293ae0db646cc802" title=" " alt="" coords="433,775,604,817"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab71a7c3fe5681033eabdab1c258a321b" title=" " alt="" coords="655,93,825,134"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a7eeb8b8d74d261f80bb0a64db10b22e2" title="Returns the number of entries in the options database." alt="" coords="444,1154,593,1195"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#afad2677e3782e11733a679754fc33760" title="Will define a single velocity variable in the NetCDF file." alt="" coords="437,85,601,141"/>
<area shape="rect" href="namespaceq__indices__mod.html#a9ae545612c89aa205f6a295c6b2e0706" title="Gets the number of active Q indicies (i.e. those allocated to specific uses)" alt="" coords="431,710,607,751"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a5352203890f60b8b82394b6ef8a05e89" title="Will write out a single velocity field to the checkpoint file. If there are multiple processes then w..." alt="" coords="439,397,598,453"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a91f9eaba02d296874f9ec4cdfe57f154" title="Writes out the Z dimension of the grids_mod points which are explicitly calculated." alt="" coords="439,528,598,584"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#adc0a6752b379a4967ae7260e4487d049" title="Returns the ith key in the options database." alt="" coords="444,1430,593,1471"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a2dee7871d510ec8b7e82ff936a59b443" title="Returns the value at index in the database." alt="" coords="444,1495,593,1537"/>
<area shape="rect" href="namespaceq__indices__mod.html#ae040049b676d2b242c3f199275f5e3b1" title="Retrieves the indicies descriptor at a specific location." alt="" coords="451,1613,586,1654"/>
<area shape="rect" href="namespaceq__indices__mod.html#a7b1a587d05250868be89f8c4c161a5af" title="Gets the maximum number of Q indicies." alt="" coords="436,1678,601,1719"/>
</map>
</div>

</div>
</div>
<a id="a73e6e050a6e9619e701c184208c6f9db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73e6e050a6e9619e701c184208c6f9db">&#9670;&nbsp;</a></span>write_out_all_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_all_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>u_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>v_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>w_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>zu_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>zv_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>zw_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>th_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>zth_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>q_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>zq_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>p_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will write out all prognostic model fields to the checkpoint. It will work in 1, 2 or 3D depending on the model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">u_id</td><td>The NetCDF u field dimension id </td></tr>
    <tr><td class="paramname">v_id</td><td>The NetCDF v field dimension id </td></tr>
    <tr><td class="paramname">w_id</td><td>The NetCDF w field dimension id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00169">169</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, u_id, v_id, w_id, zu_id, zv_id, zw_id, th_id, zth_id, q_id, zq_id, p_id</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">logical</span> :: multi_process</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    multi_process = current_state%parallel%processes .gt. 1</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="preprocessor">#ifdef U_ACTIVE</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%u, u_id, multi_process)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%zu, zu_id, multi_process)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef V_ACTIVE</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%v, v_id, multi_process)</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%zv, zv_id, multi_process)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef W_ACTIVE</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%w, w_id, multi_process)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%zw, zw_id, multi_process)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (current_state%th%active) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%th, th_id, multi_process)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%zth, zth_id, multi_process)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span> (current_state%p%active) <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%p, &amp;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;         p_id, multi_process)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">do</span> i=1,current_state%number_q_fields</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">if</span> (current_state%q(i)%active) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%q(i), q_id, multi_process, i)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <span class="keyword">call </span>write_out_velocity_field(ncid, current_state%local_grid, current_state%zq(i), zq_id, multi_process, i)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_cgraph">
<area shape="rect" title="Will write out all prognostic model fields to the checkpoint. It will work in 1, 2 or 3D depending on..." alt="" coords="5,27,164,83"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a5352203890f60b8b82394b6ef8a05e89" title="Will write out a single velocity field to the checkpoint file. If there are multiple processes then w..." alt="" coords="212,27,371,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="419,35,572,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="634,13,777,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="620,64,791,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="839,5,1005,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a73e6e050a6e9619e701c184208c6f9db_icgraph">
<area shape="rect" title="Will write out all prognostic model fields to the checkpoint. It will work in 1, 2 or 3D depending on..." alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a7342fc51a7d35ca054e51ed7b115b0ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7342fc51a7d35ca054e51ed7b115b0ac">&#9670;&nbsp;</a></span>write_out_global_attributes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_global_attributes </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes out global attributes into the checkpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>NetCDF file id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00097">97</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordtype">integer</span> :: date_values(8)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">call </span>date_and_time(values=date_values)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_att(ncid, nf90_global, title_attribute_key, checkpoint_title))</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_att(ncid, nf90_global, created_attribute_key, trim(conv_to_string(date_values(3)))//<span class="stringliteral">&quot;/&quot;</span>//&amp;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;         trim(conv_to_string(date_values(2)))//<span class="stringliteral">&quot;/&quot;</span>//trim(conv_to_string(date_values(1)))//<span class="stringliteral">&quot; &quot;</span>//trim(conv_to_string(&amp;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;         date_values(5)))// <span class="stringliteral">&quot;:&quot;</span>//trim(conv_to_string(date_values(6)))//<span class="stringliteral">&quot;:&quot;</span>//trim(conv_to_string(date_values(7)))))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_cgraph">
<area shape="rect" title="Writes out global attributes into the checkpoint." alt="" coords="5,61,164,117"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="221,35,374,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab71a7c3fe5681033eabdab1c258a321b" title=" " alt="" coords="212,100,383,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="445,13,587,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="431,64,601,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="649,5,816,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a7342fc51a7d35ca054e51ed7b115b0ac_icgraph">
<area shape="rect" title="Writes out global attributes into the checkpoint." alt="" coords="424,45,583,101"/>
<area shape="rect" href="namespacetest__checkpointer__mod.html#a0b40acc910608810a91708567e216f67" title=" " alt="" coords="218,5,375,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="217,85,376,141"/>
<area shape="rect" href="test__checkpointer_8F90.html#ac066cbcd389adebfd7162022ed08de09" title=" " alt="" coords="5,20,169,47"/>
</map>
</div>

</div>
</div>
<a id="aba9917fd77c4bed7294e70be739be1f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba9917fd77c4bed7294e70be739be1f1">&#9670;&nbsp;</a></span>write_out_grid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_grid </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1global__grid__type.html">global_grid_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will write out the grid to the checkpoint, it will work in 1, 2 or 3D depending on what is in the model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">grid</td><td>The model grid to write out </td></tr>
    <tr><td class="paramname">z_id</td><td>The NetCDF z variable id </td></tr>
    <tr><td class="paramname">y_id</td><td>The NetCDF y variable id </td></tr>
    <tr><td class="paramname">x_id</td><td>The NetCDF x variable id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00251">251</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordtype">type</span>(global_grid_type), <span class="keywordtype">intent(in)</span> :: grid</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">integer</span> :: var_id</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">if</span> (grid%active(z_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keyword">call </span>write_z_grid_gimension(ncid, grid%configuration%vertical)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (grid%active(y_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, y_resolution, var_id))</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%resolution(y_index)))</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, y_top, var_id))</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%top(y_index)))</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, y_bottom, var_id))</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%bottom(y_index)))</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (grid%active(x_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, x_resolution, var_id))</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%resolution(x_index)))</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, x_top, var_id))</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%top(x_index)))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, x_bottom, var_id))</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%bottom(x_index)))</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_cgraph">
<area shape="rect" title="Will write out the grid to the checkpoint, it will work in 1, 2 or 3D depending on what is in the mod..." alt="" coords="5,27,164,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="419,35,572,76"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a91f9eaba02d296874f9ec4cdfe57f154" title="Writes out the Z dimension of the grids_mod points which are explicitly calculated." alt="" coords="212,59,371,115"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="634,13,777,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="620,64,791,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="839,5,1005,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_aba9917fd77c4bed7294e70be739be1f1_icgraph">
<area shape="rect" title="Will write out the grid to the checkpoint, it will work in 1, 2 or 3D depending on what is in the mod..." alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="aa723fdef3f077e77458941c430ef6ed5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa723fdef3f077e77458941c430ef6ed5">&#9670;&nbsp;</a></span>write_out_mean_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_mean_fields </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1global__grid__type.html">global_grid_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00278">278</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordtype">type</span>(global_grid_type), <span class="keywordtype">intent(in)</span> :: grid</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keywordtype">integer</span> :: var_id</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olubar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olubar, var_id))</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olubar))</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olzubar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olzubar, var_id))</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olzubar))</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olvbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olvbar, var_id))</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olvbar))</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="keywordflow">    end if</span>    </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olzvbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olzvbar, var_id))</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olzvbar))</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olthbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olthbar, var_id))</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olthbar))</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olzthbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olzthbar, var_id))</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olzthbar))</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="keywordflow">    end if</span>    </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olqbar, var_id))</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olqbar))</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%olzqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, olzqbar, var_id))</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%olzqbar))</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_cgraph">
<area shape="rect" title=" " alt="" coords="5,27,164,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="212,35,365,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="427,13,570,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="413,64,584,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="632,5,799,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_aa723fdef3f077e77458941c430ef6ed5_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a9a6696ac40ce911ed409836c874ab5e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a6696ac40ce911ed409836c874ab5e3">&#9670;&nbsp;</a></span>write_out_misc_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_misc_variables </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>time_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ugal_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>vgal_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_q_fields_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dtm_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dtm_new_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>absolute_new_dtm_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will dump out (write) misc model data to the checkpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">timestep_id</td><td>The NetCDF timestep variable id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00605">605</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, timestep_id, time_id, ugal_id, vgal_id, number_q_fields_id, &amp;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;         dtm_id, dtm_new_id, absolute_new_dtm_id</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, timestep_id, current_state%timestep))</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    <span class="comment">! The time is incremented with dtm as the model was about to increment for the next step and this is needed for diagnostics</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, time_id, current_state%time+current_state%dtm))</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, ugal_id, current_state%ugal))</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, vgal_id, current_state%vgal))</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, number_q_fields_id, current_state%number_q_fields))</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, dtm_id, current_state%dtm))</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, dtm_new_id, current_state%dtm_new))</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, absolute_new_dtm_id, current_state%absolute_new_dtm))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_cgraph">
<area shape="rect" title="Will dump out (write) misc model data to the checkpoint." alt="" coords="5,27,164,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="212,35,365,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="427,13,570,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="413,64,584,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="632,5,799,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a9a6696ac40ce911ed409836c874ab5e3_icgraph">
<area shape="rect" title="Will dump out (write) misc model data to the checkpoint." alt="" coords="424,45,583,101"/>
<area shape="rect" href="namespacetest__checkpointer__mod.html#a7d9ffd6767cd80e7983b50fdfac42cea" title=" " alt="" coords="218,5,375,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="217,85,376,141"/>
<area shape="rect" href="test__checkpointer_8F90.html#ac066cbcd389adebfd7162022ed08de09" title=" " alt="" coords="5,20,169,47"/>
</map>
</div>

</div>
</div>
<a id="a8384fe30c1e212ba4a767c9f3f343404"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8384fe30c1e212ba4a767c9f3f343404">&#9670;&nbsp;</a></span>write_out_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_options </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>options_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes out the options that the model was run with. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">options_id</td><td>The options NetCDF variable id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00134">134</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, options_id</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span>, <span class="keywordtype">pointer</span> :: sized_raw_character</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: raw_data, raw_to_string</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">do</span> i=1,options_size(current_state%options_database)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      raw_data=&gt; options_value_at(current_state%options_database, i)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      raw_to_string=&gt;raw_data</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, options_id, trim(options_key_at(current_state%options_database, i)), (/ 1, 1, i /)))</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">select type</span> (raw_data)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keywordflow">      type is</span>(integer)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keyword">call </span>check_status(nf90_put_var(ncid, options_id, trim(conv_to_string(raw_data)), (/ 1, 2, i /)))</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keywordflow">      type is</span>(real(kind=single_precision))</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keyword">call </span>check_status(nf90_put_var(ncid, options_id, trim(conv_to_string(raw_data)), (/ 1, 2, i /)))</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keywordflow">      type is</span>(real(kind=double_precision))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keyword">call </span>check_status(nf90_put_var(ncid, options_id, trim(conv_to_string(raw_data)), (/ 1, 2, i /)))</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="keywordflow">      type is</span>(logical)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keyword">call </span>check_status(nf90_put_var(ncid, options_id, trim(conv_to_string(raw_data)), (/ 1, 2, i /)))</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordflow">      type is</span>(<span class="keywordtype">character</span>(len=*))</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">! Done this way to give the character size information and keep the (unsafe) cast in the conversion module</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        sized_raw_character=&gt;conv_to_string(raw_to_string, .false., string_length)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="keyword">call </span>check_status(nf90_put_var(ncid, options_id, trim(sized_raw_character), (/ 1, 2, i /)))</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_cgraph">
<area shape="rect" title="Writes out the options that the model was run with." alt="" coords="5,126,164,182"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="212,35,365,76"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#adc0a6752b379a4967ae7260e4487d049" title="Returns the ith key in the options database." alt="" coords="214,100,363,141"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a7eeb8b8d74d261f80bb0a64db10b22e2" title="Returns the number of entries in the options database." alt="" coords="214,165,363,207"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a2dee7871d510ec8b7e82ff936a59b443" title="Returns the value at index in the database." alt="" coords="214,231,363,272"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="427,13,570,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="413,64,584,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="632,5,799,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a8384fe30c1e212ba4a767c9f3f343404_icgraph">
<area shape="rect" title="Writes out the options that the model was run with." alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a2091b86fc06f2248d0ee75d3ed29974f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2091b86fc06f2248d0ee75d3ed29974f">&#9670;&nbsp;</a></span>write_out_pdf_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_pdf_fields </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1global__grid__type.html">global_grid_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00674">674</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordtype">type</span>(global_grid_type), <span class="keywordtype">intent(in)</span> :: grid</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordtype">integer</span> :: var_id</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%w_up)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, wup, var_id))</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%w_up))</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(grid%configuration%vertical%w_dwn)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, wdwn, var_id))</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, var_id, grid%configuration%vertical%w_dwn))</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_cgraph">
<area shape="rect" title=" " alt="" coords="5,27,164,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="212,35,365,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="427,13,570,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="413,64,584,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="632,5,799,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a2091b86fc06f2248d0ee75d3ed29974f_icgraph">
<area shape="rect" title=" " alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="aa959a8a7dc86c1fd0e72214216f4824d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa959a8a7dc86c1fd0e72214216f4824d">&#9670;&nbsp;</a></span>write_out_q_indices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_q_indices </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>q_indices_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes out the specific Q indicies that are active and need writing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">q_indicies_id</td><td>The Q indicies NetCDF variable id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00113">113</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, q_indices_id</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160; </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">integer</span> :: i, current_index</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordtype">type</span>(q_metadata_type) :: specific_q_data</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160; </div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    current_index=1</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">do</span> i=1, get_max_number_q_indices()</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      specific_q_data=get_indices_descriptor(i)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">if</span> (specific_q_data%l_used) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keyword">call </span>check_status(nf90_put_var(ncid, q_indices_id, trim(specific_q_data%name), (/ 1, 1, current_index /)))</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keyword">call </span>check_status(nf90_put_var(ncid, q_indices_id, trim(conv_to_string(i)), (/ 1, 2, current_index /)))</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        current_index=current_index+1</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="keywordflow">    end do</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_cgraph">
<area shape="rect" title="Writes out the specific Q indicies that are active and need writing." alt="" coords="5,93,164,149"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="218,35,371,76"/>
<area shape="rect" href="namespaceq__indices__mod.html#ae040049b676d2b242c3f199275f5e3b1" title="Retrieves the indicies descriptor at a specific location." alt="" coords="227,100,362,141"/>
<area shape="rect" href="namespaceq__indices__mod.html#a7b1a587d05250868be89f8c4c161a5af" title="Gets the maximum number of Q indicies." alt="" coords="212,165,377,207"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="439,13,582,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="425,64,596,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="644,5,811,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_aa959a8a7dc86c1fd0e72214216f4824d_icgraph">
<area shape="rect" title="Writes out the specific Q indicies that are active and need writing." alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a5352203890f60b8b82394b6ef8a05e89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5352203890f60b8b82394b6ef8a05e89">&#9670;&nbsp;</a></span>write_out_velocity_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_out_velocity_field </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1local__grid__type.html">local_grid_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>local_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structprognostics__mod_1_1prognostic__field__type.html">prognostic_field_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>variable_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>multi_process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>fourth_dim_loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will write out a single velocity field to the checkpoint file. If there are multiple processes then will determine the bounds, otherwise for serial just dump data field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">field</td><td>The model prognostic field to write out </td></tr>
    <tr><td class="paramname">variable_id</td><td>The NetCDF variable dimension id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00208">208</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, variable_id</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordtype">type</span>(prognostic_field_type), <span class="keywordtype">intent(in)</span> :: field</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordtype">type</span>(local_grid_type), <span class="keywordtype">intent(inout)</span> :: local_grid</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: multi_process</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: fourth_dim_loc</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">integer</span> :: start(4), count(4), i, map(4)</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (multi_process .or. <span class="keyword">present</span>(fourth_dim_loc)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">do</span> i=1,3</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">if</span> (i==1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;          map(i)=1</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;          map(i)=map(i-1)*local_grid%size(i-1)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        start(i) = local_grid%start(i)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        count(i) = local_grid%size(i)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(fourth_dim_loc)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        start(4) = fourth_dim_loc</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        count(4) = 1</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        map(4)=map(3)*local_grid%size(3)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, variable_id, field%data(local_grid%local_domain_start_index(z_index):&amp;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;           local_grid%local_domain_end_index(z_index),local_grid%local_domain_start_index(y_index):&amp;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;           local_grid%local_domain_end_index(y_index), local_grid%local_domain_start_index(x_index):&amp;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;           local_grid%local_domain_end_index(x_index)), start=start, count=count))</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keyword">call </span>check_status(nf90_put_var(ncid, variable_id, field%data(local_grid%local_domain_start_index(z_index):&amp;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;           local_grid%local_domain_end_index(z_index),local_grid%local_domain_start_index(y_index):&amp;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;           local_grid%local_domain_end_index(y_index), local_grid%local_domain_start_index(x_index):&amp;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;           local_grid%local_domain_end_index(x_index))))</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_cgraph">
<area shape="rect" title="Will write out a single velocity field to the checkpoint file. If there are multiple processes then w..." alt="" coords="5,27,164,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="212,35,365,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="427,13,570,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="413,64,584,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="632,5,799,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a5352203890f60b8b82394b6ef8a05e89_icgraph">
<area shape="rect" title="Will write out a single velocity field to the checkpoint file. If there are multiple processes then w..." alt="" coords="419,5,577,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a73e6e050a6e9619e701c184208c6f9db" title="Will write out all prognostic model fields to the checkpoint. It will work in 1, 2 or 3D depending on..." alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a91f9eaba02d296874f9ec4cdfe57f154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91f9eaba02d296874f9ec4cdfe57f154">&#9670;&nbsp;</a></span>write_z_grid_gimension()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_write_checkpoint_mod::write_z_grid_gimension </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1vertical__grid__configuration__type.html">vertical_grid_configuration_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>vertical_grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes out the Z dimension of the <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a> points which are explicitly calculated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">verticalGrid</td><td>The vertical grid configuration </td></tr>
    <tr><td class="paramname">z_id</td><td>The NetCDF id of the z field </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00322">322</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">type</span>(vertical_grid_configuration_type), <span class="keywordtype">intent(in)</span> :: vertical_grid</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordtype">integer</span> :: z_var_id, zn_var_id, thref_var_id</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, z_key, z_var_id))</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, z_var_id, vertical_grid%z))</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, zn_key, zn_var_id))</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, zn_var_id, vertical_grid%zn))</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, thref, thref_var_id))</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">call </span>check_status(nf90_put_var(ncid, thref_var_id, vertical_grid%thref))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_cgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_cgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_cgraph" id="anamespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_cgraph">
<area shape="rect" title="Writes out the Z dimension of the grids_mod points which are explicitly calculated." alt="" coords="5,27,164,83"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="212,35,365,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="427,13,570,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="413,64,584,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="632,5,799,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_icgraph.png" border="0" usemap="#anamespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_icgraph" alt=""/></div>
<map name="namespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_icgraph" id="anamespacecheckpointer__write__checkpoint__mod_a91f9eaba02d296874f9ec4cdfe57f154_icgraph">
<area shape="rect" title="Writes out the Z dimension of the grids_mod points which are explicitly calculated." alt="" coords="419,5,577,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#aba9917fd77c4bed7294e70be739be1f1" title="Will write out the grid to the checkpoint, it will work in 1, 2 or 3D depending on what is in the mod..." alt="" coords="212,5,371,61"/>
<area shape="rect" href="namespacecheckpointer__write__checkpoint__mod.html#a08632fad9f022817094703d57bc025d4" title="Will write out the current model state_mod into a NetCDF checkpoint file." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a4ebb515bae6f42943ffaef4a54f4212f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ebb515bae6f42943ffaef4a54f4212f">&#9670;&nbsp;</a></span>checkpoint_title</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character(len=*), parameter checkpointer_write_checkpoint_mod::checkpoint_title = &quot;MONC checkpoint file&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Title of the NetCDF file. </p>

<p class="definition">Definition at line <a class="el" href="writecheckpoint_8F90_source.html#l00031">31</a> of file <a class="el" href="writecheckpoint_8F90_source.html">writecheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">parameter</span> :: CHECKPOINT_TITLE = <span class="stringliteral">&quot;MONC checkpoint file&quot;</span></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
