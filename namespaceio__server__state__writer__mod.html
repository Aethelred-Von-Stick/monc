<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: io_server_state_writer_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">io_server_state_writer_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The IO server state module which will write out the current state of the IO server to a NetCDF file.  
<a href="namespaceio__server__state__writer__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceio__server__state__writer__mod_1_1nc__def__dim.html">nc_def_dim</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISO C binding interface for NetCDF dimension definition, needed to support 64 bit lengths.  <a href="interfaceio__server__state__writer__mod_1_1nc__def__dim.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceio__server__state__writer__mod_1_1nc__def__var.html">nc_def_var</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISO C binding interface for NetCDF define variable, needed to support defining a long scalar variable.  <a href="interfaceio__server__state__writer__mod_1_1nc__def__var.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceio__server__state__writer__mod_1_1nc__put__var1__long.html">nc_put_var1_long</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISO C binding interface for NetCDF put long scalar, needed to support putting longs into file.  <a href="interfaceio__server__state__writer__mod_1_1nc__put__var1__long.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceio__server__state__writer__mod_1_1nc__put__vars__text.html">nc_put_vars_text</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISO C binding interface for NetCDF put variable text, needed to support 64 bit starts, counts and strides.  <a href="interfaceio__server__state__writer__mod_1_1nc__put__vars__text.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceio__server__state__writer__mod_1_1write__field__manager__determine__if__up__to__date.html">write_field_manager_determine_if_up_to_date</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__prepare__to__serialise__state.html">writer_field_manager_prepare_to_serialise_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__serialise__state.html">writer_field_manager_serialise_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:aa969280ae677aaaa78ee93da265284d5"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#aa969280ae677aaaa78ee93da265284d5">set_serialise_write_field_manager_state</a> (serialise_writer_field_manager_state_arg, prepare_to_serialise_writer_field_manager_state_arg, is_write_field_manager_up_to_date_arg)</td></tr>
<tr class="memdesc:aa969280ae677aaaa78ee93da265284d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the procedure to call for serialises the field manager state, this is handled in this manner due to the ordering dependencies between these modules.  <a href="namespaceio__server__state__writer__mod.html#aa969280ae677aaaa78ee93da265284d5">More...</a><br /></td></tr>
<tr class="separator:aa969280ae677aaaa78ee93da265284d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e509705971938355e72b60b80e4a50c"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a2e509705971938355e72b60b80e4a50c">is_io_server_state_writer_ready</a> (timestep)</td></tr>
<tr class="memdesc:a2e509705971938355e72b60b80e4a50c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the IO server state writer is ready (i.e. state is at a specific level for the timestep) @timestep The timestep to check the IO server is up to date with.  <a href="namespaceio__server__state__writer__mod.html#a2e509705971938355e72b60b80e4a50c">More...</a><br /></td></tr>
<tr class="separator:a2e509705971938355e72b60b80e4a50c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac10efaf9ebd3eed8dc0ade5f5f503d2b"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#ac10efaf9ebd3eed8dc0ade5f5f503d2b">prepare_io_server_state_storage</a> (io_configuration, writer_entries, time_points)</td></tr>
<tr class="memdesc:ac10efaf9ebd3eed8dc0ade5f5f503d2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will determine the size of the package for different facets of the IO server state and kick off non-blocking collective calls to aggregate the sizes on each IO server process which is needed for the NetCDF dimension sizing and location in this. Note that during this certain locks are issued to ensure sizes don't change between this and physical packaging.  <a href="namespaceio__server__state__writer__mod.html#ac10efaf9ebd3eed8dc0ade5f5f503d2b">More...</a><br /></td></tr>
<tr class="separator:ac10efaf9ebd3eed8dc0ade5f5f503d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe03a4b52220f75e323695208c28dd23"><td class="memItemLeft" align="right" valign="top">integer(kind=8) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#afe03a4b52220f75e323695208c28dd23">prepare_to_serialise_writer_entries_time_points</a> (time_points)</td></tr>
<tr class="memdesc:afe03a4b52220f75e323695208c28dd23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares to serialise the writer entry time points.  <a href="namespaceio__server__state__writer__mod.html#afe03a4b52220f75e323695208c28dd23">More...</a><br /></td></tr>
<tr class="separator:afe03a4b52220f75e323695208c28dd23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd94d228a13199b6665d1fdd4ed2f043"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#afd94d228a13199b6665d1fdd4ed2f043">serialise_writer_entries_time_points</a> (time_points, byte_data)</td></tr>
<tr class="memdesc:afd94d228a13199b6665d1fdd4ed2f043"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialises the writer entry time points which are held in a hashmap.  <a href="namespaceio__server__state__writer__mod.html#afd94d228a13199b6665d1fdd4ed2f043">More...</a><br /></td></tr>
<tr class="separator:afd94d228a13199b6665d1fdd4ed2f043"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52442fc6df103bdee12c9d95cc9a9a73"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a52442fc6df103bdee12c9d95cc9a9a73">define_io_server_state_contributions</a> (io_configuration, writer_entries, time_points, netcdf_file)</td></tr>
<tr class="memdesc:a52442fc6df103bdee12c9d95cc9a9a73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the dimensions and variables in a NetCDF file that consitute the IO server current state. This will call out to prepare all IO state for storage (determines the size of each byte code and issues locks for consistency.)  <a href="namespaceio__server__state__writer__mod.html#a52442fc6df103bdee12c9d95cc9a9a73">More...</a><br /></td></tr>
<tr class="separator:a52442fc6df103bdee12c9d95cc9a9a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb9318bbaa968f84db7a18afa572b4a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a0bb9318bbaa968f84db7a18afa572b4a">define_state_storage</a> (netcdf_file, entries_directory_dim_id, base_key, expected_global_entries)</td></tr>
<tr class="memdesc:a0bb9318bbaa968f84db7a18afa572b4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines some state storate for a specific facet of the IO server. This creates the directory (location for each IO server where to load their data), the dimension and the variable. Note this uses the ISO C bindings to NetCDF to support 64 bit dimension and field lengths.  <a href="namespaceio__server__state__writer__mod.html#a0bb9318bbaa968f84db7a18afa572b4a">More...</a><br /></td></tr>
<tr class="separator:a0bb9318bbaa968f84db7a18afa572b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f99dece53eb5c51cf1fcbd384ea7d08"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a6f99dece53eb5c51cf1fcbd384ea7d08">write_io_server_state</a> (io_configuration, writer_entries, time_points, netcdf_file)</td></tr>
<tr class="memdesc:a6f99dece53eb5c51cf1fcbd384ea7d08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packags up and writes the actual IO server state into the NetCDF file. The act of serialisation will effectively unlock the IO server state locks that were issued in the preparation call (this is to ensure consistency between reported size and actual size when it comes time to package up.)  <a href="namespaceio__server__state__writer__mod.html#a6f99dece53eb5c51cf1fcbd384ea7d08">More...</a><br /></td></tr>
<tr class="separator:a6f99dece53eb5c51cf1fcbd384ea7d08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3dc548945ef0bd31291214d13c4355b"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#af3dc548945ef0bd31291214d13c4355b">write_state_storage</a> (netcdf_file, writer_entry_start_point, my_io_rank, base_key, raw_byte_code)</td></tr>
<tr class="memdesc:af3dc548945ef0bd31291214d13c4355b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes out the state for a specific facet into the NetCDF file. Note that this uses the ISO C bindings into NetCDF to support 64 bit counts, starts and strides.  <a href="namespaceio__server__state__writer__mod.html#af3dc548945ef0bd31291214d13c4355b">More...</a><br /></td></tr>
<tr class="separator:af3dc548945ef0bd31291214d13c4355b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acfc0ec9c8a68001eddc539687b247fc2"><td class="memItemLeft" align="right" valign="top">character, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#acfc0ec9c8a68001eddc539687b247fc2">serialised_writer_entries</a></td></tr>
<tr class="separator:acfc0ec9c8a68001eddc539687b247fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2787a135358a5a3404029e703063ac8"><td class="memItemLeft" align="right" valign="top">character, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#ad2787a135358a5a3404029e703063ac8">serialised_timeaveraged_manipulation_state</a></td></tr>
<tr class="separator:ad2787a135358a5a3404029e703063ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeae70d0ea81a140f97f3617b396b2a81"><td class="memItemLeft" align="right" valign="top">character, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#aeae70d0ea81a140f97f3617b396b2a81">serialised_instantaneous_manipulation_state</a></td></tr>
<tr class="separator:aeae70d0ea81a140f97f3617b396b2a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ebf453a2e3b038c5af75daa76c0227"><td class="memItemLeft" align="right" valign="top">character, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#aa2ebf453a2e3b038c5af75daa76c0227">serialised_writer_field_manager_state</a></td></tr>
<tr class="separator:aa2ebf453a2e3b038c5af75daa76c0227"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013afb10f35dd21cc495d603f98e121a"><td class="memItemLeft" align="right" valign="top">character, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a013afb10f35dd21cc495d603f98e121a">serialised_writer_entries_time_points</a></td></tr>
<tr class="separator:a013afb10f35dd21cc495d603f98e121a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d811843081b21fb615ddb8cf284a48"><td class="memItemLeft" align="right" valign="top">integer(kind=8), dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a11d811843081b21fb615ddb8cf284a48">global_writer_entry_byte_size</a></td></tr>
<tr class="separator:a11d811843081b21fb615ddb8cf284a48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9850ce08ff11c192f86977c29cb53df4"><td class="memItemLeft" align="right" valign="top">integer(kind=8), dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a9850ce08ff11c192f86977c29cb53df4">my_writer_entry_start_point</a></td></tr>
<tr class="separator:a9850ce08ff11c192f86977c29cb53df4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7322f3b9094d6d35c22989161724cd1b"><td class="memItemLeft" align="right" valign="top">integer(kind=8), dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#a7322f3b9094d6d35c22989161724cd1b">local_writer_entry_byte_size</a></td></tr>
<tr class="separator:a7322f3b9094d6d35c22989161724cd1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7fbf015c2ab07d5e9af2331337c278a"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#af7fbf015c2ab07d5e9af2331337c278a">global_writer_entry_byte_size_request</a></td></tr>
<tr class="separator:af7fbf015c2ab07d5e9af2331337c278a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeee3b185d8d08862fa085f9cbba14d6"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#adeee3b185d8d08862fa085f9cbba14d6">my_writer_entry_start_request</a></td></tr>
<tr class="separator:adeee3b185d8d08862fa085f9cbba14d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade94673a6f0c2638c4cddaf294ba6e41"><td class="memItemLeft" align="right" valign="top">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__serialise__state.html">writer_field_manager_serialise_state</a>), pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#ade94673a6f0c2638c4cddaf294ba6e41">serialise_writer_field_manager_state</a></td></tr>
<tr class="separator:ade94673a6f0c2638c4cddaf294ba6e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af04c5b4f6a4e5aa6a0ae771e655933d7"><td class="memItemLeft" align="right" valign="top">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__prepare__to__serialise__state.html">writer_field_manager_prepare_to_serialise_state</a>), pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#af04c5b4f6a4e5aa6a0ae771e655933d7">prepare_to_serialise_writer_field_manager_state</a></td></tr>
<tr class="separator:af04c5b4f6a4e5aa6a0ae771e655933d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66ca786ff981f2c759ef0fa9edae264"><td class="memItemLeft" align="right" valign="top">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1write__field__manager__determine__if__up__to__date.html">write_field_manager_determine_if_up_to_date</a>), pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceio__server__state__writer__mod.html#ad66ca786ff981f2c759ef0fa9edae264">is_write_field_manager_up_to_date</a></td></tr>
<tr class="separator:ad66ca786ff981f2c759ef0fa9edae264"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The IO server state module which will write out the current state of the IO server to a NetCDF file. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a52442fc6df103bdee12c9d95cc9a9a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52442fc6df103bdee12c9d95cc9a9a73">&#9670;&nbsp;</a></span>define_io_server_state_contributions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public io_server_state_writer_mod::define_io_server_state_contributions </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structwriter__types__mod_1_1writer__type.html">writer_type</a>), dimension(:), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>writer_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>time_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structwriter__types__mod_1_1netcdf__diagnostics__type.html">netcdf_diagnostics_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>netcdf_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Defines the dimensions and variables in a NetCDF file that consitute the IO server current state. This will call out to prepare all IO state for storage (determines the size of each byte code and issues locks for consistency.) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>IO server configuration </td></tr>
    <tr><td class="paramname">netcdf_file</td><td>The NetCDF file state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00213">213</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">type</span>(writer_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: writer_entries</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">intent(inout)</span> :: time_points</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordtype">type</span>(netcdf_diagnostics_type), <span class="keywordtype">intent(inout)</span> :: netcdf_file</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordtype">integer</span> :: ncdf_dimid, ncdf_varid, current_index, i</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: byte</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160; </div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="keyword">call </span>prepare_io_server_state_storage(io_configuration, writer_entries, time_points)</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    </div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keyword">call </span>lock_mpi()    </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nf90_def_dim(netcdf_file%ncid, <span class="stringliteral">&quot;io_configuration_dim&quot;</span>, &amp;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <span class="keyword">size</span>(io_configuration%text_configuration), ncdf_dimid))</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">call </span>c_put_integer(netcdf_file%dimension_to_id, <span class="stringliteral">&quot;io_configuration_dim&quot;</span>, ncdf_dimid)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nf90_def_var(netcdf_file%ncid, <span class="stringliteral">&quot;io_configuration&quot;</span>, nf90_char, ncdf_dimid, ncdf_varid))</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">call </span>c_put_integer(netcdf_file%variable_to_id, <span class="stringliteral">&quot;io_configuration&quot;</span>, ncdf_varid)</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160; </div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nf90_def_dim(netcdf_file%ncid, <span class="stringliteral">&quot;entries_directory_dim&quot;</span>, io_configuration%number_of_io_servers, &amp;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         ncdf_dimid))</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">call </span>unlock_mpi()</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">call </span>c_put_integer(netcdf_file%dimension_to_id, <span class="stringliteral">&quot;entries_directory_dim&quot;</span>, ncdf_dimid)</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160; </div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keyword">call </span>wait_for_mpi_request(global_writer_entry_byte_size_request)</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    current_index=1</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(writer_entries)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">if</span> (writer_entries(i)%include_in_io_state_write) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keyword">call </span>define_state_storage(netcdf_file, ncdf_dimid, <span class="stringliteral">&quot;serialised_writer_entry_&quot;</span>//trim(conv_to_string(i)), &amp;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;             global_writer_entry_byte_size(current_index))</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        current_index=current_index+1</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keywordflow">    end do</span>        </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keyword">call </span>define_state_storage(netcdf_file, ncdf_dimid, <span class="stringliteral">&quot;serialised_timeaveraged_manipulation&quot;</span>, &amp;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         global_writer_entry_byte_size(current_index))</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keyword">call </span>define_state_storage(netcdf_file, ncdf_dimid, <span class="stringliteral">&quot;serialised_instantaneous_manipulation&quot;</span>, &amp;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         global_writer_entry_byte_size(current_index+1))</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keyword">call </span>define_state_storage(netcdf_file, ncdf_dimid, <span class="stringliteral">&quot;serialised_writer_manager&quot;</span>, global_writer_entry_byte_size(current_index+2))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keyword">call </span>define_state_storage(netcdf_file, ncdf_dimid, <span class="stringliteral">&quot;serialised_timepoints&quot;</span>, global_writer_entry_byte_size(current_index+3))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_cgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_cgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_cgraph" id="anamespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_cgraph">
<area shape="rect" title="Defines the dimensions and variables in a NetCDF file that consitute the IO server current state...." alt="" coords="5,122,160,178"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="462,17,629,59"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#a0bb9318bbaa968f84db7a18afa572b4a" title="Defines some state storate for a specific facet of the IO server. This creates the directory (locatio..." alt="" coords="208,41,388,83"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="460,83,631,124"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="460,213,631,255"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#ac10efaf9ebd3eed8dc0ade5f5f503d2b" title="Will determine the size of the package for different facets of the IO server state and kick off non&#45;b..." alt="" coords="217,278,379,334"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="213,159,383,200"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="985,90,1127,117"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1209,83,1375,124"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="735,145,889,187"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="731,80,893,121"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="731,213,893,255"/>
<area shape="rect" href="namespaceinstantaneous__time__manipulation__mod.html#ab6d7b0d3d29ee9e9553fbe969df77953" title="Prepares to serialise the instantaneous state, both determines the byte storage size and issues any l..." alt="" coords="436,278,655,334"/>
<area shape="rect" href="namespacetimeaveraged__time__manipulation__mod.html#a4179676e0a2de676c2291590d2c0730e" title="Prepares to serialise the time averaged state values. Both determines the storage size required and a..." alt="" coords="439,358,651,414"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#afe03a4b52220f75e323695208c28dd23" title="Prepares to serialise the writer entry time points." alt="" coords="455,438,636,494"/>
<area shape="rect" href="namespacewriter__types__mod.html#a35d2a93e9bd3dabba1dd70a9f757e9a0" title="Prepares to serialise the writer type by issuing locks and determining the size of serialised bytes n..." alt="" coords="459,517,632,559"/>
<area shape="rect" href="namespacetimeaveraged__time__manipulation__mod.html#a165774be890acb676411ddb69a06a79a" title="Prepares to serialise a time averaged completed value, both determines the storage size and also issu..." alt="" coords="703,358,921,414"/>
<area shape="rect" href="namespacewriter__types__mod.html#ab32d8c52b1de472472a1a3e7f6d550c9" title="Prepares to serialise a specific writer field, both determines the data size and issues any locks." alt="" coords="715,517,909,559"/>
<area shape="rect" href="namespacewriter__types__mod.html#a4c254cb13c3ced319ddba80cb6ebac88" title="Prepares to serialise a specific collective value, both determines the required byte storate size and..." alt="" coords="969,542,1143,598"/>
<area shape="rect" href="namespacewriter__types__mod.html#aa4c1edaaebbfa64ad4dc2a09632cefba" title="Prepares to serialise a specific data values type, both determines the byte size required and also is..." alt="" coords="1191,516,1393,557"/>
<area shape="rect" href="namespacewriter__types__mod.html#a09de0017a289827e5b114043878ee8b2" title="Prepares a map for serialisation, both determines the size of storage required and also issues any lo..." alt="" coords="1441,516,1615,557"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="452,148,639,189"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_icgraph" id="anamespaceio__server__state__writer__mod_a52442fc6df103bdee12c9d95cc9a9a73_icgraph">
<area shape="rect" title="Defines the dimensions and variables in a NetCDF file that consitute the IO server current state...." alt="" coords="239,5,393,61"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#ab90e4b2c185d22faacd6f23c39bd9449" title="Stores the IO server state in the NetCDF file." alt="" coords="5,13,191,54"/>
</map>
</div>

</div>
</div>
<a id="a0bb9318bbaa968f84db7a18afa572b4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb9318bbaa968f84db7a18afa572b4a">&#9670;&nbsp;</a></span>define_state_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine io_server_state_writer_mod::define_state_storage </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structwriter__types__mod_1_1netcdf__diagnostics__type.html">netcdf_diagnostics_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>netcdf_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>entries_directory_dim_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>base_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind=8), intent(in)&#160;</td>
          <td class="paramname"><em>expected_global_entries</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines some state storate for a specific facet of the IO server. This creates the directory (location for each IO server where to load their data), the dimension and the variable. Note this uses the ISO C bindings to NetCDF to support 64 bit dimension and field lengths. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">netcdf_file</td><td>The NetCDF file state </td></tr>
    <tr><td class="paramname">entries_directory_dim_id</td><td>NetCDF dimension ID for the directory entries </td></tr>
    <tr><td class="paramname">base_key</td><td>The base key for this storage </td></tr>
    <tr><td class="paramname">expected_global_entries</td><td>The number of expected global entries that will be stored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00263">263</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordtype">type</span>(netcdf_diagnostics_type), <span class="keywordtype">intent(inout)</span> :: netcdf_file</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: entries_directory_dim_id</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">integer(kind=8)</span>, <span class="keywordtype">intent(in)</span> :: expected_global_entries</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: base_key</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordtype">integer</span> :: ncdf_varid</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">integer</span> :: ncdf_dimid</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">integer(kind=c_int)</span> :: cncid, cdimid, cvarid, cxtype, cnvdims</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordtype">integer(kind=c_int)</span> :: cvdims(1)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    cncid = netcdf_file%ncid</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    cnvdims=1</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    cvdims(1)=entries_directory_dim_id-1</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    cxtype=10 <span class="comment">! NC_INT64 type, note that this is signed as Fortran doesn&#39;t really like unsigned integers</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">call </span>lock_mpi()</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nc_def_var(cncid, trim(base_key)//<span class="stringliteral">&quot;_directory&quot;</span>//c_null_char, cxtype, &amp;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         cnvdims, cvdims, cvarid))</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    ncdf_varid=cvarid+1</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">call </span>c_put_integer(netcdf_file%variable_to_id, trim(base_key)//<span class="stringliteral">&quot;_directory&quot;</span>, ncdf_varid)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nc_def_dim(cncid, trim(base_key)//<span class="stringliteral">&quot;_dim&quot;</span>//c_null_char, &amp;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;         int(expected_global_entries, c_size_t), cdimid))</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    ncdf_dimid=cdimid+1</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">call </span>c_put_integer(netcdf_file%dimension_to_id,  trim(base_key)//<span class="stringliteral">&quot;_dim&quot;</span>, ncdf_dimid)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nf90_def_var(netcdf_file%ncid, trim(base_key), nf90_char, ncdf_dimid, ncdf_varid))</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keyword">call </span>c_put_integer(netcdf_file%variable_to_id, trim(base_key), ncdf_varid)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keyword">call </span>unlock_mpi()</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_cgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_cgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_cgraph" id="anamespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_cgraph">
<area shape="rect" title="Defines some state storate for a specific facet of the IO server. This creates the directory (locatio..." alt="" coords="5,71,185,112"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="235,5,402,47"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="233,71,404,112"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="233,136,404,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="663,75,805,102"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="853,68,1020,109"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="456,129,611,171"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="452,64,615,105"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="452,195,615,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_icgraph" id="anamespaceio__server__state__writer__mod_a0bb9318bbaa968f84db7a18afa572b4a_icgraph">
<area shape="rect" title="Defines some state storate for a specific facet of the IO server. This creates the directory (locatio..." alt="" coords="441,13,621,54"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#a52442fc6df103bdee12c9d95cc9a9a73" title="Defines the dimensions and variables in a NetCDF file that consitute the IO server current state...." alt="" coords="239,5,393,61"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#ab90e4b2c185d22faacd6f23c39bd9449" title="Stores the IO server state in the NetCDF file." alt="" coords="5,13,191,54"/>
</map>
</div>

</div>
</div>
<a id="a2e509705971938355e72b60b80e4a50c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e509705971938355e72b60b80e4a50c">&#9670;&nbsp;</a></span>is_io_server_state_writer_ready()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public io_server_state_writer_mod::is_io_server_state_writer_ready </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the IO server state writer is ready (i.e. state is at a specific level for the timestep) @timestep The timestep to check the IO server is up to date with. </p>
<dl class="section return"><dt>Returns</dt><dd>Whether the IO server is ready or not </dd></dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00122">122</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    is_io_server_state_writer_ready=is_write_field_manager_up_to_date(timestep)</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac10efaf9ebd3eed8dc0ade5f5f503d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac10efaf9ebd3eed8dc0ade5f5f503d2b">&#9670;&nbsp;</a></span>prepare_io_server_state_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine io_server_state_writer_mod::prepare_io_server_state_storage </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structwriter__types__mod_1_1writer__type.html">writer_type</a>), dimension(:), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>writer_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>time_points</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will determine the size of the package for different facets of the IO server state and kick off non-blocking collective calls to aggregate the sizes on each IO server process which is needed for the NetCDF dimension sizing and location in this. Note that during this certain locks are issued to ensure sizes don't change between this and physical packaging. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>IO server configuration </td></tr>
    <tr><td class="paramname">writer_entries</td><td>The writer entries that we are going to store </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00133">133</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">type</span>(writer_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: writer_entries</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">intent(inout)</span> :: time_points</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160; </div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">integer</span> :: i, current_data_point, number_writer_entries_included, ierr, current_index</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: dvt_byte_data, temp</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    number_writer_entries_included=0</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(writer_entries)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keywordflow">if</span> (writer_entries(i)%include_in_io_state_write) number_writer_entries_included=number_writer_entries_included+1</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">allocate</span>(local_writer_entry_byte_size(number_writer_entries_included+4), &amp;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         global_writer_entry_byte_size(number_writer_entries_included+4), &amp;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         my_writer_entry_start_point(number_writer_entries_included+4))</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    current_index=1</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(writer_entries)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="keywordflow">if</span> (writer_entries(i)%include_in_io_state_write) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        local_writer_entry_byte_size(current_index)=prepare_to_serialise_writer_type(writer_entries(i))</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        current_index=current_index+1</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    local_writer_entry_byte_size(current_index)=prepare_to_serialise_time_averaged_state()</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    local_writer_entry_byte_size(current_index+1)=prepare_to_serialise_instantaneous_state()</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    local_writer_entry_byte_size(current_index+2)=prepare_to_serialise_writer_field_manager_state()</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    local_writer_entry_byte_size(current_index+3)=prepare_to_serialise_writer_entries_time_points(time_points)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    </div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    global_writer_entry_byte_size=local_writer_entry_byte_size</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    my_writer_entry_start_point=local_writer_entry_byte_size</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">call </span>lock_mpi()</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keyword">call </span>mpi_iallreduce(mpi_in_place, global_writer_entry_byte_size, <span class="keyword">size</span>(global_writer_entry_byte_size), mpi_long_long_int, &amp;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;         mpi_sum, io_configuration%io_communicator, global_writer_entry_byte_size_request, ierr)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keyword">call </span>mpi_iscan(mpi_in_place, my_writer_entry_start_point, <span class="keyword">size</span>(my_writer_entry_start_point), mpi_long_long_int, &amp;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;         mpi_sum, io_configuration%io_communicator, my_writer_entry_start_request, ierr)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keyword">call </span>unlock_mpi()</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_cgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_cgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_cgraph" id="anamespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_cgraph">
<area shape="rect" title="Will determine the size of the package for different facets of the IO server state and kick off non&#45;b..." alt="" coords="5,207,168,263"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="240,103,411,144"/>
<area shape="rect" href="namespaceinstantaneous__time__manipulation__mod.html#ab6d7b0d3d29ee9e9553fbe969df77953" title="Prepares to serialise the instantaneous state, both determines the byte storage size and issues any l..." alt="" coords="216,167,435,223"/>
<area shape="rect" href="namespacetimeaveraged__time__manipulation__mod.html#a4179676e0a2de676c2291590d2c0730e" title="Prepares to serialise the time averaged state values. Both determines the storage size required and a..." alt="" coords="219,247,431,303"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#afe03a4b52220f75e323695208c28dd23" title="Prepares to serialise the writer entry time points." alt="" coords="235,327,416,383"/>
<area shape="rect" href="namespacewriter__types__mod.html#a35d2a93e9bd3dabba1dd70a9f757e9a0" title="Prepares to serialise the writer type by issuing locks and determining the size of serialised bytes n..." alt="" coords="239,407,412,448"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="240,37,411,79"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="515,71,669,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="511,136,673,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="765,78,907,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="989,71,1155,112"/>
<area shape="rect" href="namespacetimeaveraged__time__manipulation__mod.html#a165774be890acb676411ddb69a06a79a" title="Prepares to serialise a time averaged completed value, both determines the storage size and also issu..." alt="" coords="483,247,701,303"/>
<area shape="rect" href="namespacewriter__types__mod.html#ab32d8c52b1de472472a1a3e7f6d550c9" title="Prepares to serialise a specific writer field, both determines the data size and issues any locks." alt="" coords="495,407,689,448"/>
<area shape="rect" href="namespacewriter__types__mod.html#a4c254cb13c3ced319ddba80cb6ebac88" title="Prepares to serialise a specific collective value, both determines the required byte storate size and..." alt="" coords="749,431,923,487"/>
<area shape="rect" href="namespacewriter__types__mod.html#aa4c1edaaebbfa64ad4dc2a09632cefba" title="Prepares to serialise a specific data values type, both determines the byte size required and also is..." alt="" coords="971,405,1173,447"/>
<area shape="rect" href="namespacewriter__types__mod.html#a09de0017a289827e5b114043878ee8b2" title="Prepares a map for serialisation, both determines the size of storage required and also issues any lo..." alt="" coords="1221,405,1395,447"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="511,5,673,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_icgraph" id="anamespaceio__server__state__writer__mod_ac10efaf9ebd3eed8dc0ade5f5f503d2b_icgraph">
<area shape="rect" title="Will determine the size of the package for different facets of the IO server state and kick off non&#45;b..." alt="" coords="441,5,604,61"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#a52442fc6df103bdee12c9d95cc9a9a73" title="Defines the dimensions and variables in a NetCDF file that consitute the IO server current state...." alt="" coords="239,5,393,61"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#ab90e4b2c185d22faacd6f23c39bd9449" title="Stores the IO server state in the NetCDF file." alt="" coords="5,13,191,54"/>
</map>
</div>

</div>
</div>
<a id="afe03a4b52220f75e323695208c28dd23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe03a4b52220f75e323695208c28dd23">&#9670;&nbsp;</a></span>prepare_to_serialise_writer_entries_time_points()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind=8) function io_server_state_writer_mod::prepare_to_serialise_writer_entries_time_points </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>time_points</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepares to serialise the writer entry time points. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time_points</td><td>Hashmap of the timepoints that will need to be serialised </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The byte size required for this serialisation </dd></dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00176">176</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">intent(inout)</span> :: time_points</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>) :: r_value</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160; </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    prepare_to_serialise_writer_entries_time_points=kind(prepare_to_serialise_writer_entries_time_points) + &amp;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         ((kind(prepare_to_serialise_writer_entries_time_points) + kind(r_value)) * c_size(time_points))</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_afe03a4b52220f75e323695208c28dd23_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_afe03a4b52220f75e323695208c28dd23_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_afe03a4b52220f75e323695208c28dd23_icgraph" id="anamespaceio__server__state__writer__mod_afe03a4b52220f75e323695208c28dd23_icgraph">
<area shape="rect" title="Prepares to serialise the writer entry time points." alt="" coords="652,5,833,61"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#ac10efaf9ebd3eed8dc0ade5f5f503d2b" title="Will determine the size of the package for different facets of the IO server state and kick off non&#45;b..." alt="" coords="441,5,604,61"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#a52442fc6df103bdee12c9d95cc9a9a73" title="Defines the dimensions and variables in a NetCDF file that consitute the IO server current state...." alt="" coords="239,5,393,61"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#ab90e4b2c185d22faacd6f23c39bd9449" title="Stores the IO server state in the NetCDF file." alt="" coords="5,13,191,54"/>
</map>
</div>

</div>
</div>
<a id="afd94d228a13199b6665d1fdd4ed2f043"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd94d228a13199b6665d1fdd4ed2f043">&#9670;&nbsp;</a></span>serialise_writer_entries_time_points()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine io_server_state_writer_mod::serialise_writer_entries_time_points </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>time_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout), allocatable&#160;</td>
          <td class="paramname"><em>byte_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serialises the writer entry time points which are held in a hashmap. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time_points</td><td>The input time points which are to be serialised </td></tr>
    <tr><td class="paramname">byte_data</td><td>Allocated byte data which will hold the serialised values </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00188">188</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">intent(inout)</span> :: time_points</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span> :: byte_data</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">integer</span> :: key, current_data_point</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: map_entry</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>) :: r_value</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    current_data_point=1</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    current_data_point=pack_scalar_field(byte_data, current_data_point, c_size(time_points))</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    iterator=c_get_iterator(time_points)</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      map_entry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      key=conv_to_integer(map_entry%key)</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      r_value=c_get_real(map_entry)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      current_data_point=pack_scalar_field(byte_data, current_data_point, key)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      current_data_point=pack_scalar_field(byte_data, current_data_point, double_real_value=r_value)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keywordflow">    end do</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_cgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_cgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_cgraph" id="anamespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_cgraph">
<area shape="rect" title="Serialises the writer entry time points which are held in a hashmap." alt="" coords="5,5,156,61"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="204,13,349,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_icgraph" id="anamespaceio__server__state__writer__mod_afd94d228a13199b6665d1fdd4ed2f043_icgraph">
<area shape="rect" title="Serialises the writer entry time points which are held in a hashmap." alt="" coords="471,5,621,61"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#a6f99dece53eb5c51cf1fcbd384ea7d08" title="Packags up and writes the actual IO server state into the NetCDF file. The act of serialisation will ..." alt="" coords="239,13,423,54"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#ab90e4b2c185d22faacd6f23c39bd9449" title="Stores the IO server state in the NetCDF file." alt="" coords="5,13,191,54"/>
</map>
</div>

</div>
</div>
<a id="aa969280ae677aaaa78ee93da265284d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa969280ae677aaaa78ee93da265284d5">&#9670;&nbsp;</a></span>set_serialise_write_field_manager_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public io_server_state_writer_mod::set_serialise_write_field_manager_state </td>
          <td>(</td>
          <td class="paramtype">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__serialise__state.html">writer_field_manager_serialise_state</a>)&#160;</td>
          <td class="paramname"><em>serialise_writer_field_manager_state_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__prepare__to__serialise__state.html">writer_field_manager_prepare_to_serialise_state</a>)&#160;</td>
          <td class="paramname"><em>prepare_to_serialise_writer_field_manager_state_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1write__field__manager__determine__if__up__to__date.html">write_field_manager_determine_if_up_to_date</a>)&#160;</td>
          <td class="paramname"><em>is_write_field_manager_up_to_date_arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the procedure to call for serialises the field manager state, this is handled in this manner due to the ordering dependencies between these modules. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serialise_writer_field_manager_state_arg</td><td>The procedure to call for serialising the field manager state </td></tr>
    <tr><td class="paramname">prepare_to_serialise_writer_field_manager_state_arg</td><td>Preparation of field manager state procedure </td></tr>
    <tr><td class="paramname">is_write_field_manager_up_to_date_arg</td><td>Procedure to determine whether field manager is up to date </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00101">101</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">procedure</span>(writer_field_manager_serialise_state) :: serialise_writer_field_manager_state_arg</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">procedure</span>(writer_field_manager_prepare_to_serialise_state) :: prepare_to_serialise_writer_field_manager_state_arg</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordtype">procedure</span>(write_field_manager_determine_if_up_to_date) :: is_write_field_manager_up_to_date_arg</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordtype">integer(kind=c_size_t)</span> :: size_t_test</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    serialise_writer_field_manager_state=&gt;serialise_writer_field_manager_state_arg</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    prepare_to_serialise_writer_field_manager_state=&gt;prepare_to_serialise_writer_field_manager_state_arg</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    is_write_field_manager_up_to_date=&gt;is_write_field_manager_up_to_date_arg</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (c_sizeof(size_t_test) .lt. 8) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">log_master_log</a>(<a class="code" href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">log_warn</a>, &amp;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;           <span class="stringliteral">&quot;Your system&#39;s size_t is not 64 bit, this will limit the size of IO server state storage to 4GB&quot;</span>)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_cgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_cgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_cgraph" id="anamespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_cgraph">
<area shape="rect" title="Sets the procedure to call for serialises the field manager state, this is handled in this manner due..." alt="" coords="5,5,173,61"/>
<area shape="rect" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20" title="Will log just from the master process." alt="" coords="221,20,411,47"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="459,20,601,47"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="649,13,816,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_icgraph" id="anamespaceio__server__state__writer__mod_aa969280ae677aaaa78ee93da265284d5_icgraph">
<area shape="rect" title="Sets the procedure to call for serialises the field manager state, this is handled in this manner due..." alt="" coords="439,5,607,61"/>
<area shape="rect" href="namespacewriter__field__manager__mod.html#a061c34fe0697d9639defd2f0926e2e74" title="Initialises the writer field manager." alt="" coords="244,5,391,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,20,196,47"/>
</map>
</div>

</div>
</div>
<a id="a6f99dece53eb5c51cf1fcbd384ea7d08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f99dece53eb5c51cf1fcbd384ea7d08">&#9670;&nbsp;</a></span>write_io_server_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public io_server_state_writer_mod::write_io_server_state </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structwriter__types__mod_1_1writer__type.html">writer_type</a>), dimension(:), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>writer_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout), volatile&#160;</td>
          <td class="paramname"><em>time_points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structwriter__types__mod_1_1netcdf__diagnostics__type.html">netcdf_diagnostics_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>netcdf_file</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packags up and writes the actual IO server state into the NetCDF file. The act of serialisation will effectively unlock the IO server state locks that were issued in the preparation call (this is to ensure consistency between reported size and actual size when it comes time to package up.) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>IO server configuration </td></tr>
    <tr><td class="paramname">writer_entries</td><td>The writer types which need to be serialised </td></tr>
    <tr><td class="paramname">time_points</td><td>The time points that need to be serialised </td></tr>
    <tr><td class="paramname">netcdf_file</td><td>The NetCDF file state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00302">302</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="keywordtype">type</span>(writer_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: writer_entries</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">intent(inout)</span> :: time_points</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">type</span>(netcdf_diagnostics_type), <span class="keywordtype">intent(inout)</span> :: netcdf_file</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160; </div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">integer</span> :: field_id, var_id, current_index, i</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: serialised_bytes</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    field_id=c_get_integer(netcdf_file%variable_to_id, <span class="stringliteral">&quot;io_configuration&quot;</span>)</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (io_configuration%my_io_rank == 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keyword">call </span>lock_mpi()</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keyword">call </span>check_netcdf_status(nf90_put_var(netcdf_file%ncid, field_id, io_configuration%text_configuration, &amp;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;           count=(/<span class="keyword">size</span>(io_configuration%text_configuration)/)))</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      <span class="keyword">call </span>unlock_mpi()</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">call </span>wait_for_mpi_request(my_writer_entry_start_request)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    current_index=1</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(writer_entries)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      <span class="keywordflow">if</span> (writer_entries(i)%include_in_io_state_write) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        <span class="keyword">allocate</span>(serialised_bytes(local_writer_entry_byte_size(current_index)))</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keyword">call </span>serialise_writer_type(writer_entries(i), serialised_bytes)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keyword">call </span>write_state_storage(netcdf_file, my_writer_entry_start_point(current_index), io_configuration%my_io_rank, &amp;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;             <span class="stringliteral">&quot;serialised_writer_entry_&quot;</span>//trim(conv_to_string(i)), serialised_bytes)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        <span class="keyword">deallocate</span>(serialised_bytes)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        current_index=current_index+1</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">allocate</span>(serialised_bytes(local_writer_entry_byte_size(current_index)))</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keyword">call </span>serialise_time_averaged_state(serialised_bytes)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keyword">call </span>write_state_storage(netcdf_file, my_writer_entry_start_point(current_index), io_configuration%my_io_rank, &amp;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         <span class="stringliteral">&quot;serialised_timeaveraged_manipulation&quot;</span>, serialised_bytes)</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keyword">deallocate</span>(serialised_bytes)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160; </div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keyword">allocate</span>(serialised_bytes(local_writer_entry_byte_size(current_index+1)))</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keyword">call </span>serialise_instantaneous_state(serialised_bytes)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keyword">call </span>write_state_storage(netcdf_file, my_writer_entry_start_point(current_index+1), io_configuration%my_io_rank, &amp;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;         <span class="stringliteral">&quot;serialised_instantaneous_manipulation&quot;</span>, serialised_bytes)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keyword">deallocate</span>(serialised_bytes)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">allocate</span>(serialised_bytes(local_writer_entry_byte_size(current_index+2)))</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keyword">call </span>serialise_writer_field_manager_state(serialised_bytes)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">call </span>write_state_storage(netcdf_file, my_writer_entry_start_point(current_index+2), io_configuration%my_io_rank, &amp;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         <span class="stringliteral">&quot;serialised_writer_manager&quot;</span>, serialised_bytes)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">deallocate</span>(serialised_bytes)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keyword">allocate</span>(serialised_bytes(local_writer_entry_byte_size(current_index+3)))</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keyword">call </span>serialise_writer_entries_time_points(time_points, serialised_bytes)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="keyword">call </span>write_state_storage(netcdf_file, my_writer_entry_start_point(current_index+3), io_configuration%my_io_rank, &amp;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;         <span class="stringliteral">&quot;serialised_timepoints&quot;</span>, serialised_bytes)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">deallocate</span>(serialised_bytes)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160; </div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">deallocate</span>(local_writer_entry_byte_size, global_writer_entry_byte_size, my_writer_entry_start_point)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_cgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_cgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_cgraph" id="anamespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_cgraph">
<area shape="rect" title="Packags up and writes the actual IO server state into the NetCDF file. The act of serialisation will ..." alt="" coords="5,217,189,258"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="544,6,711,47"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="542,93,713,134"/>
<area shape="rect" href="namespaceinstantaneous__time__manipulation__mod.html#a1fb4c66a6d2a12501c7a8cafa8b61c68" title="Will serialise the state of this manipulator so that it can be later restarted. Any locks issued duri..." alt="" coords="261,275,449,331"/>
<area shape="rect" href="namespacetimeaveraged__time__manipulation__mod.html#ad4683870d908678162175c06b7402ed5" title="Serialises the state of this manipulator so that it can be restarted later on. Releases any locks iss..." alt="" coords="237,354,473,395"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#afd94d228a13199b6665d1fdd4ed2f043" title="Serialises the writer entry time points which are held in a hashmap." alt="" coords="280,419,431,475"/>
<area shape="rect" href="namespacewriter__types__mod.html#a8eba61b899444e7ad3d52bea630caa48" title="Serialises a specific writer type into byte data (for storage or transmission.) Releases any locks is..." alt="" coords="266,498,445,539"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="542,158,713,199"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="270,158,441,199"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#af3dc548945ef0bd31291214d13c4355b" title="Writes out the state for a specific facet into the NetCDF file. Note that this uses the ISO C binding..." alt="" coords="268,93,443,134"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1026,76,1169,103"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1241,69,1407,110"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="793,130,948,171"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="789,65,952,106"/>
<area shape="rect" href="namespacetimeaveraged__time__manipulation__mod.html#a333024bb15a4003bee7d658b35806dd0" title="Serialises a specific time averaged completed value, releases any locks issued during preparation." alt="" coords="521,347,733,403"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="555,426,700,467"/>
<area shape="rect" href="namespacewriter__types__mod.html#a726056f310e896930290c84bd0dff389" title="Serialises a specific writer field type for storage or transmission. This releases any locks issued d..." alt="" coords="538,498,717,539"/>
<area shape="rect" href="namespacewriter__types__mod.html#a5d29675d56233f7bf4bf2244cc0e3873" title="Serialises collective values. This releases any locks issued during preparation." alt="" coords="781,527,960,569"/>
<area shape="rect" href="namespacewriter__types__mod.html#ab5bd556b7aece3ad191a87331c70663d" title="Serialises some data values to store or transmit. This releases any locks issued during preparation." alt="" coords="1008,498,1187,539"/>
<area shape="rect" href="namespacewriter__types__mod.html#a427401c0dfd6265375770ccf333f1675" title="Serialises a string map, where the values are assumed to be strings. This releases any locks issued d..." alt="" coords="1235,498,1413,539"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="789,195,952,237"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="534,223,721,265"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_icgraph" id="anamespaceio__server__state__writer__mod_a6f99dece53eb5c51cf1fcbd384ea7d08_icgraph">
<area shape="rect" title="Packags up and writes the actual IO server state into the NetCDF file. The act of serialisation will ..." alt="" coords="239,5,423,47"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#ab90e4b2c185d22faacd6f23c39bd9449" title="Stores the IO server state in the NetCDF file." alt="" coords="5,5,191,47"/>
</map>
</div>

</div>
</div>
<a id="af3dc548945ef0bd31291214d13c4355b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3dc548945ef0bd31291214d13c4355b">&#9670;&nbsp;</a></span>write_state_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine io_server_state_writer_mod::write_state_storage </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structwriter__types__mod_1_1netcdf__diagnostics__type.html">netcdf_diagnostics_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>netcdf_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer(kind=8), intent(in)&#160;</td>
          <td class="paramname"><em>writer_entry_start_point</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>my_io_rank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>base_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>raw_byte_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes out the state for a specific facet into the NetCDF file. Note that this uses the ISO C bindings into NetCDF to support 64 bit counts, starts and strides. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">netcdf_file</td><td>The NetCDF file state </td></tr>
    <tr><td class="paramname">writer_entry_start_point</td><td>The start point, this is uncorrected so it is actually the end point </td></tr>
    <tr><td class="paramname">my_io_rank</td><td>My IO server rank </td></tr>
    <tr><td class="paramname">base_key</td><td>The base key to use for look up </td></tr>
    <tr><td class="paramname">raw_byte_code</td><td>The raw byte code to write </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00367">367</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;    <span class="keywordtype">type</span>(netcdf_diagnostics_type), <span class="keywordtype">intent(inout)</span> :: netcdf_file</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: my_io_rank</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordtype">integer(kind=8)</span>, <span class="keywordtype">intent(in)</span> :: writer_entry_start_point </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: base_key</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: raw_byte_code</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160; </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordtype">integer(kind=c_int)</span> :: cncid, cvarid, cndims, cstat1, cstatus</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordtype">integer(kind=c_size_t)</span>, <span class="keywordtype">target</span> :: cstart(1), ccounts(1)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">integer(kind=c_ptrdiff_t)</span>, <span class="keywordtype">target</span> :: cstrides(1)</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordtype">integer(kind=c_long)</span> :: c_writer_corrected_start_point</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordtype">type</span>(c_ptr) :: cstartptr, ccountsptr, cstridesptr</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    cncid=netcdf_file%ncid</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    cstart(1)=my_io_rank</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    cvarid=c_get_integer(netcdf_file%variable_to_id, trim(base_key)//<span class="stringliteral">&quot;_directory&quot;</span>)-1</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    c_writer_corrected_start_point=(writer_entry_start_point-<span class="keyword">size</span>(raw_byte_code))+1</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    ccounts(1)=<span class="keyword">size</span>(raw_byte_code)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    cstrides(1)=1</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    cstartptr=c_loc(cstart)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    ccountsptr=c_loc(ccounts)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    cstridesptr=c_loc(cstrides)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keyword">call </span>lock_mpi()</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nc_put_var1_long(cncid, cvarid, cstartptr, c_writer_corrected_start_point))</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    cvarid=c_get_integer(netcdf_file%variable_to_id, trim(base_key))-1</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    cstart(1)=c_writer_corrected_start_point-1    </div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    <span class="keyword">call </span>check_netcdf_status(nc_put_vars_text(cncid, cvarid, cstartptr, ccountsptr, cstridesptr, raw_byte_code))</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keyword">call </span>unlock_mpi()</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_cgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_cgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_cgraph" id="anamespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_cgraph">
<area shape="rect" title="Writes out the state for a specific facet into the NetCDF file. Note that this uses the ISO C binding..." alt="" coords="5,71,180,112"/>
<area shape="rect" href="namespacenetcdf__misc__mod.html#a159f13789af0cecc704b47fde431b241" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="230,5,397,47"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="228,71,399,112"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="228,136,399,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="657,75,800,102"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="848,68,1015,109"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="451,129,605,171"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="447,64,609,105"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="447,195,609,236"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_icgraph.png" border="0" usemap="#anamespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_icgraph" alt=""/></div>
<map name="namespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_icgraph" id="anamespaceio__server__state__writer__mod_af3dc548945ef0bd31291214d13c4355b_icgraph">
<area shape="rect" title="Writes out the state for a specific facet into the NetCDF file. Note that this uses the ISO C binding..." alt="" coords="471,5,645,47"/>
<area shape="rect" href="namespaceio__server__state__writer__mod.html#a6f99dece53eb5c51cf1fcbd384ea7d08" title="Packags up and writes the actual IO server state into the NetCDF file. The act of serialisation will ..." alt="" coords="239,5,423,47"/>
<area shape="rect" href="namespacenetcdf__filetype__writer__mod.html#ab90e4b2c185d22faacd6f23c39bd9449" title="Stores the IO server state in the NetCDF file." alt="" coords="5,5,191,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a11d811843081b21fb615ddb8cf284a48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d811843081b21fb615ddb8cf284a48">&#9670;&nbsp;</a></span>global_writer_entry_byte_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind=8), dimension(:), allocatable io_server_state_writer_mod::global_writer_entry_byte_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00085">85</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordtype">integer(kind=8)</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: global_writer_entry_byte_size, my_writer_entry_start_point, &amp;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;       local_writer_entry_byte_size</div>
</div><!-- fragment -->
</div>
</div>
<a id="af7fbf015c2ab07d5e9af2331337c278a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7fbf015c2ab07d5e9af2331337c278a">&#9670;&nbsp;</a></span>global_writer_entry_byte_size_request</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer io_server_state_writer_mod::global_writer_entry_byte_size_request</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00087">87</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keywordtype">integer</span> :: global_writer_entry_byte_size_request, my_writer_entry_start_request</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad66ca786ff981f2c759ef0fa9edae264"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66ca786ff981f2c759ef0fa9edae264">&#9670;&nbsp;</a></span>is_write_field_manager_up_to_date</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1write__field__manager__determine__if__up__to__date.html">write_field_manager_determine_if_up_to_date</a>), pointer io_server_state_writer_mod::is_write_field_manager_up_to_date</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00090">90</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordtype">procedure</span>(write_field_manager_determine_if_up_to_date), <span class="keywordtype">pointer</span> :: is_write_field_manager_up_to_date</div>
</div><!-- fragment -->
</div>
</div>
<a id="a7322f3b9094d6d35c22989161724cd1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7322f3b9094d6d35c22989161724cd1b">&#9670;&nbsp;</a></span>local_writer_entry_byte_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind=8), dimension(:), allocatable io_server_state_writer_mod::local_writer_entry_byte_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00085">85</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>

</div>
</div>
<a id="a9850ce08ff11c192f86977c29cb53df4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9850ce08ff11c192f86977c29cb53df4">&#9670;&nbsp;</a></span>my_writer_entry_start_point</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer(kind=8), dimension(:), allocatable io_server_state_writer_mod::my_writer_entry_start_point</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00085">85</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>

</div>
</div>
<a id="adeee3b185d8d08862fa085f9cbba14d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeee3b185d8d08862fa085f9cbba14d6">&#9670;&nbsp;</a></span>my_writer_entry_start_request</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer io_server_state_writer_mod::my_writer_entry_start_request</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00087">87</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>

</div>
</div>
<a id="af04c5b4f6a4e5aa6a0ae771e655933d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af04c5b4f6a4e5aa6a0ae771e655933d7">&#9670;&nbsp;</a></span>prepare_to_serialise_writer_field_manager_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__prepare__to__serialise__state.html">writer_field_manager_prepare_to_serialise_state</a>), pointer io_server_state_writer_mod::prepare_to_serialise_writer_field_manager_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00089">89</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordtype">procedure</span>(writer_field_manager_prepare_to_serialise_state), <span class="keywordtype">pointer</span> :: prepare_to_serialise_writer_field_manager_state</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade94673a6f0c2638c4cddaf294ba6e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade94673a6f0c2638c4cddaf294ba6e41">&#9670;&nbsp;</a></span>serialise_writer_field_manager_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">procedure(<a class="el" href="interfaceio__server__state__writer__mod_1_1writer__field__manager__serialise__state.html">writer_field_manager_serialise_state</a>), pointer io_server_state_writer_mod::serialise_writer_field_manager_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00088">88</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordtype">procedure</span>(writer_field_manager_serialise_state), <span class="keywordtype">pointer</span> :: serialise_writer_field_manager_state</div>
</div><!-- fragment -->
</div>
</div>
<a id="aeae70d0ea81a140f97f3617b396b2a81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeae70d0ea81a140f97f3617b396b2a81">&#9670;&nbsp;</a></span>serialised_instantaneous_manipulation_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character, dimension(:), allocatable io_server_state_writer_mod::serialised_instantaneous_manipulation_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00083">83</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>

</div>
</div>
<a id="ad2787a135358a5a3404029e703063ac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2787a135358a5a3404029e703063ac8">&#9670;&nbsp;</a></span>serialised_timeaveraged_manipulation_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character, dimension(:), allocatable io_server_state_writer_mod::serialised_timeaveraged_manipulation_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00083">83</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>

</div>
</div>
<a id="acfc0ec9c8a68001eddc539687b247fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfc0ec9c8a68001eddc539687b247fc2">&#9670;&nbsp;</a></span>serialised_writer_entries</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character, dimension(:), allocatable io_server_state_writer_mod::serialised_writer_entries</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00083">83</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: serialised_writer_entries, serialised_timeaveraged_manipulation_state, &amp;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;       serialised_instantaneous_manipulation_state, serialised_writer_field_manager_state, serialised_writer_entries_time_points</div>
</div><!-- fragment -->
</div>
</div>
<a id="a013afb10f35dd21cc495d603f98e121a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a013afb10f35dd21cc495d603f98e121a">&#9670;&nbsp;</a></span>serialised_writer_entries_time_points</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character, dimension(:), allocatable io_server_state_writer_mod::serialised_writer_entries_time_points</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00083">83</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>

</div>
</div>
<a id="aa2ebf453a2e3b038c5af75daa76c0227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ebf453a2e3b038c5af75daa76c0227">&#9670;&nbsp;</a></span>serialised_writer_field_manager_state</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character, dimension(:), allocatable io_server_state_writer_mod::serialised_writer_field_manager_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="io__state__writer_8F90_source.html#l00083">83</a> of file <a class="el" href="io__state__writer_8F90_source.html">io_state_writer.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_a10e28447dd10ef9f92d205bc98fb26d3"><div class="ttname"><a href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">logging_mod::log_warn</a></div><div class="ttdeci">integer, parameter, public log_warn</div><div class="ttdoc">Log WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00012">logging.F90:12</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ad95937a250467334622daeb5cff78c20"><div class="ttname"><a href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">logging_mod::log_master_log</a></div><div class="ttdeci">subroutine, public log_master_log(level, message)</div><div class="ttdoc">Will log just from the master process.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00046">logging.F90:47</a></div></div>
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
