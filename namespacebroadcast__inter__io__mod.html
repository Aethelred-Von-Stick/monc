<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: broadcast_inter_io_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">broadcast_inter_io_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Broadcast inter IO communication which sends a value from one IO server to all others. This tracks field name and timestep and only issues one call (and one results call to completion) for that combination.  
<a href="namespacebroadcast__inter__io__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbroadcast__inter__io__mod_1_1inter__io__broadcast.html">inter_io_broadcast</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structbroadcast__inter__io__mod_1_1threaded__callback__parameters__type.html">threaded_callback_parameters_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a75700a7e7429e95b4233d0e068c8aafb"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb">init_broadcast_inter_io</a> (io_configuration)</td></tr>
<tr class="memdesc:a75700a7e7429e95b4233d0e068c8aafb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the broadcast inter IO functionality.  <a href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb">More...</a><br /></td></tr>
<tr class="separator:a75700a7e7429e95b4233d0e068c8aafb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47cb2b35b1ce243fb5044360a9bac4c3"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a47cb2b35b1ce243fb5044360a9bac4c3">finalise_broadcast_inter_io</a> ()</td></tr>
<tr class="memdesc:a47cb2b35b1ce243fb5044360a9bac4c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalises the broadcast inter IO functionality.  <a href="namespacebroadcast__inter__io__mod.html#a47cb2b35b1ce243fb5044360a9bac4c3">More...</a><br /></td></tr>
<tr class="separator:a47cb2b35b1ce243fb5044360a9bac4c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a216d3d245a16d49382469935678334"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a5a216d3d245a16d49382469935678334">check_broadcast_inter_io_for_completion</a> (io_configuration)</td></tr>
<tr class="memdesc:a5a216d3d245a16d49382469935678334"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the statuses for broadcast completion and returns whether they are all finished or not.  <a href="namespacebroadcast__inter__io__mod.html#a5a216d3d245a16d49382469935678334">More...</a><br /></td></tr>
<tr class="separator:a5a216d3d245a16d49382469935678334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db5d64e7a2f546eeaaa4bb825012d43"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43">handle_recv_data_from_io_server</a> (io_configuration, data_buffer, inter_io_index)</td></tr>
<tr class="memdesc:a4db5d64e7a2f546eeaaa4bb825012d43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles receiving data from another IO server and processing this. If the request has already been registered (with a callback) then this simply calls out. Otherwise it has to cache the data and awaits a thread calling the broadcast to call out to the callback.  <a href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43">More...</a><br /></td></tr>
<tr class="separator:a4db5d64e7a2f546eeaaa4bb825012d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c49585e6986ed7104ecc35a71347e78"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78">perform_inter_io_broadcast</a> (io_configuration, field_values, field_size, field_name, root, timestep, completion_procedure)</td></tr>
<tr class="memdesc:a9c49585e6986ed7104ecc35a71347e78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on the IO server (and not MONC level) so might require some translation between the user's logical view and this view. Broadcasts are only issued once for a specific field_name and timestep pair.  <a href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78">More...</a><br /></td></tr>
<tr class="separator:a9c49585e6986ed7104ecc35a71347e78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a231ba532141420ad11d921c509a5a06a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a231ba532141420ad11d921c509a5a06a">issue_thread_call_to_completion</a> (field_name, timestep, values, completion_procedure)</td></tr>
<tr class="memdesc:a231ba532141420ad11d921c509a5a06a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread and ensures the semantics of one IO server or many with message ordering are independent.  <a href="namespacebroadcast__inter__io__mod.html#a231ba532141420ad11d921c509a5a06a">More...</a><br /></td></tr>
<tr class="separator:a231ba532141420ad11d921c509a5a06a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3e19e373e1f3520f836197cd9516519"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#aa3e19e373e1f3520f836197cd9516519">thread_call_to_completion</a> (arguments, data_buffer)</td></tr>
<tr class="memdesc:aa3e19e373e1f3520f836197cd9516519"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments Integer arguments, this is the ID of the entry in the state @data_buffer Unused here.  <a href="namespacebroadcast__inter__io__mod.html#aa3e19e373e1f3520f836197cd9516519">More...</a><br /></td></tr>
<tr class="separator:aa3e19e373e1f3520f836197cd9516519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2566335f2b2e7bccb878a1d35fb97b4"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#ad2566335f2b2e7bccb878a1d35fb97b4">clean_broadcast_progress_if_needed</a> ()</td></tr>
<tr class="memdesc:ad2566335f2b2e7bccb878a1d35fb97b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls out to do a broadcast progress clean if needed (i.e. every n steps.)  <a href="namespacebroadcast__inter__io__mod.html#ad2566335f2b2e7bccb878a1d35fb97b4">More...</a><br /></td></tr>
<tr class="separator:ad2566335f2b2e7bccb878a1d35fb97b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68cd14e8efbb15c0bb5129e82140cdeb"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a68cd14e8efbb15c0bb5129e82140cdeb">clean_broadcast_progress</a> ()</td></tr>
<tr class="memdesc:a68cd14e8efbb15c0bb5129e82140cdeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a clean of the broadcast progresses that no longer need to be stored.  <a href="namespacebroadcast__inter__io__mod.html#a68cd14e8efbb15c0bb5129e82140cdeb">More...</a><br /></td></tr>
<tr class="separator:a68cd14e8efbb15c0bb5129e82140cdeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabce3a8dfe788e5f00583999b3688f80"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structbroadcast__inter__io__mod_1_1inter__io__broadcast.html">inter_io_broadcast</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#aabce3a8dfe788e5f00583999b3688f80">find_or_add_broadcast_item</a> (field_name, timestep, completion_procedure)</td></tr>
<tr class="memdesc:aabce3a8dfe788e5f00583999b3688f80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locates and returns or adds and returns a specific broadcast item representing a timestep and field.  <a href="namespacebroadcast__inter__io__mod.html#aabce3a8dfe788e5f00583999b3688f80">More...</a><br /></td></tr>
<tr class="separator:aabce3a8dfe788e5f00583999b3688f80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46e749703e2e791961b93a72fc517664"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structbroadcast__inter__io__mod_1_1inter__io__broadcast.html">inter_io_broadcast</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a46e749703e2e791961b93a72fc517664">find_broadcast_item</a> (field_name, timestep, do_read_lock)</td></tr>
<tr class="memdesc:a46e749703e2e791961b93a72fc517664"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a specific broadcast item or null if none is found.  <a href="namespacebroadcast__inter__io__mod.html#a46e749703e2e791961b93a72fc517664">More...</a><br /></td></tr>
<tr class="separator:a46e749703e2e791961b93a72fc517664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a676b7e1500cb206a945de3f3508d4497"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structbroadcast__inter__io__mod_1_1inter__io__broadcast.html">inter_io_broadcast</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a676b7e1500cb206a945de3f3508d4497">retrieve_broadcast_item</a> (mapentry)</td></tr>
<tr class="memdesc:a676b7e1500cb206a945de3f3508d4497"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locates a broadcast item within a mapentry or null if none exists.  <a href="namespacebroadcast__inter__io__mod.html#a676b7e1500cb206a945de3f3508d4497">More...</a><br /></td></tr>
<tr class="separator:a676b7e1500cb206a945de3f3508d4497"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a179cd67b4ef5d32771dc805846b83f39"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a179cd67b4ef5d32771dc805846b83f39">my_inter_io_tag</a> =2</td></tr>
<tr class="separator:a179cd67b4ef5d32771dc805846b83f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf3597b03a198143d1490e3d944cbf9"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#abdf3597b03a198143d1490e3d944cbf9">perform_clean_every</a> =200</td></tr>
<tr class="separator:abdf3597b03a198143d1490e3d944cbf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76e633c1b04652828c9810ec4b4ba19d"><td class="memItemLeft" align="right" valign="top">character(len= *), parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a76e633c1b04652828c9810ec4b4ba19d">my_inter_io_name</a> =&quot;bcastinterio&quot;</td></tr>
<tr class="memdesc:a76e633c1b04652828c9810ec4b4ba19d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type keeping track of broadcast statuses.  <a href="namespacebroadcast__inter__io__mod.html#a76e633c1b04652828c9810ec4b4ba19d">More...</a><br /></td></tr>
<tr class="separator:a76e633c1b04652828c9810ec4b4ba19d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f301b0fa4c9c6f82e272d98b00cdbf8"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a2f301b0fa4c9c6f82e272d98b00cdbf8">stored_io_configuration</a></td></tr>
<tr class="separator:a2f301b0fa4c9c6f82e272d98b00cdbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a579e981dbb6acb87efe603d97cdfd3"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a8a579e981dbb6acb87efe603d97cdfd3">broadcast_statuses</a></td></tr>
<tr class="separator:a8a579e981dbb6acb87efe603d97cdfd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bcc406a200f44c9b76e6114e6f01fa5"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a5bcc406a200f44c9b76e6114e6f01fa5">thread_callback_params</a></td></tr>
<tr class="separator:a5bcc406a200f44c9b76e6114e6f01fa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642491f4609a6b292c00d3d6e72ee62c"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a642491f4609a6b292c00d3d6e72ee62c">broadcast_statuses_rwlock</a></td></tr>
<tr class="separator:a642491f4609a6b292c00d3d6e72ee62c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a86a8f0342121beba6023db6c71b016"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a3a86a8f0342121beba6023db6c71b016">inter_io_description_mutex</a></td></tr>
<tr class="separator:a3a86a8f0342121beba6023db6c71b016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a663a11870b7769a971f30f7ad39de5b0"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a663a11870b7769a971f30f7ad39de5b0">clean_progress_mutex</a></td></tr>
<tr class="separator:a663a11870b7769a971f30f7ad39de5b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac00544c5aefb8573e21cc16e55dd2c"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a3ac00544c5aefb8573e21cc16e55dd2c">bcast_count_mutex</a></td></tr>
<tr class="separator:a3ac00544c5aefb8573e21cc16e55dd2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd9af8346eeddfdf76a1336e22f8df3"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#aadd9af8346eeddfdf76a1336e22f8df3">bcast_clean_reduction_count</a></td></tr>
<tr class="separator:aadd9af8346eeddfdf76a1336e22f8df3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ba66c03804eea5f0f987dc41ce0695"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#a32ba66c03804eea5f0f987dc41ce0695">bcast_count</a></td></tr>
<tr class="separator:a32ba66c03804eea5f0f987dc41ce0695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad577ec9e2189b90932bc53ecab24e26d"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#ad577ec9e2189b90932bc53ecab24e26d">thread_callback_params_id</a></td></tr>
<tr class="separator:ad577ec9e2189b90932bc53ecab24e26d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa282a4307f0282d359f45ea4b1067e07"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#aa282a4307f0282d359f45ea4b1067e07">thread_callback_params_mutex</a></td></tr>
<tr class="separator:aa282a4307f0282d359f45ea4b1067e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef8d78f235f66eed9265ac9ff24bcb8f"><td class="memItemLeft" align="right" valign="top">logical, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacebroadcast__inter__io__mod.html#aef8d78f235f66eed9265ac9ff24bcb8f">initialised</a> =.false.</td></tr>
<tr class="separator:aef8d78f235f66eed9265ac9ff24bcb8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Broadcast inter IO communication which sends a value from one IO server to all others. This tracks field name and timestep and only issues one call (and one results call to completion) for that combination. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a5a216d3d245a16d49382469935678334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a216d3d245a16d49382469935678334">&#9670;&nbsp;</a></span>check_broadcast_inter_io_for_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public broadcast_inter_io_mod::check_broadcast_inter_io_for_completion </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the statuses for broadcast completion and returns whether they are all finished or not. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The IO server configuration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the broadcast inter IO has finished (i.e. no messages in transit) </dd></dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00109">109</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160; </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: broadcast_item</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    check_broadcast_inter_io_for_completion=.true.</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="keywordflow">if</span> (.not. c_is_empty(broadcast_statuses)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      iterator=c_get_iterator(broadcast_statuses)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        broadcast_item=&gt;retrieve_broadcast_item(c_next_mapentry(iterator))</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordflow">if</span> (.not. broadcast_item%handled) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;          check_broadcast_inter_io_for_completion=.false.</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;          <span class="keywordflow">exit</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(broadcast_statuses_rwlock))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a5a216d3d245a16d49382469935678334_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a5a216d3d245a16d49382469935678334_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a5a216d3d245a16d49382469935678334_cgraph" id="anamespacebroadcast__inter__io__mod_a5a216d3d245a16d49382469935678334_cgraph">
<area shape="rect" title="Checks the statuses for broadcast completion and returns whether they are all finished or not." alt="" coords="5,97,168,153"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="238,5,393,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="234,71,397,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="234,136,397,177"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a676b7e1500cb206a945de3f3508d4497" title="Locates a broadcast item within a mapentry or null if none exists." alt="" coords="216,201,415,243"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="463,13,605,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="653,5,820,47"/>
</map>
</div>

</div>
</div>
<a id="a68cd14e8efbb15c0bb5129e82140cdeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68cd14e8efbb15c0bb5129e82140cdeb">&#9670;&nbsp;</a></span>clean_broadcast_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine broadcast_inter_io_mod::clean_broadcast_progress</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a clean of the broadcast progresses that no longer need to be stored. </p>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00291">291</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: specific_broadcast_item_at_index</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordtype">integer</span> :: completion_flag, ierr, num_to_remove, have_lock</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: entry_key</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordtype">type</span>(list_type) :: entries_to_remove</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordtype">logical</span> :: destroy_lock</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: mapentry</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    have_lock=forthread_mutex_trylock(clean_progress_mutex)</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (have_lock==0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      iterator=c_get_iterator(broadcast_statuses)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        destroy_lock=.false.</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        mapentry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        specific_broadcast_item_at_index=&gt;retrieve_broadcast_item(mapentry)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(specific_broadcast_item_at_index%mutex))</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(specific_broadcast_item_at_index%send_requests)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;          <span class="keyword">call </span>lock_mpi()</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          <span class="keyword">call </span>mpi_testall(<span class="keyword">size</span>(specific_broadcast_item_at_index%send_requests), specific_broadcast_item_at_index%send_requests, &amp;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;               completion_flag, mpi_statuses_ignore, ierr)</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          <span class="keyword">call </span>unlock_mpi()</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;          <span class="keywordflow">if</span> (completion_flag == 1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keyword">deallocate</span>(specific_broadcast_item_at_index%send_requests)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(specific_broadcast_item_at_index%send_buffer)) <span class="keyword">deallocate</span>(specific_broadcast_item_at_index%send_buffer)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            <span class="keyword">call </span>c_add_string(entries_to_remove, mapentry%key)</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            destroy_lock=.true.</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;          <span class="keywordflow">if</span> (specific_broadcast_item_at_index%handled) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(specific_broadcast_item_at_index%cached_values)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;              <span class="keyword">deallocate</span>(specific_broadcast_item_at_index%cached_values)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keywordflow">            end if</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            <span class="keyword">call </span>c_add_string(entries_to_remove, mapentry%key)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;            destroy_lock=.true.</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(specific_broadcast_item_at_index%mutex))</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="keywordflow">if</span> (destroy_lock) <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(specific_broadcast_item_at_index%mutex))</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="keywordflow">      end do</span>      </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160; </div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (.not. c_is_empty(entries_to_remove)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_rwlock_wrlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        iterator=c_get_iterator(entries_to_remove)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;          entry_key=c_next_string(iterator)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;          generic=&gt;c_get_generic(broadcast_statuses, entry_key)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;          <span class="keyword">call </span>c_remove(broadcast_statuses, entry_key)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;          <span class="keyword">deallocate</span>(generic)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="keywordflow">        end do</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keyword">call </span>c_free(entries_to_remove)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(clean_progress_mutex))</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_cgraph" id="anamespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_cgraph">
<area shape="rect" title="Performs a clean of the broadcast progresses that no longer need to be stored." alt="" coords="5,287,160,343"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="459,235,613,277"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="226,46,389,87"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="455,50,617,91"/>
<area shape="rect" href="namespaceforthread__mod.html#aecdd575526686417bde58b7ae8f73735" title=" " alt="" coords="226,177,389,218"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="455,551,617,593"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="226,294,389,335"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="226,359,389,401"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="226,425,389,466"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="222,111,393,153"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a676b7e1500cb206a945de3f3508d4497" title="Locates a broadcast item within a mapentry or null if none exists." alt="" coords="208,555,407,597"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="222,490,393,531"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="665,243,808,269"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="856,235,1023,277"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_icgraph" id="anamespacebroadcast__inter__io__mod_a68cd14e8efbb15c0bb5129e82140cdeb_icgraph">
<area shape="rect" title="Performs a clean of the broadcast progresses that no longer need to be stored." alt="" coords="1603,39,1757,95"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#ad2566335f2b2e7bccb878a1d35fb97b4" title="Calls out to do a broadcast progress clean if needed (i.e. every n steps.)" alt="" coords="1400,39,1555,95"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1216,39,1352,95"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="989,5,1168,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="788,39,941,95"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="577,39,740,95"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="385,46,529,87"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,53,337,80"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,53,99,80"/>
</map>
</div>

</div>
</div>
<a id="ad2566335f2b2e7bccb878a1d35fb97b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2566335f2b2e7bccb878a1d35fb97b4">&#9670;&nbsp;</a></span>clean_broadcast_progress_if_needed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine broadcast_inter_io_mod::clean_broadcast_progress_if_needed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calls out to do a broadcast progress clean if needed (i.e. every n steps.) </p>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00278">278</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(bcast_count_mutex))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    bcast_count=bcast_count+1</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">if</span> (bcast_clean_reduction_count + perform_clean_every .lt. bcast_count) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      bcast_clean_reduction_count=bcast_count</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(bcast_count_mutex))   </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keyword">call </span>clean_broadcast_progress()</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(bcast_count_mutex))   </div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_cgraph" id="anamespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_cgraph">
<area shape="rect" title="Calls out to do a broadcast progress clean if needed (i.e. every n steps.)" alt="" coords="5,214,160,270"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="661,468,816,509"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a68cd14e8efbb15c0bb5129e82140cdeb" title="Performs a clean of the broadcast progresses that no longer need to be stored." alt="" coords="208,399,363,455"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="657,249,820,290"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="657,745,820,786"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="868,475,1011,502"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1059,468,1225,509"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="429,621,591,662"/>
<area shape="rect" href="namespaceforthread__mod.html#aecdd575526686417bde58b7ae8f73735" title=" " alt="" coords="429,125,591,166"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="429,190,591,232"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="429,308,591,349"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="429,438,591,480"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="425,373,595,414"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a676b7e1500cb206a945de3f3508d4497" title="Locates a broadcast item within a mapentry or null if none exists." alt="" coords="411,504,609,545"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="425,686,595,728"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_icgraph" id="anamespacebroadcast__inter__io__mod_ad2566335f2b2e7bccb878a1d35fb97b4_icgraph">
<area shape="rect" title="Calls out to do a broadcast progress clean if needed (i.e. every n steps.)" alt="" coords="1400,39,1555,95"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1216,39,1352,95"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="989,5,1168,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="788,39,941,95"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="577,39,740,95"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="385,46,529,87"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,53,337,80"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,53,99,80"/>
</map>
</div>

</div>
</div>
<a id="a47cb2b35b1ce243fb5044360a9bac4c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47cb2b35b1ce243fb5044360a9bac4c3">&#9670;&nbsp;</a></span>finalise_broadcast_inter_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public broadcast_inter_io_mod::finalise_broadcast_inter_io</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalises the broadcast inter IO functionality. </p>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00076">76</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: broadcast_item</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (initialised) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">if</span> (.not. c_is_empty(broadcast_statuses)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        iterator=c_get_iterator(broadcast_statuses)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;          broadcast_item=&gt;retrieve_broadcast_item(c_next_mapentry(iterator))</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;          <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(broadcast_item%mutex))</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;          <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(broadcast_item%send_requests)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keyword">call </span>waitall_for_mpi_requests(broadcast_item%send_requests, <span class="keyword">size</span>(broadcast_item%send_requests))</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="keyword">deallocate</span>(broadcast_item%send_requests)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(broadcast_item%send_buffer)) <span class="keyword">deallocate</span>(broadcast_item%send_buffer)</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;          <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(broadcast_item%mutex))</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(broadcast_item%mutex))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keywordflow">        end do</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_destroy(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(inter_io_description_mutex))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(thread_callback_params_mutex))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(clean_progress_mutex))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(bcast_count_mutex))</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      initialised=.false.</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_cgraph" id="anamespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_cgraph">
<area shape="rect" title="Finalises the broadcast inter IO functionality." alt="" coords="5,241,169,297"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="703,183,857,225"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="235,66,398,107"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="699,375,861,417"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="699,63,861,105"/>
<area shape="rect" href="namespaceforthread__mod.html#a1ba0d6ac9839191688aeea507ae27ec8" title=" " alt="" coords="235,249,398,290"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="235,314,398,355"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="235,379,398,421"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a676b7e1500cb206a945de3f3508d4497" title="Locates a broadcast item within a mapentry or null if none exists." alt="" coords="217,445,416,486"/>
<area shape="rect" href="namespacempi__communication__mod.html#a272f44aa1ed340d3e6efd306d075100b" title="Waits for all MPI requests to complete, either by managing thread safety and interleaving or just a c..." alt="" coords="231,183,403,225"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="909,191,1052,217"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1100,183,1267,225"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="472,249,643,290"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="464,314,651,355"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="472,183,643,225"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_icgraph" id="anamespacebroadcast__inter__io__mod_a47cb2b35b1ce243fb5044360a9bac4c3_icgraph">
<area shape="rect" title="Finalises the broadcast inter IO functionality." alt="" coords="451,5,615,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#adda372f876f04100eb7944557a195b64" title="Finalises the all reduction inter IO functionality." alt="" coords="212,5,403,61"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a3c16286b2d9369ad1ada72d9c88684b1" title="Finalises the global callback." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a46e749703e2e791961b93a72fc517664"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46e749703e2e791961b93a72fc517664">&#9670;&nbsp;</a></span>find_broadcast_item()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structbroadcast__inter__io__mod_1_1inter__io__broadcast.html">inter_io_broadcast</a>) function, pointer broadcast_inter_io_mod::find_broadcast_item </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>do_read_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds a specific broadcast item or null if none is found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>Corresponding field name to find </td></tr>
    <tr><td class="paramname">timestep</td><td>Corresponding timestep to find </td></tr>
    <tr><td class="paramname">do_read_lock</td><td>Whether to issue a read lock or not </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding broadcast status item or null if none is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00389">389</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: do_read_lock</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: find_broadcast_item</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordflow">if</span> (do_read_lock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    generic=&gt;c_get_generic(broadcast_statuses, trim(field_name)//<span class="stringliteral">&quot;#&quot;</span>//conv_to_string(timestep))</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (do_read_lock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="keywordflow">        type is</span> (inter_io_broadcast)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;          find_broadcast_item=&gt;generic</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      find_broadcast_item=&gt;null()</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_cgraph" id="anamespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_cgraph">
<area shape="rect" title="Finds a specific broadcast item or null if none is found." alt="" coords="5,71,181,112"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="233,5,388,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="229,71,392,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="229,136,392,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="440,13,583,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="631,5,797,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_icgraph" id="anamespacebroadcast__inter__io__mod_a46e749703e2e791961b93a72fc517664_icgraph">
<area shape="rect" title="Finds a specific broadcast item or null if none is found." alt="" coords="1740,129,1916,170"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aabce3a8dfe788e5f00583999b3688f80" title="Locates and returns or adds and returns a specific broadcast item representing a timestep and field." alt="" coords="1469,129,1692,170"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="1259,81,1421,137"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1272,161,1408,217"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb" title="Initialises the broadcast inter IO functionality." alt="" coords="1051,81,1192,137"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="817,56,984,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,83,559,139"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="617,5,759,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,144,337,171"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,144,99,171"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="1032,161,1211,217"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="824,187,977,243"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="607,187,769,243"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="400,173,544,214"/>
</map>
</div>

</div>
</div>
<a id="aabce3a8dfe788e5f00583999b3688f80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabce3a8dfe788e5f00583999b3688f80">&#9670;&nbsp;</a></span>find_or_add_broadcast_item()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structbroadcast__inter__io__mod_1_1inter__io__broadcast.html">inter_io_broadcast</a>) function, pointer broadcast_inter_io_mod::find_or_add_broadcast_item </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfaceinter__io__specifics__mod_1_1handle__completion.html">handle_completion</a>), optional&#160;</td>
          <td class="paramname"><em>completion_procedure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locates and returns or adds and returns a specific broadcast item representing a timestep and field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The field name this represents </td></tr>
    <tr><td class="paramname">timestep</td><td>The timestep this represents </td></tr>
    <tr><td class="paramname">completion_procedure</td><td>The (optional) completion procedure which is called once values are received </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The existing or new broadcast item </dd></dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00356">356</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">procedure</span>(handle_completion), <span class="keywordtype">optional</span> :: completion_procedure</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: find_or_add_broadcast_item</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    find_or_add_broadcast_item=&gt;find_broadcast_item(field_name, timestep, .true.)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(find_or_add_broadcast_item)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_wrlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      find_or_add_broadcast_item=&gt;find_broadcast_item(field_name, timestep, .false.)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(find_or_add_broadcast_item)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="keyword">allocate</span>(find_or_add_broadcast_item)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">present</span>(completion_procedure)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;          find_or_add_broadcast_item%completion_procedure=&gt;completion_procedure</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;          find_or_add_broadcast_item%completion_procedure=&gt;null()</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        find_or_add_broadcast_item%handled=.false.</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_mutex_init(find_or_add_broadcast_item%mutex, -1))</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        generic=&gt;find_or_add_broadcast_item</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keyword">call </span>c_put_generic(broadcast_statuses, trim(field_name)//<span class="stringliteral">&quot;#&quot;</span>//conv_to_string(timestep), generic, .false.)</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(broadcast_statuses_rwlock))</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_cgraph" id="anamespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_cgraph">
<area shape="rect" title="Locates and returns or adds and returns a specific broadcast item representing a timestep and field." alt="" coords="5,129,228,171"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="504,5,659,47"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a46e749703e2e791961b93a72fc517664" title="Finds a specific broadcast item or null if none is found." alt="" coords="276,71,452,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="500,136,663,177"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="283,188,445,229"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="283,253,445,295"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="711,13,853,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="901,5,1068,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="500,71,663,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_icgraph" id="anamespacebroadcast__inter__io__mod_aabce3a8dfe788e5f00583999b3688f80_icgraph">
<area shape="rect" title="Locates and returns or adds and returns a specific broadcast item representing a timestep and field." alt="" coords="1469,129,1692,170"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="1259,81,1421,137"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1272,161,1408,217"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb" title="Initialises the broadcast inter IO functionality." alt="" coords="1051,81,1192,137"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="817,56,984,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,83,559,139"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="617,5,759,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,144,337,171"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,144,99,171"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="1032,161,1211,217"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="824,187,977,243"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="607,187,769,243"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="400,173,544,214"/>
</map>
</div>

</div>
</div>
<a id="a4db5d64e7a2f546eeaaa4bb825012d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db5d64e7a2f546eeaaa4bb825012d43">&#9670;&nbsp;</a></span>handle_recv_data_from_io_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine broadcast_inter_io_mod::handle_recv_data_from_io_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>data_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>inter_io_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles receiving data from another IO server and processing this. If the request has already been registered (with a callback) then this simply calls out. Otherwise it has to cache the data and awaits a thread calling the broadcast to call out to the callback. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The IO server configuration </td></tr>
    <tr><td class="paramname">data_buffer</td><td>Data received from other IO server </td></tr>
    <tr><td class="paramname">inter_io_index</td><td>Index of the inter IO communication description </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00136">136</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: data_buffer</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: inter_io_index    </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: broadcast_item</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: data_values</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: field_name</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordtype">integer</span> :: timestep</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keyword">call </span>unpackage_inter_io_communication_message(data_buffer, field_name, timestep, data_values)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    broadcast_item=&gt;find_or_add_broadcast_item(field_name, timestep)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(broadcast_item%completion_procedure)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(broadcast_item%mutex))</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      broadcast_item%handled=.true.</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(broadcast_item%mutex))</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keyword">call </span>issue_thread_call_to_completion(field_name, timestep, data_values, broadcast_item%completion_procedure)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(broadcast_item%mutex))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keyword">allocate</span>(broadcast_item%cached_values(<span class="keyword">size</span>(data_values)), source=data_values)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      broadcast_item%cached_values=data_values</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(broadcast_item%mutex))</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(data_values)) <span class="keyword">deallocate</span>(data_values)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_cgraph" id="anamespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_cgraph">
<area shape="rect" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="5,465,168,521"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="715,273,869,314"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aabce3a8dfe788e5f00583999b3688f80" title="Locates and returns or adds and returns a specific broadcast item representing a timestep and field." alt="" coords="216,131,439,173"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="711,555,873,597"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="711,439,873,481"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a231ba532141420ad11d921c509a5a06a" title="Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread..." alt="" coords="247,432,408,488"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a0dc71dae28791bc5c07bc4ad20c0be41" title="Unpackages some binary data into its individual fields. The field values are allocated here and the s..." alt="" coords="230,664,425,720"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="921,280,1064,307"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1112,273,1279,314"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a46e749703e2e791961b93a72fc517664" title="Finds a specific broadcast item or null if none is found." alt="" coords="487,163,663,205"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="711,37,873,78"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="493,33,656,74"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="493,98,656,139"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="711,163,873,205"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aa3e19e373e1f3520f836197cd9516519" title="Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments..." alt="" coords="504,432,645,488"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_icgraph" id="anamespacebroadcast__inter__io__mod_a4db5d64e7a2f546eeaaa4bb825012d43_icgraph">
<area shape="rect" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="1201,89,1364,145"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb" title="Initialises the broadcast inter IO functionality." alt="" coords="1012,89,1153,145"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="797,56,964,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,71,559,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="607,5,749,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,85,337,112"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,85,99,112"/>
</map>
</div>

</div>
</div>
<a id="a75700a7e7429e95b4233d0e068c8aafb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75700a7e7429e95b4233d0e068c8aafb">&#9670;&nbsp;</a></span>init_broadcast_inter_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public broadcast_inter_io_mod::init_broadcast_inter_io </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>io_configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the broadcast inter IO functionality. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The IO server configuration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00057">57</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">target</span> :: io_configuration</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span> (.not. initialised) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      stored_io_configuration=&gt;io_configuration</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;      initialised=.true.</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      bcast_count=0</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      thread_callback_params_id=0</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      bcast_clean_reduction_count=0</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_init(broadcast_statuses_rwlock, -1))</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(inter_io_description_mutex, -1))</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(thread_callback_params_mutex, -1))</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(clean_progress_mutex, -1))</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(bcast_count_mutex, -1))</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <span class="keyword">call </span>register_inter_io_communication(io_configuration, my_inter_io_tag, handle_recv_data_from_io_server, my_inter_io_name)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_cgraph" id="anamespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_cgraph">
<area shape="rect" title="Initialises the broadcast inter IO functionality." alt="" coords="5,421,147,477"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="904,323,1059,364"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="683,5,845,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a84f66d5153e8adc21918d4b4d627087f" title=" " alt="" coords="195,500,357,541"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="195,421,357,477"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#ac8b76c9e3792326dd7da0557f828e19f" title="Registers an inter IO communication operation." alt="" coords="209,651,343,707"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1111,330,1253,357"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1301,323,1468,364"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aabce3a8dfe788e5f00583999b3688f80" title="Locates and returns or adds and returns a specific broadcast item representing a timestep and field." alt="" coords="405,157,628,199"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="900,529,1063,571"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="900,631,1063,672"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a231ba532141420ad11d921c509a5a06a" title="Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread..." alt="" coords="436,486,597,542"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a0dc71dae28791bc5c07bc4ad20c0be41" title="Unpackages some binary data into its individual fields. The field values are allocated here and the s..." alt="" coords="419,355,614,411"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a46e749703e2e791961b93a72fc517664" title="Finds a specific broadcast item or null if none is found." alt="" coords="676,123,852,164"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="900,64,1063,105"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="683,188,845,229"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="900,129,1063,171"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aa3e19e373e1f3520f836197cd9516519" title="Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments..." alt="" coords="693,457,835,513"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#a93bd1e4353c781242c2ead4919973e87" title="Extends the array of inter io communications from its current suze to current size+data_stride+curren..." alt="" coords="443,739,590,795"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_icgraph" id="anamespacebroadcast__inter__io__mod_a75700a7e7429e95b4233d0e068c8aafb_icgraph">
<area shape="rect" title="Initialises the broadcast inter IO functionality." alt="" coords="1012,89,1153,145"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="797,56,964,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,71,559,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="607,5,749,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,85,337,112"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,85,99,112"/>
</map>
</div>

</div>
</div>
<a id="a231ba532141420ad11d921c509a5a06a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a231ba532141420ad11d921c509a5a06a">&#9670;&nbsp;</a></span>issue_thread_call_to_completion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine broadcast_inter_io_mod::issue_thread_call_to_completion </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(default_precision), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfaceinter__io__specifics__mod_1_1handle__completion.html">handle_completion</a>)&#160;</td>
          <td class="paramname"><em>completion_procedure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread and ensures the semantics of one IO server or many with message ordering are independent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The name of the field </td></tr>
    <tr><td class="paramname">timestep</td><td>The timestep </td></tr>
    <tr><td class="paramname">values</td><td>Data values </td></tr>
    <tr><td class="paramname">completion_procedure</td><td>The completion procedure to call </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00225">225</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keywordtype">    real</span>(DEFAULT_PRECISION), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: values</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">procedure</span>(handle_completion) :: completion_procedure</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">type</span>(threaded_callback_parameters_type), <span class="keywordtype">pointer</span> :: threaded_callback_state</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">allocate</span>(threaded_callback_state)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    threaded_callback_state%field_name=field_name</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    threaded_callback_state%timestep=timestep</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">allocate</span>(threaded_callback_state%values(<span class="keyword">size</span>(values)), source=values)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    threaded_callback_state%completion_procedure=&gt;completion_procedure</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(thread_callback_params_mutex))</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    generic=&gt;threaded_callback_state</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keyword">call </span>c_put_generic(thread_callback_params, trim(conv_to_string(thread_callback_params_id)), generic, .false.)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    thread_callback_params_id=thread_callback_params_id+1</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(thread_callback_params_mutex))</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    <span class="keyword">call </span>threadpool_start_thread(thread_call_to_completion, (/ thread_callback_params_id-1 /))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_cgraph" id="anamespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_cgraph">
<area shape="rect" title="Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread..." alt="" coords="5,90,167,146"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="408,5,563,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="404,77,567,119"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="404,155,567,196"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aa3e19e373e1f3520f836197cd9516519" title="Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments..." alt="" coords="215,57,356,113"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="615,13,757,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="805,5,972,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_icgraph" id="anamespacebroadcast__inter__io__mod_a231ba532141420ad11d921c509a5a06a_icgraph">
<area shape="rect" title="Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread..." alt="" coords="1469,121,1631,177"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="1259,81,1421,137"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1272,161,1408,217"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb" title="Initialises the broadcast inter IO functionality." alt="" coords="1051,81,1192,137"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="817,56,984,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,83,559,139"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="617,5,759,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,144,337,171"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,144,99,171"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="1032,161,1211,217"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="824,187,977,243"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="607,187,769,243"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="400,173,544,214"/>
</map>
</div>

</div>
</div>
<a id="a9c49585e6986ed7104ecc35a71347e78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c49585e6986ed7104ecc35a71347e78">&#9670;&nbsp;</a></span>perform_inter_io_broadcast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public broadcast_inter_io_mod::perform_inter_io_broadcast </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=double_precision), dimension(:)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>field_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfaceinter__io__specifics__mod_1_1handle__completion.html">handle_completion</a>)&#160;</td>
          <td class="paramname"><em>completion_procedure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on the IO server (and not MONC level) so might require some translation between the user's logical view and this view. Broadcasts are only issued once for a specific field_name and timestep pair. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration of the IO server </td></tr>
    <tr><td class="paramname">field_values</td><td>The values to communicate </td></tr>
    <tr><td class="paramname">field_size</td><td>Number of elements to communicate </td></tr>
    <tr><td class="paramname">field_name</td><td>Field name that the reduction will be performed over </td></tr>
    <tr><td class="paramname">root</td><td>The root IO server process </td></tr>
    <tr><td class="paramname">timestep</td><td>The timestep this is issued at </td></tr>
    <tr><td class="paramname">completion_procedure</td><td>Callback completion procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00174">174</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="keywordtype">    real</span>(kind=double_precision), <span class="keywordtype">dimension(:)</span> :: field_values</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: field_size, root, timestep    </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordtype">procedure</span>(handle_completion) :: completion_procedure</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: broadcast_item</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">integer</span> :: inter_io_comm_index, i, ierr</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keyword">call </span>clean_broadcast_progress_if_needed()</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    inter_io_comm_index=find_inter_io_from_name(io_configuration, my_inter_io_name)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    broadcast_item=&gt;find_or_add_broadcast_item(field_name, timestep, completion_procedure)    </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(broadcast_item%mutex))</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (io_configuration%my_io_rank == root .and. .not. broadcast_item%handled) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      broadcast_item%handled=.true.</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160; </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keyword">allocate</span>(broadcast_item%send_requests(io_configuration%number_of_io_servers))</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      broadcast_item%send_buffer=package_inter_io_communication_message(field_name, timestep, field_values)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">do</span> i=0, io_configuration%number_of_io_servers-1</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">if</span> (i .ne. io_configuration%my_io_rank) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;          <span class="keyword">call </span>lock_mpi()</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;          <span class="keyword">call </span>mpi_isend(broadcast_item%send_buffer, <span class="keyword">size</span>(broadcast_item%send_buffer), mpi_byte, i, &amp;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;               io_configuration%inter_io_communications(inter_io_comm_index)%message_tag, &amp;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;               io_configuration%io_communicator, broadcast_item%send_requests(i+1), ierr)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;          <span class="keyword">call </span>unlock_mpi()</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;          broadcast_item%send_requests(i+1)=mpi_request_null</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="comment">! Still call the completion procedure on the root</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keyword">call </span>issue_thread_call_to_completion(field_name, timestep, field_values, completion_procedure)</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(broadcast_item%cached_values) .and. .not. broadcast_item%handled) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        broadcast_item%handled=.true.</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <span class="keyword">call </span>issue_thread_call_to_completion(field_name, timestep, broadcast_item%cached_values, completion_procedure)</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(broadcast_item%cached_values)) <span class="keyword">deallocate</span>(broadcast_item%cached_values)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(broadcast_item%mutex))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_cgraph" id="anamespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_cgraph">
<area shape="rect" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="5,635,141,691"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="935,727,1089,768"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#ad2566335f2b2e7bccb878a1d35fb97b4" title="Calls out to do a broadcast progress clean if needed (i.e. every n steps.)" alt="" coords="223,602,378,658"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="931,45,1093,87"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="931,227,1093,268"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="698,361,869,403"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="698,727,869,768"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#aac6ab6e44250b1a2997e23aa4cbbe66c" title="Locates a the index of an inter IO entry from the operator name or returns 0 if none is found." alt="" coords="236,1245,365,1301"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aabce3a8dfe788e5f00583999b3688f80" title="Locates and returns or adds and returns a specific broadcast item representing a timestep and field." alt="" coords="189,981,412,1023"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a231ba532141420ad11d921c509a5a06a" title="Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread..." alt="" coords="467,179,629,235"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a62c05cf83d67d1dd5d4a7414fd21be48" title="Packages up fields into an io binary message (allocated here) which is used for sending." alt="" coords="203,1325,398,1381"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1141,734,1284,761"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1332,727,1499,768"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a68cd14e8efbb15c0bb5129e82140cdeb" title="Performs a clean of the broadcast progresses that no longer need to be stored." alt="" coords="471,602,625,658"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="702,479,865,520"/>
<area shape="rect" href="namespaceforthread__mod.html#aecdd575526686417bde58b7ae8f73735" title=" " alt="" coords="702,609,865,651"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="702,909,865,951"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="702,975,865,1016"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="702,792,865,833"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a676b7e1500cb206a945de3f3508d4497" title="Locates a broadcast item within a mapentry or null if none exists." alt="" coords="684,544,883,585"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a46e749703e2e791961b93a72fc517664" title="Finds a specific broadcast item or null if none is found." alt="" coords="460,1011,636,1052"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="467,1128,629,1169"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#aa3e19e373e1f3520f836197cd9516519" title="Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments..." alt="" coords="713,129,854,185"/>
<area shape="rect" href="namespaceio__server__client__mod.html#a8ffb596e1dfa516877825fbcc1da77b2" title="Packs an array field into the sending buffer." alt="" coords="475,1365,621,1407"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="475,1300,621,1341"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_icgraph" id="anamespacebroadcast__inter__io__mod_a9c49585e6986ed7104ecc35a71347e78_icgraph">
<area shape="rect" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1216,39,1352,95"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="989,5,1168,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="788,39,941,95"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="577,39,740,95"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="385,46,529,87"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,53,337,80"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,53,99,80"/>
</map>
</div>

</div>
</div>
<a id="a676b7e1500cb206a945de3f3508d4497"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a676b7e1500cb206a945de3f3508d4497">&#9670;&nbsp;</a></span>retrieve_broadcast_item()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structbroadcast__inter__io__mod_1_1inter__io__broadcast.html">inter_io_broadcast</a>) function, pointer broadcast_inter_io_mod::retrieve_broadcast_item </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1mapentry__type.html">mapentry_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>mapentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locates a broadcast item within a mapentry or null if none exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapentry</td><td>The map entry to use for this retrieval </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The broadcast status or null if none exists </dd></dl>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00414">414</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordtype">type</span>(mapentry_type), <span class="keywordtype">intent(in)</span> :: mapentry</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordtype">type</span>(inter_io_broadcast), <span class="keywordtype">pointer</span> :: retrieve_broadcast_item</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    generic=&gt;c_get_generic(mapentry)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160; </div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keywordflow">        type is</span> (inter_io_broadcast)</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;          retrieve_broadcast_item=&gt;generic</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      retrieve_broadcast_item=&gt;null()</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_a676b7e1500cb206a945de3f3508d4497_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_a676b7e1500cb206a945de3f3508d4497_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_a676b7e1500cb206a945de3f3508d4497_icgraph" id="anamespacebroadcast__inter__io__mod_a676b7e1500cb206a945de3f3508d4497_icgraph">
<area shape="rect" title="Locates a broadcast item within a mapentry or null if none exists." alt="" coords="1873,93,2072,134"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a5a216d3d245a16d49382469935678334" title="Checks the statuses for broadcast completion and returns whether they are all finished or not." alt="" coords="1662,5,1825,61"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a68cd14e8efbb15c0bb5129e82140cdeb" title="Performs a clean of the broadcast progresses that no longer need to be stored." alt="" coords="1666,85,1821,141"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a47cb2b35b1ce243fb5044360a9bac4c3" title="Finalises the broadcast inter IO functionality." alt="" coords="1661,165,1825,221"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#ad2566335f2b2e7bccb878a1d35fb97b4" title="Calls out to do a broadcast progress clean if needed (i.e. every n steps.)" alt="" coords="1441,85,1595,141"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1227,85,1363,141"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="989,53,1168,109"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="788,87,941,143"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="577,87,740,143"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="385,94,529,135"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,101,337,128"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,101,99,128"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#adda372f876f04100eb7944557a195b64" title="Finalises the all reduction inter IO functionality." alt="" coords="1423,165,1613,221"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a3c16286b2d9369ad1ada72d9c88684b1" title="Finalises the global callback." alt="" coords="1216,165,1375,221"/>
</map>
</div>

</div>
</div>
<a id="aa3e19e373e1f3520f836197cd9516519"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3e19e373e1f3520f836197cd9516519">&#9670;&nbsp;</a></span>thread_call_to_completion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine broadcast_inter_io_mod::thread_call_to_completion </td>
          <td>(</td>
          <td class="paramtype">integer, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout), optional, allocatable&#160;</td>
          <td class="paramname"><em>data_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments Integer arguments, this is the ID of the entry in the state @data_buffer Unused here. </p>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00253">253</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: arguments</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: data_buffer</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordtype">type</span>(threaded_callback_parameters_type), <span class="keywordtype">pointer</span> :: threaded_callback_state</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(thread_callback_params_mutex))</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    generic=&gt;c_get_generic(thread_callback_params, trim(conv_to_string(arguments(1))))</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="keywordflow">    type is</span> (threaded_callback_parameters_type)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      threaded_callback_state=&gt;generic</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <span class="keyword">call </span>c_remove(thread_callback_params, trim(conv_to_string(arguments(1))))</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="keywordflow">    end select</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(thread_callback_params_mutex))</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(threaded_callback_state)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keyword">call </span>threaded_callback_state%completion_procedure(stored_io_configuration, threaded_callback_state%values, &amp;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;           threaded_callback_state%field_name, threaded_callback_state%timestep)</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keyword">deallocate</span>(threaded_callback_state%values)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keyword">deallocate</span>(threaded_callback_state)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_cgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_cgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_cgraph" id="anamespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_cgraph">
<area shape="rect" title="Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments..." alt="" coords="5,63,147,119"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="199,5,353,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="195,71,357,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="195,136,357,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="405,13,548,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="596,5,763,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_icgraph.png" border="0" usemap="#anamespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_icgraph" alt=""/></div>
<map name="namespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_icgraph" id="anamespacebroadcast__inter__io__mod_aa3e19e373e1f3520f836197cd9516519_icgraph">
<area shape="rect" title="Called by the thread pool, this will call onto the completion procedure before cleaning up @arguments..." alt="" coords="1679,121,1820,177"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a231ba532141420ad11d921c509a5a06a" title="Issues the call into the thread pool to call the completion procedure, this runs in a seperate thread..." alt="" coords="1469,121,1631,177"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="1259,81,1421,137"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1272,161,1408,217"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb" title="Initialises the broadcast inter IO functionality." alt="" coords="1051,81,1192,137"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="817,56,984,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,83,559,139"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="617,5,759,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,144,337,171"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,144,99,171"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="1032,161,1211,217"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="824,187,977,243"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="607,187,769,243"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="400,173,544,214"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aadd9af8346eeddfdf76a1336e22f8df3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aadd9af8346eeddfdf76a1336e22f8df3">&#9670;&nbsp;</a></span>bcast_clean_reduction_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::bcast_clean_reduction_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="a32ba66c03804eea5f0f987dc41ce0695"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ba66c03804eea5f0f987dc41ce0695">&#9670;&nbsp;</a></span>bcast_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::bcast_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="a3ac00544c5aefb8573e21cc16e55dd2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ac00544c5aefb8573e21cc16e55dd2c">&#9670;&nbsp;</a></span>bcast_count_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::bcast_count_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="a8a579e981dbb6acb87efe603d97cdfd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a579e981dbb6acb87efe603d97cdfd3">&#9670;&nbsp;</a></span>broadcast_statuses</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile broadcast_inter_io_mod::broadcast_statuses</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00047">47</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span> :: broadcast_statuses, thread_callback_params</div>
</div><!-- fragment -->
</div>
</div>
<a id="a642491f4609a6b292c00d3d6e72ee62c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a642491f4609a6b292c00d3d6e72ee62c">&#9670;&nbsp;</a></span>broadcast_statuses_rwlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::broadcast_statuses_rwlock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span> :: broadcast_statuses_rwlock, inter_io_description_mutex, clean_progress_mutex, &amp;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;       bcast_count_mutex, bcast_clean_reduction_count, bcast_count, thread_callback_params_id, thread_callback_params_mutex</div>
</div><!-- fragment -->
</div>
</div>
<a id="a663a11870b7769a971f30f7ad39de5b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a663a11870b7769a971f30f7ad39de5b0">&#9670;&nbsp;</a></span>clean_progress_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::clean_progress_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="aef8d78f235f66eed9265ac9ff24bcb8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef8d78f235f66eed9265ac9ff24bcb8f">&#9670;&nbsp;</a></span>initialised</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical, volatile broadcast_inter_io_mod::initialised =.false.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00050">50</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <span class="keywordtype">logical</span>, <span class="keywordtype">volatile</span> :: initialised=.false.</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a86a8f0342121beba6023db6c71b016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a86a8f0342121beba6023db6c71b016">&#9670;&nbsp;</a></span>inter_io_description_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::inter_io_description_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="a76e633c1b04652828c9810ec4b4ba19d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76e633c1b04652828c9810ec4b4ba19d">&#9670;&nbsp;</a></span>my_inter_io_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character(len=*), parameter broadcast_inter_io_mod::my_inter_io_name =&quot;bcastinterio&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Type keeping track of broadcast statuses. </p>

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00026">26</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">parameter</span> :: MY_INTER_IO_NAME=<span class="stringliteral">&quot;bcastinterio&quot;</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a179cd67b4ef5d32771dc805846b83f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a179cd67b4ef5d32771dc805846b83f39">&#9670;&nbsp;</a></span>my_inter_io_tag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter broadcast_inter_io_mod::my_inter_io_tag =2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00025">25</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">parameter</span> :: MY_INTER_IO_TAG=2, perform_clean_every=200</div>
</div><!-- fragment -->
</div>
</div>
<a id="abdf3597b03a198143d1490e3d944cbf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abdf3597b03a198143d1490e3d944cbf9">&#9670;&nbsp;</a></span>perform_clean_every</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter broadcast_inter_io_mod::perform_clean_every =200</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00025">25</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="a2f301b0fa4c9c6f82e272d98b00cdbf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f301b0fa4c9c6f82e272d98b00cdbf8">&#9670;&nbsp;</a></span>stored_io_configuration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), pointer broadcast_inter_io_mod::stored_io_configuration</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00046">46</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">pointer</span> :: stored_io_configuration</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5bcc406a200f44c9b76e6114e6f01fa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bcc406a200f44c9b76e6114e6f01fa5">&#9670;&nbsp;</a></span>thread_callback_params</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile broadcast_inter_io_mod::thread_callback_params</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00047">47</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="ad577ec9e2189b90932bc53ecab24e26d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad577ec9e2189b90932bc53ecab24e26d">&#9670;&nbsp;</a></span>thread_callback_params_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::thread_callback_params_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
<a id="aa282a4307f0282d359f45ea4b1067e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa282a4307f0282d359f45ea4b1067e07">&#9670;&nbsp;</a></span>thread_callback_params_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile broadcast_inter_io_mod::thread_callback_params_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="broadcast-inter-io_8F90_source.html#l00048">48</a> of file <a class="el" href="broadcast-inter-io_8F90_source.html">broadcast-inter-io.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
