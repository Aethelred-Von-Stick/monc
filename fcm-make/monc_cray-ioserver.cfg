steps = extract preprocess build

extract.location{primary}[monc] = ~/work/MONC

extract.ns = monc 

extract.location[monc]  = r726_use_fcm_make

extract.location{diff}[monc]  = $HERE/..
extract.path-excl[monc] = / io/src/forthread
extract.path-incl[monc] = components model_core io misc testcases monc_driver.F90

preprocess.prop{file-ext.h} = .static
preprocess.prop{fpp.flags}  = -E -P -traditional
preprocess.prop{fpp.defs}   = U_ACTIVE V_ACTIVE W_ACTIVE 

preprocess.prop{class, no-dep.include} = argsts.h typsts.h s_scmop.h

$packages_path{?}    = /opt/cray

$netcdf_path{?}     = $packages_path/netcdf-hdf5parallel/4.3.2/CRAY/83
$netcdf_inc_path{?} = $netcdf_path/include
$netcdf_lib_path{?} = $netcdf_path/lib

$fftw_path{?}       = $packages_path/fftw/3.3.4.1/sandybridge/lib
$fftw_inc_path{?}   = $fftw_path/include
$fftw_lib_path{?}   = $fftw_path/lib

$hdf5_path{?}       = $packages_path/hdf5-parallel/1.8.13/CRAY/83
$hdf5_lib_path{?}   = $hdf5_path/lib

build.target                       = monc_driver.exe
build.prop{class,no-dep.f.module}  = mpi netcdf
build.prop{class,no-dep.include}   = fftw3.f03
build.prop{class,fc.include-paths} = $netcdf_inc_path $fftw_inc_path
build.prop{class,fc}               = ftn
build.prop{class,fc.flags}         = -O3 -e m -J .
build.prop{class,fc.libs}          = netcdff netcdf hdf5 hdf5_hl z fftw3
build.prop{class,fc.lib-paths}     = $netcdf_lib_path $fftw_lib_path $hdf5_lib_path

build.prop{file-name-option.f90-mod} = case=upper


build.prop{class,fc.flags}{monc/io} = -O3 -c -e R
build.prop{class,fc.flags}{monc/model_core} = -O3 -c -e R
