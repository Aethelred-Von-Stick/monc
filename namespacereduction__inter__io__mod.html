<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: reduction_inter_io_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">reduction_inter_io_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Reduction inter IO action which will perform reductions between IO servers. This is not as trivial as calling the MPI function as it is nondeterministic when messages will arrive and hence when one reduction on a process and a reduction on another should be called.  
<a href="namespacereduction__inter__io__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a7169f0a03e60e46122e71b490e1905eb"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb">init_reduction_inter_io</a> (io_configuration)</td></tr>
<tr class="memdesc:a7169f0a03e60e46122e71b490e1905eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the reduction action.  <a href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb">More...</a><br /></td></tr>
<tr class="separator:a7169f0a03e60e46122e71b490e1905eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85941bfa01b3ffc89f04d2ace55a7f4d"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d">handle_recv_data_from_io_server</a> (io_configuration, data_buffer, inter_io_index)</td></tr>
<tr class="memdesc:a85941bfa01b3ffc89f04d2ace55a7f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the receiving of data from some other IO server. This is issued call back style within a thread to handle that data.  <a href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d">More...</a><br /></td></tr>
<tr class="separator:a85941bfa01b3ffc89f04d2ace55a7f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ffab62808c76c7592c04db0b34dc426"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a8ffab62808c76c7592c04db0b34dc426">check_reduction_inter_io_for_completion</a> (io_configuration)</td></tr>
<tr class="memdesc:a8ffab62808c76c7592c04db0b34dc426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks this action for completion, when all are completed then the IO server can shutdown as this is called once all MONC processes have deregistered.  <a href="namespacereduction__inter__io__mod.html#a8ffab62808c76c7592c04db0b34dc426">More...</a><br /></td></tr>
<tr class="separator:a8ffab62808c76c7592c04db0b34dc426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93d313cfba0ead9d2d97ef6c094edbab"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a93d313cfba0ead9d2d97ef6c094edbab">finalise_reduction_inter_io</a> (io_configuration)</td></tr>
<tr class="memdesc:a93d313cfba0ead9d2d97ef6c094edbab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalises the reduction action, waiting for all outstanding requests and then freeing data.  <a href="namespacereduction__inter__io__mod.html#a93d313cfba0ead9d2d97ef6c094edbab">More...</a><br /></td></tr>
<tr class="separator:a93d313cfba0ead9d2d97ef6c094edbab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd4c0a62bdef47841ccb4731a0c96e8"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8">perform_inter_io_reduction</a> (io_configuration, field_values, field_size, reduction_field_name, reduction_op, root, timestep, completion_procedure)</td></tr>
<tr class="memdesc:afbd4c0a62bdef47841ccb4731a0c96e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Actually handles the processing for this data wrt the vertical reduction.  <a href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8">More...</a><br /></td></tr>
<tr class="separator:afbd4c0a62bdef47841ccb4731a0c96e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0bf6811584fdb36107b4d2e1c185d69"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#ad0bf6811584fdb36107b4d2e1c185d69">clean_progress</a> (myrank)</td></tr>
<tr class="separator:ad0bf6811584fdb36107b4d2e1c185d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d635793eb07832a7420bf579526cdca"><td class="memItemLeft" align="right" valign="top">logical function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a7d635793eb07832a7420bf579526cdca">check_and_clean_progress</a> (myrank)</td></tr>
<tr class="memdesc:a7d635793eb07832a7420bf579526cdca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks all the reduction progresses and will remove any that have completed. This is designed to be called from an IO server other than 0 (the master IO server) and it checks if the outstanding async send handle has completed. Checking on the master IO server or checking any progress that is not currently sending is fine and will not impact the correctness (but obviously the progress wont be freed)  <a href="namespacereduction__inter__io__mod.html#a7d635793eb07832a7420bf579526cdca">More...</a><br /></td></tr>
<tr class="separator:a7d635793eb07832a7420bf579526cdca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab41f299ba351aa0bb6895b884e99aa3a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#ab41f299ba351aa0bb6895b884e99aa3a">integrate_io_server_collective_values</a> (reduction_op, reduction_progress, single_server_values, number_elements, collective_values_empty)</td></tr>
<tr class="memdesc:ab41f299ba351aa0bb6895b884e99aa3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Integrates the collective values from another IO server into the currently stored values.  <a href="namespacereduction__inter__io__mod.html#ab41f299ba351aa0bb6895b884e99aa3a">More...</a><br /></td></tr>
<tr class="separator:ab41f299ba351aa0bb6895b884e99aa3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb8512d99c36d96498328af7e47194cb"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb">handle_local_moncs_completed_collective</a> (io_configuration, reduction_progress)</td></tr>
<tr class="memdesc:adb8512d99c36d96498328af7e47194cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the case where the local MONC processes have completed their collective operation for a specific reduction and, for this IO server, it either needs to send its value to the master IO server or, if it is the master, check for completion.  <a href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb">More...</a><br /></td></tr>
<tr class="separator:adb8512d99c36d96498328af7e47194cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b0356e066bb9478654f150c322e9f01"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01">handle_process_recv_from_other_io_server</a> (io_configuration, inter_io_comm, myrank, data_buffer, number_io_servers)</td></tr>
<tr class="memdesc:a6b0356e066bb9478654f150c322e9f01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the data received from another IO server, locates the correct reduction progress, appends the information and then checks for &amp; deals with the situation where that reduction is completed.  <a href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01">More...</a><br /></td></tr>
<tr class="separator:a6b0356e066bb9478654f150c322e9f01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458a37210e06eb9d9b370eee7be082ec"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec">handle_collective_completed</a> (io_configuration, reduction_progress)</td></tr>
<tr class="memdesc:a458a37210e06eb9d9b370eee7be082ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the situation where collective communication for a specific reduction has completed across all IO servers.  <a href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec">More...</a><br /></td></tr>
<tr class="separator:a458a37210e06eb9d9b370eee7be082ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ed33f2a10ddbfc3d66a54abb6db3687"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687">find_or_add_reduction_progress</a> (timestep, reduction_operator, root, field_name, completion_procedure)</td></tr>
<tr class="memdesc:a2ed33f2a10ddbfc3d66a54abb6db3687"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds or adds a specific reduction progress based upon the timestep and reduction operator. If none can be found then a new progress is added in. With new progresses this procedure will initialise them.  <a href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687">More...</a><br /></td></tr>
<tr class="separator:a2ed33f2a10ddbfc3d66a54abb6db3687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77d19aa56a2f87228010cfc74bf7677c"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c">find_reduction_progress</a> (timestep, reduction_operator, field_name, issue_read_lock)</td></tr>
<tr class="memdesc:a77d19aa56a2f87228010cfc74bf7677c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locates a specific reduction progress based upon the timestep, operator and field name.  <a href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c">More...</a><br /></td></tr>
<tr class="separator:a77d19aa56a2f87228010cfc74bf7677c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ddd54c71143c5974c8f7fdafd7dbc0a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a">remove_reduction_progress</a> (reduction_progress)</td></tr>
<tr class="memdesc:a4ddd54c71143c5974c8f7fdafd7dbc0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a specific reduction progress.  <a href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a">More...</a><br /></td></tr>
<tr class="separator:a4ddd54c71143c5974c8f7fdafd7dbc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58c1e46c1eea51c17d72cd35b75b86b9"><td class="memItemLeft" align="right" valign="top">character(len=string_length) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9">generate_reduction_key</a> (field_name, timestep, reduction_operator)</td></tr>
<tr class="memdesc:a58c1e46c1eea51c17d72cd35b75b86b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates the lookup key that is used for the map storage of reduction progresses.  <a href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9">More...</a><br /></td></tr>
<tr class="separator:a58c1e46c1eea51c17d72cd35b75b86b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392694a236f09728ae9e72400017d606"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a392694a236f09728ae9e72400017d606">retrieve_reduction_progress</a> (mapentry)</td></tr>
<tr class="memdesc:a392694a236f09728ae9e72400017d606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function to retrieve the reduction progress from a mapentry.  <a href="namespacereduction__inter__io__mod.html#a392694a236f09728ae9e72400017d606">More...</a><br /></td></tr>
<tr class="separator:a392694a236f09728ae9e72400017d606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a877f8fb7481ed0f1e445e02c53c5d9dd"><td class="memItemLeft" align="right" valign="top">integer function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a877f8fb7481ed0f1e445e02c53c5d9dd">get_reduction_operator</a> (op_string)</td></tr>
<tr class="memdesc:a877f8fb7481ed0f1e445e02c53c5d9dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given the map of action attributes this procedure will identify the reduction operator that has been selected by the configuration.  <a href="namespacereduction__inter__io__mod.html#a877f8fb7481ed0f1e445e02c53c5d9dd">More...</a><br /></td></tr>
<tr class="separator:a877f8fb7481ed0f1e445e02c53c5d9dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3b04cee18b54da3fedc26f73d285b427"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a3b04cee18b54da3fedc26f73d285b427">mean</a> =1</td></tr>
<tr class="separator:a3b04cee18b54da3fedc26f73d285b427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39d60ed293f22334c90fd8b02d37c7ab"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a39d60ed293f22334c90fd8b02d37c7ab">min</a> =2</td></tr>
<tr class="separator:a39d60ed293f22334c90fd8b02d37c7ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58a2caa487ea5ae186d7adec6fd9e2ec"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a58a2caa487ea5ae186d7adec6fd9e2ec">max</a> =3</td></tr>
<tr class="separator:a58a2caa487ea5ae186d7adec6fd9e2ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af689f4adbd42c741e45270ee68600981"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#af689f4adbd42c741e45270ee68600981">sum</a> =4</td></tr>
<tr class="separator:af689f4adbd42c741e45270ee68600981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5080ab97bb047b9705d5e25109fc59"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a4e5080ab97bb047b9705d5e25109fc59">my_inter_io_tag</a> =1</td></tr>
<tr class="separator:a4e5080ab97bb047b9705d5e25109fc59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a07dc5005f2a5bba707c0bee0b27a4"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#ab3a07dc5005f2a5bba707c0bee0b27a4">perform_clean_every</a> =200</td></tr>
<tr class="separator:ab3a07dc5005f2a5bba707c0bee0b27a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9631bb078d2a9cf289ce4e449aa5598b"><td class="memItemLeft" align="right" valign="top">character(len= *), parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a9631bb078d2a9cf289ce4e449aa5598b">my_inter_io_name</a> =&quot;reductioninterio&quot;</td></tr>
<tr class="separator:a9631bb078d2a9cf289ce4e449aa5598b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7904e115fcc25307b63700a5be725c5"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#ab7904e115fcc25307b63700a5be725c5">reduction_progress_rwlock</a></td></tr>
<tr class="separator:ab7904e115fcc25307b63700a5be725c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8626b5219c26ca2f8e5f3e1c29d7cee9"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a8626b5219c26ca2f8e5f3e1c29d7cee9">inter_io_description_mutex</a></td></tr>
<tr class="separator:a8626b5219c26ca2f8e5f3e1c29d7cee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf808f783e95804d7053125b7702fd2a"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#aaf808f783e95804d7053125b7702fd2a">clean_progress_mutex</a></td></tr>
<tr class="separator:aaf808f783e95804d7053125b7702fd2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a448462f8f74d8642b1ced80db32faf44"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a448462f8f74d8642b1ced80db32faf44">reduction_count_mutex</a></td></tr>
<tr class="separator:a448462f8f74d8642b1ced80db32faf44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5459d5f699a83a4fc3f9ac0eb2061337"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a5459d5f699a83a4fc3f9ac0eb2061337">previous_clean_reduction_count</a></td></tr>
<tr class="separator:a5459d5f699a83a4fc3f9ac0eb2061337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02caf2a42bdd88b8e6506a4c12c525d4"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a02caf2a42bdd88b8e6506a4c12c525d4">reduction_count</a></td></tr>
<tr class="separator:a02caf2a42bdd88b8e6506a4c12c525d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4093747703788f10c1a39b10e48375"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#adb4093747703788f10c1a39b10e48375">reduction_progresses</a></td></tr>
<tr class="separator:adb4093747703788f10c1a39b10e48375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a839c06dc08f714029b7dea8757b416dd"><td class="memItemLeft" align="right" valign="top">logical, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacereduction__inter__io__mod.html#a839c06dc08f714029b7dea8757b416dd">initialised</a> =.false.</td></tr>
<tr class="separator:a839c06dc08f714029b7dea8757b416dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Reduction inter IO action which will perform reductions between IO servers. This is not as trivial as calling the MPI function as it is nondeterministic when messages will arrive and hence when one reduction on a process and a reduction on another should be called. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a7d635793eb07832a7420bf579526cdca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d635793eb07832a7420bf579526cdca">&#9670;&nbsp;</a></span>check_and_clean_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical function reduction_inter_io_mod::check_and_clean_progress </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>myrank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks all the reduction progresses and will remove any that have completed. This is designed to be called from an IO server other than 0 (the master IO server) and it checks if the outstanding async send handle has completed. Checking on the master IO server or checking any progress that is not currently sending is fine and will not impact the correctness (but obviously the progress wont be freed) </p>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00174">174</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: myrank</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">integer</span> :: i, entries, completed, ierr, num_to_remove, have_lock</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordtype">type</span>(list_type) :: entries_to_remove</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordtype">type</span>(mapentry_type) :: mapentry</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">pointer</span> :: specific_reduction_progress</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: entry_key</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">logical</span> :: destroy_lock</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    check_and_clean_progress=.true.</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    have_lock=forthread_mutex_trylock(clean_progress_mutex)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (have_lock == 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      iterator=c_get_iterator(reduction_progresses)</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        mapentry=c_next_mapentry(iterator)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        destroy_lock=.false.</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        specific_reduction_progress=&gt;retrieve_reduction_progress(mapentry)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="keywordflow">if</span> (myrank /= specific_reduction_progress%root) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;          <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(specific_reduction_progress%mutex))</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;          <span class="keywordflow">if</span> (specific_reduction_progress%async_handle /= mpi_request_null) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            <span class="keyword">call </span>wait_for_mpi_request(specific_reduction_progress%async_handle)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            <span class="comment">!if (completed == 1) then</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">if</span> (specific_reduction_progress%async_handle == mpi_request_null) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;              <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(specific_reduction_progress%send_buffer)) <span class="keyword">deallocate</span>(specific_reduction_progress%send_buffer)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;              destroy_lock=.true.</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;              <span class="keyword">call </span>c_add_string(entries_to_remove, mapentry%key)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;              check_and_clean_progress=.false.</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="keywordflow">            end if</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(specific_reduction_progress%mutex))</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <span class="keywordflow">if</span> (destroy_lock) <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(specific_reduction_progress%mutex))</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">if</span> (.not. c_is_empty(entries_to_remove)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_rwlock_wrlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        iterator=c_get_iterator(entries_to_remove)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;          entry_key=c_next_string(iterator)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;          generic=&gt;c_get_generic(reduction_progresses, entry_key)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;          <span class="keyword">call </span>c_remove(reduction_progresses, entry_key)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;          <span class="keyword">deallocate</span>(generic)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="keywordflow">        end do</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keyword">call </span>c_free(entries_to_remove)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(clean_progress_mutex))</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_cgraph" id="anamespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_cgraph">
<area shape="rect" title="Checks all the reduction progresses and will remove any that have completed. This is designed to be c..." alt="" coords="5,275,167,331"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="672,184,827,225"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="219,66,381,108"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="668,416,831,457"/>
<area shape="rect" href="namespaceforthread__mod.html#aecdd575526686417bde58b7ae8f73735" title=" " alt="" coords="219,184,381,225"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="668,64,831,105"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="219,314,381,356"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="219,380,381,421"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="219,445,381,486"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a392694a236f09728ae9e72400017d606" title="Helper function to retrieve the reduction progress from a mapentry." alt="" coords="219,510,381,566"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="215,249,385,290"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="879,191,1021,218"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1069,184,1236,225"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="441,249,612,290"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="433,314,620,356"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="441,184,612,225"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_icgraph" id="anamespacereduction__inter__io__mod_a7d635793eb07832a7420bf579526cdca_icgraph">
<area shape="rect" title="Checks all the reduction progresses and will remove any that have completed. This is designed to be c..." alt="" coords="1243,41,1404,97"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a8ffab62808c76c7592c04db0b34dc426" title="Checks this action for completion, when all are completed then the IO server can shutdown as this is ..." alt="" coords="1032,5,1195,61"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#ad0bf6811584fdb36107b4d2e1c185d69" title=" " alt="" coords="1039,85,1187,126"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="848,77,984,133"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="647,77,800,133"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="436,77,599,133"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="244,85,388,126"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,92,196,119"/>
</map>
</div>

</div>
</div>
<a id="a8ffab62808c76c7592c04db0b34dc426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ffab62808c76c7592c04db0b34dc426">&#9670;&nbsp;</a></span>check_reduction_inter_io_for_completion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public reduction_inter_io_mod::check_reduction_inter_io_for_completion </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks this action for completion, when all are completed then the IO server can shutdown as this is called once all MONC processes have deregistered. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration state of the IO server </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the action has completed </dd></dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00082">82</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    check_reduction_inter_io_for_completion=check_and_clean_progress(io_configuration%my_io_rank)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a8ffab62808c76c7592c04db0b34dc426_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a8ffab62808c76c7592c04db0b34dc426_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a8ffab62808c76c7592c04db0b34dc426_cgraph" id="anamespacereduction__inter__io__mod_a8ffab62808c76c7592c04db0b34dc426_cgraph">
<area shape="rect" title="Checks this action for completion, when all are completed then the IO server can shutdown as this is ..." alt="" coords="5,275,168,331"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7d635793eb07832a7420bf579526cdca" title="Checks all the reduction progresses and will remove any that have completed. This is designed to be c..." alt="" coords="216,275,377,331"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="883,184,1037,225"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="429,66,592,108"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="879,416,1041,457"/>
<area shape="rect" href="namespaceforthread__mod.html#aecdd575526686417bde58b7ae8f73735" title=" " alt="" coords="429,184,592,225"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="879,64,1041,105"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="429,314,592,356"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="429,380,592,421"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="429,445,592,486"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a392694a236f09728ae9e72400017d606" title="Helper function to retrieve the reduction progress from a mapentry." alt="" coords="429,510,592,566"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="425,249,596,290"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1089,191,1232,218"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1280,184,1447,225"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="652,249,823,290"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="644,314,831,356"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="652,184,823,225"/>
</map>
</div>

</div>
</div>
<a id="ad0bf6811584fdb36107b4d2e1c185d69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0bf6811584fdb36107b4d2e1c185d69">&#9670;&nbsp;</a></span>clean_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine reduction_inter_io_mod::clean_progress </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>myrank</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00154">154</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: myrank</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">logical</span> :: cc_dummy</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(reduction_count_mutex))  </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    reduction_count=reduction_count+1</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">if</span> (previous_clean_reduction_count + perform_clean_every .lt. reduction_count) <span class="keywordflow">then</span>      </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      previous_clean_reduction_count=reduction_count</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(reduction_count_mutex))        </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      cc_dummy=check_and_clean_progress(myrank)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(reduction_count_mutex))      </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_cgraph" id="anamespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_cgraph">
<area shape="rect" title=" " alt="" coords="5,517,153,559"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7d635793eb07832a7420bf579526cdca" title="Checks all the reduction progresses and will remove any that have completed. This is designed to be c..." alt="" coords="201,363,363,419"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="868,244,1023,285"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="864,429,1027,471"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="864,612,1027,653"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="415,240,577,281"/>
<area shape="rect" href="namespaceforthread__mod.html#aecdd575526686417bde58b7ae8f73735" title=" " alt="" coords="415,371,577,412"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="415,488,577,529"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="415,553,577,595"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="415,44,577,85"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a392694a236f09728ae9e72400017d606" title="Helper function to retrieve the reduction progress from a mapentry." alt="" coords="415,109,577,165"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="411,305,581,347"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1075,251,1217,278"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1265,244,1432,285"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="637,305,808,347"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="629,240,816,281"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="637,371,808,412"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_icgraph" id="anamespacereduction__inter__io__mod_ad0bf6811584fdb36107b4d2e1c185d69_icgraph">
<area shape="rect" title=" " alt="" coords="1032,13,1180,54"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="848,5,984,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="647,5,800,61"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="436,5,599,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="244,13,388,54"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,20,196,47"/>
</map>
</div>

</div>
</div>
<a id="a93d313cfba0ead9d2d97ef6c094edbab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93d313cfba0ead9d2d97ef6c094edbab">&#9670;&nbsp;</a></span>finalise_reduction_inter_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public reduction_inter_io_mod::finalise_reduction_inter_io </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalises the reduction action, waiting for all outstanding requests and then freeing data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration state of the IO server </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00090">90</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type) :: progress</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (initialised) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      <span class="keywordflow">if</span> (.not. c_is_empty(reduction_progresses)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        iterator=c_get_iterator(reduction_progresses)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;          progress=retrieve_reduction_progress(c_next_mapentry(iterator))</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;          <span class="keywordflow">if</span> (progress%async_handle /= mpi_request_null) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <span class="keyword">call </span>wait_for_mpi_request(progress%async_handle)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="keywordflow">        end do</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_destroy(reduction_progress_rwlock))</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(inter_io_description_mutex))</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(clean_progress_mutex))</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(reduction_count_mutex))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      initialised=.false.</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_cgraph" id="anamespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_cgraph">
<area shape="rect" title="Finalises the reduction action, waiting for all outstanding requests and then freeing data." alt="" coords="5,221,165,277"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="671,5,825,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="217,163,380,204"/>
<area shape="rect" href="namespaceforthread__mod.html#a1ba0d6ac9839191688aeea507ae27ec8" title=" " alt="" coords="217,228,380,269"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="217,293,380,335"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="217,359,380,400"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a392694a236f09728ae9e72400017d606" title="Helper function to retrieve the reduction progress from a mapentry." alt="" coords="217,423,380,479"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="213,97,384,139"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="877,13,1020,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1068,5,1235,47"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="440,64,611,105"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="432,195,619,236"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="440,129,611,171"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="667,71,829,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="667,136,829,177"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_icgraph" id="anamespacereduction__inter__io__mod_a93d313cfba0ead9d2d97ef6c094edbab_icgraph">
<area shape="rect" title="Finalises the reduction action, waiting for all outstanding requests and then freeing data." alt="" coords="451,5,611,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#adda372f876f04100eb7944557a195b64" title="Finalises the all reduction inter IO functionality." alt="" coords="212,5,403,61"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a3c16286b2d9369ad1ada72d9c88684b1" title="Finalises the global callback." alt="" coords="5,5,164,61"/>
</map>
</div>

</div>
</div>
<a id="a2ed33f2a10ddbfc3d66a54abb6db3687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ed33f2a10ddbfc3d66a54abb6db3687">&#9670;&nbsp;</a></span>find_or_add_reduction_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>) function, pointer reduction_inter_io_mod::find_or_add_reduction_progress </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>reduction_operator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfaceinter__io__specifics__mod_1_1handle__completion.html">handle_completion</a>), optional&#160;</td>
          <td class="paramname"><em>completion_procedure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds or adds a specific reduction progress based upon the timestep and reduction operator. If none can be found then a new progress is added in. With new progresses this procedure will initialise them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestep</td><td>The timestep to match </td></tr>
    <tr><td class="paramname">reduction_operator</td><td>The reduction operator to match </td></tr>
    <tr><td class="paramname">field_name</td><td>The name of the field that the reduction type represents </td></tr>
    <tr><td class="paramname">num_vectors</td><td>The number of reduction vectors (items to reduce) to be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A reduction progress data object </dd></dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00360">360</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, reduction_operator, root</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">pointer</span> :: find_or_add_reduction_progress</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keywordtype">procedure</span>(handle_completion), <span class="keywordtype">optional</span> :: completion_procedure</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160; </div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">pointer</span> :: new_progress</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    find_or_add_reduction_progress=&gt;find_reduction_progress(timestep, reduction_operator, field_name)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(find_or_add_reduction_progress)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_wrlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      find_or_add_reduction_progress=&gt;find_reduction_progress(timestep, reduction_operator, field_name, issue_read_lock=.false.)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(find_or_add_reduction_progress)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keyword">allocate</span>(new_progress)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_mutex_init(new_progress%mutex, -1))</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        new_progress%timestep=timestep</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        new_progress%reduction_operator=reduction_operator</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        new_progress%contributed_moncs=0</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        new_progress%contributed_io_servers=0</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;        new_progress%root=root</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        new_progress%async_handle=mpi_request_null</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;        new_progress%field_name=field_name</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">present</span>(completion_procedure)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;          new_progress%completion_procedure=&gt;completion_procedure</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;          new_progress%completion_procedure=&gt;null()</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="keywordflow">        end if</span>        </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        generic=&gt;new_progress</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <span class="keyword">call </span>c_put_generic(reduction_progresses, generate_reduction_key(field_name, timestep, reduction_operator), &amp;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;             generic, .false.)</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        find_or_add_reduction_progress=&gt;new_progress</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="keywordflow">    end if</span>      </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(find_or_add_reduction_progress%completion_procedure) .and. <span class="keyword">present</span>(completion_procedure)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      find_or_add_reduction_progress%completion_procedure=&gt;completion_procedure</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_cgraph" id="anamespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_cgraph">
<area shape="rect" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="5,154,192,210"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="472,5,627,47"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="251,63,391,119"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="468,136,631,177"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="451,201,648,243"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="240,245,403,287"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="240,311,403,352"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="696,13,839,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="887,5,1053,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="468,71,631,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_icgraph" id="anamespacereduction__inter__io__mod_a2ed33f2a10ddbfc3d66a54abb6db3687_icgraph">
<area shape="rect" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="1524,140,1711,196"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1293,100,1476,156"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1317,180,1453,236"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1083,100,1245,156"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="885,100,1022,156"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="657,56,824,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,83,417,139"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="466,5,609,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,141,196,168"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="1087,180,1241,236"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="872,180,1035,236"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="465,187,609,229"/>
</map>
</div>

</div>
</div>
<a id="a77d19aa56a2f87228010cfc74bf7677c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77d19aa56a2f87228010cfc74bf7677c">&#9670;&nbsp;</a></span>find_reduction_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>) function, pointer reduction_inter_io_mod::find_reduction_progress </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>reduction_operator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in), optional&#160;</td>
          <td class="paramname"><em>issue_read_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locates a specific reduction progress based upon the timestep, operator and field name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timestep</td><td>The timestep to search for </td></tr>
    <tr><td class="paramname">reduction_operator</td><td>The reduction operator to search for </td></tr>
    <tr><td class="paramname">field_name</td><td>The field name which must match </td></tr>
    <tr><td class="paramname">reduction_progress_location</td><td>Optional location which is set to be the index of the matching progress item </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the reduction progress or null if none is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00406">406</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, reduction_operator    </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span> :: issue_read_lock</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">pointer</span> :: find_reduction_progress</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160; </div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordtype">logical</span> :: do_read_lock</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(issue_read_lock)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      do_read_lock=issue_read_lock      </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      do_read_lock=.true.</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (do_read_lock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    generic=&gt;c_get_generic(reduction_progresses, generate_reduction_key(field_name, timestep, reduction_operator))     </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="keywordflow">if</span> (do_read_lock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="keywordflow">      type is</span> (reduction_progress_type)      </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        find_reduction_progress=&gt;generic</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      find_reduction_progress=&gt;null()</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_cgraph" id="anamespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_cgraph">
<area shape="rect" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="5,97,145,153"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="215,5,369,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="211,71,373,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="211,136,373,177"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="193,201,391,243"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="439,13,581,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="629,5,796,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_icgraph" id="anamespacereduction__inter__io__mod_a77d19aa56a2f87228010cfc74bf7677c_icgraph">
<area shape="rect" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="1759,140,1899,196"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="1524,140,1711,196"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1293,100,1476,156"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1317,180,1453,236"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1083,100,1245,156"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="885,100,1022,156"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="657,56,824,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,83,417,139"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="466,5,609,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,141,196,168"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="1087,180,1241,236"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="872,180,1035,236"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="465,187,609,229"/>
</map>
</div>

</div>
</div>
<a id="a58c1e46c1eea51c17d72cd35b75b86b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58c1e46c1eea51c17d72cd35b75b86b9">&#9670;&nbsp;</a></span>generate_reduction_key()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character(len=string_length) function reduction_inter_io_mod::generate_reduction_key </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>reduction_operator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates the lookup key that is used for the map storage of reduction progresses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The field name </td></tr>
    <tr><td class="paramname">timestep</td><td>The timestep </td></tr>
    <tr><td class="paramname">reduction_operator</td><td>The reduction operator </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00455">455</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep, reduction_operator</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160; </div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    generate_reduction_key=trim(field_name)//<span class="stringliteral">&quot;#&quot;</span>//trim(conv_to_string(timestep))//<span class="stringliteral">&quot;#&quot;</span>// trim(conv_to_string(reduction_operator))</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a58c1e46c1eea51c17d72cd35b75b86b9_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a58c1e46c1eea51c17d72cd35b75b86b9_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a58c1e46c1eea51c17d72cd35b75b86b9_icgraph" id="anamespacereduction__inter__io__mod_a58c1e46c1eea51c17d72cd35b75b86b9_icgraph">
<area shape="rect" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="1959,78,2156,119"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="1513,56,1700,112"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="1759,5,1899,61"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a" title="Removes a specific reduction progress." alt="" coords="1748,136,1911,192"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1283,88,1465,144"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1085,168,1221,224"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1072,84,1235,140"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="879,80,1016,136"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="656,80,823,136"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,71,417,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="465,121,608,177"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,136,196,163"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="871,168,1024,224"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="658,177,821,233"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="259,165,403,206"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="1527,136,1687,192"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="1285,168,1463,224"/>
</map>
</div>

</div>
</div>
<a id="a877f8fb7481ed0f1e445e02c53c5d9dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a877f8fb7481ed0f1e445e02c53c5d9dd">&#9670;&nbsp;</a></span>get_reduction_operator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, public reduction_inter_io_mod::get_reduction_operator </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>op_string</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given the map of action attributes this procedure will identify the reduction operator that has been selected by the configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action_attributes</td><td>Action attributes from the IO server configuration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The reduction operator </dd></dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00487">487</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: op_string</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">if</span> (op_string .eq. <span class="stringliteral">&quot;mean&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      get_reduction_operator=mean</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_string .eq. <span class="stringliteral">&quot;min&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      get_reduction_operator=min</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_string .eq. <span class="stringliteral">&quot;max&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      get_reduction_operator=max</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_string .eq. <span class="stringliteral">&quot;sum&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      get_reduction_operator=sum</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;Reduction operator &#39;&quot;</span>//trim(op_string)//<span class="stringliteral">&quot;&#39; not recognised&quot;</span>)</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a877f8fb7481ed0f1e445e02c53c5d9dd_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a877f8fb7481ed0f1e445e02c53c5d9dd_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a877f8fb7481ed0f1e445e02c53c5d9dd_cgraph" id="anamespacereduction__inter__io__mod_a877f8fb7481ed0f1e445e02c53c5d9dd_cgraph">
<area shape="rect" title="Given the map of action attributes this procedure will identify the reduction operator that has been ..." alt="" coords="5,5,144,61"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="192,20,335,47"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="383,13,549,54"/>
</map>
</div>

</div>
</div>
<a id="a458a37210e06eb9d9b370eee7be082ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458a37210e06eb9d9b370eee7be082ec">&#9670;&nbsp;</a></span>handle_collective_completed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine reduction_inter_io_mod::handle_collective_completed </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>reduction_progress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the situation where collective communication for a specific reduction has completed across all IO servers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reduction_progress</td><td>The reduction progress data type </td></tr>
    <tr><td class="paramname">number_io_servers</td><td>The total number of IO servers </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00338">338</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">intent(inout)</span> :: reduction_progress</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    </div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (reduction_progress%reduction_operator == mean) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      reduction_progress%values=reduction_progress%values/io_configuration%number_of_global_moncs</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="keywordflow">    end if</span>    </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">call </span>reduction_progress%completion_procedure(io_configuration, reduction_progress%values, &amp;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;         reduction_progress%field_name, reduction_progress%timestep)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(reduction_progress%mutex))</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(reduction_progress%mutex))</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(reduction_progress%values)) <span class="keyword">deallocate</span>(reduction_progress%values)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">call </span>remove_reduction_progress(reduction_progress)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_cgraph" id="anamespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_cgraph">
<area shape="rect" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="5,58,165,114"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="445,5,600,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="213,32,376,73"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="213,97,376,139"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a" title="Removes a specific reduction progress." alt="" coords="213,162,376,218"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="669,13,812,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="860,5,1027,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="441,104,604,145"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="441,169,604,211"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="424,235,621,276"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_icgraph" id="anamespacereduction__inter__io__mod_a458a37210e06eb9d9b370eee7be082ec_icgraph">
<area shape="rect" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="1513,55,1673,111"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="1285,15,1463,71"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1283,95,1465,151"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1085,13,1221,69"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="871,11,1024,67"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="658,5,821,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="259,18,403,59"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,76,196,103"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1072,95,1235,151"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="879,95,1016,151"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="656,95,823,151"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,97,417,153"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="465,61,608,117"/>
</map>
</div>

</div>
</div>
<a id="adb8512d99c36d96498328af7e47194cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb8512d99c36d96498328af7e47194cb">&#9670;&nbsp;</a></span>handle_local_moncs_completed_collective()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine reduction_inter_io_mod::handle_local_moncs_completed_collective </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>reduction_progress</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the case where the local MONC processes have completed their collective operation for a specific reduction and, for this IO server, it either needs to send its value to the master IO server or, if it is the master, check for completion. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration state of the IO server </td></tr>
    <tr><td class="paramname">reduction_progress</td><td>The specific reduction progress data item that represents this reduction </td></tr>
    <tr><td class="paramname">z_size</td><td>Size in Z </td></tr>
    <tr><td class="paramname">reduction_progress_location</td><td>Location in the reduction progresses list that this single progress item resides at </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00272">272</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">intent(inout)</span> :: reduction_progress</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordtype">integer</span> :: ierr, inter_io_comm_index</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordflow">if</span> (io_configuration%my_io_rank == reduction_progress%root .and. &amp;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;         reduction_progress%contributed_io_servers == io_configuration%number_of_io_servers) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keyword">call </span>handle_collective_completed(io_configuration, reduction_progress)</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">if</span> (io_configuration%my_io_rank /= reduction_progress%root) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        inter_io_comm_index=find_inter_io_from_name(io_configuration, my_inter_io_name)</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        reduction_progress%send_buffer=package_inter_io_communication_message(reduction_progress%field_name, &amp;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;             reduction_progress%timestep, reduction_progress%values, reduction_progress%reduction_operator)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keyword">call </span>lock_mpi()</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="keyword">call </span>mpi_isend(reduction_progress%send_buffer, <span class="keyword">size</span>(reduction_progress%send_buffer), &amp;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;             mpi_byte, reduction_progress%root, &amp;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;             io_configuration%inter_io_communications(inter_io_comm_index)%message_tag, &amp;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;             io_configuration%io_communicator, reduction_progress%async_handle, ierr)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;        <span class="keyword">call </span>unlock_mpi()</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;        <span class="comment">! Deallocate the current value as this is finished with and has been packed into the send buffer</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(reduction_progress%values)) <span class="keyword">deallocate</span>(reduction_progress%values)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(reduction_progress%mutex))</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_cgraph" id="anamespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_cgraph">
<area shape="rect" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="5,225,184,281"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="707,165,861,207"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#aac6ab6e44250b1a2997e23aa4cbbe66c" title="Locates a the index of an inter IO entry from the operator name or returns 0 if none is found." alt="" coords="265,370,394,426"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="475,224,637,265"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="249,290,409,346"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="244,56,415,97"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a62c05cf83d67d1dd5d4a7414fd21be48" title="Packages up fields into an io binary message (allocated here) which is used for sending." alt="" coords="232,478,427,534"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="244,173,415,215"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="931,173,1073,199"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1121,165,1288,207"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="475,341,637,383"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a" title="Removes a specific reduction progress." alt="" coords="475,406,637,462"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="703,348,865,389"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="703,413,865,455"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="685,479,883,520"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="475,5,637,47"/>
<area shape="rect" href="namespaceio__server__client__mod.html#a8ffb596e1dfa516877825fbcc1da77b2" title="Packs an array field into the sending buffer." alt="" coords="483,485,629,527"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="483,551,629,592"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_icgraph" id="anamespacereduction__inter__io__mod_adb8512d99c36d96498328af7e47194cb_icgraph">
<area shape="rect" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="1032,5,1211,61"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="848,5,984,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="647,5,800,61"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="436,5,599,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="244,13,388,54"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,20,196,47"/>
</map>
</div>

</div>
</div>
<a id="a6b0356e066bb9478654f150c322e9f01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b0356e066bb9478654f150c322e9f01">&#9670;&nbsp;</a></span>handle_process_recv_from_other_io_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine reduction_inter_io_mod::handle_process_recv_from_other_io_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__inter__communication__description.html">io_configuration_inter_communication_description</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>inter_io_comm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>myrank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>data_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_io_servers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the data received from another IO server, locates the correct reduction progress, appends the information and then checks for &amp; deals with the situation where that reduction is completed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">number_io_servers</td><td>The total number of IO servers </td></tr>
    <tr><td class="paramname">z_size</td><td>Number of levels in the vertical </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00304">304</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordtype">type</span>(io_configuration_inter_communication_description), <span class="keywordtype">intent(inout)</span> :: inter_io_comm</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: data_buffer</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: number_io_servers, myrank</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160; </div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">pointer</span> :: reduction_progress</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: field_name</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">integer</span> :: timestep, reduction_op</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: field_values</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordtype">logical</span> :: collective_values_new</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keyword">call </span>unpackage_inter_io_communication_message(data_buffer, field_name, timestep, field_values, reduction_op)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    reduction_progress=&gt;find_or_add_reduction_progress(timestep, reduction_op, myrank, field_name)</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(reduction_progress%mutex))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    collective_values_new=.not. <span class="keyword">allocated</span>(reduction_progress%values)</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">if</span> (collective_values_new) <span class="keyword">allocate</span>(reduction_progress%values(<span class="keyword">size</span>(field_values)))</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    reduction_progress%contributed_io_servers=reduction_progress%contributed_io_servers+1    </div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keyword">call </span>integrate_io_server_collective_values(reduction_op, reduction_progress, &amp;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;         field_values, <span class="keyword">size</span>(field_values), collective_values_new)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keywordflow">if</span> (reduction_progress%contributed_io_servers == number_io_servers) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keyword">call </span>handle_collective_completed(io_configuration, reduction_progress)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keyword">deallocate</span>(field_values)</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keyword">deallocate</span>(field_values)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(reduction_progress%mutex))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_cgraph" id="anamespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_cgraph">
<area shape="rect" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="5,584,188,640"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="711,358,865,399"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="240,169,427,225"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="252,650,415,691"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="479,532,641,574"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="253,460,413,516"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#ab41f299ba351aa0bb6895b884e99aa3a" title="Integrates the collective values from another IO server into the currently stored values." alt="" coords="248,714,419,770"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a0dc71dae28791bc5c07bc4ad20c0be41" title="Unpackages some binary data into its individual fields. The field values are allocated here and the s..." alt="" coords="236,794,431,850"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="935,365,1077,392"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1125,358,1292,399"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="490,38,630,94"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="707,176,869,218"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="689,79,887,120"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="479,118,641,159"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="707,267,869,308"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="707,14,869,55"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="479,467,641,508"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a" title="Removes a specific reduction progress." alt="" coords="479,285,641,341"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_icgraph" id="anamespacereduction__inter__io__mod_a6b0356e066bb9478654f150c322e9f01_icgraph">
<area shape="rect" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1267,89,1449,145"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1056,89,1219,145"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="871,89,1008,145"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="656,56,823,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,71,417,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="465,5,608,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,85,196,112"/>
</map>
</div>

</div>
</div>
<a id="a85941bfa01b3ffc89f04d2ace55a7f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85941bfa01b3ffc89f04d2ace55a7f4d">&#9670;&nbsp;</a></span>handle_recv_data_from_io_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine reduction_inter_io_mod::handle_recv_data_from_io_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>data_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>inter_io_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles the receiving of data from some other IO server. This is issued call back style within a thread to handle that data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration state of the IO server </td></tr>
    <tr><td class="paramname">inter_io_index</td><td>Index of the inter IO communication description </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00069">69</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: data_buffer</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: inter_io_index    </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160; </div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">call </span>handle_process_recv_from_other_io_server(io_configuration, io_configuration%inter_io_communications(inter_io_index), &amp;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;         io_configuration%my_io_rank, data_buffer, io_configuration%number_of_io_servers)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_cgraph" id="anamespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_cgraph">
<area shape="rect" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="5,584,168,640"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="216,584,399,640"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="921,358,1076,399"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="451,169,637,225"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="463,650,625,691"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="689,532,852,574"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="464,460,624,516"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#ab41f299ba351aa0bb6895b884e99aa3a" title="Integrates the collective values from another IO server into the currently stored values." alt="" coords="459,714,629,770"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a0dc71dae28791bc5c07bc4ad20c0be41" title="Unpackages some binary data into its individual fields. The field values are allocated here and the s..." alt="" coords="447,794,641,850"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1145,365,1288,392"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1336,358,1503,399"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="701,38,841,94"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="917,176,1080,218"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="900,79,1097,120"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="689,118,852,159"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="917,267,1080,308"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="917,14,1080,55"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="689,467,852,508"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a" title="Removes a specific reduction progress." alt="" coords="689,285,852,341"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_icgraph" id="anamespacereduction__inter__io__mod_a85941bfa01b3ffc89f04d2ace55a7f4d_icgraph">
<area shape="rect" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1056,89,1219,145"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="871,89,1008,145"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="656,56,823,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,71,417,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="465,5,608,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,85,196,112"/>
</map>
</div>

</div>
</div>
<a id="a7169f0a03e60e46122e71b490e1905eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7169f0a03e60e46122e71b490e1905eb">&#9670;&nbsp;</a></span>init_reduction_inter_io()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public reduction_inter_io_mod::init_reduction_inter_io </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the reduction action. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The IO server configuration </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00050">50</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">if</span> (.not. initialised) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      initialised=.true.</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;      previous_clean_reduction_count=0</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;      reduction_count=0</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_init(reduction_progress_rwlock, -1))</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(inter_io_description_mutex, -1))</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(clean_progress_mutex, -1))</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(reduction_count_mutex, -1))</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <span class="keyword">call </span>register_inter_io_communication(io_configuration, my_inter_io_tag, handle_recv_data_from_io_server, my_inter_io_name)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_cgraph" id="anamespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_cgraph">
<area shape="rect" title="Initialises the reduction action." alt="" coords="5,565,143,621"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="1107,175,1261,217"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="875,639,1037,681"/>
<area shape="rect" href="namespaceforthread__mod.html#a84f66d5153e8adc21918d4b4d627087f" title=" " alt="" coords="191,631,353,673"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="191,401,353,457"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#ac8b76c9e3792326dd7da0557f828e19f" title="Registers an inter IO communication operation." alt="" coords="205,696,339,752"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1331,183,1473,209"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1521,175,1688,217"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="401,304,584,360"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="636,500,823,556"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="648,275,811,317"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="875,341,1037,382"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="649,144,809,200"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#ab41f299ba351aa0bb6895b884e99aa3a" title="Integrates the collective values from another IO server into the currently stored values." alt="" coords="644,340,815,396"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a0dc71dae28791bc5c07bc4ad20c0be41" title="Unpackages some binary data into its individual fields. The field values are allocated here and the s..." alt="" coords="632,420,827,476"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="886,508,1026,564"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="1103,450,1265,491"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="1085,515,1283,557"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="1103,298,1265,339"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="1103,581,1265,622"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="875,145,1037,186"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a" title="Removes a specific reduction progress." alt="" coords="875,261,1037,317"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#a93bd1e4353c781242c2ead4919973e87" title="Extends the array of inter io communications from its current suze to current size+data_stride+curren..." alt="" coords="419,696,566,752"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_icgraph" id="anamespacereduction__inter__io__mod_a7169f0a03e60e46122e71b490e1905eb_icgraph">
<area shape="rect" title="Initialises the reduction action." alt="" coords="871,89,1008,145"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="656,56,823,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,71,417,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="465,5,608,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,85,196,112"/>
</map>
</div>

</div>
</div>
<a id="ab41f299ba351aa0bb6895b884e99aa3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab41f299ba351aa0bb6895b884e99aa3a">&#9670;&nbsp;</a></span>integrate_io_server_collective_values()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine reduction_inter_io_mod::integrate_io_server_collective_values </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>reduction_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>reduction_progress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=double_precision), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>single_server_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_elements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>collective_values_empty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Integrates the collective values from another IO server into the currently stored values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reduction_op</td><td>The reduction operator to perform </td></tr>
    <tr><td class="paramname">reduction_progress</td><td>The progress data type which is updated </td></tr>
    <tr><td class="paramname">single_server_values</td><td>The values from the IO server which need to be integrated </td></tr>
    <tr><td class="paramname">dim_one_size</td><td>Size in first dimension </td></tr>
    <tr><td class="paramname">target_index</td><td>The index where we are putting the values into the current value array of reduction progress </td></tr>
    <tr><td class="paramname">collective_values_empty</td><td>Whether the collective values is empty </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00237">237</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: reduction_op, number_elements</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: collective_values_empty</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">intent(inout)</span> :: reduction_progress</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keywordtype">    real</span>(kind=double_precision), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: single_server_values</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordtype">integer</span> :: k</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (collective_values_empty) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      reduction_progress%values=single_server_values</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">if</span> (reduction_op == mean .or. reduction_op == sum) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        reduction_progress%values=reduction_progress%values+single_server_values       </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reduction_op == min .or. reduction_op == max) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">do</span> k=1, number_elements</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          <span class="keywordflow">if</span> (reduction_op == min) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="keywordflow">if</span> (single_server_values(k) .lt. reduction_progress%values(k)) &amp;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                 reduction_progress%values(k)=single_server_values(k)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;          <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reduction_op == max) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">if</span> (single_server_values(k) .gt. reduction_progress%values(k)) &amp;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                 reduction_progress%values(k)=single_server_values(k)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keywordflow">        end do</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_ab41f299ba351aa0bb6895b884e99aa3a_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_ab41f299ba351aa0bb6895b884e99aa3a_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_ab41f299ba351aa0bb6895b884e99aa3a_icgraph" id="anamespacereduction__inter__io__mod_ab41f299ba351aa0bb6895b884e99aa3a_icgraph">
<area shape="rect" title="Integrates the collective values from another IO server into the currently stored values." alt="" coords="1524,140,1695,196"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1293,100,1476,156"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1317,180,1453,236"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1083,100,1245,156"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="885,100,1022,156"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="657,56,824,112"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,83,417,139"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="466,5,609,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,141,196,168"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="1087,180,1241,236"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="872,180,1035,236"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="465,187,609,229"/>
</map>
</div>

</div>
</div>
<a id="afbd4c0a62bdef47841ccb4731a0c96e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbd4c0a62bdef47841ccb4731a0c96e8">&#9670;&nbsp;</a></span>perform_inter_io_reduction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public reduction_inter_io_mod::perform_inter_io_reduction </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=double_precision), dimension(:)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>field_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>reduction_field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>reduction_op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(<a class="el" href="interfaceinter__io__specifics__mod_1_1handle__completion.html">handle_completion</a>)&#160;</td>
          <td class="paramname"><em>completion_procedure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Actually handles the processing for this data wrt the vertical reduction. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration of the IO server </td></tr>
    <tr><td class="paramname">field_values</td><td>The values to communicate </td></tr>
    <tr><td class="paramname">field_size</td><td>Number of elements to communicate </td></tr>
    <tr><td class="paramname">reduction_field_name</td><td>Field name that the reduction will be performed over </td></tr>
    <tr><td class="paramname">reduction_op</td><td>The reduction operator to use </td></tr>
    <tr><td class="paramname">root</td><td>The root IO server process </td></tr>
    <tr><td class="paramname">timestep</td><td>The timestep this is issued at </td></tr>
    <tr><td class="paramname">completion_procedure</td><td>Callback completion procedure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00125">125</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="keywordtype">    real</span>(kind=double_precision), <span class="keywordtype">dimension(:)</span> :: field_values</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: field_size, reduction_op, root, timestep    </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: reduction_field_name</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordtype">procedure</span>(handle_completion) :: completion_procedure</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">pointer</span> :: reduction_progress</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">logical</span> :: collective_values_new</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="keyword">call </span>clean_progress(io_configuration%my_io_rank)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    reduction_progress=&gt;find_or_add_reduction_progress(timestep, reduction_op, root, reduction_field_name, completion_procedure)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(reduction_progress%mutex))</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    reduction_progress%contributed_moncs=reduction_progress%contributed_moncs+1</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160; </div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    collective_values_new=.not. <span class="keyword">allocated</span>(reduction_progress%values)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (collective_values_new) <span class="keyword">allocate</span>(reduction_progress%values(field_size))</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keyword">call </span>integrate_io_server_collective_values(reduction_op, reduction_progress, field_values, field_size, collective_values_new)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="keywordflow">if</span> (reduction_progress%contributed_moncs == io_configuration%number_of_moncs) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      reduction_progress%contributed_io_servers=reduction_progress%contributed_io_servers+1      </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keyword">call </span>handle_local_moncs_completed_collective(io_configuration, reduction_progress)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(reduction_progress%mutex))</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_cgraph" id="anamespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_cgraph">
<area shape="rect" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="5,1296,141,1352"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="1133,617,1288,658"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#ad0bf6811584fdb36107b4d2e1c185d69" title=" " alt="" coords="201,1303,349,1345"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="1129,1521,1292,1562"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="1129,1230,1292,1271"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a2ed33f2a10ddbfc3d66a54abb6db3687" title="Finds or adds a specific reduction progress based upon the timestep and reduction operator...." alt="" coords="639,161,825,217"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="408,728,587,784"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#ab41f299ba351aa0bb6895b884e99aa3a" title="Integrates the collective values from another IO server into the currently stored values." alt="" coords="189,1680,360,1736"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1357,624,1500,651"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1548,617,1715,658"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7d635793eb07832a7420bf579526cdca" title="Checks all the reduction progresses and will remove any that have completed. This is designed to be c..." alt="" coords="417,1179,578,1235"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="889,751,1052,793"/>
<area shape="rect" href="namespaceforthread__mod.html#aecdd575526686417bde58b7ae8f73735" title=" " alt="" coords="651,1361,813,1402"/>
<area shape="rect" href="namespaceforthread__mod.html#ace3f16636de24b1fc62de549d67476dc" title=" " alt="" coords="1129,901,1292,942"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="1129,6,1292,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="1129,293,1292,334"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a392694a236f09728ae9e72400017d606" title="Helper function to retrieve the reduction progress from a mapentry." alt="" coords="651,1179,813,1235"/>
<area shape="rect" href="namespacempi__communication__mod.html#a6ed06ee79c19ff1f57a344de48e53806" title="Waits for a specific MPI request to complete, either by managing thread safety and interleaving or ju..." alt="" coords="647,1062,817,1103"/>
<area shape="rect" href="namespacempi__communication__mod.html#a44ac4f74cb4daf89481da8df1dabc10d" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then locks MPI." alt="" coords="885,1035,1056,1077"/>
<area shape="rect" href="namespacempi__communication__mod.html#aee6d81060fcad11a466f823627234e7c" title="Pauses for a specific number of ms to allow for MPI interleaving, this is to avoid starvation." alt="" coords="877,1101,1064,1142"/>
<area shape="rect" href="namespacempi__communication__mod.html#aad52010c006d90df6c097898ebdf4487" title="If we are explicitly managing MPI thread safety (SERIALIZED mode) then unlocks MPI." alt="" coords="885,970,1056,1011"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a77d19aa56a2f87228010cfc74bf7677c" title="Locates a specific reduction progress based upon the timestep, operator and field name." alt="" coords="901,89,1041,145"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="1112,97,1309,138"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="889,169,1052,210"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#aac6ab6e44250b1a2997e23aa4cbbe66c" title="Locates a the index of an inter IO entry from the operator name or returns 0 if none is found." alt="" coords="667,547,797,603"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="652,677,812,733"/>
<area shape="rect" href="namespaceinter__io__specifics__mod.html#a62c05cf83d67d1dd5d4a7414fd21be48" title="Packages up fields into an io binary message (allocated here) which is used for sending." alt="" coords="635,467,829,523"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a4ddd54c71143c5974c8f7fdafd7dbc0a" title="Removes a specific reduction progress." alt="" coords="889,285,1052,341"/>
<area shape="rect" href="namespaceio__server__client__mod.html#a8ffb596e1dfa516877825fbcc1da77b2" title="Packs an array field into the sending buffer." alt="" coords="898,533,1043,574"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="898,467,1043,509"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_icgraph" id="anamespacereduction__inter__io__mod_afbd4c0a62bdef47841ccb4731a0c96e8_icgraph">
<area shape="rect" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="848,5,984,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="647,5,800,61"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="436,5,599,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="244,13,388,54"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,20,196,47"/>
</map>
</div>

</div>
</div>
<a id="a4ddd54c71143c5974c8f7fdafd7dbc0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ddd54c71143c5974c8f7fdafd7dbc0a">&#9670;&nbsp;</a></span>remove_reduction_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine reduction_inter_io_mod::remove_reduction_progress </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>reduction_progress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes a specific reduction progress. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reduction_progress</td><td>The reduction progress to remove from the list </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00436">436</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">intent(in)</span> :: reduction_progress</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: specific_key</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160; </div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    specific_key=generate_reduction_key(reduction_progress%field_name, reduction_progress%timestep,&amp;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;         reduction_progress%reduction_operator)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_wrlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    generic=&gt;c_get_generic(reduction_progresses, specific_key)</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keyword">call </span>c_remove(reduction_progresses, specific_key)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(reduction_progress_rwlock))</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keyword">deallocate</span>(generic)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_cgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_cgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_cgraph" id="anamespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_cgraph">
<area shape="rect" title="Removes a specific reduction progress." alt="" coords="5,97,168,153"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="237,5,392,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a846b04ba75a5d5f20d8d38a7cab93da1" title=" " alt="" coords="233,71,396,112"/>
<area shape="rect" href="namespaceforthread__mod.html#ab60b7d18e1d948f6b63c6cb893fad182" title=" " alt="" coords="233,136,396,177"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a58c1e46c1eea51c17d72cd35b75b86b9" title="Generates the lookup key that is used for the map storage of reduction progresses." alt="" coords="216,201,413,243"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="461,13,604,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="652,5,819,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_icgraph" id="anamespacereduction__inter__io__mod_a4ddd54c71143c5974c8f7fdafd7dbc0a_icgraph">
<area shape="rect" title="Removes a specific reduction progress." alt="" coords="1721,55,1884,111"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a458a37210e06eb9d9b370eee7be082ec" title="Handles the situation where collective communication for a specific reduction has completed across al..." alt="" coords="1513,55,1673,111"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="1285,15,1463,71"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1283,95,1465,151"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1085,13,1221,69"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="871,11,1024,67"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="658,5,821,61"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="259,18,403,59"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,76,196,103"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1072,95,1235,151"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="879,95,1016,151"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="656,95,823,151"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="244,97,417,153"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="465,61,608,117"/>
</map>
</div>

</div>
</div>
<a id="a392694a236f09728ae9e72400017d606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392694a236f09728ae9e72400017d606">&#9670;&nbsp;</a></span>retrieve_reduction_progress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structreduction__inter__io__mod_1_1reduction__progress__type.html">reduction_progress_type</a>) function, pointer reduction_inter_io_mod::retrieve_reduction_progress </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1mapentry__type.html">mapentry_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>mapentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper function to retrieve the reduction progress from a mapentry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mapentry</td><td>The map entry to retrieve from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The progress data object in the map entry or null if none is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00465">465</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    <span class="keywordtype">type</span>(mapentry_type), <span class="keywordtype">intent(in)</span> :: mapentry</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordtype">type</span>(reduction_progress_type), <span class="keywordtype">pointer</span> :: retrieve_reduction_progress</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160; </div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    generic=&gt;c_get_generic(mapentry)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160; </div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="keywordflow">      type is</span> (reduction_progress_type)      </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        retrieve_reduction_progress=&gt;generic</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      retrieve_reduction_progress=&gt;null()</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keywordflow">    end if</span> </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacereduction__inter__io__mod_a392694a236f09728ae9e72400017d606_icgraph.png" border="0" usemap="#anamespacereduction__inter__io__mod_a392694a236f09728ae9e72400017d606_icgraph" alt=""/></div>
<map name="namespacereduction__inter__io__mod_a392694a236f09728ae9e72400017d606_icgraph" id="anamespacereduction__inter__io__mod_a392694a236f09728ae9e72400017d606_icgraph">
<area shape="rect" title="Helper function to retrieve the reduction progress from a mapentry." alt="" coords="1503,117,1665,173"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7d635793eb07832a7420bf579526cdca" title="Checks all the reduction progresses and will remove any that have completed. This is designed to be c..." alt="" coords="1293,77,1455,133"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a93d313cfba0ead9d2d97ef6c094edbab" title="Finalises the reduction action, waiting for all outstanding requests and then freeing data." alt="" coords="1294,157,1454,213"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a8ffab62808c76c7592c04db0b34dc426" title="Checks this action for completion, when all are completed then the IO server can shutdown as this is ..." alt="" coords="1069,5,1231,61"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#ad0bf6811584fdb36107b4d2e1c185d69" title=" " alt="" coords="1076,85,1224,126"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="859,77,995,133"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="647,77,800,133"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="436,77,599,133"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="244,85,388,126"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,92,196,119"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#adda372f876f04100eb7944557a195b64" title="Finalises the all reduction inter IO functionality." alt="" coords="1055,157,1245,213"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a3c16286b2d9369ad1ada72d9c88684b1" title="Finalises the global callback." alt="" coords="848,157,1007,213"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aaf808f783e95804d7053125b7702fd2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf808f783e95804d7053125b7702fd2a">&#9670;&nbsp;</a></span>clean_progress_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile reduction_inter_io_mod::clean_progress_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00039">39</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="a839c06dc08f714029b7dea8757b416dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a839c06dc08f714029b7dea8757b416dd">&#9670;&nbsp;</a></span>initialised</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical, volatile reduction_inter_io_mod::initialised =.false.</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00042">42</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordtype">logical</span>, <span class="keywordtype">volatile</span> :: initialised=.false.</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8626b5219c26ca2f8e5f3e1c29d7cee9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8626b5219c26ca2f8e5f3e1c29d7cee9">&#9670;&nbsp;</a></span>inter_io_description_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile reduction_inter_io_mod::inter_io_description_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00039">39</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="a58a2caa487ea5ae186d7adec6fd9e2ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58a2caa487ea5ae186d7adec6fd9e2ec">&#9670;&nbsp;</a></span>max</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter reduction_inter_io_mod::max =3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00027">27</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="a3b04cee18b54da3fedc26f73d285b427"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b04cee18b54da3fedc26f73d285b427">&#9670;&nbsp;</a></span>mean</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter reduction_inter_io_mod::mean =1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00027">27</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">parameter</span> :: MEAN=1, min=2, max=3, sum=4</div>
</div><!-- fragment -->
</div>
</div>
<a id="a39d60ed293f22334c90fd8b02d37c7ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39d60ed293f22334c90fd8b02d37c7ab">&#9670;&nbsp;</a></span>min</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter reduction_inter_io_mod::min =2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00027">27</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="a9631bb078d2a9cf289ce4e449aa5598b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9631bb078d2a9cf289ce4e449aa5598b">&#9670;&nbsp;</a></span>my_inter_io_name</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character(len=*), parameter reduction_inter_io_mod::my_inter_io_name =&quot;reductioninterio&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00029">29</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">parameter</span> :: MY_INTER_IO_NAME=<span class="stringliteral">&quot;reductioninterio&quot;</span></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e5080ab97bb047b9705d5e25109fc59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e5080ab97bb047b9705d5e25109fc59">&#9670;&nbsp;</a></span>my_inter_io_tag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter reduction_inter_io_mod::my_inter_io_tag =1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00028">28</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">parameter</span> :: MY_INTER_IO_TAG=1, perform_clean_every=200</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3a07dc5005f2a5bba707c0bee0b27a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3a07dc5005f2a5bba707c0bee0b27a4">&#9670;&nbsp;</a></span>perform_clean_every</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter reduction_inter_io_mod::perform_clean_every =200</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00028">28</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="a5459d5f699a83a4fc3f9ac0eb2061337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5459d5f699a83a4fc3f9ac0eb2061337">&#9670;&nbsp;</a></span>previous_clean_reduction_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile reduction_inter_io_mod::previous_clean_reduction_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00039">39</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="a02caf2a42bdd88b8e6506a4c12c525d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02caf2a42bdd88b8e6506a4c12c525d4">&#9670;&nbsp;</a></span>reduction_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile reduction_inter_io_mod::reduction_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00039">39</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="a448462f8f74d8642b1ced80db32faf44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a448462f8f74d8642b1ced80db32faf44">&#9670;&nbsp;</a></span>reduction_count_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile reduction_inter_io_mod::reduction_count_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00039">39</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
<a id="ab7904e115fcc25307b63700a5be725c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7904e115fcc25307b63700a5be725c5">&#9670;&nbsp;</a></span>reduction_progress_rwlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile reduction_inter_io_mod::reduction_progress_rwlock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00039">39</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span> :: reduction_progress_rwlock, inter_io_description_mutex, clean_progress_mutex, &amp;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;       reduction_count_mutex, previous_clean_reduction_count, reduction_count</div>
</div><!-- fragment -->
</div>
</div>
<a id="adb4093747703788f10c1a39b10e48375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb4093747703788f10c1a39b10e48375">&#9670;&nbsp;</a></span>reduction_progresses</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile reduction_inter_io_mod::reduction_progresses</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00041">41</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span> :: reduction_progresses</div>
</div><!-- fragment -->
</div>
</div>
<a id="af689f4adbd42c741e45270ee68600981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af689f4adbd42c741e45270ee68600981">&#9670;&nbsp;</a></span>sum</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter reduction_inter_io_mod::sum =4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="reduction-inter-io_8F90_source.html#l00027">27</a> of file <a class="el" href="reduction-inter-io_8F90_source.html">reduction-inter-io.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_ad68309846cd8f9e77edaa6abd02f65a0"><div class="ttname"><a href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">logging_mod::log_error</a></div><div class="ttdeci">integer, parameter, public log_error</div><div class="ttdoc">Only log ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00011">logging.F90:11</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac4f13ac385499c85190cb184030e4f45"><div class="ttname"><a href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">logging_mod::log_log</a></div><div class="ttdeci">subroutine, public log_log(level, message, str)</div><div class="ttdoc">Logs a message at the specified level. If the level is above the current level then the message is ig...</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00074">logging.F90:75</a></div></div>
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
