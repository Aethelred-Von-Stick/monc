<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: inter_io_specifics_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">inter_io_specifics_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Inter IO server communication specific functionality. This manages all of the communication that might happen between different IO servers.  
<a href="namespaceinter__io__specifics__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceinter__io__specifics__mod_1_1handle__completion.html">handle_completion</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:ac8b76c9e3792326dd7da0557f828e19f"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinter__io__specifics__mod.html#ac8b76c9e3792326dd7da0557f828e19f">register_inter_io_communication</a> (io_configuration, message_tag, handling_procedure, name)</td></tr>
<tr class="memdesc:ac8b76c9e3792326dd7da0557f828e19f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers an inter IO communication operation.  <a href="namespaceinter__io__specifics__mod.html#ac8b76c9e3792326dd7da0557f828e19f">More...</a><br /></td></tr>
<tr class="separator:ac8b76c9e3792326dd7da0557f828e19f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac6ab6e44250b1a2997e23aa4cbbe66c"><td class="memItemLeft" align="right" valign="top">integer function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinter__io__specifics__mod.html#aac6ab6e44250b1a2997e23aa4cbbe66c">find_inter_io_from_name</a> (io_configuration, name)</td></tr>
<tr class="memdesc:aac6ab6e44250b1a2997e23aa4cbbe66c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locates a the index of an inter IO entry from the operator name or returns 0 if none is found.  <a href="namespaceinter__io__specifics__mod.html#aac6ab6e44250b1a2997e23aa4cbbe66c">More...</a><br /></td></tr>
<tr class="separator:aac6ab6e44250b1a2997e23aa4cbbe66c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62c05cf83d67d1dd5d4a7414fd21be48"><td class="memItemLeft" align="right" valign="top">character function, dimension(:), allocatable, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinter__io__specifics__mod.html#a62c05cf83d67d1dd5d4a7414fd21be48">package_inter_io_communication_message</a> (field_name, timestep, field_values, other_int)</td></tr>
<tr class="memdesc:a62c05cf83d67d1dd5d4a7414fd21be48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packages up fields into an io binary message (allocated here) which is used for sending.  <a href="namespaceinter__io__specifics__mod.html#a62c05cf83d67d1dd5d4a7414fd21be48">More...</a><br /></td></tr>
<tr class="separator:a62c05cf83d67d1dd5d4a7414fd21be48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dc71dae28791bc5c07bc4ad20c0be41"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinter__io__specifics__mod.html#a0dc71dae28791bc5c07bc4ad20c0be41">unpackage_inter_io_communication_message</a> (data_buffer, field_name, timestep, field_values, other_int)</td></tr>
<tr class="memdesc:a0dc71dae28791bc5c07bc4ad20c0be41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unpackages some binary data into its individual fields. The field values are allocated here and the size is the remaining message size after everything else has been accounted for.  <a href="namespaceinter__io__specifics__mod.html#a0dc71dae28791bc5c07bc4ad20c0be41">More...</a><br /></td></tr>
<tr class="separator:a0dc71dae28791bc5c07bc4ad20c0be41"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1f4a30fbf778f5633af49cd106c057a2"><td class="memItemLeft" align="right" valign="top">integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceinter__io__specifics__mod.html#a1f4a30fbf778f5633af49cd106c057a2">starting_tag</a> =20</td></tr>
<tr class="separator:a1f4a30fbf778f5633af49cd106c057a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Inter IO server communication specific functionality. This manages all of the communication that might happen between different IO servers. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="aac6ab6e44250b1a2997e23aa4cbbe66c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac6ab6e44250b1a2997e23aa4cbbe66c">&#9670;&nbsp;</a></span>find_inter_io_from_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">integer function, public inter_io_specifics_mod::find_inter_io_from_name </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Locates a the index of an inter IO entry from the operator name or returns 0 if none is found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>The configuration of the IO server </td></tr>
    <tr><td class="paramname">name</td><td>Name of the inter IO communication operation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the inter IO descriptor or 0 if none is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="inter-io-specifics_8F90_source.html#l00062">62</a> of file <a class="el" href="inter-io-specifics_8F90_source.html">inter-io-specifics.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: name</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160; </div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordflow">do</span> i=1, io_configuration%number_inter_io_communications</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">if</span> (io_configuration%inter_io_communications(i)%name .eq. name) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        find_inter_io_from_name=i</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordflow">return</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="keywordflow">      end if</span>      </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    find_inter_io_from_name=0</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceinter__io__specifics__mod_aac6ab6e44250b1a2997e23aa4cbbe66c_icgraph.png" border="0" usemap="#anamespaceinter__io__specifics__mod_aac6ab6e44250b1a2997e23aa4cbbe66c_icgraph" alt=""/></div>
<map name="namespaceinter__io__specifics__mod_aac6ab6e44250b1a2997e23aa4cbbe66c_icgraph" id="anamespaceinter__io__specifics__mod_aac6ab6e44250b1a2997e23aa4cbbe66c_icgraph">
<area shape="rect" title="Locates a the index of an inter IO entry from the operator name or returns 0 if none is found." alt="" coords="1443,45,1572,101"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="1216,5,1395,61"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1237,85,1373,141"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1011,5,1147,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="788,71,941,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="577,71,740,127"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="385,78,529,119"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,85,337,112"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,85,99,112"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="989,136,1168,192"/>
</map>
</div>

</div>
</div>
<a id="a62c05cf83d67d1dd5d4a7414fd21be48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62c05cf83d67d1dd5d4a7414fd21be48">&#9670;&nbsp;</a></span>package_inter_io_communication_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">character function, dimension(:), allocatable, public inter_io_specifics_mod::package_inter_io_communication_message </td>
          <td>(</td>
          <td class="paramtype">character(len=string_length), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>other_int</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Packages up fields into an io binary message (allocated here) which is used for sending. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The field name to package </td></tr>
    <tr><td class="paramname">timestep</td><td>The timestep to package </td></tr>
    <tr><td class="paramname">field_values</td><td>The field values to package </td></tr>
    <tr><td class="paramname">other_int</td><td>Optional other integer to package </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The binary data ready for communication </dd></dl>

<p class="definition">Definition at line <a class="el" href="inter-io-specifics_8F90_source.html#l00083">83</a> of file <a class="el" href="inter-io-specifics_8F90_source.html">inter-io-specifics.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: timestep</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span> :: other_int</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: field_values</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: package_inter_io_communication_message</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordtype">integer</span> :: current_location</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">allocate</span>(package_inter_io_communication_message(string_length+8+(8*<span class="keyword">size</span>(field_values))))</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    current_location=pack_scalar_field(package_inter_io_communication_message, 1, string_value=field_name)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    current_location=pack_scalar_field(package_inter_io_communication_message, current_location, int_value=timestep)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(other_int)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      current_location=pack_scalar_field(package_inter_io_communication_message, current_location, int_value=other_int)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    current_location=pack_array_field(package_inter_io_communication_message, current_location, real_array_1d=field_values)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_cgraph.png" border="0" usemap="#anamespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_cgraph" alt=""/></div>
<map name="namespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_cgraph" id="anamespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_cgraph">
<area shape="rect" title="Packages up fields into an io binary message (allocated here) which is used for sending." alt="" coords="5,31,200,87"/>
<area shape="rect" href="namespaceio__server__client__mod.html#a8ffb596e1dfa516877825fbcc1da77b2" title="Packs an array field into the sending buffer." alt="" coords="248,5,393,47"/>
<area shape="rect" href="namespaceio__server__client__mod.html#aa9aee7e6e5918193184b77962ba3b12e" title="Packs the data of a scalar field into a buffer." alt="" coords="248,71,393,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_icgraph.png" border="0" usemap="#anamespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_icgraph" alt=""/></div>
<map name="namespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_icgraph" id="anamespaceinter__io__specifics__mod_a62c05cf83d67d1dd5d4a7414fd21be48_icgraph">
<area shape="rect" title="Packages up fields into an io binary message (allocated here) which is used for sending." alt="" coords="1443,45,1637,101"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#adb8512d99c36d96498328af7e47194cb" title="Handles the case where the local MONC processes have completed their collective operation for a speci..." alt="" coords="1216,5,1395,61"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a9c49585e6986ed7104ecc35a71347e78" title="Performs an inter IO broadcast of data from the root to all other IO servers. Note that this is on th..." alt="" coords="1237,85,1373,141"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#afbd4c0a62bdef47841ccb4731a0c96e8" title="Actually handles the processing for this data wrt the vertical reduction." alt="" coords="1011,5,1147,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afb8d154fff5a46e854337bb4f0c2cfd3" title="Performs the all reduction inter IO reduction." alt="" coords="788,71,941,127"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#ad475780629e2db0ae4b68f3e395e418d" title="Performs a global callback." alt="" coords="577,71,740,127"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="385,78,529,119"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,85,337,112"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,85,99,112"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#a467bb14ad72911d3695efc951233470e" title="Internal completion, called after the reduce has completed (on root) and calls out to broadcast." alt="" coords="989,136,1168,192"/>
</map>
</div>

</div>
</div>
<a id="ac8b76c9e3792326dd7da0557f828e19f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8b76c9e3792326dd7da0557f828e19f">&#9670;&nbsp;</a></span>register_inter_io_communication()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public inter_io_specifics_mod::register_inter_io_communication </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>message_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">procedure(handle_recv_data_from_io_server)&#160;</td>
          <td class="paramname"><em>handling_procedure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers an inter IO communication operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>IO server configuration state </td></tr>
    <tr><td class="paramname">message_tag</td><td>The inter IO message tag </td></tr>
    <tr><td class="paramname">handling_procedure</td><td>Callback procedure back to the inter IO functionality when a message arrives </td></tr>
    <tr><td class="paramname">name</td><td>The name of the inter IO operation </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="inter-io-specifics_8F90_source.html#l00038">38</a> of file <a class="el" href="inter-io-specifics_8F90_source.html">inter-io-specifics.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: message_tag</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">procedure</span>(handle_recv_data_from_io_server) :: handling_procedure</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: name</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">integer</span> :: new_index</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160; </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    io_configuration%number_inter_io_communications=io_configuration%number_inter_io_communications+1</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keywordflow">if</span> (io_configuration%number_inter_io_communications .gt. <span class="keyword">size</span>(io_configuration%inter_io_communications)) <span class="keywordflow">then</span>        </div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;      <span class="keyword">call </span>extend_inter_io_comm_array(io_configuration)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    new_index=io_configuration%number_inter_io_communications</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    io_configuration%inter_io_communications(new_index)%message_tag=message_tag+starting_tag</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    io_configuration%inter_io_communications(new_index)%handling_procedure=&gt;handling_procedure</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    io_configuration%inter_io_communications(new_index)%name=name</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_cgraph.png" border="0" usemap="#anamespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_cgraph" alt=""/></div>
<map name="namespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_cgraph" id="anamespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_cgraph">
<area shape="rect" title="Registers an inter IO communication operation." alt="" coords="5,5,140,61"/>
<area shape="rect" href="namespaceconfiguration__parser__mod.html#a93bd1e4353c781242c2ead4919973e87" title="Extends the array of inter io communications from its current suze to current size+data_stride+curren..." alt="" coords="188,5,335,61"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_icgraph.png" border="0" usemap="#anamespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_icgraph" alt=""/></div>
<map name="namespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_icgraph" id="anamespaceinter__io__specifics__mod_ac8b76c9e3792326dd7da0557f828e19f_icgraph">
<area shape="rect" title="Registers an inter IO communication operation." alt="" coords="1201,45,1336,101"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb" title="Initialises the broadcast inter IO functionality." alt="" coords="1012,5,1153,61"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="1014,85,1151,141"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="797,37,964,93"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,31,559,87"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="607,63,749,119"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,45,337,72"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,45,99,72"/>
</map>
</div>

</div>
</div>
<a id="a0dc71dae28791bc5c07bc4ad20c0be41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dc71dae28791bc5c07bc4ad20c0be41">&#9670;&nbsp;</a></span>unpackage_inter_io_communication_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public inter_io_specifics_mod::unpackage_inter_io_communication_message </td>
          <td>(</td>
          <td class="paramtype">character, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>data_buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=string_length), intent(out)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>timestep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:), intent(out), allocatable&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out), optional&#160;</td>
          <td class="paramname"><em>other_int</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unpackages some binary data into its individual fields. The field values are allocated here and the size is the remaining message size after everything else has been accounted for. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_buffer</td><td>The data buffer to unpackage </td></tr>
    <tr><td class="paramname">field_name</td><td>Written into from the buffer </td></tr>
    <tr><td class="paramname">timestep</td><td>Written into from the buffer </td></tr>
    <tr><td class="paramname">field_values</td><td>Remaining message size, allocated here </td></tr>
    <tr><td class="paramname">other_int</td><td>Optional other integer written in from the buffer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="inter-io-specifics_8F90_source.html#l00109">109</a> of file <a class="el" href="inter-io-specifics_8F90_source.html">inter-io-specifics.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: data_buffer</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span>, <span class="keywordtype">intent(out)</span> :: field_name</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: timestep</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span>, <span class="keywordtype">optional</span> :: other_int</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(out)</span> :: field_values</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    </div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">integer</span> :: values_entries</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    values_entries=(<span class="keyword">size</span>(data_buffer) - (string_length+8))/8</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">allocate</span>(field_values(values_entries))</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    field_name=transfer(data_buffer(1:string_length), field_name)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    timestep=transfer(data_buffer(string_length+1:string_length+4), timestep)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(other_int)) other_int=transfer(data_buffer(string_length+5:string_length+8), other_int)</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    field_values=transfer(data_buffer(string_length+9:), field_values)</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceinter__io__specifics__mod_a0dc71dae28791bc5c07bc4ad20c0be41_icgraph.png" border="0" usemap="#anamespaceinter__io__specifics__mod_a0dc71dae28791bc5c07bc4ad20c0be41_icgraph" alt=""/></div>
<map name="namespaceinter__io__specifics__mod_a0dc71dae28791bc5c07bc4ad20c0be41_icgraph" id="anamespaceinter__io__specifics__mod_a0dc71dae28791bc5c07bc4ad20c0be41_icgraph">
<area shape="rect" title="Unpackages some binary data into its individual fields. The field values are allocated here and the s..." alt="" coords="1643,45,1837,101"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a6b0356e066bb9478654f150c322e9f01" title="Handles the data received from another IO server, locates the correct reduction progress,..." alt="" coords="1412,5,1595,61"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a4db5d64e7a2f546eeaaa4bb825012d43" title="Handles receiving data from another IO server and processing this. If the request has already been re..." alt="" coords="1422,85,1585,141"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a85941bfa01b3ffc89f04d2ace55a7f4d" title="Handles the receiving of data from some other IO server. This is issued call back style within a thre..." alt="" coords="1201,5,1364,61"/>
<area shape="rect" href="namespacereduction__inter__io__mod.html#a7169f0a03e60e46122e71b490e1905eb" title="Initialises the reduction action." alt="" coords="1014,5,1151,61"/>
<area shape="rect" href="namespaceallreduction__inter__io__mod.html#afa84e1c95ac2cd88f9220f5bde57087d" title="Initialises the all reduction inter IO functionality." alt="" coords="797,37,964,93"/>
<area shape="rect" href="namespacediagnostic__federator__mod.html#a808b726c916d9dc52e2020eacbe2be0f" title="Initialises the diagnostics action and sets up the diagnostics master definitions." alt="" coords="385,31,559,87"/>
<area shape="rect" href="namespaceglobal__callback__inter__io__mod.html#a112cd288476ab34b687759a6124b912c" title="Initialises the global callback." alt="" coords="607,63,749,119"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="147,45,337,72"/>
<area shape="rect" href="monc__driver_8F90.html#a38fac04eb034f0802b465898f3976e17" title="MONC program entry point which simply calls the main procedure in the MONC module." alt="" coords="5,45,99,72"/>
<area shape="rect" href="namespacebroadcast__inter__io__mod.html#a75700a7e7429e95b4233d0e068c8aafb" title="Initialises the broadcast inter IO functionality." alt="" coords="1012,85,1153,141"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1f4a30fbf778f5633af49cd106c057a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4a30fbf778f5633af49cd106c057a2">&#9670;&nbsp;</a></span>starting_tag</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer inter_io_specifics_mod::starting_tag =20</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="inter-io-specifics_8F90_source.html#l00027">27</a> of file <a class="el" href="inter-io-specifics_8F90_source.html">inter-io-specifics.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <span class="keywordtype">integer</span> :: starting_tag=20</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
