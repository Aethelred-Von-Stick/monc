<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: model_core/src/monc.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c6e96bbf50c3e6f61e1d7ba8d52f7423.html">model_core</a></li><li class="navelem"><a class="el" href="dir_5ed02852c8521c1641c5b208b38a41b0.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#namespaces">Modules</a> &#124;
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">monc.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="monc_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacemonc__mod_1_1io__server__run__procedure.html">monc_mod::io_server_run_procedure</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO server entry procedure which may be passed to the core entry point (if IO server is enabled)  <a href="interfacemonc__mod_1_1io__server__run__procedure.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Modules</h2></td></tr>
<tr class="memitem:namespacemonc__mod"><td class="memItemLeft" align="right" valign="top">module &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html">monc_mod</a></td></tr>
<tr class="memdesc:namespacemonc__mod"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main core entry point to the rest of the model, this is called by the program main. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:aa2abab500db49cd9c95e41632531a40f"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#aa2abab500db49cd9c95e41632531a40f">monc_mod::monc_core_bootstrap</a> (component_descriptions, io_server_run)</td></tr>
<tr class="memdesc:aa2abab500db49cd9c95e41632531a40f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main core entry point to bootstrap running the model.  <a href="namespacemonc__mod.html#aa2abab500db49cd9c95e41632531a40f">More...</a><br /></td></tr>
<tr class="separator:aa2abab500db49cd9c95e41632531a40f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ab06337503a861d665ef76f6553e3cc"><td class="memItemLeft" align="right" valign="top">logical function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a9ab06337503a861d665ef76f6553e3cc">monc_mod::determine_if_io_server_enabled</a> (options_database)</td></tr>
<tr class="memdesc:a9ab06337503a861d665ef76f6553e3cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the IO server should be enabled or not.  <a href="namespacemonc__mod.html#a9ab06337503a861d665ef76f6553e3cc">More...</a><br /></td></tr>
<tr class="separator:a9ab06337503a861d665ef76f6553e3cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca3f98dc591c90feec3df9ddb3dd2d7f"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#aca3f98dc591c90feec3df9ddb3dd2d7f">monc_mod::load_model_configuration</a> (state, options_database)</td></tr>
<tr class="memdesc:aca3f98dc591c90feec3df9ddb3dd2d7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the configuration into the options database, either from a file or checkpoint.  <a href="namespacemonc__mod.html#aca3f98dc591c90feec3df9ddb3dd2d7f">More...</a><br /></td></tr>
<tr class="separator:aca3f98dc591c90feec3df9ddb3dd2d7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65fb2ffe75d12e876490d1ea3b9349b7"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a65fb2ffe75d12e876490d1ea3b9349b7">monc_mod::perform_options_compatibility_checks</a> (options_database)</td></tr>
<tr class="memdesc:a65fb2ffe75d12e876490d1ea3b9349b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs options_database compatibility checks.  <a href="namespacemonc__mod.html#a65fb2ffe75d12e876490d1ea3b9349b7">More...</a><br /></td></tr>
<tr class="separator:a65fb2ffe75d12e876490d1ea3b9349b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e8a1e5e542e0cb9d187870fe57f0f9"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#ad9e8a1e5e542e0cb9d187870fe57f0f9">monc_mod::monc_run</a> (component_descriptions, state)</td></tr>
<tr class="memdesc:ad9e8a1e5e542e0cb9d187870fe57f0f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by MONC processes to run the MONC model.  <a href="namespacemonc__mod.html#ad9e8a1e5e542e0cb9d187870fe57f0f9">More...</a><br /></td></tr>
<tr class="separator:ad9e8a1e5e542e0cb9d187870fe57f0f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744e82f06788a2c99c38569bc2d84cfd"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a744e82f06788a2c99c38569bc2d84cfd">monc_mod::perform_model_steps</a> (state, timestepping_time, modeldump_time)</td></tr>
<tr class="memdesc:a744e82f06788a2c99c38569bc2d84cfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will run through the actual model stages and call the appropriate callbacks at each stage.  <a href="namespacemonc__mod.html#a744e82f06788a2c99c38569bc2d84cfd">More...</a><br /></td></tr>
<tr class="separator:a744e82f06788a2c99c38569bc2d84cfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a960c54442ba1c3ca7500451595b52984"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a960c54442ba1c3ca7500451595b52984">monc_mod::display_timestep_information</a> (timestep, start_time)</td></tr>
<tr class="memdesc:a960c54442ba1c3ca7500451595b52984"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides timestepping information about the current step and performance.  <a href="namespacemonc__mod.html#a960c54442ba1c3ca7500451595b52984">More...</a><br /></td></tr>
<tr class="separator:a960c54442ba1c3ca7500451595b52984"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b3f09b5a2a45e4c853636e7d0cae14e"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a2b3f09b5a2a45e4c853636e7d0cae14e">monc_mod::fill_registry_with_components</a> (options_database, component_descriptions)</td></tr>
<tr class="memdesc:a2b3f09b5a2a45e4c853636e7d0cae14e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers each supplied component description.  <a href="namespacemonc__mod.html#a2b3f09b5a2a45e4c853636e7d0cae14e">More...</a><br /></td></tr>
<tr class="separator:a2b3f09b5a2a45e4c853636e7d0cae14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b31796521ca457b86e819854ec60a5f"><td class="memItemLeft" align="right" valign="top">logical function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a7b31796521ca457b86e819854ec60a5f">monc_mod::is_present_and_true</a> (options_database, key)</td></tr>
<tr class="memdesc:a7b31796521ca457b86e819854ec60a5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether an option is present in the database and true. This combines the key check and getting the value. Just calling to get the value directly will error if it does not exist, we don't nescesarily want for checking optional command line flags.  <a href="namespacemonc__mod.html#a7b31796521ca457b86e819854ec60a5f">More...</a><br /></td></tr>
<tr class="separator:a7b31796521ca457b86e819854ec60a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8dfd7360fd507b14957cd500ce7dd6"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a9f8dfd7360fd507b14957cd500ce7dd6">monc_mod::display_registed_components</a> ()</td></tr>
<tr class="memdesc:a9f8dfd7360fd507b14957cd500ce7dd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Displays the registered components and their version numbers.  <a href="namespacemonc__mod.html#a9f8dfd7360fd507b14957cd500ce7dd6">More...</a><br /></td></tr>
<tr class="separator:a9f8dfd7360fd507b14957cd500ce7dd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0faaccda0cabe18aa8467680f968b7bf"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a0faaccda0cabe18aa8467680f968b7bf">monc_mod::split_communicator_into_monc_and_io</a> (moncs_per_io, monc_communicator, io_communicator, am_i_monc_process, corresponding_io_server_process)</td></tr>
<tr class="memdesc:a0faaccda0cabe18aa8467680f968b7bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splits the MPI_COMM_WORLD communicator into MONC and IO separate communicators. The size of each depends on the stride supplied. This will deal with the case where you only have 1 extra process, for instance 3 MONCs to an IO server with 5 processes. 0=IO server, 1-3 are MONCS but by rights 4 would be an IO server. However we dont want to waste a process as an IO server which is not serving anything, hence in this edge case it will be used as a MONC instead.  <a href="namespacemonc__mod.html#a0faaccda0cabe18aa8467680f968b7bf">More...</a><br /></td></tr>
<tr class="separator:a0faaccda0cabe18aa8467680f968b7bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07fc1b99da0c625847abacf25834e8c3"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a07fc1b99da0c625847abacf25834e8c3">monc_mod::get_number_io_processes</a> (total_ranks, moncs_per_io)</td></tr>
<tr class="memdesc:a07fc1b99da0c625847abacf25834e8c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Based upon the total number of processes and the IO process id stride determines the number of processes that will be used for the IO server. The MONC processes is total processes - io processes.  <a href="namespacemonc__mod.html#a07fc1b99da0c625847abacf25834e8c3">More...</a><br /></td></tr>
<tr class="separator:a07fc1b99da0c625847abacf25834e8c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab79859e859b30ab7dd6a1761270bcf9f"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#ab79859e859b30ab7dd6a1761270bcf9f">monc_mod::get_io_configuration</a> (options_database, ioserver_configuration_file, moncs_per_io_server)</td></tr>
<tr class="memdesc:ab79859e859b30ab7dd6a1761270bcf9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the IO server configuration and populates the required variables of the configuration file name and the placement period.  <a href="namespacemonc__mod.html#ab79859e859b30ab7dd6a1761270bcf9f">More...</a><br /></td></tr>
<tr class="separator:ab79859e859b30ab7dd6a1761270bcf9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a209c568c73aa1bcda43b6ec44df579a1"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a209c568c73aa1bcda43b6ec44df579a1">monc_mod::get_mpi_threading_mode</a> ()</td></tr>
<tr class="memdesc:a209c568c73aa1bcda43b6ec44df579a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrives the configured MPI threading mode, this is serialized by default but can be overridden via environment variable.  <a href="namespacemonc__mod.html#a209c568c73aa1bcda43b6ec44df579a1">More...</a><br /></td></tr>
<tr class="separator:a209c568c73aa1bcda43b6ec44df579a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e6be3c6cb64c627a1d191d04da0ce8d"><td class="memItemLeft" align="right" valign="top">character(len=string_length) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacemonc__mod.html#a8e6be3c6cb64c627a1d191d04da0ce8d">monc_mod::mpi_threading_level_to_string</a> (lvl)</td></tr>
<tr class="memdesc:a8e6be3c6cb64c627a1d191d04da0ce8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an MPI threading level to the string representation of it.  <a href="namespacemonc__mod.html#a8e6be3c6cb64c627a1d191d04da0ce8d">More...</a><br /></td></tr>
<tr class="separator:a8e6be3c6cb64c627a1d191d04da0ce8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
