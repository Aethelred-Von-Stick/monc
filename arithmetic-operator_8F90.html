<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: io/src/diagnostics/operators/arithmetic-operator.F90 File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc161955dc3a3d2485839eba21420d01.html">io</a></li><li class="navelem"><a class="el" href="dir_7913d61037d7093e2ee38526a6ff5887.html">src</a></li><li class="navelem"><a class="el" href="dir_332e5d3a825f50ea3f97b212331bfbc4.html">diagnostics</a></li><li class="navelem"><a class="el" href="dir_f886dce7f942e251195fa918d691cc55.html">operators</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#namespaces">Modules</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">arithmetic-operator.F90 File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="arithmetic-operator_8F90_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarithmetic__operator__mod_1_1arithmetic__execution__node.html">arithmetic_operator_mod::arithmetic_execution_node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarithmetic__operator__mod_1_1arithmetic__cache__item.html">arithmetic_operator_mod::arithmetic_cache_item</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Modules</h2></td></tr>
<tr class="memitem:namespacearithmetic__operator__mod"><td class="memItemLeft" align="right" valign="top">module &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html">arithmetic_operator_mod</a></td></tr>
<tr class="memdesc:namespacearithmetic__operator__mod"><td class="mdescLeft">&#160;</td><td class="mdescRight">The arithmetic operator which allows the user to define arithmetic formulas based on fields and constants which are then executed BDMAS style. This works by parsing the text forumula into an execution tree which is walked in order to perform the final result. Building the tree is the potentially expensive aspect of this, so built trees are cached as it is likely that the equation will be run many times. Currently this is expressed in terms of scalars, and it will operate on all elements of the data. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:aef5d51079422c76f9d443d35839c5991"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#aef5d51079422c76f9d443d35839c5991">arithmetic_operator_mod::initialise_arithmetic_operator</a> ()</td></tr>
<tr class="memdesc:aef5d51079422c76f9d443d35839c5991"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises this operator.  <a href="namespacearithmetic__operator__mod.html#aef5d51079422c76f9d443d35839c5991">More...</a><br /></td></tr>
<tr class="separator:aef5d51079422c76f9d443d35839c5991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad553ae4f20498a50db9229a26d82efd0"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#ad553ae4f20498a50db9229a26d82efd0">arithmetic_operator_mod::finalise_arithmetic_operator</a> ()</td></tr>
<tr class="memdesc:ad553ae4f20498a50db9229a26d82efd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalises this opertor.  <a href="namespacearithmetic__operator__mod.html#ad553ae4f20498a50db9229a26d82efd0">More...</a><br /></td></tr>
<tr class="separator:ad553ae4f20498a50db9229a26d82efd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4979850d57af02b2fcf5d24ed0e96cd"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd">arithmetic_operator_mod::perform_arithmetic_operator</a> (io_configuration, field_values, action_attributes, source_monc_location, source_monc, operator_result_values)</td></tr>
<tr class="memdesc:af4979850d57af02b2fcf5d24ed0e96cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if not found.) If there is no execution tree it then parses the equation into an execution tree and stores it. The stored execution tree is then executed and the real result returned.  <a href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd">More...</a><br /></td></tr>
<tr class="separator:af4979850d57af02b2fcf5d24ed0e96cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac499b2e2ea3a90c6c4e16c9e3da4437b"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#ac499b2e2ea3a90c6c4e16c9e3da4437b">arithmetic_operator_mod::get_size_of_data_being_operated_on</a> (cached_equation, field_values)</td></tr>
<tr class="memdesc:ac499b2e2ea3a90c6c4e16c9e3da4437b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the number of data elements that this will operate on. It will produce a log error if any variable lengths are inconsistent.  <a href="namespacearithmetic__operator__mod.html#ac499b2e2ea3a90c6c4e16c9e3da4437b">More...</a><br /></td></tr>
<tr class="separator:ac499b2e2ea3a90c6c4e16c9e3da4437b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad16ff2e96b02b3abf08196385c6deddb"><td class="memItemLeft" align="right" valign="top">recursive real(kind=default_precision) function, dimension(n)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#ad16ff2e96b02b3abf08196385c6deddb">arithmetic_operator_mod::execute_equation_tree</a> (equation_tree, field_values, n)</td></tr>
<tr class="memdesc:ad16ff2e96b02b3abf08196385c6deddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes an equation tree by doing a post order traversal of the tree. If a node is a terminal then either the variable is looked up for its value or the constant is returned. If a node is a non terminal then the operator is performed on the result value of its left and right subtrees and the value returned.  <a href="namespacearithmetic__operator__mod.html#ad16ff2e96b02b3abf08196385c6deddb">More...</a><br /></td></tr>
<tr class="separator:ad16ff2e96b02b3abf08196385c6deddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24bf0ea213d6e08249db2b727e2ca875"><td class="memItemLeft" align="right" valign="top">recursive type(arithmetic_execution_node) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875">arithmetic_operator_mod::build_equation_tree</a> (io_configuration, equation)</td></tr>
<tr class="memdesc:a24bf0ea213d6e08249db2b727e2ca875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds the equation tree, this searches for the least significant operator and then splits the equation based upon that. Each sub equation is then passed to recursive calls of this function which return subtrees for these aspects. Some string manipulation is done to remove braces which would otherwise be included in the terminal characters.  <a href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875">More...</a><br /></td></tr>
<tr class="separator:a24bf0ea213d6e08249db2b727e2ca875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1bd7c51003dda860483f1462e6d599"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a0f1bd7c51003dda860483f1462e6d599">arithmetic_operator_mod::remove_character</a> (raw_string, c)</td></tr>
<tr class="memdesc:a0f1bd7c51003dda860483f1462e6d599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all occurances of a character from a string in situ by replacing it with whitespace.  <a href="namespacearithmetic__operator__mod.html#a0f1bd7c51003dda860483f1462e6d599">More...</a><br /></td></tr>
<tr class="separator:a0f1bd7c51003dda860483f1462e6d599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81cd0bb5cd8836083ab8baa4e8132461"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a81cd0bb5cd8836083ab8baa4e8132461">arithmetic_operator_mod::get_location_of_least_significant_operator</a> (equation)</td></tr>
<tr class="memdesc:a81cd0bb5cd8836083ab8baa4e8132461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an equation this will retrieve the location of the least significant operator in that equation or 0 if no operator is found (i.e. the string is a terminal.) This takes account of parenthesis.  <a href="namespacearithmetic__operator__mod.html#a81cd0bb5cd8836083ab8baa4e8132461">More...</a><br /></td></tr>
<tr class="separator:a81cd0bb5cd8836083ab8baa4e8132461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cbadbbd3c2c21930d327210063025aa"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a0cbadbbd3c2c21930d327210063025aa">arithmetic_operator_mod::get_operator_representation</a> (op_char)</td></tr>
<tr class="memdesc:a0cbadbbd3c2c21930d327210063025aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a character representation of an operator this returns the internal numeric type representation of it.  <a href="namespacearithmetic__operator__mod.html#a0cbadbbd3c2c21930d327210063025aa">More...</a><br /></td></tr>
<tr class="separator:a0cbadbbd3c2c21930d327210063025aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be9aba21705fe4c96fcc38aaa5db046"><td class="memItemLeft" align="right" valign="top">type(list_type) function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a9be9aba21705fe4c96fcc38aaa5db046">arithmetic_operator_mod::arithmetic_operator_get_required_fields</a> (action_attributes)</td></tr>
<tr class="memdesc:a9be9aba21705fe4c96fcc38aaa5db046"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the list of fields needed by this operator for a specific configuration.  <a href="namespacearithmetic__operator__mod.html#a9be9aba21705fe4c96fcc38aaa5db046">More...</a><br /></td></tr>
<tr class="separator:a9be9aba21705fe4c96fcc38aaa5db046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96544613c02ffac4ee1233cba0ebca3e"><td class="memItemLeft" align="right" valign="top">type(list_type) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a96544613c02ffac4ee1233cba0ebca3e">arithmetic_operator_mod::process_equation_to_get_required_fields</a> (equation)</td></tr>
<tr class="memdesc:a96544613c02ffac4ee1233cba0ebca3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs text processing on an equation to extract out all the required variable (fields) needed in order to run this equation and get the result. Note this ignores all values which are constants (reals or integers)  <a href="namespacearithmetic__operator__mod.html#a96544613c02ffac4ee1233cba0ebca3e">More...</a><br /></td></tr>
<tr class="separator:a96544613c02ffac4ee1233cba0ebca3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14aaaf4c989209cd582a9c1fbdd019f7"><td class="memItemLeft" align="right" valign="top">type(arithmetic_cache_item) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a14aaaf4c989209cd582a9c1fbdd019f7">arithmetic_operator_mod::find_or_add_equation</a> (equation)</td></tr>
<tr class="memdesc:a14aaaf4c989209cd582a9c1fbdd019f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locates an existing equation in the cache based upon the textual equation representation or creates a new entry and returns this one.  <a href="namespacearithmetic__operator__mod.html#a14aaaf4c989209cd582a9c1fbdd019f7">More...</a><br /></td></tr>
<tr class="separator:a14aaaf4c989209cd582a9c1fbdd019f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24302e64f98c16bbe3a26dda9da399f1"><td class="memItemLeft" align="right" valign="top">type(arithmetic_cache_item) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a24302e64f98c16bbe3a26dda9da399f1">arithmetic_operator_mod::find_equation</a> (equation, dolock)</td></tr>
<tr class="memdesc:a24302e64f98c16bbe3a26dda9da399f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds an equation in the cache based upon its textual equation representation or returns null if none is found.  <a href="namespacearithmetic__operator__mod.html#a24302e64f98c16bbe3a26dda9da399f1">More...</a><br /></td></tr>
<tr class="separator:a24302e64f98c16bbe3a26dda9da399f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a57f2d1bd140e69075bf9da70d9195380"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a57f2d1bd140e69075bf9da70d9195380">arithmetic_operator_mod::terminal_op</a> =0</td></tr>
<tr class="separator:a57f2d1bd140e69075bf9da70d9195380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a5918effd2930853ab658252fa3c87"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a09a5918effd2930853ab658252fa3c87">arithmetic_operator_mod::add_op</a> =1</td></tr>
<tr class="separator:a09a5918effd2930853ab658252fa3c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8c32821911bc8266a2f833d3520a35"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a1e8c32821911bc8266a2f833d3520a35">arithmetic_operator_mod::minus_op</a> =2</td></tr>
<tr class="separator:a1e8c32821911bc8266a2f833d3520a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba2e150169af43fbdca273c3ce4ca71"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a3ba2e150169af43fbdca273c3ce4ca71">arithmetic_operator_mod::mul_op</a> =3</td></tr>
<tr class="separator:a3ba2e150169af43fbdca273c3ce4ca71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a321f70a75454aeac6b802240cbba2fa1"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a321f70a75454aeac6b802240cbba2fa1">arithmetic_operator_mod::div_op</a> =4</td></tr>
<tr class="separator:a321f70a75454aeac6b802240cbba2fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a665d7ad66f1f628f4cced1f679f1a942"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a665d7ad66f1f628f4cced1f679f1a942">arithmetic_operator_mod::mod_op</a> =5</td></tr>
<tr class="memdesc:a665d7ad66f1f628f4cced1f679f1a942"><td class="mdescLeft">&#160;</td><td class="mdescRight">A specific node in the execution tree.  <a href="namespacearithmetic__operator__mod.html#a665d7ad66f1f628f4cced1f679f1a942">More...</a><br /></td></tr>
<tr class="separator:a665d7ad66f1f628f4cced1f679f1a942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a98f9f3290b1046b90676e19052c506"><td class="memItemLeft" align="right" valign="top">type(hashmap_type), volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a6a98f9f3290b1046b90676e19052c506">arithmetic_operator_mod::equation_cache</a></td></tr>
<tr class="separator:a6a98f9f3290b1046b90676e19052c506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83471c2801ddbac747f0974a84d70c10"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a83471c2801ddbac747f0974a84d70c10">arithmetic_operator_mod::equation_cache_rwlock</a></td></tr>
<tr class="separator:a83471c2801ddbac747f0974a84d70c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
