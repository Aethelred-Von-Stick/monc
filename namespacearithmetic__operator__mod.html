<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: arithmetic_operator_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">arithmetic_operator_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The arithmetic operator which allows the user to define arithmetic formulas based on fields and constants which are then executed BDMAS style. This works by parsing the text forumula into an execution tree which is walked in order to perform the final result. Building the tree is the potentially expensive aspect of this, so built trees are cached as it is likely that the equation will be run many times. Currently this is expressed in terms of scalars, and it will operate on all elements of the data.  
<a href="namespacearithmetic__operator__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarithmetic__operator__mod_1_1arithmetic__cache__item.html">arithmetic_cache_item</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structarithmetic__operator__mod_1_1arithmetic__execution__node.html">arithmetic_execution_node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:aef5d51079422c76f9d443d35839c5991"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#aef5d51079422c76f9d443d35839c5991">initialise_arithmetic_operator</a> ()</td></tr>
<tr class="memdesc:aef5d51079422c76f9d443d35839c5991"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises this operator.  <a href="namespacearithmetic__operator__mod.html#aef5d51079422c76f9d443d35839c5991">More...</a><br /></td></tr>
<tr class="separator:aef5d51079422c76f9d443d35839c5991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad553ae4f20498a50db9229a26d82efd0"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#ad553ae4f20498a50db9229a26d82efd0">finalise_arithmetic_operator</a> ()</td></tr>
<tr class="memdesc:ad553ae4f20498a50db9229a26d82efd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalises this opertor.  <a href="namespacearithmetic__operator__mod.html#ad553ae4f20498a50db9229a26d82efd0">More...</a><br /></td></tr>
<tr class="separator:ad553ae4f20498a50db9229a26d82efd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4979850d57af02b2fcf5d24ed0e96cd"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd">perform_arithmetic_operator</a> (io_configuration, field_values, action_attributes, source_monc_location, source_monc, operator_result_values)</td></tr>
<tr class="memdesc:af4979850d57af02b2fcf5d24ed0e96cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if not found.) If there is no execution tree it then parses the equation into an execution tree and stores it. The stored execution tree is then executed and the real result returned.  <a href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd">More...</a><br /></td></tr>
<tr class="separator:af4979850d57af02b2fcf5d24ed0e96cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac499b2e2ea3a90c6c4e16c9e3da4437b"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#ac499b2e2ea3a90c6c4e16c9e3da4437b">get_size_of_data_being_operated_on</a> (cached_equation, field_values)</td></tr>
<tr class="memdesc:ac499b2e2ea3a90c6c4e16c9e3da4437b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the number of data elements that this will operate on. It will produce a log error if any variable lengths are inconsistent.  <a href="namespacearithmetic__operator__mod.html#ac499b2e2ea3a90c6c4e16c9e3da4437b">More...</a><br /></td></tr>
<tr class="separator:ac499b2e2ea3a90c6c4e16c9e3da4437b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad16ff2e96b02b3abf08196385c6deddb"><td class="memItemLeft" align="right" valign="top">recursive real(kind=default_precision) function, dimension(n)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#ad16ff2e96b02b3abf08196385c6deddb">execute_equation_tree</a> (equation_tree, field_values, n)</td></tr>
<tr class="memdesc:ad16ff2e96b02b3abf08196385c6deddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Executes an equation tree by doing a post order traversal of the tree. If a node is a terminal then either the variable is looked up for its value or the constant is returned. If a node is a non terminal then the operator is performed on the result value of its left and right subtrees and the value returned.  <a href="namespacearithmetic__operator__mod.html#ad16ff2e96b02b3abf08196385c6deddb">More...</a><br /></td></tr>
<tr class="separator:ad16ff2e96b02b3abf08196385c6deddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24bf0ea213d6e08249db2b727e2ca875"><td class="memItemLeft" align="right" valign="top">recursive type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__execution__node.html">arithmetic_execution_node</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875">build_equation_tree</a> (io_configuration, equation)</td></tr>
<tr class="memdesc:a24bf0ea213d6e08249db2b727e2ca875"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds the equation tree, this searches for the least significant operator and then splits the equation based upon that. Each sub equation is then passed to recursive calls of this function which return subtrees for these aspects. Some string manipulation is done to remove braces which would otherwise be included in the terminal characters.  <a href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875">More...</a><br /></td></tr>
<tr class="separator:a24bf0ea213d6e08249db2b727e2ca875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f1bd7c51003dda860483f1462e6d599"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a0f1bd7c51003dda860483f1462e6d599">remove_character</a> (raw_string, c)</td></tr>
<tr class="memdesc:a0f1bd7c51003dda860483f1462e6d599"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes all occurances of a character from a string in situ by replacing it with whitespace.  <a href="namespacearithmetic__operator__mod.html#a0f1bd7c51003dda860483f1462e6d599">More...</a><br /></td></tr>
<tr class="separator:a0f1bd7c51003dda860483f1462e6d599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81cd0bb5cd8836083ab8baa4e8132461"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a81cd0bb5cd8836083ab8baa4e8132461">get_location_of_least_significant_operator</a> (equation)</td></tr>
<tr class="memdesc:a81cd0bb5cd8836083ab8baa4e8132461"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given an equation this will retrieve the location of the least significant operator in that equation or 0 if no operator is found (i.e. the string is a terminal.) This takes account of parenthesis.  <a href="namespacearithmetic__operator__mod.html#a81cd0bb5cd8836083ab8baa4e8132461">More...</a><br /></td></tr>
<tr class="separator:a81cd0bb5cd8836083ab8baa4e8132461"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cbadbbd3c2c21930d327210063025aa"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a0cbadbbd3c2c21930d327210063025aa">get_operator_representation</a> (op_char)</td></tr>
<tr class="memdesc:a0cbadbbd3c2c21930d327210063025aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a character representation of an operator this returns the internal numeric type representation of it.  <a href="namespacearithmetic__operator__mod.html#a0cbadbbd3c2c21930d327210063025aa">More...</a><br /></td></tr>
<tr class="separator:a0cbadbbd3c2c21930d327210063025aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9be9aba21705fe4c96fcc38aaa5db046"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1list__type.html">list_type</a>) function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a9be9aba21705fe4c96fcc38aaa5db046">arithmetic_operator_get_required_fields</a> (action_attributes)</td></tr>
<tr class="memdesc:a9be9aba21705fe4c96fcc38aaa5db046"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the list of fields needed by this operator for a specific configuration.  <a href="namespacearithmetic__operator__mod.html#a9be9aba21705fe4c96fcc38aaa5db046">More...</a><br /></td></tr>
<tr class="separator:a9be9aba21705fe4c96fcc38aaa5db046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96544613c02ffac4ee1233cba0ebca3e"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1list__type.html">list_type</a>) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a96544613c02ffac4ee1233cba0ebca3e">process_equation_to_get_required_fields</a> (equation)</td></tr>
<tr class="memdesc:a96544613c02ffac4ee1233cba0ebca3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs text processing on an equation to extract out all the required variable (fields) needed in order to run this equation and get the result. Note this ignores all values which are constants (reals or integers)  <a href="namespacearithmetic__operator__mod.html#a96544613c02ffac4ee1233cba0ebca3e">More...</a><br /></td></tr>
<tr class="separator:a96544613c02ffac4ee1233cba0ebca3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14aaaf4c989209cd582a9c1fbdd019f7"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__cache__item.html">arithmetic_cache_item</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a14aaaf4c989209cd582a9c1fbdd019f7">find_or_add_equation</a> (equation)</td></tr>
<tr class="memdesc:a14aaaf4c989209cd582a9c1fbdd019f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locates an existing equation in the cache based upon the textual equation representation or creates a new entry and returns this one.  <a href="namespacearithmetic__operator__mod.html#a14aaaf4c989209cd582a9c1fbdd019f7">More...</a><br /></td></tr>
<tr class="separator:a14aaaf4c989209cd582a9c1fbdd019f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24302e64f98c16bbe3a26dda9da399f1"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__cache__item.html">arithmetic_cache_item</a>) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a24302e64f98c16bbe3a26dda9da399f1">find_equation</a> (equation, dolock)</td></tr>
<tr class="memdesc:a24302e64f98c16bbe3a26dda9da399f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds an equation in the cache based upon its textual equation representation or returns null if none is found.  <a href="namespacearithmetic__operator__mod.html#a24302e64f98c16bbe3a26dda9da399f1">More...</a><br /></td></tr>
<tr class="separator:a24302e64f98c16bbe3a26dda9da399f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a57f2d1bd140e69075bf9da70d9195380"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a57f2d1bd140e69075bf9da70d9195380">terminal_op</a> =0</td></tr>
<tr class="separator:a57f2d1bd140e69075bf9da70d9195380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09a5918effd2930853ab658252fa3c87"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a09a5918effd2930853ab658252fa3c87">add_op</a> =1</td></tr>
<tr class="separator:a09a5918effd2930853ab658252fa3c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8c32821911bc8266a2f833d3520a35"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a1e8c32821911bc8266a2f833d3520a35">minus_op</a> =2</td></tr>
<tr class="separator:a1e8c32821911bc8266a2f833d3520a35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba2e150169af43fbdca273c3ce4ca71"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a3ba2e150169af43fbdca273c3ce4ca71">mul_op</a> =3</td></tr>
<tr class="separator:a3ba2e150169af43fbdca273c3ce4ca71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a321f70a75454aeac6b802240cbba2fa1"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a321f70a75454aeac6b802240cbba2fa1">div_op</a> =4</td></tr>
<tr class="separator:a321f70a75454aeac6b802240cbba2fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a665d7ad66f1f628f4cced1f679f1a942"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a665d7ad66f1f628f4cced1f679f1a942">mod_op</a> =5</td></tr>
<tr class="memdesc:a665d7ad66f1f628f4cced1f679f1a942"><td class="mdescLeft">&#160;</td><td class="mdescRight">A specific node in the execution tree.  <a href="namespacearithmetic__operator__mod.html#a665d7ad66f1f628f4cced1f679f1a942">More...</a><br /></td></tr>
<tr class="separator:a665d7ad66f1f628f4cced1f679f1a942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a98f9f3290b1046b90676e19052c506"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a6a98f9f3290b1046b90676e19052c506">equation_cache</a></td></tr>
<tr class="separator:a6a98f9f3290b1046b90676e19052c506"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83471c2801ddbac747f0974a84d70c10"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacearithmetic__operator__mod.html#a83471c2801ddbac747f0974a84d70c10">equation_cache_rwlock</a></td></tr>
<tr class="separator:a83471c2801ddbac747f0974a84d70c10"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The arithmetic operator which allows the user to define arithmetic formulas based on fields and constants which are then executed BDMAS style. This works by parsing the text forumula into an execution tree which is walked in order to perform the final result. Building the tree is the potentially expensive aspect of this, so built trees are cached as it is likely that the equation will be run many times. Currently this is expressed in terms of scalars, and it will operate on all elements of the data. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a9be9aba21705fe4c96fcc38aaa5db046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9be9aba21705fe4c96fcc38aaa5db046">&#9670;&nbsp;</a></span>arithmetic_operator_get_required_fields()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1list__type.html">list_type</a>) function, public arithmetic_operator_mod::arithmetic_operator_get_required_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>action_attributes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the list of fields needed by this operator for a specific configuration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">action_attributes</td><td>The attributes which configure the operator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of required fields before the operator can run </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00280">280</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordtype">type</span>(map_type), <span class="keywordtype">intent(inout)</span> :: action_attributes</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: equation</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">type</span>(arithmetic_cache_item), <span class="keywordtype">pointer</span> :: cached_equation</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    equation=get_action_attribute_string(action_attributes, <span class="stringliteral">&quot;equation&quot;</span>)</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    cached_equation=&gt;find_or_add_equation(equation)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">if</span> (c_is_empty(cached_equation%required_fields)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      cached_equation%required_fields=process_equation_to_get_required_fields(equation)</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    arithmetic_operator_get_required_fields=cached_equation%required_fields</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a9be9aba21705fe4c96fcc38aaa5db046_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a9be9aba21705fe4c96fcc38aaa5db046_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a9be9aba21705fe4c96fcc38aaa5db046_cgraph" id="anamespacearithmetic__operator__mod_a9be9aba21705fe4c96fcc38aaa5db046_cgraph">
<area shape="rect" title="Retrieves the list of fields needed by this operator for a specific configuration." alt="" coords="5,63,176,119"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a14aaaf4c989209cd582a9c1fbdd019f7" title="Locates an existing equation in the cache based upon the textual equation representation or creates a..." alt="" coords="224,5,407,47"/>
<area shape="rect" href="namespacedata__utils__mod.html#a32e2bb292c66ad41e019b09c8842b82b" title="Retrieves the name of a field from the attributes specified in the configuration." alt="" coords="237,71,394,112"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a96544613c02ffac4ee1233cba0ebca3e" title="Performs text processing on an equation to extract out all the required variable (fields) needed in o..." alt="" coords="234,135,397,191"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a24302e64f98c16bbe3a26dda9da399f1" title="Finds an equation in the cache based upon its textual equation representation or returns null if none..." alt="" coords="455,5,591,47"/>
</map>
</div>

</div>
</div>
<a id="a24bf0ea213d6e08249db2b727e2ca875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24bf0ea213d6e08249db2b727e2ca875">&#9670;&nbsp;</a></span>build_equation_tree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">recursive type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__execution__node.html">arithmetic_execution_node</a>) function, pointer arithmetic_operator_mod::build_equation_tree </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>equation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds the equation tree, this searches for the least significant operator and then splits the equation based upon that. Each sub equation is then passed to recursive calls of this function which return subtrees for these aspects. Some string manipulation is done to remove braces which would otherwise be included in the terminal characters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration of the IO server <br  />
 </td></tr>
    <tr><td class="paramname">equation</td><td>The equation to represent as a tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The equation tree which represents the provided equation </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00181">181</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: equation</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">type</span>(arithmetic_execution_node), <span class="keywordtype">pointer</span> :: equation_tree</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordtype">integer</span> :: split_point</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">allocate</span>(equation_tree)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    split_point=get_location_of_least_significant_operator(equation)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span> (split_point .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      equation_tree%operator=get_operator_representation(equation(split_point:split_point))</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      equation_tree%left=&gt;build_equation_tree(io_configuration, equation(:split_point-1))</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      equation_tree%right=&gt;build_equation_tree(io_configuration, equation(split_point+1:))</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      equation_tree%operator=terminal_op</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      equation_tree%variable=equation</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      <span class="keyword">call </span>remove_character(equation_tree%variable, <span class="stringliteral">&quot;(&quot;</span>)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      <span class="keyword">call </span>remove_character(equation_tree%variable, <span class="stringliteral">&quot;)&quot;</span>)</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      equation_tree%variable=trim(adjustl(equation_tree%variable))      </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keywordflow">if</span> (equation_tree%variable(1:1) .eq. <span class="stringliteral">&quot;{&quot;</span> .and. &amp;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;           equation_tree%variable(len_trim(equation_tree%variable):len_trim(equation_tree%variable)) .eq. <span class="stringliteral">&quot;}&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        equation_tree%variable=conv_to_string(options_get_real(&amp;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;             io_configuration%options_database, equation_tree%variable(2:len_trim(equation_tree%variable)-1)))    </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_cgraph" id="anamespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_cgraph">
<area shape="rect" title="Builds the equation tree, this searches for the least significant operator and then splits the equati..." alt="" coords="5,107,177,149"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a81cd0bb5cd8836083ab8baa4e8132461" title="Given an equation this will retrieve the location of the least significant operator in that equation ..." alt="" coords="225,5,401,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a0cbadbbd3c2c21930d327210063025aa" title="Given a character representation of an operator this returns the internal numeric type representation..." alt="" coords="449,26,671,67"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#ab054641ac0fa0287adb3c461987c4f0b" title="Retrieves a real value from the database that matches the provided key." alt="" coords="239,137,388,178"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a0f1bd7c51003dda860483f1462e6d599" title="Removes all occurances of a character from a string in situ by replacing it with whitespace." alt="" coords="231,202,395,243"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a13bbeb6272c82308e3d4a42f7c36c862" title="Determines whether a specific options key exists in the database or not, if it doesn&#39;t then this resu..." alt="" coords="485,116,635,172"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#ab4f16a670bed755586806647da3cfa8d" title="Gets a key corresponding to the correct options key and index combination." alt="" coords="481,195,639,237"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a4b187d310f786ed3c207a3060e09b156" title="Determines whether a specific key is in the database." alt="" coords="719,123,868,165"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_icgraph" id="anamespacearithmetic__operator__mod_a24bf0ea213d6e08249db2b727e2ca875_icgraph">
<area shape="rect" title="Builds the equation tree, this searches for the least significant operator and then splits the equati..." alt="" coords="221,13,393,54"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<a id="ad16ff2e96b02b3abf08196385c6deddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad16ff2e96b02b3abf08196385c6deddb">&#9670;&nbsp;</a></span>execute_equation_tree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">recursive real(kind=default_precision) function, dimension(n) arithmetic_operator_mod::execute_equation_tree </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__execution__node.html">arithmetic_execution_node</a>), intent(inout), pointer&#160;</td>
          <td class="paramname"><em>equation_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Executes an equation tree by doing a post order traversal of the tree. If a node is a terminal then either the variable is looked up for its value or the constant is returned. If a node is a non terminal then the operator is performed on the result value of its left and right subtrees and the value returned. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">equation_tree</td><td>The equation tree to traverse </td></tr>
    <tr><td class="paramname">field_values</td><td>The variable value key value pair </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A real result from traversing this equation tree </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00131">131</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordtype">type</span>(arithmetic_execution_node), <span class="keywordtype">pointer</span>, <span class="keywordtype">intent(inout)</span> :: equation_tree</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">intent(inout)</span> :: field_values</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: n</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(n)</span> :: result_value</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(n)</span> :: left_value, right_value</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">type</span>(data_values_type), <span class="keywordtype">pointer</span> :: variable_data</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (equation_tree%operator==terminal_op) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keywordflow">if</span> (conv_is_real(equation_tree%variable)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        result_value=conv_to_real(equation_tree%variable)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (conv_is_integer(equation_tree%variable)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        result_value=conv_to_real(conv_to_integer(equation_tree%variable))</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        variable_data=&gt;get_data_value_by_field_name(field_values, equation_tree%variable)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">size</span>(variable_data%values) .lt. n) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;          <span class="keywordflow">do</span> i=1, n, <span class="keyword">size</span>(variable_data%values)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            result_value(i:i+<span class="keyword">size</span>(variable_data%values)-1)=variable_data%values</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keywordflow">          end do</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;          result_value=variable_data%values</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keywordflow">        end if</span>        </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      left_value=execute_equation_tree(equation_tree%left, field_values, n)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      right_value=execute_equation_tree(equation_tree%right, field_values, n)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">if</span> (equation_tree%operator == add_op) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        result_value(:)=left_value(:)+right_value(:)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equation_tree%operator == minus_op) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        result_value(:)=left_value(:)-right_value(:)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equation_tree%operator == mul_op) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        result_value(:)=left_value(:)*right_value(:)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equation_tree%operator == div_op) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        result_value(:)=left_value(:)/right_value(:)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (equation_tree%operator == mod_op) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">do</span> i=1, n</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;          result_value(i)=mod(left_value(i), right_value(i))</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="keywordflow">        end do</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_ad16ff2e96b02b3abf08196385c6deddb_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_ad16ff2e96b02b3abf08196385c6deddb_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_ad16ff2e96b02b3abf08196385c6deddb_icgraph" id="anamespacearithmetic__operator__mod_ad16ff2e96b02b3abf08196385c6deddb_icgraph">
<area shape="rect" title="Executes an equation tree by doing a post order traversal of the tree. If a node is a terminal then e..." alt="" coords="221,13,412,54"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<a id="ad553ae4f20498a50db9229a26d82efd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad553ae4f20498a50db9229a26d82efd0">&#9670;&nbsp;</a></span>finalise_arithmetic_operator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public arithmetic_operator_mod::finalise_arithmetic_operator</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalises this opertor. </p>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00053">53</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_destroy(equation_cache_rwlock))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_ad553ae4f20498a50db9229a26d82efd0_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_ad553ae4f20498a50db9229a26d82efd0_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_ad553ae4f20498a50db9229a26d82efd0_cgraph" id="anamespacearithmetic__operator__mod_ad553ae4f20498a50db9229a26d82efd0_cgraph">
<area shape="rect" title="Finalises this opertor." alt="" coords="5,31,169,87"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="221,5,376,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a1ba0d6ac9839191688aeea507ae27ec8" title=" " alt="" coords="217,71,380,112"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="428,13,571,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="619,5,785,47"/>
</map>
</div>

</div>
</div>
<a id="a24302e64f98c16bbe3a26dda9da399f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24302e64f98c16bbe3a26dda9da399f1">&#9670;&nbsp;</a></span>find_equation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__cache__item.html">arithmetic_cache_item</a>) function, pointer arithmetic_operator_mod::find_equation </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>equation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>dolock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds an equation in the cache based upon its textual equation representation or returns null if none is found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">equation</td><td>Textual equation that we are looking up </td></tr>
    <tr><td class="paramname">dolock</td><td>Whether to issue a read lock which accessing the collection </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Cached entry for the equation or null if none is found </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00356">356</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: equation</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <span class="keywordtype">type</span>(arithmetic_cache_item), <span class="keywordtype">pointer</span> :: find_equation</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: dolock</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">if</span> (dolock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_rdlock(equation_cache_rwlock))</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    generic=&gt;c_get_generic(equation_cache, equation)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">if</span> (dolock) <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(equation_cache_rwlock))</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(generic)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="keywordflow">        type is</span> (arithmetic_cache_item)</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;          find_equation=&gt;generic</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      find_equation=&gt;null()</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a24302e64f98c16bbe3a26dda9da399f1_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a24302e64f98c16bbe3a26dda9da399f1_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a24302e64f98c16bbe3a26dda9da399f1_icgraph" id="anamespacearithmetic__operator__mod_a24302e64f98c16bbe3a26dda9da399f1_icgraph">
<area shape="rect" title="Finds an equation in the cache based upon its textual equation representation or returns null if none..." alt="" coords="455,53,591,94"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a14aaaf4c989209cd582a9c1fbdd019f7" title="Locates an existing equation in the cache based upon the textual equation representation or creates a..." alt="" coords="224,53,407,94"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a9be9aba21705fe4c96fcc38aaa5db046" title="Retrieves the list of fields needed by this operator for a specific configuration." alt="" coords="5,5,176,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="7,85,175,141"/>
</map>
</div>

</div>
</div>
<a id="a14aaaf4c989209cd582a9c1fbdd019f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14aaaf4c989209cd582a9c1fbdd019f7">&#9670;&nbsp;</a></span>find_or_add_equation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__cache__item.html">arithmetic_cache_item</a>) function, pointer arithmetic_operator_mod::find_or_add_equation </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>equation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locates an existing equation in the cache based upon the textual equation representation or creates a new entry and returns this one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">equation</td><td>Textual equation that we are looking up </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Cached entry for the equation </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00332">332</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: equation</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">type</span>(arithmetic_cache_item), <span class="keywordtype">pointer</span> :: find_or_add_equation</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    find_or_add_equation=&gt;find_equation(equation, .true.)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(find_or_add_equation)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_wrlock(equation_cache_rwlock))</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      find_or_add_equation=&gt;find_equation(equation, .false.)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(find_or_add_equation)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <span class="keyword">allocate</span>(find_or_add_equation)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        find_or_add_equation%execution_tree=&gt;null()</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        generic=&gt;find_or_add_equation</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keyword">call </span>c_put_generic(equation_cache, equation, generic, .false.)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_rwlock_unlock(equation_cache_rwlock))</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_cgraph" id="anamespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_cgraph">
<area shape="rect" title="Locates an existing equation in the cache based upon the textual equation representation or creates a..." alt="" coords="5,5,188,47"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a24302e64f98c16bbe3a26dda9da399f1" title="Finds an equation in the cache based upon its textual equation representation or returns null if none..." alt="" coords="236,5,372,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_icgraph" id="anamespacearithmetic__operator__mod_a14aaaf4c989209cd582a9c1fbdd019f7_icgraph">
<area shape="rect" title="Locates an existing equation in the cache based upon the textual equation representation or creates a..." alt="" coords="224,53,407,94"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a9be9aba21705fe4c96fcc38aaa5db046" title="Retrieves the list of fields needed by this operator for a specific configuration." alt="" coords="5,5,176,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="7,85,175,141"/>
</map>
</div>

</div>
</div>
<a id="a81cd0bb5cd8836083ab8baa4e8132461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81cd0bb5cd8836083ab8baa4e8132461">&#9670;&nbsp;</a></span>get_location_of_least_significant_operator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function arithmetic_operator_mod::get_location_of_least_significant_operator </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>equation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given an equation this will retrieve the location of the least significant operator in that equation or 0 if no operator is found (i.e. the string is a terminal.) This takes account of parenthesis. </p>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00226">226</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: equation</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">integer</span> :: i, eq_len, location_value, op, op_val, brace_level</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    get_location_of_least_significant_operator=0</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    location_value=999999</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    brace_level=0</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    eq_len=len(trim(equation))</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">do</span> i=eq_len, 1, -1</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">if</span> (equation(i:i) == <span class="stringliteral">&quot;(&quot;</span>) brace_level=brace_level-1</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">if</span> (equation(i:i) == <span class="stringliteral">&quot;)&quot;</span>) brace_level=brace_level+1</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      op=get_operator_representation(equation(i:i))</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">if</span> (op .gt. -1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        op_val=0</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">if</span> (op == div_op) op_val=4</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keywordflow">if</span> (op == mod_op) op_val=4</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keywordflow">if</span> (op == mul_op) op_val=3</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span> (op == add_op) op_val=2</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">if</span> (op == minus_op) op_val=1</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        op_val=op_val + (brace_level*10)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">if</span> (op_val .lt. location_value) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;          location_value=op_val</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;          get_location_of_least_significant_operator=i</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keywordflow">        end if</span>        </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="keywordflow">      end if</span>      </div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_cgraph" id="anamespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_cgraph">
<area shape="rect" title="Given an equation this will retrieve the location of the least significant operator in that equation ..." alt="" coords="5,5,181,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a0cbadbbd3c2c21930d327210063025aa" title="Given a character representation of an operator this returns the internal numeric type representation..." alt="" coords="229,13,451,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_icgraph" id="anamespacearithmetic__operator__mod_a81cd0bb5cd8836083ab8baa4e8132461_icgraph">
<area shape="rect" title="Given an equation this will retrieve the location of the least significant operator in that equation ..." alt="" coords="441,5,617,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875" title="Builds the equation tree, this searches for the least significant operator and then splits the equati..." alt="" coords="221,13,393,54"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<a id="a0cbadbbd3c2c21930d327210063025aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cbadbbd3c2c21930d327210063025aa">&#9670;&nbsp;</a></span>get_operator_representation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function arithmetic_operator_mod::get_operator_representation </td>
          <td>(</td>
          <td class="paramtype">character, intent(in)&#160;</td>
          <td class="paramname"><em>op_char</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Given a character representation of an operator this returns the internal numeric type representation of it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op_char</td><td>The character operator representation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The numeric internal type of this operator or -1 if none can be found </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00259">259</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">intent(in)</span> :: op_char</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160; </div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">if</span> (op_char .eq. <span class="stringliteral">&quot;/&quot;</span>) <span class="keywordflow">then</span> </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      get_operator_representation=div_op</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_char .eq. <span class="stringliteral">&quot;*&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      get_operator_representation=mul_op</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_char .eq. <span class="stringliteral">&quot;-&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      get_operator_representation=minus_op</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_char .eq. <span class="stringliteral">&quot;+&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      get_operator_representation=add_op</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_char .eq. <span class="stringliteral">&quot;%&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      get_operator_representation=mod_op</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      get_operator_representation=-1</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a0cbadbbd3c2c21930d327210063025aa_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a0cbadbbd3c2c21930d327210063025aa_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a0cbadbbd3c2c21930d327210063025aa_icgraph" id="anamespacearithmetic__operator__mod_a0cbadbbd3c2c21930d327210063025aa_icgraph">
<area shape="rect" title="Given a character representation of an operator this returns the internal numeric type representation..." alt="" coords="665,13,887,54"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875" title="Builds the equation tree, this searches for the least significant operator and then splits the equati..." alt="" coords="221,13,393,54"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a81cd0bb5cd8836083ab8baa4e8132461" title="Given an equation this will retrieve the location of the least significant operator in that equation ..." alt="" coords="441,37,617,93"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<a id="ac499b2e2ea3a90c6c4e16c9e3da4437b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac499b2e2ea3a90c6c4e16c9e3da4437b">&#9670;&nbsp;</a></span>get_size_of_data_being_operated_on()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function arithmetic_operator_mod::get_size_of_data_being_operated_on </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structarithmetic__operator__mod_1_1arithmetic__cache__item.html">arithmetic_cache_item</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>cached_equation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>field_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the number of data elements that this will operate on. It will produce a log error if any variable lengths are inconsistent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cached_equation</td><td>The cached equation information </td></tr>
    <tr><td class="paramname">field_values</td><td>The variable value key value pair </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of data elements being operated on </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00091">91</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordtype">type</span>(arithmetic_cache_item), <span class="keywordtype">intent(inout)</span> :: cached_equation</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">intent(inout)</span> :: field_values</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordtype">type</span>(data_values_type), <span class="keywordtype">pointer</span> :: variable_data</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordtype">type</span>(iterator_type) :: iterator</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordtype">integer</span> :: temp_size, prev_size</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    get_size_of_data_being_operated_on=-1</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span> (.not. c_is_empty(cached_equation%required_fields)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      iterator=c_get_iterator(cached_equation%required_fields)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">do</span> <span class="keywordflow">while</span> (c_has_next(iterator))</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        variable_data=&gt;get_data_value_by_field_name(field_values, c_next_string(iterator))</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">if</span> (get_size_of_data_being_operated_on == -1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;          get_size_of_data_being_operated_on=<span class="keyword">size</span>(variable_data%values)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;          temp_size=<span class="keyword">size</span>(variable_data%values)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;          <span class="keywordflow">if</span> (get_size_of_data_being_operated_on .ne. temp_size) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="keywordflow">if</span> (temp_size .gt. get_size_of_data_being_operated_on) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;              prev_size=get_size_of_data_being_operated_on</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;              get_size_of_data_being_operated_on=temp_size</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;              temp_size=prev_size</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="keywordflow">            end if</span>            </div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">if</span> (mod(get_size_of_data_being_operated_on, temp_size) .ne. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;              <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, &amp;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                   <span class="stringliteral">&quot;Can only perform arithmetic on variables with the same array sizes or sizes that divide evenly&quot;</span>)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keywordflow">            end if</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_cgraph" id="anamespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_cgraph">
<area shape="rect" title="Retrieves the number of data elements that this will operate on. It will produce a log error if any v..." alt="" coords="5,5,164,61"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="212,20,355,47"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="403,13,569,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_icgraph" id="anamespacearithmetic__operator__mod_ac499b2e2ea3a90c6c4e16c9e3da4437b_icgraph">
<area shape="rect" title="Retrieves the number of data elements that this will operate on. It will produce a log error if any v..." alt="" coords="221,5,380,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<a id="aef5d51079422c76f9d443d35839c5991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef5d51079422c76f9d443d35839c5991">&#9670;&nbsp;</a></span>initialise_arithmetic_operator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public arithmetic_operator_mod::initialise_arithmetic_operator</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises this operator. </p>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00048">48</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_rwlock_init(equation_cache_rwlock, -1))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_aef5d51079422c76f9d443d35839c5991_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_aef5d51079422c76f9d443d35839c5991_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_aef5d51079422c76f9d443d35839c5991_cgraph" id="anamespacearithmetic__operator__mod_aef5d51079422c76f9d443d35839c5991_cgraph">
<area shape="rect" title="Initialises this operator." alt="" coords="5,31,176,87"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="228,5,383,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a84f66d5153e8adc21918d4b4d627087f" title=" " alt="" coords="224,71,387,112"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="435,13,577,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="625,5,792,47"/>
</map>
</div>

</div>
</div>
<a id="af4979850d57af02b2fcf5d24ed0e96cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4979850d57af02b2fcf5d24ed0e96cd">&#9670;&nbsp;</a></span>perform_arithmetic_operator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public arithmetic_operator_mod::perform_arithmetic_operator </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>field_values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>action_attributes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source_monc_location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>source_monc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:), intent(inout), allocatable&#160;</td>
          <td class="paramname"><em>operator_result_values</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if not found.) If there is no execution tree it then parses the equation into an execution tree and stores it. The stored execution tree is then executed and the real result returned. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">io_configuration</td><td>Configuration of the IO server <br  />
 </td></tr>
    <tr><td class="paramname">field_values</td><td>The field values </td></tr>
    <tr><td class="paramname">action_attributes</td><td>Attributes associated with the running of this operator </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting value </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00064">64</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">intent(inout)</span> :: field_values</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">type</span>(map_type), <span class="keywordtype">intent(inout)</span> :: action_attributes</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: source_monc_location, source_monc</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span> :: operator_result_values</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160; </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: equation</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordtype">type</span>(arithmetic_cache_item), <span class="keywordtype">pointer</span> :: cached_equation</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordtype">integer</span> :: data_size</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    equation=get_action_attribute_string(action_attributes, <span class="stringliteral">&quot;equation&quot;</span>)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    cached_equation=&gt;find_or_add_equation(equation)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span> (.not. <span class="keyword">associated</span>(cached_equation%execution_tree)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      cached_equation%execution_tree=&gt;build_equation_tree(io_configuration, equation)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    data_size=get_size_of_data_being_operated_on(cached_equation, field_values)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keyword">allocate</span>(operator_result_values(data_size))</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    operator_result_values=execute_equation_tree(cached_equation%execution_tree, field_values, data_size)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_af4979850d57af02b2fcf5d24ed0e96cd_cgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_af4979850d57af02b2fcf5d24ed0e96cd_cgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_af4979850d57af02b2fcf5d24ed0e96cd_cgraph" id="anamespacearithmetic__operator__mod_af4979850d57af02b2fcf5d24ed0e96cd_cgraph">
<area shape="rect" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="5,260,173,316"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875" title="Builds the equation tree, this searches for the least significant operator and then splits the equati..." alt="" coords="231,137,403,178"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#ad16ff2e96b02b3abf08196385c6deddb" title="Executes an equation tree by doing a post order traversal of the tree. If a node is a terminal then e..." alt="" coords="221,202,412,243"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a14aaaf4c989209cd582a9c1fbdd019f7" title="Locates an existing equation in the cache based upon the textual equation representation or creates a..." alt="" coords="225,267,408,309"/>
<area shape="rect" href="namespacedata__utils__mod.html#a32e2bb292c66ad41e019b09c8842b82b" title="Retrieves the name of a field from the attributes specified in the configuration." alt="" coords="238,333,395,374"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#ac499b2e2ea3a90c6c4e16c9e3da4437b" title="Retrieves the number of data elements that this will operate on. It will produce a log error if any v..." alt="" coords="237,397,396,453"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a81cd0bb5cd8836083ab8baa4e8132461" title="Given an equation this will retrieve the location of the least significant operator in that equation ..." alt="" coords="460,5,636,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a0cbadbbd3c2c21930d327210063025aa" title="Given a character representation of an operator this returns the internal numeric type representation..." alt="" coords="684,26,905,67"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#ab054641ac0fa0287adb3c461987c4f0b" title="Retrieves a real value from the database that matches the provided key." alt="" coords="473,137,623,178"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a0f1bd7c51003dda860483f1462e6d599" title="Removes all occurances of a character from a string in situ by replacing it with whitespace." alt="" coords="466,202,630,243"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a13bbeb6272c82308e3d4a42f7c36c862" title="Determines whether a specific options key exists in the database or not, if it doesn&#39;t then this resu..." alt="" coords="720,116,869,172"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#ab4f16a670bed755586806647da3cfa8d" title="Gets a key corresponding to the correct options key and index combination." alt="" coords="716,195,873,237"/>
<area shape="rect" href="namespaceoptionsdatabase__mod.html#a4b187d310f786ed3c207a3060e09b156" title="Determines whether a specific key is in the database." alt="" coords="953,123,1103,165"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a24302e64f98c16bbe3a26dda9da399f1" title="Finds an equation in the cache based upon its textual equation representation or returns null if none..." alt="" coords="480,267,616,309"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="477,412,619,439"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="711,405,878,446"/>
</map>
</div>

</div>
</div>
<a id="a96544613c02ffac4ee1233cba0ebca3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96544613c02ffac4ee1233cba0ebca3e">&#9670;&nbsp;</a></span>process_equation_to_get_required_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1list__type.html">list_type</a>) function arithmetic_operator_mod::process_equation_to_get_required_fields </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>equation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs text processing on an equation to extract out all the required variable (fields) needed in order to run this equation and get the result. Note this ignores all values which are constants (reals or integers) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">equation</td><td>Text equation to extract list of required fields (variables) from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A list of variables needed by this equation </dd></dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00298">298</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: equation</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: str_to_write</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordtype">character</span> :: c</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordtype">integer</span> :: i, eq_length, starting_len</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160; </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    eq_length=len(trim(equation))</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    starting_len=1</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="keywordflow">do</span> i=1, eq_length</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      c=equation(i:i)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">if</span> (c .eq. <span class="stringliteral">&quot;/&quot;</span> .or. c .eq. <span class="stringliteral">&quot;*&quot;</span> .or. c .eq. <span class="stringliteral">&quot;-&quot;</span> .or. c .eq. <span class="stringliteral">&quot;+&quot;</span> .or. c .eq. <span class="stringliteral">&quot;(&quot;</span> .or. c .eq. <span class="stringliteral">&quot;)&quot;</span> .or. c .eq. <span class="stringliteral">&quot;%&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordflow">if</span> (starting_len .lt. i) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;          str_to_write=equation(starting_len: i-1)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          <span class="keywordflow">if</span> (.not. (conv_is_real(str_to_write) .or. conv_is_integer(str_to_write) .or. str_to_write(1:1) .eq. <span class="stringliteral">&quot;{&quot;</span>)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keyword">call </span>c_add_string(process_equation_to_get_required_fields, str_to_write)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        starting_len=i+1</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keywordflow">      end if</span>      </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (starting_len .le. eq_length) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      str_to_write=equation(starting_len: i-1)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">if</span> (.not. (conv_is_real(str_to_write) .or. conv_is_integer(str_to_write))) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        <span class="keyword">call </span>c_add_string(process_equation_to_get_required_fields, str_to_write)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a96544613c02ffac4ee1233cba0ebca3e_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a96544613c02ffac4ee1233cba0ebca3e_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a96544613c02ffac4ee1233cba0ebca3e_icgraph" id="anamespacearithmetic__operator__mod_a96544613c02ffac4ee1233cba0ebca3e_icgraph">
<area shape="rect" title="Performs text processing on an equation to extract out all the required variable (fields) needed in o..." alt="" coords="224,5,387,61"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a9be9aba21705fe4c96fcc38aaa5db046" title="Retrieves the list of fields needed by this operator for a specific configuration." alt="" coords="5,5,176,61"/>
</map>
</div>

</div>
</div>
<a id="a0f1bd7c51003dda860483f1462e6d599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0f1bd7c51003dda860483f1462e6d599">&#9670;&nbsp;</a></span>remove_character()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine arithmetic_operator_mod::remove_character </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(inout)&#160;</td>
          <td class="paramname"><em>raw_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, intent(in)&#160;</td>
          <td class="paramname"><em>c</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes all occurances of a character from a string in situ by replacing it with whitespace. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raw_string</td><td>The string to process and remove characters from in place </td></tr>
    <tr><td class="paramname">c</td><td>The character to search for and remove (replace by whitespace) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00211">211</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(inout)</span> :: raw_string</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">intent(in)</span> :: c</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordtype">integer</span> :: brace_index</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    brace_index=index(raw_string, c)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (brace_index .gt. 0)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      raw_string(brace_index:brace_index)=<span class="stringliteral">&quot; &quot;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      brace_index=index(raw_string, c)</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacearithmetic__operator__mod_a0f1bd7c51003dda860483f1462e6d599_icgraph.png" border="0" usemap="#anamespacearithmetic__operator__mod_a0f1bd7c51003dda860483f1462e6d599_icgraph" alt=""/></div>
<map name="namespacearithmetic__operator__mod_a0f1bd7c51003dda860483f1462e6d599_icgraph" id="anamespacearithmetic__operator__mod_a0f1bd7c51003dda860483f1462e6d599_icgraph">
<area shape="rect" title="Removes all occurances of a character from a string in situ by replacing it with whitespace." alt="" coords="441,13,605,54"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#a24bf0ea213d6e08249db2b727e2ca875" title="Builds the equation tree, this searches for the least significant operator and then splits the equati..." alt="" coords="221,13,393,54"/>
<area shape="rect" href="namespacearithmetic__operator__mod.html#af4979850d57af02b2fcf5d24ed0e96cd" title="Executes this arithmetic operator by attempting to retrieved the cached equation (and creates one if ..." alt="" coords="5,5,173,61"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a09a5918effd2930853ab658252fa3c87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09a5918effd2930853ab658252fa3c87">&#9670;&nbsp;</a></span>add_op</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter arithmetic_operator_mod::add_op =1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00025">25</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>

</div>
</div>
<a id="a321f70a75454aeac6b802240cbba2fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a321f70a75454aeac6b802240cbba2fa1">&#9670;&nbsp;</a></span>div_op</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter arithmetic_operator_mod::div_op =4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00025">25</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>

</div>
</div>
<a id="a6a98f9f3290b1046b90676e19052c506"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a98f9f3290b1046b90676e19052c506">&#9670;&nbsp;</a></span>equation_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1hashmap__type.html">hashmap_type</a>), volatile arithmetic_operator_mod::equation_cache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00040">40</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordtype">type</span>(hashmap_type), <span class="keywordtype">volatile</span> :: equation_cache</div>
</div><!-- fragment -->
</div>
</div>
<a id="a83471c2801ddbac747f0974a84d70c10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83471c2801ddbac747f0974a84d70c10">&#9670;&nbsp;</a></span>equation_cache_rwlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile arithmetic_operator_mod::equation_cache_rwlock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00041">41</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span> :: equation_cache_rwlock</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e8c32821911bc8266a2f833d3520a35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e8c32821911bc8266a2f833d3520a35">&#9670;&nbsp;</a></span>minus_op</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter arithmetic_operator_mod::minus_op =2</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00025">25</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>

</div>
</div>
<a id="a665d7ad66f1f628f4cced1f679f1a942"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a665d7ad66f1f628f4cced1f679f1a942">&#9670;&nbsp;</a></span>mod_op</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter arithmetic_operator_mod::mod_op =5</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A specific node in the execution tree. </p>

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00025">25</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>

</div>
</div>
<a id="a3ba2e150169af43fbdca273c3ce4ca71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ba2e150169af43fbdca273c3ce4ca71">&#9670;&nbsp;</a></span>mul_op</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter arithmetic_operator_mod::mul_op =3</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00025">25</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>

</div>
</div>
<a id="a57f2d1bd140e69075bf9da70d9195380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f2d1bd140e69075bf9da70d9195380">&#9670;&nbsp;</a></span>terminal_op</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter arithmetic_operator_mod::terminal_op =0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="arithmetic-operator_8F90_source.html#l00025">25</a> of file <a class="el" href="arithmetic-operator_8F90_source.html">arithmetic-operator.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">parameter</span> :: TERMINAL_OP=0, add_op=1, minus_op=2, mul_op=3, div_op=4, mod_op=5</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_ad68309846cd8f9e77edaa6abd02f65a0"><div class="ttname"><a href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">logging_mod::log_error</a></div><div class="ttdeci">integer, parameter, public log_error</div><div class="ttdoc">Only log ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00011">logging.F90:11</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac4f13ac385499c85190cb184030e4f45"><div class="ttname"><a href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">logging_mod::log_log</a></div><div class="ttdeci">subroutine, public log_log(level, message, str)</div><div class="ttdoc">Logs a message at the specified level. If the level is above the current level then the message is ig...</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00074">logging.F90:75</a></div></div>
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
