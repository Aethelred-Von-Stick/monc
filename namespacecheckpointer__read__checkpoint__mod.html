<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: checkpointer_read_checkpoint_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">checkpointer_read_checkpoint_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Will read in a NetCDF checkpoint file and initialise the model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> based upon this.  
<a href="namespacecheckpointer__read__checkpoint__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a2c62e5fb27df55b95c5650b36e9a6545"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545">read_checkpoint_file</a> (current_state, filename)</td></tr>
<tr class="memdesc:a2c62e5fb27df55b95c5650b36e9a6545"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in a NetCDF checkpoint file and uses this to initialise the model.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545">More...</a><br /></td></tr>
<tr class="separator:a2c62e5fb27df55b95c5650b36e9a6545"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3336ed10beeec4f2f93786e2f38af929"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a3336ed10beeec4f2f93786e2f38af929">decompose_grid</a> (current_state)</td></tr>
<tr class="memdesc:a3336ed10beeec4f2f93786e2f38af929"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calls out to the parallel decomposition strategy to decompose the grid based upon the configuration read and number of processes.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a3336ed10beeec4f2f93786e2f38af929">More...</a><br /></td></tr>
<tr class="separator:a3336ed10beeec4f2f93786e2f38af929"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a41a580c7d12a2a608775b0a549ff9"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a36a41a580c7d12a2a608775b0a549ff9">initalise_source_and_sav_fields</a> (current_state)</td></tr>
<tr class="memdesc:a36a41a580c7d12a2a608775b0a549ff9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the source and sav (for u,v,w) fields for allocated prognostics.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a36a41a580c7d12a2a608775b0a549ff9">More...</a><br /></td></tr>
<tr class="separator:a36a41a580c7d12a2a608775b0a549ff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5f8dd27f75ba3616afc0a89a868191"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a6a5f8dd27f75ba3616afc0a89a868191">load_misc</a> (current_state, ncid)</td></tr>
<tr class="memdesc:a6a5f8dd27f75ba3616afc0a89a868191"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads in misc data from the checkpoint file.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a6a5f8dd27f75ba3616afc0a89a868191">More...</a><br /></td></tr>
<tr class="separator:a6a5f8dd27f75ba3616afc0a89a868191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e451c36167ef3b2b1528583f42bbff"><td class="memItemLeft" align="right" valign="top">character(len=:) function, allocatable, target&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#ad3e451c36167ef3b2b1528583f42bbff">read_specific_global_attribute</a> (ncid, key)</td></tr>
<tr class="memdesc:ad3e451c36167ef3b2b1528583f42bbff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will read a global attribute from the checkpoint file - note that it allocates string memory here so the caller should deallocate this to avoid memory leaks.  <a href="namespacecheckpointer__read__checkpoint__mod.html#ad3e451c36167ef3b2b1528583f42bbff">More...</a><br /></td></tr>
<tr class="separator:ad3e451c36167ef3b2b1528583f42bbff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ef1c48768cf2dfd7c72485a9aeb323"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a50ef1c48768cf2dfd7c72485a9aeb323">load_all_fields</a> (current_state, ncid)</td></tr>
<tr class="memdesc:a50ef1c48768cf2dfd7c72485a9aeb323"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and depending upon what data is in the file then it will set the corresponding fields up which in essence determines whether it has 1, 2 or 3D fields. This also supports 1, 2 or 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a> which will set any missing grid dimensions to be 1.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a50ef1c48768cf2dfd7c72485a9aeb323">More...</a><br /></td></tr>
<tr class="separator:a50ef1c48768cf2dfd7c72485a9aeb323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5891369d5acb69d237f9b5816704889"><td class="memItemLeft" align="right" valign="top">logical function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#aa5891369d5acb69d237f9b5816704889">does_field_exist</a> (ncid, variable_key)</td></tr>
<tr class="memdesc:aa5891369d5acb69d237f9b5816704889"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file id @variable_key The NetCDF variable key we are looking up.  <a href="namespacecheckpointer__read__checkpoint__mod.html#aa5891369d5acb69d237f9b5816704889">More...</a><br /></td></tr>
<tr class="separator:aa5891369d5acb69d237f9b5816704889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4f69f73beff8fb630b1e8c7b530ae05"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#ac4f69f73beff8fb630b1e8c7b530ae05">load_q_indices</a> (ncid)</td></tr>
<tr class="memdesc:ac4f69f73beff8fb630b1e8c7b530ae05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the Q indices (if they exist) into the model Q index register.  <a href="namespacecheckpointer__read__checkpoint__mod.html#ac4f69f73beff8fb630b1e8c7b530ae05">More...</a><br /></td></tr>
<tr class="separator:ac4f69f73beff8fb630b1e8c7b530ae05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94a01ad171aa30db396da469b63f5852"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a94a01ad171aa30db396da469b63f5852">get_number_q_indices</a> (ncid)</td></tr>
<tr class="memdesc:a94a01ad171aa30db396da469b63f5852"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve sthe number of Q indice entries in the NetCDF. This is optional, so may return 0.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a94a01ad171aa30db396da469b63f5852">More...</a><br /></td></tr>
<tr class="separator:a94a01ad171aa30db396da469b63f5852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7d8338386306145ed7751af9350b93"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#abe7d8338386306145ed7751af9350b93">load_single_3d_field</a> (ncid, local_grid, field, z_grid, y_grid, x_grid, variable_key, multi_process, fourth_dim_loc)</td></tr>
<tr class="memdesc:abe7d8338386306145ed7751af9350b93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads in and initialises a single 3D prognostic field. Even if the model is being run in 1 or 2D, the fields are still stored in 3D with the missing dimension sizes being set to one.  <a href="namespacecheckpointer__read__checkpoint__mod.html#abe7d8338386306145ed7751af9350b93">More...</a><br /></td></tr>
<tr class="separator:abe7d8338386306145ed7751af9350b93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb30027932df82d1ee7fb0cf18b50dec"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#acb30027932df82d1ee7fb0cf18b50dec">load_global_grid</a> (current_state, ncid, z_dim, y_dim, x_dim, z_found, y_found, x_found)</td></tr>
<tr class="memdesc:acb30027932df82d1ee7fb0cf18b50dec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1, 2 or 3D runs.  <a href="namespacecheckpointer__read__checkpoint__mod.html#acb30027932df82d1ee7fb0cf18b50dec">More...</a><br /></td></tr>
<tr class="separator:acb30027932df82d1ee7fb0cf18b50dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b9b91ebcd530e0f7653c0f4bedb3827"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a8b9b91ebcd530e0f7653c0f4bedb3827">load_mean_profiles</a> (current_state, ncid, z_dim_id)</td></tr>
<tr class="separator:a8b9b91ebcd530e0f7653c0f4bedb3827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7eed392de6205bc22b3e842ded0e45a"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#af7eed392de6205bc22b3e842ded0e45a">load_pdf_profiles</a> (current_state, ncid, z_dim_id)</td></tr>
<tr class="separator:af7eed392de6205bc22b3e842ded0e45a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e630e01fb93213ab0c62be946d406b5"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a8e630e01fb93213ab0c62be946d406b5">define_vertical_levels</a> (ncid, current_state, z_key, z_dim_id)</td></tr>
<tr class="memdesc:a8e630e01fb93213ab0c62be946d406b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the vertical levels of the grid. This is both the grid points and corresponding height for each point in metres.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a8e630e01fb93213ab0c62be946d406b5">More...</a><br /></td></tr>
<tr class="separator:a8e630e01fb93213ab0c62be946d406b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f64ad2ba0d044e8b4f7211d686641ef"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a3f64ad2ba0d044e8b4f7211d686641ef">read_dimension_of_grid</a> (ncid, grid, variable_key, dimension, dimension_id)</td></tr>
<tr class="memdesc:a3f64ad2ba0d044e8b4f7211d686641ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a specific dimension of the grid from the NetCDF and sets this up in the <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a>.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a3f64ad2ba0d044e8b4f7211d686641ef">More...</a><br /></td></tr>
<tr class="separator:a3f64ad2ba0d044e8b4f7211d686641ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad2e696f2dcbacfdc0fbc4bb55b1025"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025">read_single_variable</a> (ncid, key, int_data, real_data, real_data_1d, real_data_1d_double, real_data_2d_double, real_data_3d, integer_data_1d, start, count, map)</td></tr>
<tr class="memdesc:a5ad2e696f2dcbacfdc0fbc4bb55b1025"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in a single variable and sets the values of the data based upon this. Handles reading in and setting vectors of 1 or 3D reals and 1d integers.  <a href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025">More...</a><br /></td></tr>
<tr class="separator:a5ad2e696f2dcbacfdc0fbc4bb55b1025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa25af7b1f1b80f4b22f2ae6ef2c2d422"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacecheckpointer__read__checkpoint__mod.html#aa25af7b1f1b80f4b22f2ae6ef2c2d422">read_dimensions</a> (ncid, z_dim, y_dim, x_dim, z_found, y_found, x_found)</td></tr>
<tr class="memdesc:aa25af7b1f1b80f4b22f2ae6ef2c2d422"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will read in the dimension sizes from the NetCDF file along with whether the z, y and x dimensions have been found. If any have not been found then this corresponds to running the model with 2 or 1D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a>.  <a href="namespacecheckpointer__read__checkpoint__mod.html#aa25af7b1f1b80f4b22f2ae6ef2c2d422">More...</a><br /></td></tr>
<tr class="separator:aa25af7b1f1b80f4b22f2ae6ef2c2d422"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Will read in a NetCDF checkpoint file and initialise the model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> based upon this. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a3336ed10beeec4f2f93786e2f38af929"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3336ed10beeec4f2f93786e2f38af929">&#9670;&nbsp;</a></span>decompose_grid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::decompose_grid </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calls out to the parallel decomposition strategy to decompose the grid based upon the configuration read and number of processes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00078">78</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">associated</span>(current_state%parallel%decomposition_procedure)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keyword">call </span>current_state%parallel%decomposition_procedure(current_state)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;No decomposition specified&quot;</span>)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_cgraph">
<area shape="rect" title="Calls out to the parallel decomposition strategy to decompose the grid based upon the configuration r..." alt="" coords="5,5,204,47"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="252,13,395,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="443,5,609,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a3336ed10beeec4f2f93786e2f38af929_icgraph">
<area shape="rect" title="Calls out to the parallel decomposition strategy to decompose the grid based upon the configuration r..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="a8e630e01fb93213ab0c62be946d406b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e630e01fb93213ab0c62be946d406b5">&#9670;&nbsp;</a></span>define_vertical_levels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::define_vertical_levels </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>z_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>z_dim_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Defines the vertical levels of the grid. This is both the grid points and corresponding height for each point in metres. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">z_key</td><td>Key of the Z grid points in the NetCDF </td></tr>
    <tr><td class="paramname">z_size</td><td>Number of grid points </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00511">511</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: z_key</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: z_dim_id, ncid</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="keywordtype">integer</span> :: i, z_size</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="keywordtype">    real</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: data</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keyword">call </span>check_status(nf90_inquire_dimension(ncid, z_dim_id, len=z_size))</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keyword">allocate</span>(<span class="keyword">data</span>(z_size))</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, z_key, real_data_1d=data)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160; </div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%kgd(z_size), &amp;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;         current_state%global_grid%configuration%vertical%hgd(z_size), &amp;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;         current_state%global_grid%configuration%vertical%thref(z_size))</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160; </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, thref, real_data_1d_double=current_state%global_grid%configuration%vertical%thref)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160; </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keywordflow">do</span> i=1,z_size</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      current_state%global_grid%configuration%vertical%kgd(i) = i</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      current_state%global_grid%configuration%vertical%hgd(i) = real(<span class="keyword">data</span>(i))</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;    <span class="keyword">deallocate</span>(data)    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_cgraph">
<area shape="rect" title="Defines the vertical levels of the grid. This is both the grid points and corresponding height for ea..." alt="" coords="5,64,204,105"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="507,35,661,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="266,64,437,105"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="252,129,451,171"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="731,13,874,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="717,64,888,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="936,5,1103,47"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="499,129,669,171"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a8e630e01fb93213ab0c62be946d406b5_icgraph">
<area shape="rect" title="Defines the vertical levels of the grid. This is both the grid points and corresponding height for ea..." alt="" coords="499,5,697,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#acb30027932df82d1ee7fb0cf18b50dec" title="Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1,..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="aa5891369d5acb69d237f9b5816704889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5891369d5acb69d237f9b5816704889">&#9670;&nbsp;</a></span>does_field_exist()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical function checkpointer_read_checkpoint_mod::does_field_exist </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>variable_key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file id @variable_key The NetCDF variable key we are looking up. </p>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00274">274</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: variable_key</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="keywordtype">integer</span> :: variable_id</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160; </div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, variable_key, variable_id), does_field_exist)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_cgraph">
<area shape="rect" title="Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file ..." alt="" coords="5,68,204,109"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="261,35,414,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="252,100,423,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="485,13,627,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="471,64,641,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="689,5,856,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_aa5891369d5acb69d237f9b5816704889_icgraph">
<area shape="rect" title="Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file ..." alt="" coords="499,104,697,145"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a50ef1c48768cf2dfd7c72485a9aeb323" title="Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and dependin..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a8b9b91ebcd530e0f7653c0f4bedb3827" title=" " alt="" coords="252,71,451,112"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#af7eed392de6205bc22b3e842ded0e45a" title=" " alt="" coords="252,136,451,177"/>
<area shape="rect" href="namespacetest__checkpointer__mod.html#a11ea2a800ef3840fff4c01dafe7bf631" title=" " alt="" coords="273,201,430,243"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,71,204,112"/>
<area shape="rect" href="test__checkpointer_8F90.html#ac066cbcd389adebfd7162022ed08de09" title=" " alt="" coords="23,209,187,235"/>
</map>
</div>

</div>
</div>
<a id="a94a01ad171aa30db396da469b63f5852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94a01ad171aa30db396da469b63f5852">&#9670;&nbsp;</a></span>get_number_q_indices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function checkpointer_read_checkpoint_mod::get_number_q_indices </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve sthe number of Q indice entries in the NetCDF. This is optional, so may return 0. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00306">306</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">integer</span> :: q_indices_dimid, q_indices_dim</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordtype">logical</span> :: found_flag</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160; </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, q_indices_dim_key, q_indices_dimid), found_flag)</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="keywordflow">if</span> (found_flag) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keyword">call </span>check_status(nf90_inquire_dimension(ncid, q_indices_dimid, len=q_indices_dim))</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      get_number_q_indices=q_indices_dim</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      get_number_q_indices=0</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_cgraph">
<area shape="rect" title="Retrieve sthe number of Q indice entries in the NetCDF. This is optional, so may return 0." alt="" coords="5,100,204,141"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="261,35,414,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#aacd14e8e9223b465b2a42c06018eabf1" title=" " alt="" coords="252,100,423,141"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="252,165,423,207"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="485,13,627,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="471,64,641,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="689,5,856,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a94a01ad171aa30db396da469b63f5852_icgraph">
<area shape="rect" title="Retrieve sthe number of Q indice entries in the NetCDF. This is optional, so may return 0." alt="" coords="499,5,697,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#ac4f69f73beff8fb630b1e8c7b530ae05" title="Loads the Q indices (if they exist) into the model Q index register." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="a36a41a580c7d12a2a608775b0a549ff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a41a580c7d12a2a608775b0a549ff9">&#9670;&nbsp;</a></span>initalise_source_and_sav_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::initalise_source_and_sav_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialises the source and sav (for u,v,w) fields for allocated prognostics. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The model current state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00090">90</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordtype">integer</span> :: x_size, y_size, z_size, i</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160; </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    z_size = current_state%local_grid%size(z_index) + current_state%local_grid%halo_size(z_index) * 2</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    y_size = current_state%local_grid%size(y_index) + current_state%local_grid%halo_size(y_index) * 2</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    x_size = current_state%local_grid%size(x_index) + current_state%local_grid%halo_size(x_index) * 2</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="preprocessor">#ifdef U_ACTIVE</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="preprocessor"></span>    <span class="keyword">allocate</span>(current_state%su%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    current_state%su%data(:,:,:) = 0.</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    current_state%su%active=.true.</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keyword">allocate</span>(current_state%savu%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    current_state%savu%data(:,:,:) = 0.</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    current_state%savu%active=.true.</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef V_ACTIVE</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor"></span>    <span class="keyword">allocate</span>(current_state%sv%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    current_state%sv%data(:,:,:) = 0.</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    current_state%sv%active=.true.</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keyword">allocate</span>(current_state%savv%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    current_state%savv%data(:,:,:) = 0.</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    current_state%savv%active=.true.</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef W_ACTIVE</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor"></span>    <span class="keyword">allocate</span>(current_state%sw%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    current_state%sw%data(:,:,:) = 0.</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    current_state%sw%active=.true.</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="keyword">allocate</span>(current_state%savw%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    current_state%savw%data(:,:,:) = 0.</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    current_state%savw%active=.true.</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (current_state%th%active) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keyword">allocate</span>(current_state%sth%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      current_state%sth%data(:,:,:) = 0.</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      current_state%sth%active=.true.</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">do</span> i=1,current_state%number_q_fields</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      current_state%sq(i)%active=.true.</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <span class="keyword">allocate</span>(current_state%sq(i)%data(z_size, y_size, x_size))</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      current_state%sq(i)%data(:,:,:) = 0.</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a36a41a580c7d12a2a608775b0a549ff9_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a36a41a580c7d12a2a608775b0a549ff9_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a36a41a580c7d12a2a608775b0a549ff9_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a36a41a580c7d12a2a608775b0a549ff9_icgraph">
<area shape="rect" title="Initialises the source and sav (for u,v,w) fields for allocated prognostics." alt="" coords="252,5,451,61"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,13,204,54"/>
</map>
</div>

</div>
</div>
<a id="a50ef1c48768cf2dfd7c72485a9aeb323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ef1c48768cf2dfd7c72485a9aeb323">&#9670;&nbsp;</a></span>load_all_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::load_all_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and depending upon what data is in the file then it will set the corresponding fields up which in essence determines whether it has 1, 2 or 3D fields. This also supports 1, 2 or 3D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a> which will set any missing grid dimensions to be 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">z_dim</td><td>The size of the z dimension </td></tr>
    <tr><td class="paramname">y_dim</td><td>The size of the y dimension </td></tr>
    <tr><td class="paramname">x_dim</td><td>The size of the x dimension </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00192">192</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordtype">logical</span> :: multi_process</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordtype">type</span>(q_metadata_type) :: q_metadata</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: q_field_name, zq_field_name</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160; </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    multi_process = current_state%parallel%processes .gt. 1</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, u_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%u, dual_grid, &amp;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;           dual_grid, primal_grid, u_key, multi_process)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%zu, dual_grid, &amp;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;           dual_grid, primal_grid, zu_key, multi_process)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, v_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%v, dual_grid, &amp;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;           primal_grid, dual_grid, v_key, multi_process)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%zv, dual_grid, &amp;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;           primal_grid, dual_grid, zv_key, multi_process)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, w_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%w, primal_grid, &amp;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;           dual_grid, dual_grid, w_key, multi_process)</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%zw, primal_grid, &amp;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;           dual_grid, dual_grid, zw_key, multi_process)</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, th_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%th, dual_grid, &amp;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;           dual_grid, dual_grid, th_key, multi_process)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%zth, dual_grid, &amp;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;           dual_grid, dual_grid, zth_key, multi_process)</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, p_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%p, dual_grid, &amp;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;           dual_grid, dual_grid, p_key, multi_process)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordflow">    end if</span>    </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">allocate</span>(current_state%q(current_state%number_q_fields), current_state%zq(current_state%number_q_fields), &amp;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         current_state%sq(current_state%number_q_fields))</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, q_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <span class="keywordflow">do</span> i=1,current_state%number_q_fields</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%q(i), dual_grid, &amp;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;             dual_grid, dual_grid, q_key, multi_process, i)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%zq(i), dual_grid, &amp;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;             dual_grid, dual_grid, zq_key, multi_process, i)</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">do</span> i=1,current_state%number_q_fields</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        q_metadata=get_indices_descriptor(i)</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        q_field_name=trim(q_key)//<span class="stringliteral">&quot;_&quot;</span>//trim(q_metadata%name)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        zq_field_name=trim(zq_key)//<span class="stringliteral">&quot;_&quot;</span>//trim(q_metadata%name)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span> (.not. does_field_exist(ncid, q_field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          q_field_name=trim(q_field_anonymous_name)//<span class="stringliteral">&quot;_&quot;</span>//trim(conv_to_string(i))</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          zq_field_name=trim(zq_field_anonymous_name)//<span class="stringliteral">&quot;_&quot;</span>//trim(conv_to_string(i))</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;          <span class="keywordflow">if</span> (.not. does_field_exist(ncid, q_field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;No entry in checkpoint file for Q field &quot;</span>//trim(conv_to_string(i)))</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keywordflow">          end if</span>          </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">if</span> (.not. does_field_exist(ncid, zq_field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;          <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;Missmatch between q and zq field name in the checkpoint file&quot;</span>)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%q(i), dual_grid, &amp;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;             dual_grid, dual_grid, q_field_name, multi_process)</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%zq(i), dual_grid, &amp;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;             dual_grid, dual_grid, zq_field_name, multi_process)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="keywordflow">      end do</span>      </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, sth_lw_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;       <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%sth_lw, dual_grid, &amp;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            dual_grid, dual_grid, sth_lw_key, multi_process)</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, sth_lw_key)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;       <span class="keyword">call </span>load_single_3d_field(ncid, current_state%local_grid, current_state%sth_sw, dual_grid, &amp;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            dual_grid, dual_grid, sth_sw_key, multi_process)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="keywordflow">    endif</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_cgraph">
<area shape="rect" title="Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and dependin..." alt="" coords="5,77,204,119"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#aa5891369d5acb69d237f9b5816704889" title="Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file ..." alt="" coords="499,113,697,155"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="978,30,1121,57"/>
<area shape="rect" href="namespaceq__indices__mod.html#ae040049b676d2b242c3f199275f5e3b1" title="Retrieves the indicies descriptor at a specific location." alt="" coords="284,165,419,207"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#abe7d8338386306145ed7751af9350b93" title="Loads in and initialises a single 3D prognostic field. Even if the model is being run in 1 or 2D,..." alt="" coords="252,48,451,89"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="754,113,907,155"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="745,48,916,89"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="964,113,1135,155"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1183,23,1349,64"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="499,48,697,89"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a50ef1c48768cf2dfd7c72485a9aeb323_icgraph">
<area shape="rect" title="Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and dependin..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="acb30027932df82d1ee7fb0cf18b50dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb30027932df82d1ee7fb0cf18b50dec">&#9670;&nbsp;</a></span>load_global_grid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::load_global_grid </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>z_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>y_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>x_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>z_found</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>y_found</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>x_found</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1, 2 or 3D runs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">z_dim</td><td>Size in the z dimension </td></tr>
    <tr><td class="paramname">y_dim</td><td>Size in the y dimension </td></tr>
    <tr><td class="paramname">x_sim</td><td>Size in the x dimension </td></tr>
    <tr><td class="paramname">z_found</td><td>Whether the z grid dimension exists in the checkpoint </td></tr>
    <tr><td class="paramname">y_found</td><td>Whether the y grid dimension exists in the checkpoint </td></tr>
    <tr><td class="paramname">x_found</td><td>Whether the x grid dimension exists in the checkpoint </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00396">396</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, z_dim, y_dim, x_dim</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: z_found, y_found, x_found</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160; </div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    current_state%global_grid%dimensions = 0</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160; </div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">if</span> (z_found) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="keyword">call </span>read_dimension_of_grid(ncid, current_state%global_grid, z_key, z_index, z_dim)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keyword">call </span>define_vertical_levels(ncid, current_state, z_key, z_dim)</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <span class="keywordflow">if</span> (y_found) <span class="keyword">call </span>read_dimension_of_grid(ncid, current_state%global_grid, y_key, y_index, y_dim)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="keywordflow">if</span> (x_found) <span class="keyword">call </span>read_dimension_of_grid(ncid, current_state%global_grid, x_key, x_index, x_dim)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_cgraph">
<area shape="rect" title="Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1,..." alt="" coords="5,71,204,112"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a8e630e01fb93213ab0c62be946d406b5" title="Defines the vertical levels of the grid. This is both the grid points and corresponding height for ea..." alt="" coords="252,37,451,79"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a3f64ad2ba0d044e8b4f7211d686641ef" title="Reads a specific dimension of the grid from the NetCDF and sets this up in the state_mod." alt="" coords="252,103,451,144"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="754,71,907,112"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="513,103,683,144"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="499,37,697,79"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="978,49,1121,75"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="964,100,1135,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1183,41,1349,83"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="745,5,916,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_acb30027932df82d1ee7fb0cf18b50dec_icgraph">
<area shape="rect" title="Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1,..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="a8b9b91ebcd530e0f7653c0f4bedb3827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b9b91ebcd530e0f7653c0f4bedb3827">&#9670;&nbsp;</a></span>load_mean_profiles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::load_mean_profiles </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>z_dim_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00412">412</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, z_dim_id</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160; </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordtype">integer</span> :: z_size, i</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">type</span>(q_metadata_type) :: q_metadata</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: q_field_name, zq_field_name</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keyword">call </span>check_status(nf90_inquire_dimension(ncid, z_dim_id, len=z_size))</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, olubar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olubar(z_size))</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, olubar, real_data_1d_double=current_state%global_grid%configuration%vertical%olubar)</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, olzubar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olzubar(z_size))</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, olzubar, real_data_1d_double=current_state%global_grid%configuration%vertical%olzubar)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, olvbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olvbar(z_size))</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, olvbar, real_data_1d_double=current_state%global_grid%configuration%vertical%olvbar)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, olzvbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olzvbar(z_size))</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, olzvbar, real_data_1d_double=current_state%global_grid%configuration%vertical%olzvbar)</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, olthbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olthbar(z_size))</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, olthbar, real_data_1d_double=current_state%global_grid%configuration%vertical%olthbar)</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, olzthbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olzthbar(z_size))</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, olzthbar, real_data_1d_double=current_state%global_grid%configuration%vertical%olzthbar)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordflow">if</span> (does_field_exist(ncid, olqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;     <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olqbar(z_size, current_state%number_q_fields))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;     <span class="keyword">call </span>read_single_variable(ncid, olqbar, real_data_2d_double=current_state%global_grid%configuration%vertical%olqbar)</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (current_state%number_q_fields .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;     <span class="keywordflow">do</span> i=1,current_state%number_q_fields</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        q_metadata=get_indices_descriptor(i)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        q_field_name=trim(olqbar)//<span class="stringliteral">&quot;_&quot;</span>//trim(q_metadata%name)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <span class="keywordflow">if</span> (.not. does_field_exist(ncid, q_field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;          q_field_name=trim(olqbar_anonymous_name)//<span class="stringliteral">&quot;_&quot;</span>//trim(conv_to_string(i))          </div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          <span class="keywordflow">if</span> (.not. does_field_exist(ncid, q_field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            cycle</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="keywordflow">          end if</span>        </div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">if</span> (.not. <span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olqbar(z_size, current_state%number_q_fields))</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="keyword">call </span>read_single_variable(ncid, q_field_name, &amp;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;             real_data_1d_double=current_state%global_grid%configuration%vertical%olqbar(:, i))        </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">if</span> (does_field_exist(ncid, olzqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;     <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olzqbar(z_size, current_state%number_q_fields))</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;     <span class="keyword">call </span>read_single_variable(ncid, olzqbar, real_data_2d_double=current_state%global_grid%configuration%vertical%olzqbar)</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (current_state%number_q_fields .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;     <span class="keywordflow">do</span> i=1,current_state%number_q_fields</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        q_metadata=get_indices_descriptor(i)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        q_field_name=trim(olzqbar)//<span class="stringliteral">&quot;_&quot;</span>//trim(q_metadata%name)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        <span class="keywordflow">if</span> (.not. does_field_exist(ncid, q_field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;          q_field_name=trim(olzqbar_anonymous_name)//<span class="stringliteral">&quot;_&quot;</span>//trim(conv_to_string(i))          </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;          <span class="keywordflow">if</span> (.not. does_field_exist(ncid, q_field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;            cycle</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="keywordflow">          end if</span>        </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="keywordflow">if</span> (.not. <span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olzqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;          <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%olzqbar(z_size, current_state%number_q_fields))</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="keyword">call </span>read_single_variable(ncid, q_field_name, &amp;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;             real_data_1d_double=current_state%global_grid%configuration%vertical%olzqbar(:, i))        </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_cgraph">
<area shape="rect" title=" " alt="" coords="5,100,204,141"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="507,35,661,76"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#aa5891369d5acb69d237f9b5816704889" title="Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file ..." alt="" coords="252,100,451,141"/>
<area shape="rect" href="namespaceq__indices__mod.html#ae040049b676d2b242c3f199275f5e3b1" title="Retrieves the indicies descriptor at a specific location." alt="" coords="284,165,419,207"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="266,231,437,272"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="252,35,451,76"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="731,13,874,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="717,64,888,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="936,5,1103,47"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="499,100,669,141"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a8b9b91ebcd530e0f7653c0f4bedb3827_icgraph">
<area shape="rect" title=" " alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="a6a5f8dd27f75ba3616afc0a89a868191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a5f8dd27f75ba3616afc0a89a868191">&#9670;&nbsp;</a></span>load_misc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::load_misc </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads in misc data from the checkpoint file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00137">137</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">integer</span> :: i_data(1)  <span class="comment">! Procedure requires a vector rather than scalar</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>) :: r_data(1)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160; </div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, timestep, integer_data_1d=i_data)</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    current_state%timestep = i_data(1)+1 <span class="comment">! plus one to increment for next timestep</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">!current_state%start_timestep = current_state%timestep </span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, ugal, real_data_1d_double=r_data)</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    current_state%ugal = r_data(1)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, vgal, real_data_1d_double=r_data)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    current_state%vgal = r_data(1)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, nqfields, integer_data_1d=i_data)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    current_state%number_q_fields = i_data(1)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, dtm_key, real_data_1d_double=r_data)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    current_state%dtm = r_data(1)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, dtm_new_key, real_data_1d_double=r_data)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    current_state%dtm_new = r_data(1)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    current_state%update_dtm = current_state%dtm .ne. current_state%dtm_new</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, absolute_new_dtm_key, real_data_1d_double=r_data)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    current_state%absolute_new_dtm = r_data(1)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, time_key, real_data_1d_double=r_data)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">! The time is written into checkpoint as time+dtm, therefore the time as read in has been correctly advanced</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    current_state%time = r_data(1)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keyword">call </span>read_single_variable(ncid, rad_last_time_key, real_data_1d_double=r_data)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    current_state%rad_last_time = r_data(1)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_cgraph">
<area shape="rect" title="Loads in misc data from the checkpoint file." alt="" coords="5,68,204,109"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="252,68,451,109"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="507,35,661,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="499,100,669,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="731,13,874,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="717,64,888,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="936,5,1103,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a6a5f8dd27f75ba3616afc0a89a868191_icgraph">
<area shape="rect" title="Loads in misc data from the checkpoint file." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="af7eed392de6205bc22b3e842ded0e45a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7eed392de6205bc22b3e842ded0e45a">&#9670;&nbsp;</a></span>load_pdf_profiles()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::load_pdf_profiles </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>z_dim_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00488">488</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, z_dim_id</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160; </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordtype">integer</span> :: z_size, i</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160; </div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keyword">call </span>check_status(nf90_inquire_dimension(ncid, z_dim_id, len=z_size))</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, wup)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%w_up(z_size))</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, wup, real_data_1d_double=current_state%global_grid%configuration%vertical%w_up)</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keywordflow">if</span> (does_field_exist(ncid, wdwn)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keyword">allocate</span>(current_state%global_grid%configuration%vertical%w_dwn(z_size))</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, wdwn, real_data_1d_double=current_state%global_grid%configuration%vertical%w_dwn)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_cgraph">
<area shape="rect" title=" " alt="" coords="5,68,204,109"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="507,35,661,76"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#aa5891369d5acb69d237f9b5816704889" title="Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file ..." alt="" coords="252,35,451,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="266,165,437,207"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="252,100,451,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="731,13,874,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="717,64,888,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="936,5,1103,47"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="499,100,669,141"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_af7eed392de6205bc22b3e842ded0e45a_icgraph">
<area shape="rect" title=" " alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="ac4f69f73beff8fb630b1e8c7b530ae05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4f69f73beff8fb630b1e8c7b530ae05">&#9670;&nbsp;</a></span>load_q_indices()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::load_q_indices </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads the Q indices (if they exist) into the model Q index register. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00285">285</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">integer</span> :: number_q_indices, i, q_indices_id</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">character(len=MAX_STRING_LENGTH)</span> :: key, value</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    number_q_indices=get_number_q_indices(ncid)</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span> (number_q_indices .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, q_indices_key, q_indices_id))</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keywordflow">do</span> i=1, number_q_indices</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, q_indices_id, key, (/ 1, 1, i /)))</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, q_indices_id, <span class="keywordtype">value</span>, (/ 1, 2, i /)))</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <span class="keyword">call </span>remove_null_terminator_from_string(key)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        <span class="keyword">call </span>remove_null_terminator_from_string(<span class="keywordtype">value</span>)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keyword">call </span>set_q_index(conv_to_integer(trim(<span class="keywordtype">value</span>)), key)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_cgraph">
<area shape="rect" title="Loads the Q indices (if they exist) into the model Q index register." alt="" coords="5,164,204,205"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="507,35,661,76"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a94a01ad171aa30db396da469b63f5852" title="Retrieve sthe number of Q indice entries in the NetCDF. This is optional, so may return 0." alt="" coords="252,99,451,140"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="266,164,437,205"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a0e39f2163225604cdc7e7b830b86f455" title="Removes NetCDF C style null termination of string. This is placed right at the end,..." alt="" coords="254,229,449,285"/>
<area shape="rect" href="namespaceq__indices__mod.html#aa8240f530c9fb221268e7611ca44646a" title="Sets a Q index to be active at a specific index and sets the name." alt="" coords="285,308,418,349"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="731,13,874,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="717,64,888,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="936,5,1103,47"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#aacd14e8e9223b465b2a42c06018eabf1" title=" " alt="" coords="499,100,669,141"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="499,165,669,207"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_ac4f69f73beff8fb630b1e8c7b530ae05_icgraph">
<area shape="rect" title="Loads the Q indices (if they exist) into the model Q index register." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="abe7d8338386306145ed7751af9350b93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe7d8338386306145ed7751af9350b93">&#9670;&nbsp;</a></span>load_single_3d_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::load_single_3d_field </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1local__grid__type.html">local_grid_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>local_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structprognostics__mod_1_1prognostic__field__type.html">prognostic_field_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>z_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>y_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>x_grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>variable_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in)&#160;</td>
          <td class="paramname"><em>multi_process</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>fourth_dim_loc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Loads in and initialises a single 3D prognostic field. Even if the model is being run in 1 or 2D, the fields are still stored in 3D with the missing dimension sizes being set to one. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">field</td><td>The prognostic field that will be initialised from the checkpoint </td></tr>
    <tr><td class="paramname">grid</td><td>The grid that the prognostic field is on </td></tr>
    <tr><td class="paramname">variable_key</td><td>The NetCDF variable name </td></tr>
    <tr><td class="paramname">dim_one</td><td>Size in dimension one </td></tr>
    <tr><td class="paramname">dim_two</td><td>Size in dimension two </td></tr>
    <tr><td class="paramname">dim_three</td><td>Size in dimension three </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00330">330</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: variable_key</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: z_grid, y_grid, x_grid, ncid</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keywordtype">type</span>(prognostic_field_type), <span class="keywordtype">intent(inout)</span> :: field</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordtype">type</span>(local_grid_type), <span class="keywordtype">intent(inout)</span> :: local_grid</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(in)</span> :: multi_process</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">optional</span>, <span class="keywordtype">intent(in)</span> :: fourth_dim_loc</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordtype">integer</span> :: start(5), count(5), i, map(5)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; <span class="keywordtype">integer</span> :: variable_id, nd</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(field%data)) <span class="keyword">deallocate</span>(field%data)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keyword">allocate</span>(field%data(local_grid%size(z_index) + local_grid%halo_size(z_index) * 2, local_grid%size(y_index) + &amp;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         local_grid%halo_size(y_index) * 2, local_grid%size(x_index) + local_grid%halo_size(x_index) * 2))</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    field%data(:,:,:)=0.</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160; </div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keywordflow">if</span> (multi_process .or. <span class="keyword">present</span>(fourth_dim_loc)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">do</span> i=1,3</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        <span class="keywordflow">if</span> (i==1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;          map(i)=1</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;          map(i)=map(i-1)*local_grid%size(i-1)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        start(i) = local_grid%start(i)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        count(i) = local_grid%size(i)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(fourth_dim_loc)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        start(4) = fourth_dim_loc</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        count(4) = 1</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;        map(4)=map(3)*local_grid%size(3)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160; </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        start(5)=1</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        count(5)=1</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        map(5)=map(4)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        start(4)=1</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        map(4)=map(3)*local_grid%size(3)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        count(4)=1</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, variable_key, real_data_3d=field%data(local_grid%local_domain_start_index(z_index):&amp;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;           local_grid%local_domain_end_index(z_index),local_grid%local_domain_start_index(y_index):&amp;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;           local_grid%local_domain_end_index(y_index), local_grid%local_domain_start_index(x_index):&amp;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;           local_grid%local_domain_end_index(x_index)), start=start, count=count, map=map)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, variable_key, real_data_3d=field%data(local_grid%local_domain_start_index(z_index):&amp;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;           local_grid%local_domain_end_index(z_index),local_grid%local_domain_start_index(y_index):&amp;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;           local_grid%local_domain_end_index(y_index), local_grid%local_domain_start_index(x_index):&amp;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;           local_grid%local_domain_end_index(x_index)))</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160; </div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    field%grid(z_index) = z_grid</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    field%grid(y_index) = y_grid</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    field%grid(x_index) = x_grid</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    field%active = .true.</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_cgraph">
<area shape="rect" title="Loads in and initialises a single 3D prognostic field. Even if the model is being run in 1 or 2D,..." alt="" coords="5,68,204,109"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="252,68,451,109"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="507,35,661,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="499,100,669,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="731,13,874,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="717,64,888,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="936,5,1103,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_abe7d8338386306145ed7751af9350b93_icgraph">
<area shape="rect" title="Loads in and initialises a single 3D prognostic field. Even if the model is being run in 1 or 2D,..." alt="" coords="499,5,697,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a50ef1c48768cf2dfd7c72485a9aeb323" title="Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and dependin..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="a2c62e5fb27df55b95c5650b36e9a6545"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c62e5fb27df55b95c5650b36e9a6545">&#9670;&nbsp;</a></span>read_checkpoint_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public checkpointer_read_checkpoint_mod::read_checkpoint_file </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>filename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads in a NetCDF checkpoint file and uses this to initialise the model. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentState</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">filename</td><td>The filename of the checkpoint file to load </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00040">40</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: filename</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">integer</span> :: ncid, z_dim, y_dim, x_dim</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordtype">logical</span> :: z_found, y_found, x_found</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordtype">character(len=:)</span>, <span class="keywordtype">allocatable</span> :: attribute_value</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="keyword">call </span>check_status(nf90_open(path = filename, mode = nf90_nowrite, ncid = ncid))</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    attribute_value=read_specific_global_attribute(ncid, <span class="stringliteral">&quot;created&quot;</span>)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">call </span>read_dimensions(ncid, z_dim, y_dim, x_dim, z_found, y_found, x_found)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">call </span>load_global_grid(current_state, ncid, z_dim, y_dim, x_dim, z_found, y_found, x_found)    </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keyword">call </span>decompose_grid(current_state)</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">call </span>load_q_indices(ncid)    </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">call </span>load_misc(current_state, ncid)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keyword">call </span>load_all_fields(current_state, ncid)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keyword">call </span>initalise_source_and_sav_fields(current_state)  </div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keyword">call </span>load_mean_profiles(current_state, ncid, z_dim)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keyword">call </span>load_pdf_profiles(current_state, ncid, z_dim)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keyword">call </span>check_status(nf90_close(ncid))</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (current_state%number_q_fields .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;      <span class="comment">! Retrieve standard q indices</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;      current_state%water_vapour_mixing_ratio_index=get_q_index(standard_q_names%VAPOUR, <span class="stringliteral">&#39;checkpoint&#39;</span>)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;      current_state%liquid_water_mixing_ratio_index=get_q_index(standard_q_names%CLOUD_LIQUID_MASS, <span class="stringliteral">&#39;checkpoint&#39;</span>)</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">log_master_log</a>(<a class="code" href="namespacelogging__mod.html#ac7d5c1fcb00d54277580c10556aa78a8">log_info</a>, <span class="stringliteral">&quot;Restarted configuration from checkpoint file `&quot;</span>//trim(filename)//<span class="stringliteral">&quot;` created at &quot;</span>&amp;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;         //attribute_value)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keyword">deallocate</span>(attribute_value)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    current_state%initialised=.true.</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a2c62e5fb27df55b95c5650b36e9a6545_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a2c62e5fb27df55b95c5650b36e9a6545_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a2c62e5fb27df55b95c5650b36e9a6545_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a2c62e5fb27df55b95c5650b36e9a6545_cgraph">
<area shape="rect" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,517,204,558"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="1021,645,1175,686"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a3336ed10beeec4f2f93786e2f38af929" title="Calls out to the parallel decomposition strategy to decompose the grid based upon the configuration r..." alt="" coords="999,105,1197,146"/>
<area shape="rect" href="namespaceq__indices__mod.html#a4e5463d72d74c95749a8a66ff810eb1e" title="Add in a new entry into the register if the name does not already exist or return the index of the pr..." alt="" coords="288,54,421,95"/>
<area shape="rect" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20" title="Will log just from the master process." alt="" coords="510,53,699,80"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a36a41a580c7d12a2a608775b0a549ff9" title="Initialises the source and sav (for u,v,w) fields for allocated prognostics." alt="" coords="255,327,454,383"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a50ef1c48768cf2dfd7c72485a9aeb323" title="Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and dependin..." alt="" coords="255,262,454,303"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#acb30027932df82d1ee7fb0cf18b50dec" title="Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1,..." alt="" coords="255,575,454,617"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a8b9b91ebcd530e0f7653c0f4bedb3827" title=" " alt="" coords="505,323,704,365"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a6a5f8dd27f75ba3616afc0a89a868191" title="Loads in misc data from the checkpoint file." alt="" coords="255,458,454,499"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#af7eed392de6205bc22b3e842ded0e45a" title=" " alt="" coords="505,506,704,547"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#ac4f69f73beff8fb630b1e8c7b530ae05" title="Loads the Q indices (if they exist) into the model Q index register." alt="" coords="255,727,454,769"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a9eb15dfe81c035d99d54d239837f9df1" title=" " alt="" coords="269,845,440,886"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a560322f985011ddabb2ecd2646dacf43" title=" " alt="" coords="252,911,457,937"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#aa25af7b1f1b80f4b22f2ae6ef2c2d422" title="Will read in the dimension sizes from the NetCDF file along with whether the z, y and x dimensions ha..." alt="" coords="505,1015,704,1057"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#ad3e451c36167ef3b2b1528583f42bbff" title="Will read a global attribute from the checkpoint file &#45; note that it allocates string memory here so ..." alt="" coords="255,1153,454,1209"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="1259,141,1402,168"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="1245,645,1416,686"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="1464,134,1631,175"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#aa5891369d5acb69d237f9b5816704889" title="Determines whether a variable (field) exists within the NetCDF checkpoint file @ncid The NetCDF file ..." alt="" coords="752,326,951,367"/>
<area shape="rect" href="namespaceq__indices__mod.html#ae040049b676d2b242c3f199275f5e3b1" title="Retrieves the indicies descriptor at a specific location." alt="" coords="784,239,919,281"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#abe7d8338386306145ed7751af9350b93" title="Loads in and initialises a single 3D prognostic field. Even if the model is being run in 1 or 2D,..." alt="" coords="505,389,704,430"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="1013,443,1183,485"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="752,443,951,485"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a8e630e01fb93213ab0c62be946d406b5" title="Defines the vertical levels of the grid. This is both the grid points and corresponding height for ea..." alt="" coords="505,637,704,678"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a3f64ad2ba0d044e8b4f7211d686641ef" title="Reads a specific dimension of the grid from the NetCDF and sets this up in the state_mod." alt="" coords="505,571,704,613"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="766,561,937,602"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a94a01ad171aa30db396da469b63f5852" title="Retrieve sthe number of Q indice entries in the NetCDF. This is optional, so may return 0." alt="" coords="505,833,704,874"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a0e39f2163225604cdc7e7b830b86f455" title="Removes NetCDF C style null termination of string. This is placed right at the end,..." alt="" coords="507,753,702,809"/>
<area shape="rect" href="namespaceq__indices__mod.html#aa8240f530c9fb221268e7611ca44646a" title="Sets a Q index to be active at a specific index and sets the name." alt="" coords="538,898,671,939"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#aacd14e8e9223b465b2a42c06018eabf1" title=" " alt="" coords="766,965,937,1006"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a9312013c5a743357e6b404e0a593879c" title=" " alt="" coords="519,1183,690,1225"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a77ad37cf08a50bff3e94f22f3fae26ee" title=" " alt="" coords="519,1249,690,1290"/>
</map>
</div>

</div>
</div>
<a id="a3f64ad2ba0d044e8b4f7211d686641ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f64ad2ba0d044e8b4f7211d686641ef">&#9670;&nbsp;</a></span>read_dimension_of_grid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::read_dimension_of_grid </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1global__grid__type.html">global_grid_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>variable_key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dimension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dimension_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a specific dimension of the grid from the NetCDF and sets this up in the <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">grid</td><td>The model grid that this dimension lies on </td></tr>
    <tr><td class="paramname">variable_key</td><td>The NetCDF variable name that we are reading </td></tr>
    <tr><td class="paramname">dimension</td><td>The dimension corresponding to the definition in the <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a> module </td></tr>
    <tr><td class="paramname">dimension_size</td><td>Number of grid points in this dimension </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00542">542</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid, dimension_id, dimension</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: variable_key</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordtype">type</span>(global_grid_type), <span class="keywordtype">intent(inout)</span> :: grid</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160; </div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordtype">integer</span> :: dim_size</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keyword">call </span>check_status(nf90_inquire_dimension(ncid, dimension_id, len=dim_size))</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160; </div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;    <span class="keywordflow">if</span> (variable_key .eq. <span class="stringliteral">&quot;x&quot;</span> .or. variable_key .eq. <span class="stringliteral">&quot;y&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, trim(variable_key)//<span class="stringliteral">&quot;_resolution&quot;</span>, real_data=grid%resolution(dimension))</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, trim(variable_key)//<span class="stringliteral">&quot;_top&quot;</span>, real_data=grid%top(dimension))</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, trim(variable_key)//<span class="stringliteral">&quot;_bottom&quot;</span>, real_data=grid%bottom(dimension))</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (variable_key .eq. <span class="stringliteral">&quot;z&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keyword">allocate</span>(grid%configuration%vertical%z(dim_size), grid%configuration%vertical%zn(dim_size))</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, z_key, real_data_1d_double=grid%configuration%vertical%z)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keyword">call </span>read_single_variable(ncid, zn_key, real_data_1d_double=grid%configuration%vertical%zn)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      grid%top(dimension) = int(grid%configuration%vertical%z(dim_size))</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      grid%resolution(dimension) = int(grid%configuration%vertical%z(2) - grid%configuration%vertical%z(1))</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="comment">! For now hard code the bottom of the grid in each dimension as 0, first element is the 0th + size</span></div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="comment">! I.e. if dxx=100, start=0 then first point is 100 rather than 0 (in x and y), is correct in z in CP file</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      grid%bottom(dimension) = 0</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="keywordflow">    end if</span>            </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    grid%size(dimension) = dim_size</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    grid%dimensions = grid%dimensions + 1</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    grid%active(dimension) = .true.    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_cgraph">
<area shape="rect" title="Reads a specific dimension of the grid from the NetCDF and sets this up in the state_mod." alt="" coords="5,64,204,105"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="507,35,661,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ac12dcbf7dfa748ace67951fcb70b1f4c" title=" " alt="" coords="266,64,437,105"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a5ad2e696f2dcbacfdc0fbc4bb55b1025" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="252,129,451,171"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="731,13,874,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="717,64,888,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="936,5,1103,47"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="499,129,669,171"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a3f64ad2ba0d044e8b4f7211d686641ef_icgraph">
<area shape="rect" title="Reads a specific dimension of the grid from the NetCDF and sets this up in the state_mod." alt="" coords="499,5,697,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#acb30027932df82d1ee7fb0cf18b50dec" title="Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1,..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="aa25af7b1f1b80f4b22f2ae6ef2c2d422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa25af7b1f1b80f4b22f2ae6ef2c2d422">&#9670;&nbsp;</a></span>read_dimensions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::read_dimensions </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>z_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>y_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(out)&#160;</td>
          <td class="paramname"><em>x_dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(out)&#160;</td>
          <td class="paramname"><em>z_found</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(out)&#160;</td>
          <td class="paramname"><em>y_found</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(out)&#160;</td>
          <td class="paramname"><em>x_found</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will read in the dimension sizes from the NetCDF file along with whether the z, y and x dimensions have been found. If any have not been found then this corresponds to running the model with 2 or 1D <a class="el" href="namespacegrids__mod.html" title="Functionality to support the different types of grid and abstraction between global grids and local o...">grids_mod</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDf file id </td></tr>
    <tr><td class="paramname">z_dim</td><td>Size in the z dimension (set to size of empty dimension if not found) </td></tr>
    <tr><td class="paramname">y_dim</td><td>Size in the y dimension (set to size of empty dimension if not found) </td></tr>
    <tr><td class="paramname">x_dim</td><td>Size in the x dimension (set to size of empty dimension if not found) </td></tr>
    <tr><td class="paramname">string_dim</td><td>Size of the string dimension (size that we use to allocate strings) </td></tr>
    <tr><td class="paramname">key_value_pair_dim</td><td>Size of key-value pair dimension which should be two </td></tr>
    <tr><td class="paramname">options_dim</td><td>Size of the options dimension which corresponds to how many options have been provided </td></tr>
    <tr><td class="paramname">z_found</td><td>Whether the z dimension exists (grid exists in z dimension) </td></tr>
    <tr><td class="paramname">y_found</td><td>Whether the y dimension exists (grid exists in y dimension) </td></tr>
    <tr><td class="paramname">x_found</td><td>Whether the x dimension exists (grid exists in x dimension) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00663">663</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(out)</span> :: z_dim, y_dim, x_dim</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(out)</span> :: z_found, y_found, x_found</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, z_dim_key, z_dim), z_found)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, y_dim_key, y_dim), y_found)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_dimid(ncid, x_dim_key, x_dim), x_found)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_cgraph">
<area shape="rect" title="Will read in the dimension sizes from the NetCDF file along with whether the z, y and x dimensions ha..." alt="" coords="5,68,204,109"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="261,35,414,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#aacd14e8e9223b465b2a42c06018eabf1" title=" " alt="" coords="252,100,423,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="485,13,627,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="471,64,641,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="689,5,856,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_aa25af7b1f1b80f4b22f2ae6ef2c2d422_icgraph">
<area shape="rect" title="Will read in the dimension sizes from the NetCDF file along with whether the z, y and x dimensions ha..." alt="" coords="252,5,451,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,5,204,47"/>
</map>
</div>

</div>
</div>
<a id="a5ad2e696f2dcbacfdc0fbc4bb55b1025"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad2e696f2dcbacfdc0fbc4bb55b1025">&#9670;&nbsp;</a></span>read_single_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine checkpointer_read_checkpoint_mod::read_single_variable </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(inout), optional&#160;</td>
          <td class="paramname"><em>int_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), intent(inout), optional&#160;</td>
          <td class="paramname"><em>real_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real, dimension(:), intent(inout), optional&#160;</td>
          <td class="paramname"><em>real_data_1d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:), intent(inout), optional&#160;</td>
          <td class="paramname"><em>real_data_1d_double</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:,:), intent(inout), optional&#160;</td>
          <td class="paramname"><em>real_data_2d_double</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">real(kind=default_precision), dimension(:,:,:), intent(inout), optional&#160;</td>
          <td class="paramname"><em>real_data_3d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(:), intent(inout), optional&#160;</td>
          <td class="paramname"><em>integer_data_1d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(:), intent(in), optional&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(:), intent(in), optional&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(:), intent(in), optional&#160;</td>
          <td class="paramname"><em>map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads in a single variable and sets the values of the data based upon this. Handles reading in and setting vectors of 1 or 3D reals and 1d integers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">key</td><td>The variable key to read in </td></tr>
    <tr><td class="paramname">realData1D</td><td>Vector of 1D real data to read (optional) </td></tr>
    <tr><td class="paramname">realData3D</td><td>Vector of 3D real data to read (optional) </td></tr>
    <tr><td class="paramname">integerData1D</td><td>Vector of 1D integer data to read (optional) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00577">577</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: key</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: int_data</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>) , <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: real_data</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="keywordtype">    real</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: real_data_1d</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: real_data_1d_double</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:,:)</span>, <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: real_data_2d_double</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>), <span class="keywordtype">dimension(:,:,:)</span>, <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: real_data_3d</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span>, <span class="keywordtype">optional</span> :: integer_data_1d</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span> :: start, count, map</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">integer</span> :: variable_id</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keyword">call </span>check_status(nf90_inq_varid(ncid, key, variable_id))</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (.not. <span class="keyword">present</span>(int_data) .and. .not. <span class="keyword">present</span>(real_data) .and. .not. <span class="keyword">present</span>(real_data_1d) .and. &amp;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         .not. <span class="keyword">present</span>(real_data_1d_double) .and. .not. <span class="keyword">present</span>(real_data_2d_double) .and. &amp;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         .not. <span class="keyword">present</span>(real_data_3d) .and. .not. <span class="keyword">present</span>(integer_data_1d)) <span class="keywordflow">return</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160; </div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(int_data)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, int_data))</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">return</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="keywordflow">    end if</span>  </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160; </div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(real_data)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data))</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="keywordflow">return</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(real_data_1d)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count) .and. <span class="keyword">present</span>(map)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_1d, start=start, count=count, map=map))</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_1d, start=start, count=count))</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_1d))</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(real_data_1d_double)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count) .and. <span class="keyword">present</span>(map)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_1d_double, start=start, count=count, map=map))</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_1d_double, start=start, count=count))</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_1d_double))</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(real_data_2d_double)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count) .and. <span class="keyword">present</span>(map)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_2d_double, start=start, count=count, map=map))</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_2d_double, start=start, count=count))</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_2d_double))</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(real_data_3d)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count) .and. <span class="keyword">present</span>(map)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_3d, start=start, count=count, map=map))</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_3d, start=start, count=count))</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, real_data_3d))</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(integer_data_1d)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count) .and. <span class="keyword">present</span>(map)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, integer_data_1d, start, count, map))</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">present</span>(start) .and. <span class="keyword">present</span>(count)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, integer_data_1d, start, count))</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keyword">call </span>check_status(nf90_get_var(ncid, variable_id, integer_data_1d))</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_cgraph">
<area shape="rect" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="5,68,204,109"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="261,35,414,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#ab7e777719d93306e6bec5605293a1b30" title=" " alt="" coords="252,100,423,141"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="485,13,627,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="471,64,641,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="689,5,856,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_a5ad2e696f2dcbacfdc0fbc4bb55b1025_icgraph">
<area shape="rect" title="Reads in a single variable and sets the values of the data based upon this. Handles reading in and se..." alt="" coords="745,155,944,196"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a8e630e01fb93213ab0c62be946d406b5" title="Defines the vertical levels of the grid. This is both the grid points and corresponding height for ea..." alt="" coords="499,5,697,47"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a8b9b91ebcd530e0f7653c0f4bedb3827" title=" " alt="" coords="252,117,451,159"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a6a5f8dd27f75ba3616afc0a89a868191" title="Loads in misc data from the checkpoint file." alt="" coords="252,183,451,224"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#af7eed392de6205bc22b3e842ded0e45a" title=" " alt="" coords="499,239,697,280"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#abe7d8338386306145ed7751af9350b93" title="Loads in and initialises a single 3D prognostic field. Even if the model is being run in 1 or 2D,..." alt="" coords="499,304,697,345"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a3f64ad2ba0d044e8b4f7211d686641ef" title="Reads a specific dimension of the grid from the NetCDF and sets this up in the state_mod." alt="" coords="499,71,697,112"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#acb30027932df82d1ee7fb0cf18b50dec" title="Reads in and initialises the primal grid from the NetCDF checkpoint and will handle 1,..." alt="" coords="252,52,451,93"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,183,204,224"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a50ef1c48768cf2dfd7c72485a9aeb323" title="Reads in and initialises all prognostic fields. It will check the NetCDF checkpoint file and dependin..." alt="" coords="252,301,451,343"/>
</map>
</div>

</div>
</div>
<a id="ad3e451c36167ef3b2b1528583f42bbff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3e451c36167ef3b2b1528583f42bbff">&#9670;&nbsp;</a></span>read_specific_global_attribute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">character(len=:) function, allocatable, target checkpointer_read_checkpoint_mod::read_specific_global_attribute </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ncid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will read a global attribute from the checkpoint file - note that it allocates string memory here so the caller should deallocate this to avoid memory leaks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncid</td><td>The NetCDF file id </td></tr>
    <tr><td class="paramname">key</td><td>The NetCDF global attributes key to look up </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="readcheckpoint_8F90_source.html#l00171">171</a> of file <a class="el" href="readcheckpoint_8F90_source.html">readcheckpoint.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ncid</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: key</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">integer</span> :: length</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">character(len=:)</span>,<span class="keywordtype">allocatable</span>,<span class="keywordtype">target</span> :: read_specific_global_attribute</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160; </div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keyword">call </span>check_status(nf90_inquire_attribute(ncid, nf90_global, key, len = length))</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keyword">allocate</span>(<span class="keywordtype">character(length)</span> :: read_specific_global_attribute)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">call </span>check_status(nf90_get_att(ncid, nf90_global, key, read_specific_global_attribute))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_cgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_cgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_cgraph" id="anamespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_cgraph">
<area shape="rect" title="Will read a global attribute from the checkpoint file &#45; note that it allocates string memory here so ..." alt="" coords="5,93,204,149"/>
<area shape="rect" href="namespacecheckpointer__common__mod.html#a3fbe4c50092c828b5fe133d24302522f" title="Will check a NetCDF status and write to log_log error any decoded statuses. Can be used to decode whe..." alt="" coords="261,35,414,76"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a9312013c5a743357e6b404e0a593879c" title=" " alt="" coords="252,100,423,141"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#a77ad37cf08a50bff3e94f22f3fae26ee" title=" " alt="" coords="252,165,423,207"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="485,13,627,39"/>
<area shape="rect" href="namespacedummy__netcdf__mod.html#abeaf9879b125d4cbdbca2c0514a3d418" title=" " alt="" coords="471,64,641,105"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="689,5,856,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_icgraph.png" border="0" usemap="#anamespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_icgraph" alt=""/></div>
<map name="namespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_icgraph" id="anamespacecheckpointer__read__checkpoint__mod_ad3e451c36167ef3b2b1528583f42bbff_icgraph">
<area shape="rect" title="Will read a global attribute from the checkpoint file &#45; note that it allocates string memory here so ..." alt="" coords="252,5,451,61"/>
<area shape="rect" href="namespacecheckpointer__read__checkpoint__mod.html#a2c62e5fb27df55b95c5650b36e9a6545" title="Reads in a NetCDF checkpoint file and uses this to initialise the model." alt="" coords="5,13,204,54"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_ad68309846cd8f9e77edaa6abd02f65a0"><div class="ttname"><a href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">logging_mod::log_error</a></div><div class="ttdeci">integer, parameter, public log_error</div><div class="ttdoc">Only log ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00011">logging.F90:11</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac7d5c1fcb00d54277580c10556aa78a8"><div class="ttname"><a href="namespacelogging__mod.html#ac7d5c1fcb00d54277580c10556aa78a8">logging_mod::log_info</a></div><div class="ttdeci">integer, parameter, public log_info</div><div class="ttdoc">Log INFO, WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00013">logging.F90:13</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac4f13ac385499c85190cb184030e4f45"><div class="ttname"><a href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">logging_mod::log_log</a></div><div class="ttdeci">subroutine, public log_log(level, message, str)</div><div class="ttdoc">Logs a message at the specified level. If the level is above the current level then the message is ig...</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00074">logging.F90:75</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ad95937a250467334622daeb5cff78c20"><div class="ttname"><a href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">logging_mod::log_master_log</a></div><div class="ttdeci">subroutine, public log_master_log(level, message)</div><div class="ttdoc">Will log just from the master process.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00046">logging.F90:47</a></div></div>
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
