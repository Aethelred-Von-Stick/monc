<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: decomposition_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions/Subroutines</a>  </div>
  <div class="headertitle">
<div class="title">decomposition_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Parallel decomposition to determine the grid points and data columns that are located on this process.  
<a href="namespacedecomposition__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a151110f5f60ba70abbdd598e2abe8574"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structmonc__component__mod_1_1component__descriptor__type.html">component_descriptor_type</a>) function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574">decomposition_get_descriptor</a> ()</td></tr>
<tr class="memdesc:a151110f5f60ba70abbdd598e2abe8574"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides the component descriptor for the core to register.  <a href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574">More...</a><br /></td></tr>
<tr class="separator:a151110f5f60ba70abbdd598e2abe8574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17f59ea058a28a374074591e78072eb1"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1">init_callback</a> (current_state)</td></tr>
<tr class="memdesc:a17f59ea058a28a374074591e78072eb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The initialisation hook. Will set up the appropriate decomposition.  <a href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1">More...</a><br /></td></tr>
<tr class="separator:a17f59ea058a28a374074591e78072eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88c9442c20d751209aa5effbf9949afb"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb">two_dim_decomposition</a> (current_state)</td></tr>
<tr class="memdesc:a88c9442c20d751209aa5effbf9949afb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decomposition into two dimensions.  <a href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb">More...</a><br /></td></tr>
<tr class="separator:a88c9442c20d751209aa5effbf9949afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8899c100721c3f61f744b7ef2fa4a301"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a8899c100721c3f61f744b7ef2fa4a301">apply_two_dim_neighbour_information</a> (current_state, y_procs, x_procs, coords)</td></tr>
<tr class="memdesc:a8899c100721c3f61f744b7ef2fa4a301"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will apply the two dimensional neighbour information. This implements the wrap around aspect if there is not an immediate neighbour in a dimensional direction. Currently assumes that the halo is on the entire neighbour process.  <a href="namespacedecomposition__mod.html#a8899c100721c3f61f744b7ef2fa4a301">More...</a><br /></td></tr>
<tr class="separator:a8899c100721c3f61f744b7ef2fa4a301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf15e5f66826309bf60a76fb41e6e6ae"><td class="memItemLeft" align="right" valign="top">logical function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#abf15e5f66826309bf60a76fb41e6e6ae">does_two_dim_work_with_domain_size</a> (current_state, y_dims, x_dims)</td></tr>
<tr class="memdesc:abf15e5f66826309bf60a76fb41e6e6ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether or not the planned two dimensional decomposition will fit into the X and Y global solutions size.  <a href="namespacedecomposition__mod.html#abf15e5f66826309bf60a76fb41e6e6ae">More...</a><br /></td></tr>
<tr class="separator:abf15e5f66826309bf60a76fb41e6e6ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8121daba3e69d1ef030b6d1e4198dcff"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a8121daba3e69d1ef030b6d1e4198dcff">apply_dimension_bounds</a> (current_state, dim, dim_size, dim_processes, dim_my_rank)</td></tr>
<tr class="memdesc:a8121daba3e69d1ef030b6d1e4198dcff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applys the local bounds (start, end and size) for a specific dimension.  <a href="namespacedecomposition__mod.html#a8121daba3e69d1ef030b6d1e4198dcff">More...</a><br /></td></tr>
<tr class="separator:a8121daba3e69d1ef030b6d1e4198dcff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a78fad391b823071ec9dda88b23ab5"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a66a78fad391b823071ec9dda88b23ab5">apply_z_dimension_information</a> (current_state)</td></tr>
<tr class="memdesc:a66a78fad391b823071ec9dda88b23ab5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applys Z dimension information. As we always decompose into columns then Z is never split and as such is just the entire Z dimension regardless.  <a href="namespacedecomposition__mod.html#a66a78fad391b823071ec9dda88b23ab5">More...</a><br /></td></tr>
<tr class="separator:a66a78fad391b823071ec9dda88b23ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938ecd9b19f1c729692e8b15838bbdca"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca">one_dim_decomposition</a> (current_state)</td></tr>
<tr class="memdesc:a938ecd9b19f1c729692e8b15838bbdca"><td class="mdescLeft">&#160;</td><td class="mdescRight">One dimension decomposition.  <a href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca">More...</a><br /></td></tr>
<tr class="separator:a938ecd9b19f1c729692e8b15838bbdca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b4c58c4c9542846802d6ec0ac3283f"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f">serial_decomposition</a> (current_state)</td></tr>
<tr class="memdesc:a85b4c58c4c9542846802d6ec0ac3283f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serial decomposition.  <a href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f">More...</a><br /></td></tr>
<tr class="separator:a85b4c58c4c9542846802d6ec0ac3283f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25442f953a87d031a255badd5a16030c"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a25442f953a87d031a255badd5a16030c">display_decomposition_information</a> (current_state, decomp_name)</td></tr>
<tr class="memdesc:a25442f953a87d031a255badd5a16030c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps out information about the decomposition at DEBUG level.  <a href="namespacedecomposition__mod.html#a25442f953a87d031a255badd5a16030c">More...</a><br /></td></tr>
<tr class="separator:a25442f953a87d031a255badd5a16030c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4924f4aebf06ebe72b40c202e42b113"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#ac4924f4aebf06ebe72b40c202e42b113">apply_data_start_end_bounds</a> (local_grid)</td></tr>
<tr class="memdesc:ac4924f4aebf06ebe72b40c202e42b113"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates and applys the start and end bounds of the local data. Held locally is the halo and local data, this signifies for each dimension where the local data (without halo) starts and ends.  <a href="namespacedecomposition__mod.html#ac4924f4aebf06ebe72b40c202e42b113">More...</a><br /></td></tr>
<tr class="separator:ac4924f4aebf06ebe72b40c202e42b113"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a920741992b79bc02ed62cd612451b6f3"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedecomposition__mod.html#a920741992b79bc02ed62cd612451b6f3">apply_halo_information_and_allocate_neighbours</a> (current_state)</td></tr>
<tr class="memdesc:a920741992b79bc02ed62cd612451b6f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will apply halo size information and allocated the neighbour array data.  <a href="namespacedecomposition__mod.html#a920741992b79bc02ed62cd612451b6f3">More...</a><br /></td></tr>
<tr class="separator:a920741992b79bc02ed62cd612451b6f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Parallel decomposition to determine the grid points and data columns that are located on this process. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="ac4924f4aebf06ebe72b40c202e42b113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4924f4aebf06ebe72b40c202e42b113">&#9670;&nbsp;</a></span>apply_data_start_end_bounds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::apply_data_start_end_bounds </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1local__grid__type.html">local_grid_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>local_grid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates and applys the start and end bounds of the local data. Held locally is the halo and local data, this signifies for each dimension where the local data (without halo) starts and ends. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">localGrid</td><td>The populated local grid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00416">416</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordtype">type</span>(local_grid_type), <span class="keywordtype">intent(inout)</span> :: local_grid</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160; </div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">integer</span> :: i,n_dim</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="comment">!Total number of dimensions</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    n_dim = 3</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordflow">do</span> i = 1,n_dim</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;       local_grid%local_domain_start_index(i) = local_grid%halo_size(i) + 1</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;       local_grid%local_domain_end_index(i) = local_grid%halo_size(i) + local_grid%size(i)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    <span class="comment">! call log_master_log(LOG_DEBUG,&quot;start_index(1)= &quot;//&amp;</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="comment">!      trim(conv_to_string(local_grid%local_domain_start_index(1)))//&quot; end_index(1)=&quot;//&amp;</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="comment">!      trim(conv_to_string(local_grid%local_domain_end_index(1)))//&quot; start_index(2)=&quot;//&amp;</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <span class="comment">!      trim(conv_to_string(local_grid%local_domain_start_index(2)))//&quot; end_index(2)=&quot;//&amp;</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="comment">!      trim(conv_to_string(local_grid%local_domain_end_index(2)))//&quot; start_index(3)=&quot;//&amp;</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="comment">!      trim(conv_to_string(local_grid%local_domain_start_index(3)))//&quot; end_index(3)=&quot;//&amp;</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">!      trim(conv_to_string(local_grid%local_domain_end_index(3))))</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_ac4924f4aebf06ebe72b40c202e42b113_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_ac4924f4aebf06ebe72b40c202e42b113_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_ac4924f4aebf06ebe72b40c202e42b113_icgraph" id="anamespacedecomposition__mod_ac4924f4aebf06ebe72b40c202e42b113_icgraph">
<area shape="rect" title="Calculates and applys the start and end bounds of the local data. Held locally is the halo and local ..." alt="" coords="861,57,1007,113"/>
<area shape="rect" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca" title="One dimension decomposition." alt="" coords="651,5,813,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,60,603,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f" title="Serial decomposition." alt="" coords="449,125,593,167"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,60,392,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,60,200,101"/>
</map>
</div>

</div>
</div>
<a id="a8121daba3e69d1ef030b6d1e4198dcff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8121daba3e69d1ef030b6d1e4198dcff">&#9670;&nbsp;</a></span>apply_dimension_bounds()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::apply_dimension_bounds </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dim_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dim_processes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>dim_my_rank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applys the local bounds (start, end and size) for a specific dimension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">dim</td><td>The dimension that we are applying </td></tr>
    <tr><td class="paramname">dimSize</td><td>The global size of the dimension </td></tr>
    <tr><td class="paramname">dimProcesses</td><td>Number of processes in the dimension </td></tr>
    <tr><td class="paramname">dimMyRank</td><td>My rank in the dimension </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00227">227</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: dim, dim_size, dim_my_rank, dim_processes</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordtype">integer</span> :: dimension_division, dimension_extra</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    dimension_division = dim_size / dim_processes</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    dimension_extra = dim_size - (dimension_division * dim_processes)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    current_state%local_grid%start(dim) = dimension_division*dim_my_rank + merge(dimension_extra, dim_my_rank, &amp;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;         dimension_extra .lt. dim_my_rank) + 1</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    current_state%local_grid%end(dim) = (current_state%local_grid%start(dim)-1) + dimension_division + &amp;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;         merge(1, 0, dim_my_rank .lt. dimension_extra)</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    current_state%local_grid%size(dim)=(current_state%local_grid%end(dim) - current_state%local_grid%start(dim)) + 1</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    current_state%parallel%my_coords(dim) = dim_my_rank</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a8121daba3e69d1ef030b6d1e4198dcff_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a8121daba3e69d1ef030b6d1e4198dcff_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a8121daba3e69d1ef030b6d1e4198dcff_icgraph" id="anamespacedecomposition__mod_a8121daba3e69d1ef030b6d1e4198dcff_icgraph">
<area shape="rect" title="Applys the local bounds (start, end and size) for a specific dimension." alt="" coords="651,5,817,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,5,603,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,5,392,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,5,200,47"/>
</map>
</div>

</div>
</div>
<a id="a920741992b79bc02ed62cd612451b6f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a920741992b79bc02ed62cd612451b6f3">&#9670;&nbsp;</a></span>apply_halo_information_and_allocate_neighbours()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::apply_halo_information_and_allocate_neighbours </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will apply halo size information and allocated the neighbour array data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">localGrid</td><td>- The local grid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00440">440</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordtype">integer</span> :: n_dim, n_corners,total_halo_size_XY_dim</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordtype">integer</span> :: halo_depth</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160; </div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="comment">! Read halo_depth value</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    halo_depth = options_get_integer(current_state%options_database, <span class="stringliteral">&quot;halo_depth&quot;</span>)</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <span class="comment">! There is no halo_depth in Z direction</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    current_state%local_grid%halo_size(z_index) = 0</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    current_state%local_grid%halo_size(y_index) = halo_depth</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    current_state%local_grid%halo_size(x_index) = halo_depth</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160; </div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <span class="comment">! Left and right or Up and down</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    total_halo_size_xy_dim  = current_state%local_grid%halo_size(x_index)*2</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="comment">! Total number of dimensions</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    n_dim = 3</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;    <span class="comment">! Total number of corners</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    n_corners = 4</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keyword">allocate</span>(current_state%local_grid%neighbours(n_dim,total_halo_size_xy_dim), &amp;</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;         current_state%local_grid%corner_neighbours(n_corners,halo_depth))</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a920741992b79bc02ed62cd612451b6f3_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a920741992b79bc02ed62cd612451b6f3_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a920741992b79bc02ed62cd612451b6f3_icgraph" id="anamespacedecomposition__mod_a920741992b79bc02ed62cd612451b6f3_icgraph">
<area shape="rect" title="Will apply halo size information and allocated the neighbour array data." alt="" coords="861,57,1033,113"/>
<area shape="rect" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca" title="One dimension decomposition." alt="" coords="651,5,813,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,60,603,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f" title="Serial decomposition." alt="" coords="449,125,593,167"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,60,392,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,60,200,101"/>
</map>
</div>

</div>
</div>
<a id="a8899c100721c3f61f744b7ef2fa4a301"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8899c100721c3f61f744b7ef2fa4a301">&#9670;&nbsp;</a></span>apply_two_dim_neighbour_information()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::apply_two_dim_neighbour_information </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>y_procs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>x_procs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(2), intent(in)&#160;</td>
          <td class="paramname"><em>coords</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will apply the two dimensional neighbour information. This implements the wrap around aspect if there is not an immediate neighbour in a dimensional direction. Currently assumes that the halo is on the entire neighbour process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">yProcs</td><td>Number of processes in the y dimension </td></tr>
    <tr><td class="paramname">xProcs</td><td>Number of processes in the x dimension </td></tr>
    <tr><td class="paramname">coords</td><td>Y-X coordinates of the current process </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00124">124</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160; </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: y_procs, x_procs, coords(2)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">integer</span> :: ierr, i, halo_depth</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    current_state%parallel%wrapped_around=.false.</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keyword">call </span>mpi_cart_shift(current_state%parallel%neighbour_comm, 0, 1, current_state%local_grid%neighbours(y_index,1), &amp;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;         current_state%local_grid%neighbours(y_index,3), ierr)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordflow">if</span> (current_state%local_grid%neighbours(y_index,1) .lt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm,&amp;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;           (/y_procs-1, coords(2)/),  current_state%local_grid%neighbours(y_index,1), ierr)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      current_state%parallel%wrapped_around(y_index, 1)=.true.</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">if</span> (current_state%local_grid%neighbours(y_index,3) .lt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm, &amp;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         (/0, coords(2)/),  current_state%local_grid%neighbours(y_index,3), ierr)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      current_state%parallel%wrapped_around(y_index, 2)=.true.</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keywordflow">    end if</span>    </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <span class="comment">! find out who is on the left and on the right</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">call </span>mpi_cart_shift(current_state%parallel%neighbour_comm, 1, 1, &amp;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         current_state%local_grid%neighbours(x_index,1), &amp;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         current_state%local_grid%neighbours(x_index,3), ierr)</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">if</span> (current_state%local_grid%neighbours(x_index,1) .lt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm, &amp;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;         (/coords(1), x_procs-1/),  current_state%local_grid%neighbours(x_index,1), ierr)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      current_state%parallel%wrapped_around(x_index, 1)=.true.</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (current_state%local_grid%neighbours(x_index,3) .lt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm, &amp;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         (/coords(1), 0/),  current_state%local_grid%neighbours(x_index,3), ierr)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      current_state%parallel%wrapped_around(x_index, 2)=.true.</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">! the second column is on the same rank than the first one</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    halo_depth = options_get_integer(current_state%options_database, <span class="stringliteral">&quot;halo_depth&quot;</span>)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keywordflow">do</span> i = 1, halo_depth -1</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;       current_state%local_grid%neighbours(y_index,i+1) = &amp;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            current_state%local_grid%neighbours(y_index,i)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;       current_state%local_grid%neighbours(y_index,i+halo_depth + 1) = &amp;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            current_state%local_grid%neighbours(y_index,i+halo_depth)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;       current_state%local_grid%neighbours(x_index,i+1) = &amp;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            current_state%local_grid%neighbours(x_index,i)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;       current_state%local_grid%neighbours(x_index,i+halo_depth + 1) = &amp;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            current_state%local_grid%neighbours(x_index,i+halo_depth)</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">! obtain the rank of the corner neighbours</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm, &amp;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;         (/merge(coords(1)-1, y_procs-1, coords(1) .ge. 1),   &amp;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         merge(coords(2)-1, x_procs-1, coords(2) .ge. 1)/),   &amp;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         current_state%local_grid%corner_neighbours(1,1), ierr)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm, &amp;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;         (/merge(coords(1)-1, y_procs-1, coords(1) .ge. 1),   &amp;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         merge(coords(2)+1, 0, coords(2) .lt. x_procs-1)/),   &amp;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;         current_state%local_grid%corner_neighbours(2,1), ierr)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm, &amp;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;         (/merge(coords(1)+1, 0, coords(1) .lt. y_procs-1),   &amp;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;         merge(coords(2)-1, x_procs-1, coords(2) .ge. 1)/),   &amp;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;         current_state%local_grid%corner_neighbours(3,1), ierr)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">call </span>mpi_cart_rank(current_state%parallel%neighbour_comm, &amp;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         (/merge(coords(1)+1, 0, coords(1) .lt. y_procs-1),   &amp;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;         merge(coords(2)+1, 0, coords(2) .lt. x_procs-1)/),   &amp;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;         current_state%local_grid%corner_neighbours(4,1), ierr)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    </div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">!! TODO: hardcoded for halo depth two?</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    current_state%local_grid%corner_neighbours(:,2)=current_state%local_grid%corner_neighbours(:,1)</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a8899c100721c3f61f744b7ef2fa4a301_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a8899c100721c3f61f744b7ef2fa4a301_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a8899c100721c3f61f744b7ef2fa4a301_icgraph" id="anamespacedecomposition__mod_a8899c100721c3f61f744b7ef2fa4a301_icgraph">
<area shape="rect" title="Will apply the two dimensional neighbour information. This implements the wrap around aspect if there..." alt="" coords="651,5,821,61"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,13,603,54"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,13,392,54"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,13,200,54"/>
</map>
</div>

</div>
</div>
<a id="a66a78fad391b823071ec9dda88b23ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66a78fad391b823071ec9dda88b23ab5">&#9670;&nbsp;</a></span>apply_z_dimension_information()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::apply_z_dimension_information </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Applys Z dimension information. As we always decompose into columns then Z is never split and as such is just the entire Z dimension regardless. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00247">247</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    current_state%local_grid%start(z_index) = 1</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    current_state%local_grid%end(z_index) = current_state%global_grid%size(z_index)</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    current_state%local_grid%size(z_index) = current_state%global_grid%size(z_index)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    current_state%parallel%my_coords(z_index) = 0</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    current_state%parallel%dim_sizes(z_index) = 1</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a66a78fad391b823071ec9dda88b23ab5_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a66a78fad391b823071ec9dda88b23ab5_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a66a78fad391b823071ec9dda88b23ab5_icgraph" id="anamespacedecomposition__mod_a66a78fad391b823071ec9dda88b23ab5_icgraph">
<area shape="rect" title="Applys Z dimension information. As we always decompose into columns then Z is never split and as such..." alt="" coords="861,64,1064,105"/>
<area shape="rect" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca" title="One dimension decomposition." alt="" coords="651,5,813,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,60,603,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f" title="Serial decomposition." alt="" coords="449,125,593,167"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,60,392,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,60,200,101"/>
</map>
</div>

</div>
</div>
<a id="a151110f5f60ba70abbdd598e2abe8574"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a151110f5f60ba70abbdd598e2abe8574">&#9670;&nbsp;</a></span>decomposition_get_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structmonc__component__mod_1_1component__descriptor__type.html">component_descriptor_type</a>) function, public decomposition_mod::decomposition_get_descriptor</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides the component descriptor for the core to register. </p>
<dl class="section return"><dt>Returns</dt><dd>The descriptor describing this component </dd></dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00026">26</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    decomposition_get_descriptor%name=<span class="stringliteral">&quot;decomposition&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    decomposition_get_descriptor%version=0.1</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    decomposition_get_descriptor%initialisation=&gt;init_callback</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a151110f5f60ba70abbdd598e2abe8574_cgraph.png" border="0" usemap="#anamespacedecomposition__mod_a151110f5f60ba70abbdd598e2abe8574_cgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a151110f5f60ba70abbdd598e2abe8574_cgraph" id="anamespacedecomposition__mod_a151110f5f60ba70abbdd598e2abe8574_cgraph">
<area shape="rect" title="Provides the component descriptor for the core to register." alt="" coords="5,165,200,207"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,165,392,207"/>
<area shape="rect" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca" title="One dimension decomposition." alt="" coords="655,165,818,207"/>
<area shape="rect" href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f" title="Serial decomposition." alt="" coords="665,48,809,89"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,224,603,265"/>
<area shape="rect" href="namespacedecomposition__mod.html#ac4924f4aebf06ebe72b40c202e42b113" title="Calculates and applys the start and end bounds of the local data. Held locally is the halo and local ..." alt="" coords="899,9,1045,65"/>
<area shape="rect" href="namespacedecomposition__mod.html#a920741992b79bc02ed62cd612451b6f3" title="Will apply halo size information and allocated the neighbour array data." alt="" coords="886,169,1058,225"/>
<area shape="rect" href="namespacedecomposition__mod.html#a66a78fad391b823071ec9dda88b23ab5" title="Applys Z dimension information. As we always decompose into columns then Z is never split and as such..." alt="" coords="871,248,1073,289"/>
<area shape="rect" href="namespacedecomposition__mod.html#a25442f953a87d031a255badd5a16030c" title="Dumps out information about the decomposition at DEBUG level." alt="" coords="895,89,1049,145"/>
<area shape="rect" href="namespacedecomposition__mod.html#a8121daba3e69d1ef030b6d1e4198dcff" title="Applys the local bounds (start, end and size) for a specific dimension." alt="" coords="653,333,820,375"/>
<area shape="rect" href="namespacedecomposition__mod.html#a8899c100721c3f61f744b7ef2fa4a301" title="Will apply the two dimensional neighbour information. This implements the wrap around aspect if there..." alt="" coords="651,398,822,454"/>
<area shape="rect" href="namespacedecomposition__mod.html#abf15e5f66826309bf60a76fb41e6e6ae" title="Determines whether or not the planned two dimensional decomposition will fit into the X and Y global ..." alt="" coords="651,478,823,534"/>
</map>
</div>

</div>
</div>
<a id="a25442f953a87d031a255badd5a16030c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25442f953a87d031a255badd5a16030c">&#9670;&nbsp;</a></span>display_decomposition_information()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::display_decomposition_information </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>decomp_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dumps out information about the decomposition at DEBUG level. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
    <tr><td class="paramname">decompName</td><td>The name of the decomposition which has been selected </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00384">384</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: decomp_name</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9">log_get_logging_level</a>() .le. <a class="code" href="namespacelogging__mod.html#aca1c925af27b4d533d548bfe69a819f3">log_debug</a>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;       <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#aca1c925af27b4d533d548bfe69a819f3">log_debug</a>, decomp_name//<span class="stringliteral">&quot; rank=&quot;</span>//trim(conv_to_string(current_state%parallel%my_rank))//&amp;</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <span class="stringliteral">&quot;: W=(&quot;</span>//trim(conv_to_string(current_state%local_grid%start(z_index)))//<span class="stringliteral">&quot;-&gt;&quot;</span>&amp;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            //trim(conv_to_string(current_state%local_grid%end(z_index)))//<span class="stringliteral">&quot;) V=(&quot;</span>//trim(conv_to_string(&amp;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            current_state%local_grid%start(y_index)))//<span class="stringliteral">&quot;-&gt;&quot;</span>//trim(conv_to_string(current_state%local_grid%end(&amp;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            y_index)))//<span class="stringliteral">&quot;) U=(&quot;</span>//trim(conv_to_string(current_state%local_grid%start(x_index)))//&amp;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            <span class="stringliteral">&quot;-&gt;&quot;</span>//trim(conv_to_string(current_state%local_grid%end(x_index)))//<span class="stringliteral">&quot;)&quot;</span>)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;       <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#aca1c925af27b4d533d548bfe69a819f3">log_debug</a>, <span class="stringliteral">&quot;Neighbours of &quot;</span>//trim(conv_to_string(current_state%parallel%my_rank))//<span class="stringliteral">&quot;: y=([&quot;</span>//&amp;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(y_index,1)))//<span class="stringliteral">&quot;],[&quot;</span>//&amp;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(y_index,2)))//<span class="stringliteral">&quot;]) x=([&quot;</span>//&amp;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(x_index,1)))//<span class="stringliteral">&quot;,&quot;</span>//&amp;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(x_index,2)))//<span class="stringliteral">&quot;],[&quot;</span>//&amp;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(x_index,3)))//<span class="stringliteral">&quot;,&quot;</span>//&amp;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(x_index,4)))//<span class="stringliteral">&quot;])&quot;</span>)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;       <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">log_master_log</a>(<a class="code" href="namespacelogging__mod.html#aca1c925af27b4d533d548bfe69a819f3">log_debug</a>, <span class="stringliteral">&quot;Halo size z=&quot;</span>//&amp;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            trim(conv_to_string(current_state%local_grid%halo_size(z_index)))//&amp;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            <span class="stringliteral">&quot; y=&quot;</span>//trim(conv_to_string(current_state%local_grid%halo_size(y_index)))//<span class="stringliteral">&quot; x=&quot;</span>//&amp;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            trim(conv_to_string(current_state%local_grid%halo_size(x_index))))</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">log_master_log</a>(<a class="code" href="namespacelogging__mod.html#ac7d5c1fcb00d54277580c10556aa78a8">log_info</a>, <span class="stringliteral">&quot;Decomposed &quot;</span>//trim(conv_to_string(current_state%parallel%processes))//&amp;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         <span class="stringliteral">&quot; processes via &#39;&quot;</span>//decomp_name// <span class="stringliteral">&quot;&#39; into z=&quot;</span>//trim(conv_to_string(current_state%parallel%dim_sizes(&amp;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;         z_index)))//<span class="stringliteral">&quot; y=&quot;</span>//trim(conv_to_string(current_state%parallel%dim_sizes(y_index)))//<span class="stringliteral">&quot; x=&quot;</span>//&amp;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         trim(conv_to_string(current_state%parallel%dim_sizes(x_index))))</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a25442f953a87d031a255badd5a16030c_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a25442f953a87d031a255badd5a16030c_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a25442f953a87d031a255badd5a16030c_icgraph" id="anamespacedecomposition__mod_a25442f953a87d031a255badd5a16030c_icgraph">
<area shape="rect" title="Dumps out information about the decomposition at DEBUG level." alt="" coords="861,57,1015,113"/>
<area shape="rect" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca" title="One dimension decomposition." alt="" coords="651,5,813,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,60,603,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f" title="Serial decomposition." alt="" coords="449,125,593,167"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,60,392,101"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,60,200,101"/>
</map>
</div>

</div>
</div>
<a id="abf15e5f66826309bf60a76fb41e6e6ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf15e5f66826309bf60a76fb41e6e6ae">&#9670;&nbsp;</a></span>does_two_dim_work_with_domain_size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical function decomposition_mod::does_two_dim_work_with_domain_size </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>y_dims</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>x_dims</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines whether or not the planned two dimensional decomposition will fit into the X and Y global solutions size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">y_dims</td><td>Parallel process dimensions in Y </td></tr>
    <tr><td class="paramname">x_dims</td><td>Parallel process dimensions in X </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00202">202</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: y_dims, x_dims</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(y_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;       <span class="keywordflow">if</span> (floor(real(current_state%global_grid%size(y_index)) / y_dims) .lt. 2) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          does_two_dim_work_with_domain_size=.false.</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <span class="keywordflow">return</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="keywordflow">       end if</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%active(x_index)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;       <span class="keywordflow">if</span> (floor(real(current_state%global_grid%size(x_index)) / x_dims) .lt. 2) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          does_two_dim_work_with_domain_size=.false.</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          <span class="keywordflow">return</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="keywordflow">       end if</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    does_two_dim_work_with_domain_size=.true.</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_abf15e5f66826309bf60a76fb41e6e6ae_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_abf15e5f66826309bf60a76fb41e6e6ae_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_abf15e5f66826309bf60a76fb41e6e6ae_icgraph" id="anamespacedecomposition__mod_abf15e5f66826309bf60a76fb41e6e6ae_icgraph">
<area shape="rect" title="Determines whether or not the planned two dimensional decomposition will fit into the X and Y global ..." alt="" coords="651,5,823,61"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,13,603,54"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,13,392,54"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,13,200,54"/>
</map>
</div>

</div>
</div>
<a id="a17f59ea058a28a374074591e78072eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17f59ea058a28a374074591e78072eb1">&#9670;&nbsp;</a></span>init_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::init_callback </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The initialisation hook. Will set up the appropriate decomposition. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00034">34</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160; </div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: method</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160; </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    method=options_get_string(current_state%options_database, <span class="stringliteral">&quot;decomposition_method&quot;</span>)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="keywordflow">if</span> (method .eq. <span class="stringliteral">&quot;onedim&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;       current_state%parallel%decomposition_procedure =&gt; one_dim_decomposition</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (method .eq. <span class="stringliteral">&quot;twodim&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;       current_state%parallel%decomposition_procedure =&gt; two_dim_decomposition</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;       current_state%parallel%decomposition_procedure =&gt; serial_decomposition</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;       <span class="keywordflow">if</span> (method .ne. <span class="stringliteral">&quot;serial&quot;</span>) <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">log_warn</a>, <span class="stringliteral">&quot;Decomposition method &quot;</span>//trim(method)//&amp;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="stringliteral">&quot; not recognised so defaulting to serial&quot;</span>)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_cgraph.png" border="0" usemap="#anamespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_cgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_cgraph" id="anamespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_cgraph">
<area shape="rect" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="5,165,149,207"/>
<area shape="rect" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca" title="One dimension decomposition." alt="" coords="413,165,575,207"/>
<area shape="rect" href="namespacedecomposition__mod.html#a85b4c58c4c9542846802d6ec0ac3283f" title="Serial decomposition." alt="" coords="422,48,566,89"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="197,224,360,265"/>
<area shape="rect" href="namespacedecomposition__mod.html#ac4924f4aebf06ebe72b40c202e42b113" title="Calculates and applys the start and end bounds of the local data. Held locally is the halo and local ..." alt="" coords="657,9,802,65"/>
<area shape="rect" href="namespacedecomposition__mod.html#a920741992b79bc02ed62cd612451b6f3" title="Will apply halo size information and allocated the neighbour array data." alt="" coords="643,169,815,225"/>
<area shape="rect" href="namespacedecomposition__mod.html#a66a78fad391b823071ec9dda88b23ab5" title="Applys Z dimension information. As we always decompose into columns then Z is never split and as such..." alt="" coords="628,248,831,289"/>
<area shape="rect" href="namespacedecomposition__mod.html#a25442f953a87d031a255badd5a16030c" title="Dumps out information about the decomposition at DEBUG level." alt="" coords="653,89,806,145"/>
<area shape="rect" href="namespacedecomposition__mod.html#a8121daba3e69d1ef030b6d1e4198dcff" title="Applys the local bounds (start, end and size) for a specific dimension." alt="" coords="411,333,577,375"/>
<area shape="rect" href="namespacedecomposition__mod.html#a8899c100721c3f61f744b7ef2fa4a301" title="Will apply the two dimensional neighbour information. This implements the wrap around aspect if there..." alt="" coords="409,398,579,454"/>
<area shape="rect" href="namespacedecomposition__mod.html#abf15e5f66826309bf60a76fb41e6e6ae" title="Determines whether or not the planned two dimensional decomposition will fit into the X and Y global ..." alt="" coords="408,478,580,534"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_icgraph" id="anamespacedecomposition__mod_a17f59ea058a28a374074591e78072eb1_icgraph">
<area shape="rect" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,5,392,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,5,200,47"/>
</map>
</div>

</div>
</div>
<a id="a938ecd9b19f1c729692e8b15838bbdca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a938ecd9b19f1c729692e8b15838bbdca">&#9670;&nbsp;</a></span>one_dim_decomposition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::one_dim_decomposition </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>One dimension decomposition. </p>
<p>Will decompose across the X or Y axis depending upon which is greater - it selects the greater to maximise the decomposition </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00262">262</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordtype">integer</span> :: x_size, y_size, split_size, dimension_division, dimension_extra</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keyword">call </span>apply_halo_information_and_allocate_neighbours(current_state)</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160; </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    current_state%parallel%wrapped_around=.false.</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160; </div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    x_size = merge(current_state%global_grid%size(x_index), 1, current_state%global_grid%active(x_index))</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    y_size = merge(current_state%global_grid%size(y_index), 1, current_state%global_grid%active(y_index))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160; </div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    split_size = merge(x_size, y_size, x_size .gt. y_size)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    dimension_division = split_size / current_state%parallel%processes</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    dimension_extra = split_size - (dimension_division * current_state%parallel%processes)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    current_state%local_grid%active = current_state%global_grid%active</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    current_state%local_grid%dimensions = current_state%global_grid%dimensions</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    current_state%parallel%neighbour_comm = current_state%parallel%monc_communicator</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keyword">call </span>apply_z_dimension_information(current_state)         </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span> (x_size .gt. y_size) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="comment">! Decompose in X</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      current_state%local_grid%start(y_index)=1</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      current_state%local_grid%end(y_index)=y_size</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      current_state%local_grid%size(y_index)=y_size</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      current_state%parallel%my_coords(y_index)=0</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      current_state%parallel%dim_sizes(y_index)=1</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      current_state%local_grid%start(x_index)=dimension_division*current_state%parallel%my_rank+merge(&amp;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;           dimension_extra, current_state%parallel%my_rank, dimension_extra .lt. current_state%parallel%my_rank) + 1</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      current_state%local_grid%end(x_index)=(current_state%local_grid%start(x_index)-1) + dimension_division + merge(&amp;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;           1, 0, current_state%parallel%my_rank .lt. dimension_extra)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      current_state%local_grid%size(x_index)=(current_state%local_grid%end(x_index) - current_state%local_grid%start(x_index)) + 1</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      current_state%parallel%my_coords(x_index) = current_state%parallel%my_rank</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      current_state%parallel%dim_sizes(x_index) = current_state%parallel%processes</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      current_state%local_grid%neighbours(y_index,:) = current_state%parallel%my_rank</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">! Currently assume same PID in single direction (TODO: relax this restraint)</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      current_state%local_grid%neighbours(x_index,1:2) = merge(current_state%parallel%my_rank, current_state%parallel%processes, &amp;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;           current_state%parallel%my_rank .gt. 0) - 1</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      current_state%parallel%wrapped_around(x_index, 1)=&amp;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;           current_state%local_grid%neighbours(x_index,1)==current_state%parallel%processes-1</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      current_state%local_grid%neighbours(x_index,3:4) = merge(current_state%parallel%my_rank+1, 0, &amp;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;           current_state%parallel%my_rank .lt. current_state%parallel%processes-1)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      current_state%parallel%wrapped_around(x_index, 2)=current_state%local_grid%neighbours(x_index,3)==0</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      current_state%local_grid%corner_neighbours(1,:)=current_state%local_grid%neighbours(x_index,1)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      current_state%local_grid%corner_neighbours(3,:)=current_state%local_grid%neighbours(x_index,1)</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      current_state%local_grid%corner_neighbours(2,:)=current_state%local_grid%neighbours(x_index,3)</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      current_state%local_grid%corner_neighbours(4,:)=current_state%local_grid%neighbours(x_index,3)</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      current_state%parallel%wrapped_around(y_index, :)=.true.</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">else</span> </div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="comment">! Decompose in Y</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      current_state%local_grid%start(x_index)=1</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      current_state%local_grid%end(x_index)=x_size</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      current_state%local_grid%size(x_index)=x_size</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      current_state%parallel%my_coords(x_index)=0</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;      current_state%parallel%dim_sizes(x_index)=1</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      current_state%local_grid%start(y_index)=dimension_division*current_state%parallel%my_rank+merge(&amp;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;           dimension_extra, current_state%parallel%my_rank, dimension_extra .lt. current_state%parallel%my_rank) + 1</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      current_state%local_grid%end(y_index)=(current_state%local_grid%start(y_index)-1) + dimension_division + merge(&amp;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;           1, 0, current_state%parallel%my_rank .lt. dimension_extra)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      current_state%local_grid%size(y_index)=(current_state%local_grid%end(y_index) - current_state%local_grid%start(y_index)) + 1</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      current_state%parallel%my_coords(y_index)=current_state%parallel%my_rank</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      current_state%parallel%dim_sizes(y_index) = current_state%parallel%processes</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      current_state%local_grid%neighbours(x_index,:) = current_state%parallel%my_rank</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      current_state%local_grid%neighbours(y_index,1:2) = merge(current_state%parallel%my_rank, current_state%parallel%processes, &amp;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;           current_state%parallel%my_rank .gt. 0) - 1</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      current_state%parallel%wrapped_around(y_index, 1)=&amp;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;           current_state%local_grid%neighbours(y_index,1)==current_state%parallel%processes-1</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      current_state%local_grid%neighbours(y_index,3:4) = merge(current_state%parallel%my_rank+1, 0, &amp;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;           current_state%parallel%my_rank .lt. current_state%parallel%processes-1)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      current_state%parallel%wrapped_around(y_index, 2)=current_state%local_grid%neighbours(y_index,3)==0</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      current_state%local_grid%corner_neighbours(1:2,:)=current_state%local_grid%neighbours(y_index,1)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      current_state%local_grid%corner_neighbours(3:4,:)=current_state%local_grid%neighbours(y_index,3)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      current_state%parallel%wrapped_around(x_index, :)=.true.</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keyword">call </span>apply_data_start_end_bounds(current_state%local_grid)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    <span class="keyword">call </span>display_decomposition_information(current_state, <span class="stringliteral">&quot;OneDim&quot;</span>)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_cgraph.png" border="0" usemap="#anamespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_cgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_cgraph" id="anamespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_cgraph">
<area shape="rect" title="One dimension decomposition." alt="" coords="5,129,168,170"/>
<area shape="rect" href="namespacedecomposition__mod.html#ac4924f4aebf06ebe72b40c202e42b113" title="Calculates and applys the start and end bounds of the local data. Held locally is the halo and local ..." alt="" coords="245,5,390,61"/>
<area shape="rect" href="namespacedecomposition__mod.html#a920741992b79bc02ed62cd612451b6f3" title="Will apply halo size information and allocated the neighbour array data." alt="" coords="231,85,403,141"/>
<area shape="rect" href="namespacedecomposition__mod.html#a66a78fad391b823071ec9dda88b23ab5" title="Applys Z dimension information. As we always decompose into columns then Z is never split and as such..." alt="" coords="216,165,419,206"/>
<area shape="rect" href="namespacedecomposition__mod.html#a25442f953a87d031a255badd5a16030c" title="Dumps out information about the decomposition at DEBUG level." alt="" coords="241,229,394,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_icgraph" id="anamespacedecomposition__mod_a938ecd9b19f1c729692e8b15838bbdca_icgraph">
<area shape="rect" title="One dimension decomposition." alt="" coords="651,5,813,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,5,392,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a88c9442c20d751209aa5effbf9949afb" title="Decomposition into two dimensions." alt="" coords="440,35,603,76"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,5,200,47"/>
</map>
</div>

</div>
</div>
<a id="a85b4c58c4c9542846802d6ec0ac3283f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b4c58c4c9542846802d6ec0ac3283f">&#9670;&nbsp;</a></span>serial_decomposition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::serial_decomposition </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serial decomposition. </p>
<p>Simply places the entire domain onto the one process </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model <a class="el" href="namespacestate__mod.html" title="The model state which represents the current state of a run.">state_mod</a> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00346">346</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">call </span>apply_halo_information_and_allocate_neighbours(current_state)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    current_state%local_grid%active = current_state%global_grid%active</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    current_state%local_grid%dimensions = current_state%global_grid%dimensions</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    current_state%parallel%neighbour_comm = current_state%parallel%monc_communicator</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keyword">call </span>apply_z_dimension_information(current_state)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160; </div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    current_state%local_grid%start(y_index)=1</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    current_state%local_grid%start(x_index)=1</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    current_state%parallel%my_coords(y_index)=0</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    current_state%parallel%my_coords(x_index)=0</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    current_state%parallel%dim_sizes(y_index)=0</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    current_state%parallel%dim_sizes(x_index)=0</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    current_state%local_grid%end(x_index)= &amp;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;         merge(current_state%global_grid%size(x_index), 1, current_state%global_grid%active(x_index))</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    current_state%local_grid%size(x_index)=current_state%local_grid%end(x_index)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    current_state%local_grid%end(y_index)=&amp;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         merge(current_state%global_grid%size(y_index), 1, current_state%global_grid%active(y_index))</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    current_state%local_grid%size(y_index)=current_state%local_grid%end(y_index)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160; </div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    current_state%local_grid%neighbours(x_index,:) = current_state%parallel%my_rank</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    current_state%local_grid%neighbours(y_index,:) = current_state%parallel%my_rank</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    current_state%local_grid%corner_neighbours=current_state%parallel%my_rank</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    current_state%parallel%wrapped_around=.true.</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160; </div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keyword">call </span>apply_data_start_end_bounds(current_state%local_grid)</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keyword">call </span>display_decomposition_information(current_state, <span class="stringliteral">&quot;Serial&quot;</span>)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_cgraph.png" border="0" usemap="#anamespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_cgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_cgraph" id="anamespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_cgraph">
<area shape="rect" title="Serial decomposition." alt="" coords="5,129,149,170"/>
<area shape="rect" href="namespacedecomposition__mod.html#ac4924f4aebf06ebe72b40c202e42b113" title="Calculates and applys the start and end bounds of the local data. Held locally is the halo and local ..." alt="" coords="226,5,371,61"/>
<area shape="rect" href="namespacedecomposition__mod.html#a920741992b79bc02ed62cd612451b6f3" title="Will apply halo size information and allocated the neighbour array data." alt="" coords="213,85,385,141"/>
<area shape="rect" href="namespacedecomposition__mod.html#a66a78fad391b823071ec9dda88b23ab5" title="Applys Z dimension information. As we always decompose into columns then Z is never split and as such..." alt="" coords="197,165,400,206"/>
<area shape="rect" href="namespacedecomposition__mod.html#a25442f953a87d031a255badd5a16030c" title="Dumps out information about the decomposition at DEBUG level." alt="" coords="222,229,375,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_icgraph" id="anamespacedecomposition__mod_a85b4c58c4c9542846802d6ec0ac3283f_icgraph">
<area shape="rect" title="Serial decomposition." alt="" coords="440,5,584,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,5,392,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,5,200,47"/>
</map>
</div>

</div>
</div>
<a id="a88c9442c20d751209aa5effbf9949afb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88c9442c20d751209aa5effbf9949afb">&#9670;&nbsp;</a></span>two_dim_decomposition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine decomposition_mod::two_dim_decomposition </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decomposition into two dimensions. </p>
<p>Will currently balance between the x and y dimension as evenly as possible with any extra (odd numbered) processes being added to the X dimension </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="decomposition_8F90_source.html#l00057">57</a> of file <a class="el" href="decomposition_8F90_source.html">decomposition.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordtype">integer</span> :: ierr</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(2)</span> :: coords, distributed_dims</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    current_state%local_grid%active = current_state%global_grid%active</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    current_state%local_grid%dimensions = current_state%global_grid%dimensions</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (current_state%global_grid%dimensions .ne. 3) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;       <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">log_master_log</a>(<a class="code" href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">log_warn</a>, <span class="stringliteral">&quot;Two dimension decomposition selected with only &quot;</span>// &amp;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            trim(conv_to_string(current_state%global_grid%dimensions)) //<span class="stringliteral">&quot; so defaulting to one dimension instead&quot;</span>)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;       <span class="keyword">call </span>one_dim_decomposition(current_state)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;       <span class="keywordflow">return</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    distributed_dims= (/0,0/)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keyword">call </span>mpi_dims_create(current_state%parallel%processes, 2, distributed_dims, ierr)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    current_state%parallel%dim_sizes(z_index)=1</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    current_state%parallel%dim_sizes(y_index) = distributed_dims(1)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    current_state%parallel%dim_sizes(x_index) = distributed_dims(2)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (.not. does_two_dim_work_with_domain_size(current_state, current_state%parallel%dim_sizes(y_index), &amp;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;         current_state%parallel%dim_sizes(x_index))) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;       <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">log_master_log</a>(<a class="code" href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">log_warn</a>, <span class="stringliteral">&quot;Defaulting to one dimension decomposition due to solution size too small&quot;</span>)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;       <span class="keyword">call </span>one_dim_decomposition(current_state)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;       <span class="keywordflow">return</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keyword">call </span>mpi_cart_create(current_state%parallel%monc_communicator, 2, (/distributed_dims(1), distributed_dims(2)/),&amp;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;         (/.false., .false./), .false., current_state%parallel%neighbour_comm, ierr)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keyword">call </span>mpi_cart_coords(current_state%parallel%neighbour_comm, current_state%parallel%my_rank, 2, coords, ierr)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="keyword">call </span>apply_halo_information_and_allocate_neighbours(current_state)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keyword">call </span>apply_z_dimension_information(current_state)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">! sets the limits for each rank in X and Y</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">call </span>apply_dimension_bounds(current_state, y_index, merge(current_state%global_grid%size(y_index), 1, &amp;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;         current_state%global_grid%active(y_index)), distributed_dims(1), coords(1))</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keyword">call </span>apply_dimension_bounds(current_state, x_index, merge(current_state%global_grid%size(x_index), 1, &amp;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;         current_state%global_grid%active(x_index)), distributed_dims(2), coords(2))</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">! get all information about the neighbours and corner neighbours</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">call </span>apply_two_dim_neighbour_information(current_state, distributed_dims(1), distributed_dims(2), coords)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">call </span>apply_data_start_end_bounds(current_state%local_grid)</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160; </div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9">log_get_logging_level</a>() .ge. <a class="code" href="namespacelogging__mod.html#aca1c925af27b4d533d548bfe69a819f3">log_debug</a>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;       <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#aca1c925af27b4d533d548bfe69a819f3">log_debug</a>, <span class="stringliteral">&quot;PID &quot;</span>//trim(conv_to_string(current_state%parallel%my_rank))//<span class="stringliteral">&quot;: y=&quot;</span>//&amp;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            trim(conv_to_string(current_state%parallel%my_coords(y_index)))//&amp;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            <span class="stringliteral">&quot; x=&quot;</span>//trim(conv_to_string(current_state%parallel%my_coords(x_index)))//<span class="stringliteral">&quot; ny-1=&quot;</span>//&amp;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(y_index,1)))//&amp;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="stringliteral">&quot; ny+1=&quot;</span>//trim(conv_to_string(current_state%local_grid%neighbours(y_index,3)))//<span class="stringliteral">&quot; nx-1=&quot;</span>//&amp;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(x_index,1)))//<span class="stringliteral">&quot; nx+1=&quot;</span>//&amp;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            trim(conv_to_string(current_state%local_grid%neighbours(x_index,3))))</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keyword">call </span>display_decomposition_information(current_state, <span class="stringliteral">&quot;TwoDim&quot;</span>)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_cgraph.png" border="0" usemap="#anamespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_cgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_cgraph" id="anamespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_cgraph">
<area shape="rect" title="Decomposition into two dimensions." alt="" coords="5,210,168,251"/>
<area shape="rect" href="namespacedecomposition__mod.html#ac4924f4aebf06ebe72b40c202e42b113" title="Calculates and applys the start and end bounds of the local data. Held locally is the halo and local ..." alt="" coords="465,5,610,61"/>
<area shape="rect" href="namespacedecomposition__mod.html#a8121daba3e69d1ef030b6d1e4198dcff" title="Applys the local bounds (start, end and size) for a specific dimension." alt="" coords="219,294,385,335"/>
<area shape="rect" href="namespacedecomposition__mod.html#a920741992b79bc02ed62cd612451b6f3" title="Will apply halo size information and allocated the neighbour array data." alt="" coords="451,85,623,141"/>
<area shape="rect" href="namespacedecomposition__mod.html#a8899c100721c3f61f744b7ef2fa4a301" title="Will apply the two dimensional neighbour information. This implements the wrap around aspect if there..." alt="" coords="217,359,387,415"/>
<area shape="rect" href="namespacedecomposition__mod.html#a66a78fad391b823071ec9dda88b23ab5" title="Applys Z dimension information. As we always decompose into columns then Z is never split and as such..." alt="" coords="436,165,639,206"/>
<area shape="rect" href="namespacedecomposition__mod.html#a25442f953a87d031a255badd5a16030c" title="Dumps out information about the decomposition at DEBUG level." alt="" coords="461,229,614,285"/>
<area shape="rect" href="namespacedecomposition__mod.html#abf15e5f66826309bf60a76fb41e6e6ae" title="Determines whether or not the planned two dimensional decomposition will fit into the X and Y global ..." alt="" coords="216,439,388,495"/>
<area shape="rect" href="namespacedecomposition__mod.html#a938ecd9b19f1c729692e8b15838bbdca" title="One dimension decomposition." alt="" coords="221,126,383,167"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_icgraph.png" border="0" usemap="#anamespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_icgraph" alt=""/></div>
<map name="namespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_icgraph" id="anamespacedecomposition__mod_a88c9442c20d751209aa5effbf9949afb_icgraph">
<area shape="rect" title="Decomposition into two dimensions." alt="" coords="440,5,603,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a17f59ea058a28a374074591e78072eb1" title="The initialisation hook. Will set up the appropriate decomposition." alt="" coords="248,5,392,47"/>
<area shape="rect" href="namespacedecomposition__mod.html#a151110f5f60ba70abbdd598e2abe8574" title="Provides the component descriptor for the core to register." alt="" coords="5,5,200,47"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_a10e28447dd10ef9f92d205bc98fb26d3"><div class="ttname"><a href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">logging_mod::log_warn</a></div><div class="ttdeci">integer, parameter, public log_warn</div><div class="ttdoc">Log WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00012">logging.F90:12</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac7d5c1fcb00d54277580c10556aa78a8"><div class="ttname"><a href="namespacelogging__mod.html#ac7d5c1fcb00d54277580c10556aa78a8">logging_mod::log_info</a></div><div class="ttdeci">integer, parameter, public log_info</div><div class="ttdoc">Log INFO, WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00013">logging.F90:13</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac4f13ac385499c85190cb184030e4f45"><div class="ttname"><a href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">logging_mod::log_log</a></div><div class="ttdeci">subroutine, public log_log(level, message, str)</div><div class="ttdoc">Logs a message at the specified level. If the level is above the current level then the message is ig...</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00074">logging.F90:75</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ae0d255e756059bc76b2f4291825e59c9"><div class="ttname"><a href="namespacelogging__mod.html#ae0d255e756059bc76b2f4291825e59c9">logging_mod::log_get_logging_level</a></div><div class="ttdeci">integer function, public log_get_logging_level()</div><div class="ttdoc">Retrieves the current logging level.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00121">logging.F90:122</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_aca1c925af27b4d533d548bfe69a819f3"><div class="ttname"><a href="namespacelogging__mod.html#aca1c925af27b4d533d548bfe69a819f3">logging_mod::log_debug</a></div><div class="ttdeci">integer, parameter, public log_debug</div><div class="ttdoc">Log DEBUG, INFO, WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00014">logging.F90:14</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ad95937a250467334622daeb5cff78c20"><div class="ttname"><a href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">logging_mod::log_master_log</a></div><div class="ttdeci">subroutine, public log_master_log(level, message)</div><div class="ttdoc">Will log just from the master process.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00046">logging.F90:47</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
