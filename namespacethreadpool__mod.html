<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: threadpool_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">threadpool_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is a thread pool and the single management "main" thread will spawn out free threads in the pool to perform specific work. If there are no free threads then it will block until one becomes available. It uses ForThreads, which is a wrapper around pthreads. The thread pool works by creating a number of threads and then passing the work to these threads, rather than creating a new thread for each piece of work.  
<a href="namespacethreadpool__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">interface &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfacethreadpool__mod_1_1thread__procedure.html">thread_procedure</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The thread call procedure interface.  <a href="interfacethreadpool__mod_1_1thread__procedure.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structthreadpool__mod_1_1threaded__procedure__container__type.html">threaded_procedure_container_type</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wraps the thread procedure with the call itself and the data to pass to it.  <a href="structthreadpool__mod_1_1threaded__procedure__container__type.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a05129ab692ec724d569ff6836d12c876"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a05129ab692ec724d569ff6836d12c876">threadpool_init</a> (io_configuration)</td></tr>
<tr class="memdesc:a05129ab692ec724d569ff6836d12c876"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the thread pool and marks each thread as idle.  <a href="namespacethreadpool__mod.html#a05129ab692ec724d569ff6836d12c876">More...</a><br /></td></tr>
<tr class="separator:a05129ab692ec724d569ff6836d12c876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abed96a43d7cd9921cb465a0675bb9546"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#abed96a43d7cd9921cb465a0675bb9546">threadpool_lock_netcdf_access</a> ()</td></tr>
<tr class="memdesc:abed96a43d7cd9921cb465a0675bb9546"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aquires the NetCDF thread lock, NetCDF is not thread safe so we need to manage thread calls to it.  <a href="namespacethreadpool__mod.html#abed96a43d7cd9921cb465a0675bb9546">More...</a><br /></td></tr>
<tr class="separator:abed96a43d7cd9921cb465a0675bb9546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a894eecb849756ec9d8110153283844ee"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a894eecb849756ec9d8110153283844ee">threadpool_unlock_netcdf_access</a> ()</td></tr>
<tr class="memdesc:a894eecb849756ec9d8110153283844ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases the NetCDF thread lock, NetCDF is not thread safe so we need to manage thread calls to it.  <a href="namespacethreadpool__mod.html#a894eecb849756ec9d8110153283844ee">More...</a><br /></td></tr>
<tr class="separator:a894eecb849756ec9d8110153283844ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66a9d51f29634430ca4ed121947b0132"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a66a9d51f29634430ca4ed121947b0132">threadpool_start_thread</a> (proc, arguments, data_buffer)</td></tr>
<tr class="memdesc:a66a9d51f29634430ca4ed121947b0132"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts an idle thread from the pool to execute a specific procedure with some data. If there is no thread available then this will block until one becomes idle.  <a href="namespacethreadpool__mod.html#a66a9d51f29634430ca4ed121947b0132">More...</a><br /></td></tr>
<tr class="separator:a66a9d51f29634430ca4ed121947b0132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fe6131baabe8a6b73dbb7e4d5b1aa37"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a9fe6131baabe8a6b73dbb7e4d5b1aa37">threadpool_thread_entry_procedure</a> (thread_id)</td></tr>
<tr class="memdesc:a9fe6131baabe8a6b73dbb7e4d5b1aa37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entry point called by each thread creation in the pool, this calls out to the actual procedure to execute and doing it this way allows us to perform some actions before or after which can help with the management of the pool.  <a href="namespacethreadpool__mod.html#a9fe6131baabe8a6b73dbb7e4d5b1aa37">More...</a><br /></td></tr>
<tr class="separator:a9fe6131baabe8a6b73dbb7e4d5b1aa37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a87c0e0335c727f6b9fa99c54aac83a"><td class="memItemLeft" align="right" valign="top">logical function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a2a87c0e0335c727f6b9fa99c54aac83a">threadpool_is_idle</a> ()</td></tr>
<tr class="memdesc:a2a87c0e0335c727f6b9fa99c54aac83a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines whether the thread pool is idle or not (i.e. all threads are idle and waiting for work)  <a href="namespacethreadpool__mod.html#a2a87c0e0335c727f6b9fa99c54aac83a">More...</a><br /></td></tr>
<tr class="separator:a2a87c0e0335c727f6b9fa99c54aac83a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a046d2df1c16a8ca4876b6dbc4d51d323"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a046d2df1c16a8ca4876b6dbc4d51d323">threadpool_deactivate</a> ()</td></tr>
<tr class="memdesc:a046d2df1c16a8ca4876b6dbc4d51d323"><td class="mdescLeft">&#160;</td><td class="mdescRight">This waits for all busy threads to complete and then shuts all the pthreads down. The deactivation and finalisation procedures are split out as we want to deactivate the pool (to ensure no threads are running actions), finalise these actions which might involve destroying mutexes, and then destroying the threading environment in finalisation.  <a href="namespacethreadpool__mod.html#a046d2df1c16a8ca4876b6dbc4d51d323">More...</a><br /></td></tr>
<tr class="separator:a046d2df1c16a8ca4876b6dbc4d51d323"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad29d0b56c938fe741ebaef345cb86fe7"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#ad29d0b56c938fe741ebaef345cb86fe7">threadpool_finalise</a> ()</td></tr>
<tr class="memdesc:ad29d0b56c938fe741ebaef345cb86fe7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalises the thread pool.  <a href="namespacethreadpool__mod.html#ad29d0b56c938fe741ebaef345cb86fe7">More...</a><br /></td></tr>
<tr class="separator:ad29d0b56c938fe741ebaef345cb86fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79c1c7faaf752ec1681acc2bfcce7e16"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a79c1c7faaf752ec1681acc2bfcce7e16">find_idle_thread</a> ()</td></tr>
<tr class="memdesc:a79c1c7faaf752ec1681acc2bfcce7e16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds an idle thread, if one is not available then will block until one becomes free.  <a href="namespacethreadpool__mod.html#a79c1c7faaf752ec1681acc2bfcce7e16">More...</a><br /></td></tr>
<tr class="separator:a79c1c7faaf752ec1681acc2bfcce7e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46884c3dda1e63c2cbaffb985835e64b"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a46884c3dda1e63c2cbaffb985835e64b">get_index_of_idle_thread</a> ()</td></tr>
<tr class="memdesc:a46884c3dda1e63c2cbaffb985835e64b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specifically gets the index of the next idle thread or -1 if they are all busy. This starts from a next suggested idle thread and will wrap around, as often the next thread will be idle rather than searching from the beginning again.  <a href="namespacethreadpool__mod.html#a46884c3dda1e63c2cbaffb985835e64b">More...</a><br /></td></tr>
<tr class="separator:a46884c3dda1e63c2cbaffb985835e64b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64977cc4d8fab28cdbfabd03b5f28d3a"><td class="memItemLeft" align="right" valign="top">subroutine, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a">check_thread_status</a> (ierr)</td></tr>
<tr class="memdesc:a64977cc4d8fab28cdbfabd03b5f28d3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks the error status of any thread operation and reports an error if it failed.  <a href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a">More...</a><br /></td></tr>
<tr class="separator:a64977cc4d8fab28cdbfabd03b5f28d3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad7d0516714fa2516b2786d8f3b71ae90"><td class="memItemLeft" align="right" valign="top">integer, parameter&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#ad7d0516714fa2516b2786d8f3b71ae90">default_thread_pool_size</a> =10</td></tr>
<tr class="memdesc:ad7d0516714fa2516b2786d8f3b71ae90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of threads in the pool.  <a href="namespacethreadpool__mod.html#ad7d0516714fa2516b2786d8f3b71ae90">More...</a><br /></td></tr>
<tr class="separator:ad7d0516714fa2516b2786d8f3b71ae90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51c403e6d28a7ee8246a1ab86533784b"><td class="memItemLeft" align="right" valign="top">logical, dimension(:), allocatable, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a51c403e6d28a7ee8246a1ab86533784b">thread_busy</a></td></tr>
<tr class="separator:a51c403e6d28a7ee8246a1ab86533784b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576d78693bfe32e1516e115392d95147"><td class="memItemLeft" align="right" valign="top">logical, dimension(:), allocatable, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a576d78693bfe32e1516e115392d95147">thread_start</a></td></tr>
<tr class="separator:a576d78693bfe32e1516e115392d95147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbcbb5ae09bb79b34c270b9d1ca3e23"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#aedbcbb5ae09bb79b34c270b9d1ca3e23">thread_ids</a></td></tr>
<tr class="separator:aedbcbb5ae09bb79b34c270b9d1ca3e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1965300ca8a4b0c408a306b7ca1ce498"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a1965300ca8a4b0c408a306b7ca1ce498">thread_pass_data</a></td></tr>
<tr class="separator:a1965300ca8a4b0c408a306b7ca1ce498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c2bb890b5d0b75dcf1879748bb95dc6"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a7c2bb890b5d0b75dcf1879748bb95dc6">activate_thread_condition_variables</a></td></tr>
<tr class="separator:a7c2bb890b5d0b75dcf1879748bb95dc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a328af7e209159b5a5fea2a4f06015a2e"><td class="memItemLeft" align="right" valign="top">integer, dimension(:), allocatable, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a328af7e209159b5a5fea2a4f06015a2e">activate_thread_mutex</a></td></tr>
<tr class="separator:a328af7e209159b5a5fea2a4f06015a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6defef4093bdb19eab5394742524e190"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structthreadpool__mod_1_1threaded__procedure__container__type.html">threaded_procedure_container_type</a>), dimension(:), allocatable, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a6defef4093bdb19eab5394742524e190">thread_entry_containers</a></td></tr>
<tr class="separator:a6defef4093bdb19eab5394742524e190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac05b961cee29f109c8eb1d4482cd0609"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#ac05b961cee29f109c8eb1d4482cd0609">netcdfmutex</a></td></tr>
<tr class="memdesc:ac05b961cee29f109c8eb1d4482cd0609"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex used for controling NetCDF access.  <a href="namespacethreadpool__mod.html#ac05b961cee29f109c8eb1d4482cd0609">More...</a><br /></td></tr>
<tr class="separator:ac05b961cee29f109c8eb1d4482cd0609"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4438ba9795846026d38ab75f88afd899"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a4438ba9795846026d38ab75f88afd899">next_suggested_idle_thread</a></td></tr>
<tr class="separator:a4438ba9795846026d38ab75f88afd899"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a761369a3259ae6cdc2308f71fab61f44"><td class="memItemLeft" align="right" valign="top">logical, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a761369a3259ae6cdc2308f71fab61f44">threadpool_active</a></td></tr>
<tr class="separator:a761369a3259ae6cdc2308f71fab61f44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af047904f5bf45ecf31fcf44729da35af"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#af047904f5bf45ecf31fcf44729da35af">active_threads</a></td></tr>
<tr class="separator:af047904f5bf45ecf31fcf44729da35af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb89aecd148176e33ca7b32da3d60c28"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#acb89aecd148176e33ca7b32da3d60c28">total_number_of_threads</a></td></tr>
<tr class="separator:acb89aecd148176e33ca7b32da3d60c28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a371f81756a9676bdb61b852b136dbde4"><td class="memItemLeft" align="right" valign="top">integer, volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacethreadpool__mod.html#a371f81756a9676bdb61b852b136dbde4">active_scalar_mutex</a></td></tr>
<tr class="separator:a371f81756a9676bdb61b852b136dbde4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a thread pool and the single management "main" thread will spawn out free threads in the pool to perform specific work. If there are no free threads then it will block until one becomes available. It uses ForThreads, which is a wrapper around pthreads. The thread pool works by creating a number of threads and then passing the work to these threads, rather than creating a new thread for each piece of work. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a64977cc4d8fab28cdbfabd03b5f28d3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64977cc4d8fab28cdbfabd03b5f28d3a">&#9670;&nbsp;</a></span>check_thread_status()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public threadpool_mod::check_thread_status </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>ierr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks the error status of any thread operation and reports an error if it failed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ierr</td><td>The error/success flag returned from the ForThreads library, which itself is returned from pthreads </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00228">228</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: ierr</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">if</span> (ierr .ne. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;Pthreads error in IO server, error code=&quot;</span>//conv_to_string(ierr))</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a64977cc4d8fab28cdbfabd03b5f28d3a_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a64977cc4d8fab28cdbfabd03b5f28d3a_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a64977cc4d8fab28cdbfabd03b5f28d3a_cgraph" id="anamespacethreadpool__mod_a64977cc4d8fab28cdbfabd03b5f28d3a_cgraph">
<area shape="rect" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="5,5,160,47"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="208,13,351,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="399,5,565,47"/>
</map>
</div>

</div>
</div>
<a id="a79c1c7faaf752ec1681acc2bfcce7e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79c1c7faaf752ec1681acc2bfcce7e16">&#9670;&nbsp;</a></span>find_idle_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function threadpool_mod::find_idle_thread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds an idle thread, if one is not available then will block until one becomes free. </p>
<dl class="section return"><dt>Returns</dt><dd>The id of the idle thread which can be used </dd></dl>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00201">201</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    find_idle_thread=get_index_of_idle_thread()</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (find_idle_thread == -1)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      find_idle_thread=get_index_of_idle_thread()</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_cgraph" id="anamespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_cgraph">
<area shape="rect" title="Finds an idle thread, if one is not available then will block until one becomes free." alt="" coords="5,5,145,47"/>
<area shape="rect" href="namespacethreadpool__mod.html#a46884c3dda1e63c2cbaffb985835e64b" title="Specifically gets the index of the next idle thread or &#45;1 if they are all busy. This starts from a ne..." alt="" coords="193,5,340,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_icgraph" id="anamespacethreadpool__mod_a79c1c7faaf752ec1681acc2bfcce7e16_icgraph">
<area shape="rect" title="Finds an idle thread, if one is not available then will block until one becomes free." alt="" coords="896,5,1036,47"/>
<area shape="rect" href="namespacethreadpool__mod.html#a66a9d51f29634430ca4ed121947b0132" title="Starts an idle thread from the pool to execute a specific procedure with some data...." alt="" coords="668,5,848,47"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="244,5,395,47"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="443,30,620,86"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,13,196,39"/>
</map>
</div>

</div>
</div>
<a id="a46884c3dda1e63c2cbaffb985835e64b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46884c3dda1e63c2cbaffb985835e64b">&#9670;&nbsp;</a></span>get_index_of_idle_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function threadpool_mod::get_index_of_idle_thread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Specifically gets the index of the next idle thread or -1 if they are all busy. This starts from a next suggested idle thread and will wrap around, as often the next thread will be idle rather than searching from the beginning again. </p>
<dl class="section return"><dt>Returns</dt><dd>The index of the next idle thread or -1 if there is none </dd></dl>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00211">211</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">do</span> i=next_suggested_idle_thread, total_number_of_threads</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">if</span> (.not. thread_busy(i)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        get_index_of_idle_thread=i</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        next_suggested_idle_thread=i+1</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> (next_suggested_idle_thread .gt. total_number_of_threads) next_suggested_idle_thread=1</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">return</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="keywordflow">      end if</span>          </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    next_suggested_idle_thread=1</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    get_index_of_idle_thread=-1</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a46884c3dda1e63c2cbaffb985835e64b_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_a46884c3dda1e63c2cbaffb985835e64b_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a46884c3dda1e63c2cbaffb985835e64b_icgraph" id="anamespacethreadpool__mod_a46884c3dda1e63c2cbaffb985835e64b_icgraph">
<area shape="rect" title="Specifically gets the index of the next idle thread or &#45;1 if they are all busy. This starts from a ne..." alt="" coords="1084,5,1231,47"/>
<area shape="rect" href="namespacethreadpool__mod.html#a79c1c7faaf752ec1681acc2bfcce7e16" title="Finds an idle thread, if one is not available then will block until one becomes free." alt="" coords="896,5,1036,47"/>
<area shape="rect" href="namespacethreadpool__mod.html#a66a9d51f29634430ca4ed121947b0132" title="Starts an idle thread from the pool to execute a specific procedure with some data...." alt="" coords="668,5,848,47"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="244,5,395,47"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="443,30,620,86"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,13,196,39"/>
</map>
</div>

</div>
</div>
<a id="a046d2df1c16a8ca4876b6dbc4d51d323"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a046d2df1c16a8ca4876b6dbc4d51d323">&#9670;&nbsp;</a></span>threadpool_deactivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public threadpool_mod::threadpool_deactivate</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This waits for all busy threads to complete and then shuts all the pthreads down. The deactivation and finalisation procedures are split out as we want to deactivate the pool (to ensure no threads are running actions), finalise these actions which might involve destroying mutexes, and then destroying the threading environment in finalisation. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00173">173</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">pointer</span> :: retval</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keyword">allocate</span>(retval)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    threadpool_active=.false.</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="keywordflow">do</span> i=1, total_number_of_threads</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(activate_thread_mutex(i)))</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_cond_signal(activate_thread_condition_variables(i)))</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(activate_thread_mutex(i)))</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_join(thread_ids(i),retval))</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(activate_thread_mutex(i)))</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_cond_destroy(activate_thread_condition_variables(i)))</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_cgraph" id="anamespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_cgraph">
<area shape="rect" title="This waits for all busy threads to complete and then shuts all the pthreads down. The deactivation an..." alt="" coords="5,195,185,236"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="251,5,405,47"/>
<area shape="rect" href="namespaceforthread__mod.html#ac811875a445858334a1a1531fe837ac4" title=" " alt="" coords="247,71,409,112"/>
<area shape="rect" href="namespaceforthread__mod.html#acdd75cd6d34e33c09165306eef31f159" title=" " alt="" coords="247,136,409,177"/>
<area shape="rect" href="namespaceforthread__mod.html#a822ea6ea0e4c434df5341109cf6c5551" title=" " alt="" coords="233,202,423,229"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="247,253,409,295"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="247,319,409,360"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="247,384,409,425"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="471,13,613,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="661,5,828,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_icgraph" id="anamespacethreadpool__mod_a046d2df1c16a8ca4876b6dbc4d51d323_icgraph">
<area shape="rect" title="This waits for all busy threads to complete and then shuts all the pthreads down. The deactivation an..." alt="" coords="244,5,424,47"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,13,196,39"/>
</map>
</div>

</div>
</div>
<a id="ad29d0b56c938fe741ebaef345cb86fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad29d0b56c938fe741ebaef345cb86fe7">&#9670;&nbsp;</a></span>threadpool_finalise()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public threadpool_mod::threadpool_finalise</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalises the thread pool. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00191">191</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(netcdfmutex))</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_destroy(active_scalar_mutex))</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keyword">deallocate</span>(thread_busy, thread_start, thread_ids, thread_pass_data, activate_thread_condition_variables, &amp;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;           activate_thread_mutex, thread_entry_containers)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_destroy())</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_cgraph" id="anamespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_cgraph">
<area shape="rect" title="Finalises the thread pool." alt="" coords="5,71,185,112"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="237,5,392,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a6d39c9aef57c7c5f1a415f8e1c4130e4" title=" " alt="" coords="233,71,396,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a34912c5c002de467e6b116d65d917881" title=" " alt="" coords="233,136,396,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="444,13,587,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="635,5,801,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_icgraph" id="anamespacethreadpool__mod_ad29d0b56c938fe741ebaef345cb86fe7_icgraph">
<area shape="rect" title="Finalises the thread pool." alt="" coords="244,5,424,47"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,13,196,39"/>
</map>
</div>

</div>
</div>
<a id="a05129ab692ec724d569ff6836d12c876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05129ab692ec724d569ff6836d12c876">&#9670;&nbsp;</a></span>threadpool_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public threadpool_mod::threadpool_init </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structconfiguration__parser__mod_1_1io__configuration__type.html">io_configuration_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>io_configuration</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the thread pool and marks each thread as idle. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00050">50</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">type</span>(io_configuration_type), <span class="keywordtype">intent(inout)</span> :: io_configuration</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160; </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">integer</span> :: n</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160; </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_init())</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_init(netcdfmutex, -1))</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (io_configuration%number_of_threads .ge. 1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      total_number_of_threads=io_configuration%number_of_threads</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;      <span class="keywordflow">if</span> (io_configuration%my_io_rank==0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">log_warn</a>, <span class="stringliteral">&quot;No setting for IO server thread pool size which must be 1 or more so using default size&quot;</span>)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      total_number_of_threads=default_thread_pool_size</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keyword">allocate</span>(thread_busy(total_number_of_threads), thread_start(total_number_of_threads), &amp;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;         thread_ids(total_number_of_threads), thread_pass_data(total_number_of_threads), &amp;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;         activate_thread_condition_variables(total_number_of_threads), activate_thread_mutex(total_number_of_threads), &amp;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;         thread_entry_containers(total_number_of_threads))</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    threadpool_active=.true.</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    active_threads=total_number_of_threads</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    next_suggested_idle_thread=1</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_init(active_scalar_mutex, -1))</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="keywordflow">do</span> n=1, total_number_of_threads</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_cond_init(activate_thread_condition_variables(n), -1))</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_init(activate_thread_mutex(n), -1))</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;      thread_busy(n)=.false.</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      thread_start(n)=.false.        </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;      thread_pass_data(n)=n</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_create(thread_ids(n), -1, threadpool_thread_entry_procedure, thread_pass_data(n)))</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_cgraph" id="anamespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_cgraph">
<area shape="rect" title="Initialises the thread pool and marks each thread as idle." alt="" coords="5,193,209,220"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="496,186,651,227"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="703,102,845,129"/>
<area shape="rect" href="namespaceforthread__mod.html#abe5eeb944b76d5a9578e1fbf646446ac" title=" " alt="" coords="269,127,432,168"/>
<area shape="rect" href="namespaceforthread__mod.html#af30ea01687680b50ce13873f3491fc3a" title=" " alt="" coords="269,62,432,103"/>
<area shape="rect" href="namespaceforthread__mod.html#a2c58c024235a718e3036bc93a8c4e4a8" title=" " alt="" coords="257,244,444,270"/>
<area shape="rect" href="namespaceforthread__mod.html#ab29785b28c1d6bcf13e844b8d1230846" title=" " alt="" coords="269,295,432,336"/>
<area shape="rect" href="namespacethreadpool__mod.html#a9fe6131baabe8a6b73dbb7e4d5b1aa37" title="Entry point called by each thread creation in the pool, this calls out to the actual procedure to exe..." alt="" coords="261,360,441,402"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="893,95,1060,136"/>
<area shape="rect" href="namespaceforthread__data.html#a16705f449f5cc21d7f0d7b51dcd42937" title=" " alt="" coords="505,62,642,103"/>
<area shape="rect" href="namespaceforthread__mod.html#a9456090af3f2762f4f542d232fb7adc0" title=" " alt="" coords="492,295,655,336"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="492,360,655,402"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="492,426,655,467"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_icgraph" id="anamespacethreadpool__mod_a05129ab692ec724d569ff6836d12c876_icgraph">
<area shape="rect" title="Initialises the thread pool and marks each thread as idle." alt="" coords="244,5,448,32"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,5,196,32"/>
</map>
</div>

</div>
</div>
<a id="a2a87c0e0335c727f6b9fa99c54aac83a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a87c0e0335c727f6b9fa99c54aac83a">&#9670;&nbsp;</a></span>threadpool_is_idle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">logical function, public threadpool_mod::threadpool_is_idle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines whether the thread pool is idle or not (i.e. all threads are idle and waiting for work) </p>
<dl class="section return"><dt>Returns</dt><dd>Whether the thread pool is idle </dd></dl>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00163">163</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(active_scalar_mutex))</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    threadpool_is_idle = active_threads==total_number_of_threads</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(active_scalar_mutex))</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_cgraph" id="anamespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_cgraph">
<area shape="rect" title="Determines whether the thread pool is idle or not (i.e. all threads are idle and waiting for work)" alt="" coords="5,71,185,112"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="237,5,392,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="233,71,396,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="233,136,396,177"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="444,13,587,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="635,5,801,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_icgraph" id="anamespacethreadpool__mod_a2a87c0e0335c727f6b9fa99c54aac83a_icgraph">
<area shape="rect" title="Determines whether the thread pool is idle or not (i.e. all threads are idle and waiting for work)" alt="" coords="436,5,616,47"/>
<area shape="rect" href="namespaceio__server__mod.html#ada1b8581f80d696dc8aa636405c73aea" title="Awaits a command or shutdown from MONC processes and other IO servers." alt="" coords="244,5,388,47"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,13,196,39"/>
</map>
</div>

</div>
</div>
<a id="abed96a43d7cd9921cb465a0675bb9546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abed96a43d7cd9921cb465a0675bb9546">&#9670;&nbsp;</a></span>threadpool_lock_netcdf_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public threadpool_mod::threadpool_lock_netcdf_access</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aquires the NetCDF thread lock, NetCDF is not thread safe so we need to manage thread calls to it. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00084">84</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#ifdef ENFORCE_THREAD_SAFETY</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(netcdfmutex))</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#endif</span></div>
<span class="preprocessor"></span></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_abed96a43d7cd9921cb465a0675bb9546_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_abed96a43d7cd9921cb465a0675bb9546_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_abed96a43d7cd9921cb465a0675bb9546_cgraph" id="anamespacethreadpool__mod_abed96a43d7cd9921cb465a0675bb9546_cgraph">
<area shape="rect" title="Aquires the NetCDF thread lock, NetCDF is not thread safe so we need to manage thread calls to it." alt="" coords="5,39,185,80"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="237,5,392,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="233,71,396,112"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="444,13,587,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="635,5,801,47"/>
</map>
</div>

</div>
</div>
<a id="a66a9d51f29634430ca4ed121947b0132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66a9d51f29634430ca4ed121947b0132">&#9670;&nbsp;</a></span>threadpool_start_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public threadpool_mod::threadpool_start_thread </td>
          <td>(</td>
          <td class="paramtype">procedure(<a class="el" href="interfacethreadpool__mod_1_1thread__procedure.html">thread_procedure</a>)&#160;</td>
          <td class="paramname"><em>proc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>arguments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(in), optional, allocatable&#160;</td>
          <td class="paramname"><em>data_buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts an idle thread from the pool to execute a specific procedure with some data. If there is no thread available then this will block until one becomes idle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">proc</td><td>The procedure for the thread to execute </td></tr>
    <tr><td class="paramname">data</td><td>Data to pass into the thread </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00101">101</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordtype">procedure</span>(thread_procedure) :: proc</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(in)</span> :: arguments</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span> :: data_buffer</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordtype">integer</span> :: idle_thread_id</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (.not. threadpool_active) <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;Attemping to start IO thread on deactivated thread pool&quot;</span>)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    idle_thread_id=find_idle_thread()</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (idle_thread_id .ne. -1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      thread_busy(idle_thread_id)=.true.              </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      thread_entry_containers(idle_thread_id)%proc=&gt;proc</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keyword">allocate</span>(thread_entry_containers(idle_thread_id)%arguments(<span class="keyword">size</span>(arguments)))</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      thread_entry_containers(idle_thread_id)%arguments=arguments</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">present</span>(data_buffer)) <span class="keyword">allocate</span>(thread_entry_containers(idle_thread_id)%data_buffer(<span class="keyword">size</span>(data_buffer)), &amp;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;           source=data_buffer)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="comment">! Send the signal to the thread to wake up and start</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(activate_thread_mutex(idle_thread_id)))</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      thread_start(idle_thread_id)=.true.</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_cond_signal(activate_thread_condition_variables(idle_thread_id)))</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(activate_thread_mutex(idle_thread_id)))      </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_cgraph" id="anamespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_cgraph">
<area shape="rect" title="Starts an idle thread from the pool to execute a specific procedure with some data...." alt="" coords="5,156,185,197"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="237,5,392,47"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="446,42,589,69"/>
<area shape="rect" href="namespacethreadpool__mod.html#a79c1c7faaf752ec1681acc2bfcce7e16" title="Finds an idle thread, if one is not available then will block until one becomes free." alt="" coords="245,123,385,164"/>
<area shape="rect" href="namespaceforthread__mod.html#acdd75cd6d34e33c09165306eef31f159" title=" " alt="" coords="233,188,396,229"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="233,253,396,295"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="233,319,396,360"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="639,35,805,76"/>
<area shape="rect" href="namespacethreadpool__mod.html#a46884c3dda1e63c2cbaffb985835e64b" title="Specifically gets the index of the next idle thread or &#45;1 if they are all busy. This starts from a ne..." alt="" coords="444,123,591,164"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_icgraph" id="anamespacethreadpool__mod_a66a9d51f29634430ca4ed121947b0132_icgraph">
<area shape="rect" title="Starts an idle thread from the pool to execute a specific procedure with some data...." alt="" coords="668,5,848,47"/>
<area shape="rect" href="namespaceio__server__mod.html#ab843eee74fe31492952c1c88304730d7" title="Called to handle a specific command that has been recieved." alt="" coords="244,5,395,47"/>
<area shape="rect" href="namespaceio__server__mod.html#a153d99e94dcccfaea63104af86095dce" title="Retrieves the message from MONC off the data channel and throws this to a thread in the thread pool t..." alt="" coords="443,30,620,86"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,13,196,39"/>
</map>
</div>

</div>
</div>
<a id="a9fe6131baabe8a6b73dbb7e4d5b1aa37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fe6131baabe8a6b73dbb7e4d5b1aa37">&#9670;&nbsp;</a></span>threadpool_thread_entry_procedure()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine threadpool_mod::threadpool_thread_entry_procedure </td>
          <td>(</td>
          <td class="paramtype">integer&#160;</td>
          <td class="paramname"><em>thread_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Entry point called by each thread creation in the pool, this calls out to the actual procedure to execute and doing it this way allows us to perform some actions before or after which can help with the management of the pool. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread_id</td><td>The thread pool id (index) of this thread </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00129">129</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordtype">integer</span> :: thread_id</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160; </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keywordflow">do</span> <span class="keywordflow">while</span> (threadpool_active)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(activate_thread_mutex(thread_id)))</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keywordflow">do</span> <span class="keywordflow">while</span> (.not. thread_start(thread_id) .and. threadpool_active)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keyword">call </span>check_thread_status(forthread_cond_wait(activate_thread_condition_variables(thread_id), &amp;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;             activate_thread_mutex(thread_id)))</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(activate_thread_mutex(thread_id)))      </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">if</span> (.not. threadpool_active) <span class="keywordflow">return</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;      thread_busy(thread_id)=.true.</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      thread_start(thread_id)=.false.</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;      </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(active_scalar_mutex))</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      active_threads=active_threads-1</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(active_scalar_mutex))</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(thread_entry_containers(thread_id)%data_buffer)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keyword">call </span>thread_entry_containers(thread_id)%proc(thread_entry_containers(thread_id)%arguments, &amp;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;             data_buffer=thread_entry_containers(thread_id)%data_buffer)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="keyword">deallocate</span>(thread_entry_containers(thread_id)%data_buffer)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keyword">call </span>thread_entry_containers(thread_id)%proc(thread_entry_containers(thread_id)%arguments)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keyword">deallocate</span>(thread_entry_containers(thread_id)%arguments)</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_lock(active_scalar_mutex))</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      active_threads=active_threads+1</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(active_scalar_mutex))</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      thread_busy(thread_id)=.false.</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_cgraph" id="anamespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_cgraph">
<area shape="rect" title="Entry point called by each thread creation in the pool, this calls out to the actual procedure to exe..." alt="" coords="5,104,185,145"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="237,5,392,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a9456090af3f2762f4f542d232fb7adc0" title=" " alt="" coords="233,71,396,112"/>
<area shape="rect" href="namespaceforthread__mod.html#a9101345b87d2c0e18fb020677cf767b9" title=" " alt="" coords="233,136,396,177"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="233,201,396,243"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="444,13,587,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="635,5,801,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_icgraph.png" border="0" usemap="#anamespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_icgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_icgraph" id="anamespacethreadpool__mod_a9fe6131baabe8a6b73dbb7e4d5b1aa37_icgraph">
<area shape="rect" title="Entry point called by each thread creation in the pool, this calls out to the actual procedure to exe..." alt="" coords="496,5,676,47"/>
<area shape="rect" href="namespacethreadpool__mod.html#a05129ab692ec724d569ff6836d12c876" title="Initialises the thread pool and marks each thread as idle." alt="" coords="244,13,448,39"/>
<area shape="rect" href="namespaceio__server__mod.html#ac818aa1985977c9887acda6315139114" title="Called to start the IO server and once this subroutine returns then it indicates that the IO server h..." alt="" coords="5,13,196,39"/>
</map>
</div>

</div>
</div>
<a id="a894eecb849756ec9d8110153283844ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a894eecb849756ec9d8110153283844ee">&#9670;&nbsp;</a></span>threadpool_unlock_netcdf_access()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">subroutine, public threadpool_mod::threadpool_unlock_netcdf_access</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases the NetCDF thread lock, NetCDF is not thread safe so we need to manage thread calls to it. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00091">91</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="preprocessor">#ifdef ENFORCE_THREAD_SAFETY</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="preprocessor"></span>    <span class="keyword">call </span>check_thread_status(forthread_mutex_unlock(netcdfmutex))</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="preprocessor">#endif</span></div>
<span class="preprocessor"></span></div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespacethreadpool__mod_a894eecb849756ec9d8110153283844ee_cgraph.png" border="0" usemap="#anamespacethreadpool__mod_a894eecb849756ec9d8110153283844ee_cgraph" alt=""/></div>
<map name="namespacethreadpool__mod_a894eecb849756ec9d8110153283844ee_cgraph" id="anamespacethreadpool__mod_a894eecb849756ec9d8110153283844ee_cgraph">
<area shape="rect" title="Releases the NetCDF thread lock, NetCDF is not thread safe so we need to manage thread calls to it." alt="" coords="5,39,185,80"/>
<area shape="rect" href="namespacethreadpool__mod.html#a64977cc4d8fab28cdbfabd03b5f28d3a" title="Checks the error status of any thread operation and reports an error if it failed." alt="" coords="237,5,392,47"/>
<area shape="rect" href="namespaceforthread__mod.html#a6068972cad8d59eb6b29c8301d331090" title=" " alt="" coords="233,71,396,112"/>
<area shape="rect" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45" title="Logs a message at the specified level. If the level is above the current level then the message is ig..." alt="" coords="444,13,587,39"/>
<area shape="rect" href="namespacelogging__mod.html#ac5c3277c18a4c378f0024c555cb5680a" title="Returns the string preamble that applies to the specific logging level." alt="" coords="635,5,801,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a7c2bb890b5d0b75dcf1879748bb95dc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c2bb890b5d0b75dcf1879748bb95dc6">&#9670;&nbsp;</a></span>activate_thread_condition_variables</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, dimension(:), allocatable, volatile threadpool_mod::activate_thread_condition_variables</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00037">37</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: activate_thread_condition_variables, activate_thread_mutex</div>
</div><!-- fragment -->
</div>
</div>
<a id="a328af7e209159b5a5fea2a4f06015a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a328af7e209159b5a5fea2a4f06015a2e">&#9670;&nbsp;</a></span>activate_thread_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, dimension(:), allocatable, volatile threadpool_mod::activate_thread_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00037">37</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>

</div>
</div>
<a id="a371f81756a9676bdb61b852b136dbde4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a371f81756a9676bdb61b852b136dbde4">&#9670;&nbsp;</a></span>active_scalar_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile threadpool_mod::active_scalar_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00043">43</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>

</div>
</div>
<a id="af047904f5bf45ecf31fcf44729da35af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af047904f5bf45ecf31fcf44729da35af">&#9670;&nbsp;</a></span>active_threads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile threadpool_mod::active_threads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00043">43</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span> :: active_threads, total_number_of_threads, active_scalar_mutex</div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7d0516714fa2516b2786d8f3b71ae90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7d0516714fa2516b2786d8f3b71ae90">&#9670;&nbsp;</a></span>default_thread_pool_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, parameter threadpool_mod::default_thread_pool_size =10</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of threads in the pool. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00034">34</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">parameter</span> :: DEFAULT_THREAD_POOL_SIZE=10</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac05b961cee29f109c8eb1d4482cd0609"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac05b961cee29f109c8eb1d4482cd0609">&#9670;&nbsp;</a></span>netcdfmutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile threadpool_mod::netcdfmutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex used for controling NetCDF access. </p>

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00039">39</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span> :: netcdfmutex</div>
</div><!-- fragment -->
</div>
</div>
<a id="a4438ba9795846026d38ab75f88afd899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4438ba9795846026d38ab75f88afd899">&#9670;&nbsp;</a></span>next_suggested_idle_thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile threadpool_mod::next_suggested_idle_thread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00040">40</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span> :: next_suggested_idle_thread</div>
</div><!-- fragment -->
</div>
</div>
<a id="a51c403e6d28a7ee8246a1ab86533784b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51c403e6d28a7ee8246a1ab86533784b">&#9670;&nbsp;</a></span>thread_busy</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical, dimension(:), allocatable, volatile threadpool_mod::thread_busy</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00035">35</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordtype">logical</span>, <span class="keywordtype">volatile</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: thread_busy, thread_start</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6defef4093bdb19eab5394742524e190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6defef4093bdb19eab5394742524e190">&#9670;&nbsp;</a></span>thread_entry_containers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structthreadpool__mod_1_1threaded__procedure__container__type.html">threaded_procedure_container_type</a>), dimension(:), allocatable, volatile threadpool_mod::thread_entry_containers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00038">38</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordtype">type</span>(threaded_procedure_container_type), <span class="keywordtype">volatile</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: thread_entry_containers</div>
</div><!-- fragment -->
</div>
</div>
<a id="aedbcbb5ae09bb79b34c270b9d1ca3e23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedbcbb5ae09bb79b34c270b9d1ca3e23">&#9670;&nbsp;</a></span>thread_ids</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, dimension(:), allocatable, volatile threadpool_mod::thread_ids</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00036">36</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <span class="keywordtype">integer</span>, <span class="keywordtype">volatile</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: thread_ids, thread_pass_data</div>
</div><!-- fragment -->
</div>
</div>
<a id="a1965300ca8a4b0c408a306b7ca1ce498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1965300ca8a4b0c408a306b7ca1ce498">&#9670;&nbsp;</a></span>thread_pass_data</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, dimension(:), allocatable, volatile threadpool_mod::thread_pass_data</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00036">36</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>

</div>
</div>
<a id="a576d78693bfe32e1516e115392d95147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a576d78693bfe32e1516e115392d95147">&#9670;&nbsp;</a></span>thread_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical, dimension(:), allocatable, volatile threadpool_mod::thread_start</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00035">35</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>

</div>
</div>
<a id="a761369a3259ae6cdc2308f71fab61f44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a761369a3259ae6cdc2308f71fab61f44">&#9670;&nbsp;</a></span>threadpool_active</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical, volatile threadpool_mod::threadpool_active</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00041">41</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="keywordtype">logical</span>, <span class="keywordtype">volatile</span> :: threadpool_active</div>
</div><!-- fragment -->
</div>
</div>
<a id="acb89aecd148176e33ca7b32da3d60c28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb89aecd148176e33ca7b32da3d60c28">&#9670;&nbsp;</a></span>total_number_of_threads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer, volatile threadpool_mod::total_number_of_threads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="threadpool_8F90_source.html#l00043">43</a> of file <a class="el" href="threadpool_8F90_source.html">threadpool.F90</a>.</p>

</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_ad68309846cd8f9e77edaa6abd02f65a0"><div class="ttname"><a href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">logging_mod::log_error</a></div><div class="ttdeci">integer, parameter, public log_error</div><div class="ttdoc">Only log ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00011">logging.F90:11</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_a10e28447dd10ef9f92d205bc98fb26d3"><div class="ttname"><a href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">logging_mod::log_warn</a></div><div class="ttdeci">integer, parameter, public log_warn</div><div class="ttdoc">Log WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00012">logging.F90:12</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac4f13ac385499c85190cb184030e4f45"><div class="ttname"><a href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">logging_mod::log_log</a></div><div class="ttdeci">subroutine, public log_log(level, message, str)</div><div class="ttdoc">Logs a message at the specified level. If the level is above the current level then the message is ig...</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00074">logging.F90:75</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
