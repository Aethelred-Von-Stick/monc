<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MONC: iobridge_mod Module Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">MONC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Types</a> &#124;
<a href="#func-members">Functions/Subroutines</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">iobridge_mod Module Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Bridge between MONC and the IO server, this registers the current MONC process, will issue data dumps and deregister MONCs when the model run is completed.  
<a href="namespaceiobridge__mod.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Types</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiobridge__mod_1_1io__configuration__field__type.html">io_configuration_field_type</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">type &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structiobridge__mod_1_1io__server__sendable__field__sizing.html">io_server_sendable_field_sizing</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions/Subroutines</h2></td></tr>
<tr class="memitem:a24dcc29fe104bea3b0254ae43b7007e4"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structmonc__component__mod_1_1component__descriptor__type.html">component_descriptor_type</a>) function, public&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4">iobridge_get_descriptor</a> ()</td></tr>
<tr class="separator:a24dcc29fe104bea3b0254ae43b7007e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62439f3fcbbf2ab618d4b03bbaa3436f"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f">init_callback</a> (current_state)</td></tr>
<tr class="memdesc:a62439f3fcbbf2ab618d4b03bbaa3436f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialisation call back, called at the start of the model run.  <a href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f">More...</a><br /></td></tr>
<tr class="separator:a62439f3fcbbf2ab618d4b03bbaa3436f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0293031aeb28752394b7a3a0709c1ec"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec">timestep_callback</a> (current_state)</td></tr>
<tr class="memdesc:af0293031aeb28752394b7a3a0709c1ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Model dump call back, called for each model dump phase.  <a href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec">More...</a><br /></td></tr>
<tr class="separator:af0293031aeb28752394b7a3a0709c1ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac38d8fafb33a172133fb9e2624bcca61"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61">send_data_to_io_server</a> (current_state, data_index)</td></tr>
<tr class="memdesc:ac38d8fafb33a172133fb9e2624bcca61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data to the IO server.  <a href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61">More...</a><br /></td></tr>
<tr class="separator:ac38d8fafb33a172133fb9e2624bcca61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af141f60003d4019b095cc211553a90a8"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8">finalisation_callback</a> (current_state)</td></tr>
<tr class="memdesc:af141f60003d4019b095cc211553a90a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalisation call back, called at the end of the model run.  <a href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8">More...</a><br /></td></tr>
<tr class="separator:af141f60003d4019b095cc211553a90a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13945858ddf4ab5bf1cc04c95900a2d2"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a13945858ddf4ab5bf1cc04c95900a2d2">build_mpi_data_types</a> ()</td></tr>
<tr class="memdesc:a13945858ddf4ab5bf1cc04c95900a2d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds the MPI data types that correspond to the field descriptions and sizings.  <a href="namespaceiobridge__mod.html#a13945858ddf4ab5bf1cc04c95900a2d2">More...</a><br /></td></tr>
<tr class="separator:a13945858ddf4ab5bf1cc04c95900a2d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c8cd54f14009e4ac21dea06a3fe216e"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a6c8cd54f14009e4ac21dea06a3fe216e">build_mpi_data_type_for_definition</a> (specific_data_definition)</td></tr>
<tr class="memdesc:a6c8cd54f14009e4ac21dea06a3fe216e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds the MPI data type for a specific definition with sizing information.  <a href="namespaceiobridge__mod.html#a6c8cd54f14009e4ac21dea06a3fe216e">More...</a><br /></td></tr>
<tr class="separator:a6c8cd54f14009e4ac21dea06a3fe216e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d0b41aac7bd5b00ad7effce26888fa6"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a3d0b41aac7bd5b00ad7effce26888fa6">populate_sendable_fields</a> (current_state)</td></tr>
<tr class="memdesc:a3d0b41aac7bd5b00ad7effce26888fa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populates the sendable field definitions with the field sizing information.  <a href="namespaceiobridge__mod.html#a3d0b41aac7bd5b00ad7effce26888fa6">More...</a><br /></td></tr>
<tr class="separator:a3d0b41aac7bd5b00ad7effce26888fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5feca2e9026e84280592878c633c310e"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a5feca2e9026e84280592878c633c310e">populate_component_public_field</a> (current_state, field_name)</td></tr>
<tr class="memdesc:a5feca2e9026e84280592878c633c310e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populates the field information for a specific publically available field offered by one of the components.  <a href="namespaceiobridge__mod.html#a5feca2e9026e84280592878c633c310e">More...</a><br /></td></tr>
<tr class="separator:a5feca2e9026e84280592878c633c310e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4a3c9b65dc951b29f3c1eb5a39dce9"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#afe4a3c9b65dc951b29f3c1eb5a39dce9">populate_globally_visible_sendable_fields</a> (current_state)</td></tr>
<tr class="memdesc:afe4a3c9b65dc951b29f3c1eb5a39dce9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Populates the globally visible sendable fields which is a key value pair mapping between name and description of that field.  <a href="namespaceiobridge__mod.html#afe4a3c9b65dc951b29f3c1eb5a39dce9">More...</a><br /></td></tr>
<tr class="separator:afe4a3c9b65dc951b29f3c1eb5a39dce9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a809fd286beeeeca69659d6305ebe9ea2"><td class="memItemLeft" align="right" valign="top">class(*) function, pointer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a809fd286beeeeca69659d6305ebe9ea2">generate_sendable_description</a> (dim1, dim2, dim3, dim4)</td></tr>
<tr class="memdesc:a809fd286beeeeca69659d6305ebe9ea2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a sendable description based upon the dimension information supplied, missing arguments means that dimension does not exist.  <a href="namespaceiobridge__mod.html#a809fd286beeeeca69659d6305ebe9ea2">More...</a><br /></td></tr>
<tr class="separator:a809fd286beeeeca69659d6305ebe9ea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac011e3d47c9276581877360ce56c5e36"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36">send_monc_specific_data_to_server</a> (current_state, mpi_type_data_sizing_description)</td></tr>
<tr class="memdesc:ac011e3d47c9276581877360ce56c5e36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as well as meta data such as ZN field and Q field names.  <a href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36">More...</a><br /></td></tr>
<tr class="separator:ac011e3d47c9276581877360ce56c5e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea7ebb2c43679108eb4989eb41c5b28b"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b">send_data_field_sizes_to_server</a> (current_state, mpi_type_data_sizing_description, data_description, number_unique_fields)</td></tr>
<tr class="memdesc:aea7ebb2c43679108eb4989eb41c5b28b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assembles all the data field sizing information and sends this to the IO server.  <a href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b">More...</a><br /></td></tr>
<tr class="separator:aea7ebb2c43679108eb4989eb41c5b28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb9b5e93e13258d4d07383805a1fac0"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a0bb9b5e93e13258d4d07383805a1fac0">send_general_monc_information_to_server</a> (current_state, buffer)</td></tr>
<tr class="memdesc:a0bb9b5e93e13258d4d07383805a1fac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the general MONC information (ZN field and Q field names) to the IO server.  <a href="namespaceiobridge__mod.html#a0bb9b5e93e13258d4d07383805a1fac0">More...</a><br /></td></tr>
<tr class="separator:a0bb9b5e93e13258d4d07383805a1fac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a116dd9a1dd530d8225607946a31731d7"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a116dd9a1dd530d8225607946a31731d7">package_local_monc_decomposition_into_descriptions</a> (current_state, data_description)</td></tr>
<tr class="memdesc:a116dd9a1dd530d8225607946a31731d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packages the local MONC decomposition information into descriptions for communication.  <a href="namespaceiobridge__mod.html#a116dd9a1dd530d8225607946a31731d7">More...</a><br /></td></tr>
<tr class="separator:a116dd9a1dd530d8225607946a31731d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ef0275c630a206b31728ec8cde19f48"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structiobridge__mod_1_1io__server__sendable__field__sizing.html">io_server_sendable_field_sizing</a>) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48">get_sendable_field_sizing</a> (field_name, field_found)</td></tr>
<tr class="memdesc:a8ef0275c630a206b31728ec8cde19f48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the sizing information associated with a specific field.  <a href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48">More...</a><br /></td></tr>
<tr class="separator:a8ef0275c630a206b31728ec8cde19f48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a08a884e2294560580c1011bccc035"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structmonc__component__mod_1_1component__field__information__type.html">component_field_information_type</a>) function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035">get_component_field_descriptor</a> (field_name)</td></tr>
<tr class="memdesc:a49a08a884e2294560580c1011bccc035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the descriptor associated with some component's field based upon the field name.  <a href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035">More...</a><br /></td></tr>
<tr class="separator:a49a08a884e2294560580c1011bccc035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40984bca5926f25f857eb79536ffbb30"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a40984bca5926f25f857eb79536ffbb30">assemble_individual_description</a> (data_description, index, field_name, field_sizing_description)</td></tr>
<tr class="memdesc:a40984bca5926f25f857eb79536ffbb30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will assemble an individual description of an array data field.  <a href="namespaceiobridge__mod.html#a40984bca5926f25f857eb79536ffbb30">More...</a><br /></td></tr>
<tr class="separator:a40984bca5926f25f857eb79536ffbb30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d0138f6ab5b606d7e1d3d44a7dd4c78"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a9d0138f6ab5b606d7e1d3d44a7dd4c78">register_with_io_server</a> (current_state, mpi_type_definition_description, mpi_type_field_description)</td></tr>
<tr class="memdesc:a9d0138f6ab5b606d7e1d3d44a7dd4c78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol, which is sending the registration command, receiving the data and field definitions from the IO server and then sending back the sizing for the fields that this MONC will contribute.  <a href="namespaceiobridge__mod.html#a9d0138f6ab5b606d7e1d3d44a7dd4c78">More...</a><br /></td></tr>
<tr class="separator:a9d0138f6ab5b606d7e1d3d44a7dd4c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72a9a954ffcbffaed0b5cefad8e0ed7b"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a72a9a954ffcbffaed0b5cefad8e0ed7b">get_total_number_of_fields</a> (definition_descriptions, number_defns)</td></tr>
<tr class="memdesc:a72a9a954ffcbffaed0b5cefad8e0ed7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the total number of fields, which is all the fields in all the data definitions.  <a href="namespaceiobridge__mod.html#a72a9a954ffcbffaed0b5cefad8e0ed7b">More...</a><br /></td></tr>
<tr class="separator:a72a9a954ffcbffaed0b5cefad8e0ed7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a67433b766989cb8736c9646c6d7dd8"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a6a67433b766989cb8736c9646c6d7dd8">populate_data_definition_configuration</a> (definition_descriptions, number_defns, field_descriptions, number_fields)</td></tr>
<tr class="memdesc:a6a67433b766989cb8736c9646c6d7dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Based upon the received data and field definitions this will configure the IO bridge internal representation of these facets, which is a structured tree, data defintions holding their own fields rather than the unstructured data we get from the IO server.  <a href="namespaceiobridge__mod.html#a6a67433b766989cb8736c9646c6d7dd8">More...</a><br /></td></tr>
<tr class="separator:a6a67433b766989cb8736c9646c6d7dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe137d163c985cbadba27f2ab7830751"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#afe137d163c985cbadba27f2ab7830751">get_definition_index</a> (name)</td></tr>
<tr class="memdesc:afe137d163c985cbadba27f2ab7830751"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up a specific definition based upon its name and returns the index.  <a href="namespaceiobridge__mod.html#afe137d163c985cbadba27f2ab7830751">More...</a><br /></td></tr>
<tr class="separator:afe137d163c985cbadba27f2ab7830751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1fb7de25506e362a1211db206352067"><td class="memItemLeft" align="right" valign="top">subroutine&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067">pack_send_buffer</a> (current_state, data_definition)</td></tr>
<tr class="memdesc:ab1fb7de25506e362a1211db206352067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs the current state into the send buffer. This iterates through each field in the data description and adds it to the send buffer.  <a href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067">More...</a><br /></td></tr>
<tr class="separator:ab1fb7de25506e362a1211db206352067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb4bf18f8774bcdab06ceae4599ab43c"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c">pack_scalar_into_send_buffer</a> (current_state, data_definition, field, current_buffer_point)</td></tr>
<tr class="memdesc:aeb4bf18f8774bcdab06ceae4599ab43c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs scalar fields into the send bufer.  <a href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c">More...</a><br /></td></tr>
<tr class="separator:aeb4bf18f8774bcdab06ceae4599ab43c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26738bfa682205a534b51881d149d66"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66">handle_component_field_scalar_packing_into_send_buffer</a> (current_state, data_definition, field, current_buffer_point)</td></tr>
<tr class="memdesc:ab26738bfa682205a534b51881d149d66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs a components field scalar into the send buffer, these are fields that are served up by components rather than explicitly available.  <a href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66">More...</a><br /></td></tr>
<tr class="separator:ab26738bfa682205a534b51881d149d66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0c3fb5c64b2528d8034a7ea25b9aa0"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a4c0c3fb5c64b2528d8034a7ea25b9aa0">pack_map_into_send_buffer</a> (current_state, data_definition, field, current_buffer_point)</td></tr>
<tr class="memdesc:a4c0c3fb5c64b2528d8034a7ea25b9aa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs map fields into the send buffer.  <a href="namespaceiobridge__mod.html#a4c0c3fb5c64b2528d8034a7ea25b9aa0">More...</a><br /></td></tr>
<tr class="separator:a4c0c3fb5c64b2528d8034a7ea25b9aa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbe2c82d31a1a851ad23dc1cc0b58872"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872">pack_array_into_send_buffer</a> (current_state, data_definition, field, current_buffer_point)</td></tr>
<tr class="memdesc:afbe2c82d31a1a851ad23dc1cc0b58872"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs array fields into the send bufer.  <a href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872">More...</a><br /></td></tr>
<tr class="separator:afbe2c82d31a1a851ad23dc1cc0b58872"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0524fecf44a3a034da9a6645602fc0c"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c">handle_component_field_array_packing_into_send_buffer</a> (current_state, data_definition, field, current_buffer_point)</td></tr>
<tr class="memdesc:ab0524fecf44a3a034da9a6645602fc0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs a components field array into the send buffer, these are fields that are served up by components rather than explicitly available.  <a href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c">More...</a><br /></td></tr>
<tr class="separator:ab0524fecf44a3a034da9a6645602fc0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a056ea7a2bc074a5b33fc18823238aa57"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57">pack_prognostic_flow_field</a> (buffer, prognostic, start_offset, local_grid)</td></tr>
<tr class="memdesc:a056ea7a2bc074a5b33fc18823238aa57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs the data of a specific prognostic field into a buffer.  <a href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57">More...</a><br /></td></tr>
<tr class="separator:a056ea7a2bc074a5b33fc18823238aa57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1542c1cdf01e4cb8fe48c00e1c0e5c9c"><td class="memItemLeft" align="right" valign="top">integer function&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c">pack_q_fields</a> (buffer, q_fields, number_q_fields, start_offset, local_grid)</td></tr>
<tr class="memdesc:a1542c1cdf01e4cb8fe48c00e1c0e5c9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packs the Q fields into the send buffer.  <a href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c">More...</a><br /></td></tr>
<tr class="separator:a1542c1cdf01e4cb8fe48c00e1c0e5c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a56f8d63e796d7b6b37fa32b991d83e65"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#a56f8d63e796d7b6b37fa32b991d83e65">data_definitions</a></td></tr>
<tr class="separator:a56f8d63e796d7b6b37fa32b991d83e65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf93bd04a3be10eae71b620ccf2ef5b3"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#acf93bd04a3be10eae71b620ccf2ef5b3">unique_field_names</a></td></tr>
<tr class="separator:acf93bd04a3be10eae71b620ccf2ef5b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe975f2e5d71e81a7651fc3755bcc46f"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#afe975f2e5d71e81a7651fc3755bcc46f">sendable_fields</a></td></tr>
<tr class="separator:afe975f2e5d71e81a7651fc3755bcc46f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade4a180b331928b565f45e42584aedec"><td class="memItemLeft" align="right" valign="top">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>)&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#ade4a180b331928b565f45e42584aedec">component_field_descriptions</a></td></tr>
<tr class="separator:ade4a180b331928b565f45e42584aedec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae481a212f8f86fce3c0b544116e528c"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#aae481a212f8f86fce3c0b544116e528c">io_server_enabled</a></td></tr>
<tr class="separator:aae481a212f8f86fce3c0b544116e528c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3a555f52a9f8ef07688d1ef12488e0c"><td class="memItemLeft" align="right" valign="top">logical&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceiobridge__mod.html#ae3a555f52a9f8ef07688d1ef12488e0c">in_finalisation_callback</a></td></tr>
<tr class="separator:ae3a555f52a9f8ef07688d1ef12488e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bridge between MONC and the IO server, this registers the current MONC process, will issue data dumps and deregister MONCs when the model run is completed. </p>
</div><h2 class="groupheader">Function/Subroutine Documentation</h2>
<a id="a40984bca5926f25f857eb79536ffbb30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40984bca5926f25f857eb79536ffbb30">&#9670;&nbsp;</a></span>assemble_individual_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::assemble_individual_description </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structio__server__client__mod_1_1data__sizing__description__type.html">data_sizing_description_type</a>), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>data_description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__server__sendable__field__sizing.html">io_server_sendable_field_sizing</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field_sizing_description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Will assemble an individual description of an array data field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_description</td><td>The data structure used to describe the size of arrays </td></tr>
    <tr><td class="paramname">index</td><td>The index of this current field </td></tr>
    <tr><td class="paramname">field_name</td><td>The corresponding field name that we are describing </td></tr>
    <tr><td class="paramname">dimensions</td><td>The number of dimensions (zero means the field is inactive) </td></tr>
    <tr><td class="paramname">dim1</td><td>Optional size of dimension 1 </td></tr>
    <tr><td class="paramname">dim2</td><td>Optional size of dimension 2 </td></tr>
    <tr><td class="paramname">dim3</td><td>Optional size of dimension 3 </td></tr>
    <tr><td class="paramname">dim4</td><td>Optional size of dimension 4 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00629">629</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: index</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;    <span class="keywordtype">type</span>(io_server_sendable_field_sizing), <span class="keywordtype">intent(in)</span> :: field_sizing_description</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keywordtype">type</span>(data_sizing_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: data_description</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    data_description(index)%field_name=field_name</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    data_description(index)%dimensions=field_sizing_description%number_dimensions</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    data_description(index)%dim_sizes=field_sizing_description%dimensions</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a40984bca5926f25f857eb79536ffbb30_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a40984bca5926f25f857eb79536ffbb30_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a40984bca5926f25f857eb79536ffbb30_icgraph" id="anamespaceiobridge__mod_a40984bca5926f25f857eb79536ffbb30_icgraph">
<area shape="rect" title="Will assemble an individual description of an array data field." alt="" coords="988,46,1149,87"/>
<area shape="rect" href="namespaceiobridge__mod.html#a116dd9a1dd530d8225607946a31731d7" title="Packages the local MONC decomposition information into descriptions for communication." alt="" coords="753,5,940,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="567,39,705,95"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="375,39,519,95"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,46,327,87"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,46,156,87"/>
</map>
</div>

</div>
</div>
<a id="a6c8cd54f14009e4ac21dea06a3fe216e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c8cd54f14009e4ac21dea06a3fe216e">&#9670;&nbsp;</a></span>build_mpi_data_type_for_definition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::build_mpi_data_type_for_definition </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>specific_data_definition</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds the MPI data type for a specific definition with sizing information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">specific_data_definition</td><td>The data definition to build the type for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The size (in bytes) that the send buffer needs to be to store the data for the MPI operation </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00187">187</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">intent(inout)</span> :: specific_data_definition</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">integer</span> :: type_extents(5), type_counts, i, j, tempsize, field_start, data_type, field_array_sizes, &amp;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;         temp_size, prev_data_type, old_types(20), offsets(20), block_counts(20), ierr, field_ignores</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordtype">logical</span> :: field_found</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">type</span>(io_server_sendable_field_sizing) :: field_size_info</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    type_extents=populate_mpi_type_extents()</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    field_start=1</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    data_type=0</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    type_counts=0</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    field_array_sizes=0</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    field_ignores=0</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">do</span> i=1, specific_data_definition%number_of_data_fields</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (data_type == 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        prev_data_type=data_type        </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        data_type=specific_data_definition%fields(i)%data_type</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">if</span> (data_type .ne. specific_data_definition%fields(i)%data_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;          <span class="comment">! For efficient type packing, combine multiple fields with the same type - therefore when the type changes work the previous one pack</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;          <span class="keyword">call </span>append_mpi_datatype(field_start, i-1-field_ignores, field_array_sizes, data_type, &amp;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;               type_extents, prev_data_type, type_counts+1, old_types, offsets, block_counts)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;          field_start=i</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;          field_array_sizes=0</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;          field_ignores=0</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;          prev_data_type=data_type                   </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;          data_type=specific_data_definition%fields(i)%data_type</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;          type_counts=type_counts+1</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">if</span> (specific_data_definition%fields(i)%field_type .eq. array_field_type .or. &amp;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;           specific_data_definition%fields(i)%field_type .eq. map_field_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="comment">! Grab the field info based upon the field name</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        field_size_info=get_sendable_field_sizing(specific_data_definition%fields(i)%name, field_found)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        specific_data_definition%fields(i)%enabled=field_found</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <span class="keywordflow">if</span> (.not. field_found .or. field_size_info%number_dimensions == 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;          <span class="comment">! If no field info, or the dimension is 0 then this MONC process is not sending that field - check it is optional</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;          <span class="keywordflow">if</span> (.not. specific_data_definition%fields(i)%optional) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">log_log</a>(<a class="code" href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">log_error</a>, <span class="stringliteral">&quot;Non optional field `&quot;</span>//trim(specific_data_definition%fields(i)%name)//&amp;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                 <span class="stringliteral">&quot;&#39; omitted from MONC IO server registration&quot;</span>)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;          field_ignores=field_ignores+1</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;          <span class="comment">! If the field is specified then use the size data to assemble the field size and append to current size</span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;          temp_size=1</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;          <span class="keywordflow">do</span> j=1, field_size_info%number_dimensions</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            temp_size=temp_size*field_size_info%dimensions(j)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="keywordflow">          end do</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;          <span class="keywordflow">if</span> (specific_data_definition%fields(i)%field_type .eq. map_field_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            field_array_sizes=(field_array_sizes+temp_size*string_length*2)-1</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;          <span class="keywordflow">else</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;            field_array_sizes=(field_array_sizes+temp_size)-1</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keywordflow">          end if</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">if</span> (specific_data_definition%fields(i)%optional) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;          field_size_info=get_sendable_field_sizing(specific_data_definition%fields(i)%name, field_found)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;          specific_data_definition%fields(i)%enabled=field_found</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;          <span class="keywordflow">if</span> (.not. field_found) field_ignores=field_ignores+1</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="keywordflow">        end if</span>        </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span> (field_start .le. i-1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="comment">! If there are outstanding fields to process then we do this here</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keyword">call </span>append_mpi_datatype(field_start, i-1, field_array_sizes, data_type, &amp;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;               type_extents, prev_data_type, type_counts+1, old_types, offsets, block_counts)</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      type_counts=type_counts+1</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160; </div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">call </span>mpi_type_struct(type_counts, block_counts, offsets, old_types, specific_data_definition%mpi_datatype, ierr) </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keyword">call </span>mpi_type_commit(specific_data_definition%mpi_datatype, ierr)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keyword">call </span>mpi_type_size(specific_data_definition%mpi_datatype, tempsize, ierr)</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    build_mpi_data_type_for_definition=tempsize</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_cgraph" id="anamespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_cgraph">
<area shape="rect" title="Builds the MPI data type for a specific definition with sizing information." alt="" coords="5,5,199,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48" title="Retrieves the sizing information associated with a specific field." alt="" coords="247,5,429,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_icgraph" id="anamespaceiobridge__mod_a6c8cd54f14009e4ac21dea06a3fe216e_icgraph">
<area shape="rect" title="Builds the MPI data type for a specific definition with sizing information." alt="" coords="555,5,748,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a13945858ddf4ab5bf1cc04c95900a2d2" title="Builds the MPI data types that correspond to the field descriptions and sizings." alt="" coords="375,5,507,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="a13945858ddf4ab5bf1cc04c95900a2d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13945858ddf4ab5bf1cc04c95900a2d2">&#9670;&nbsp;</a></span>build_mpi_data_types()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::build_mpi_data_types</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Builds the MPI data types that correspond to the field descriptions and sizings. </p>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00174">174</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">integer</span> :: i, dump_send_buffer_size</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(data_definitions)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      dump_send_buffer_size=build_mpi_data_type_for_definition(data_definitions(i))</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      data_definitions(i)%dump_requests=(/mpi_request_null, mpi_request_null/)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <span class="keyword">allocate</span>(data_definitions(i)%send_buffer(dump_send_buffer_size))</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keywordflow">    end do</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_cgraph" id="anamespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_cgraph">
<area shape="rect" title="Builds the MPI data types that correspond to the field descriptions and sizings." alt="" coords="5,5,137,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6c8cd54f14009e4ac21dea06a3fe216e" title="Builds the MPI data type for a specific definition with sizing information." alt="" coords="185,5,379,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48" title="Retrieves the sizing information associated with a specific field." alt="" coords="427,5,609,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_icgraph" id="anamespaceiobridge__mod_a13945858ddf4ab5bf1cc04c95900a2d2_icgraph">
<area shape="rect" title="Builds the MPI data types that correspond to the field descriptions and sizings." alt="" coords="375,5,507,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="af141f60003d4019b095cc211553a90a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af141f60003d4019b095cc211553a90a8">&#9670;&nbsp;</a></span>finalisation_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::finalisation_callback </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finalisation call back, called at the end of the model run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00150">150</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160; </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">integer</span> :: ierr, i</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span> (.not. io_server_enabled) <span class="keywordflow">return</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    in_finalisation_callback=.true.</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(data_definitions)      </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <span class="keywordflow">if</span> (data_definitions(i)%send_on_terminate) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keyword">call </span>send_data_to_io_server(current_state, i)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">if</span> (data_definitions(i)%dump_requests(1) .ne. mpi_request_null .or. &amp;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;           data_definitions(i)%dump_requests(2) .ne. mpi_request_null) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keyword">call </span>mpi_waitall(2, data_definitions(i)%dump_requests, mpi_statuses_ignore, ierr)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(data_definitions(i)%send_buffer)) <span class="keyword">deallocate</span>(data_definitions(i)%send_buffer)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      <span class="keyword">call </span>mpi_type_free(data_definitions(i)%mpi_datatype, ierr)</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keyword">call </span>mpi_send(deregister_command, 1, mpi_int, current_state%parallel%corresponding_io_server_process, &amp;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;         command_tag, mpi_comm_world, ierr)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_cgraph" id="anamespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_cgraph">
<area shape="rect" title="Finalisation call back, called at the end of the model run." alt="" coords="5,153,172,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="220,153,353,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="401,153,535,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="587,86,745,127"/>
<area shape="rect" href="namespaceiobridge__mod.html#a4c0c3fb5c64b2528d8034a7ea25b9aa0" title="Packs map fields into the send buffer." alt="" coords="588,153,744,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c" title="Packs scalar fields into the send bufer." alt="" coords="583,219,749,261"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="797,5,973,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57" title="Packs the data of a specific prognostic field into a buffer." alt="" coords="811,85,960,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c" title="Packs the Q fields into the send buffer." alt="" coords="819,150,952,191"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="1021,118,1216,159"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="797,215,973,271"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_icgraph" id="anamespaceiobridge__mod_af141f60003d4019b095cc211553a90a8_icgraph">
<area shape="rect" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="a809fd286beeeeca69659d6305ebe9ea2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a809fd286beeeeca69659d6305ebe9ea2">&#9670;&nbsp;</a></span>generate_sendable_description()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">class(*) function, pointer iobridge_mod::generate_sendable_description </td>
          <td>(</td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>dim1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>dim2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>dim3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>dim4</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generates a sendable description based upon the dimension information supplied, missing arguments means that dimension does not exist. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dim1</td><td>Optional size of dimension one </td></tr>
    <tr><td class="paramname">dim2</td><td>Optional size of dimension two </td></tr>
    <tr><td class="paramname">dim3</td><td>Optional size of dimension three </td></tr>
    <tr><td class="paramname">dim4</td><td>Optional size of dimension four </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corresponding sendable description for the field, with the number of dimensions and sizing of each of these </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00420">420</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span>, <span class="keywordtype">optional</span> :: dim1, dim2, dim3, dim4</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generate_sendable_description</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160; </div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keywordtype">type</span>(io_server_sendable_field_sizing), <span class="keywordtype">pointer</span> :: field</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">integer</span> :: number_dimensions</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keyword">allocate</span>(field)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    number_dimensions=0</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    field%dimensions=0</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(dim1)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      field%dimensions(1)=dim1</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      number_dimensions=number_dimensions+1</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(dim2)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      field%dimensions(2)=dim2</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      number_dimensions=number_dimensions+1</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(dim3)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      field%dimensions(3)=dim3</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      number_dimensions=number_dimensions+1</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(dim4)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      field%dimensions(4)=dim4</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      number_dimensions=number_dimensions+1</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    field%number_dimensions=number_dimensions</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    generate_sendable_description=&gt;field</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a809fd286beeeeca69659d6305ebe9ea2_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a809fd286beeeeca69659d6305ebe9ea2_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a809fd286beeeeca69659d6305ebe9ea2_icgraph" id="anamespaceiobridge__mod_a809fd286beeeeca69659d6305ebe9ea2_icgraph">
<area shape="rect" title="Generates a sendable description based upon the dimension information supplied, missing arguments mea..." alt="" coords="800,13,955,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe4a3c9b65dc951b29f3c1eb5a39dce9" title="Populates the globally visible sendable fields which is a key value pair mapping between name and des..." alt="" coords="577,5,752,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a3d0b41aac7bd5b00ad7effce26888fa6" title="Populates the sendable field definitions with the field sizing information." alt="" coords="375,13,529,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,13,327,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,13,156,54"/>
</map>
</div>

</div>
</div>
<a id="a49a08a884e2294560580c1011bccc035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49a08a884e2294560580c1011bccc035">&#9670;&nbsp;</a></span>get_component_field_descriptor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structmonc__component__mod_1_1component__field__information__type.html">component_field_information_type</a>) function iobridge_mod::get_component_field_descriptor </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the descriptor associated with some component's field based upon the field name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The field name </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00607">607</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">if</span> (c_contains(component_field_descriptions, field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      generic=&gt;c_get_generic(component_field_descriptions, field_name)</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="keywordflow">      type is</span> (component_field_information_type)</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        get_component_field_descriptor=generic</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a49a08a884e2294560580c1011bccc035_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a49a08a884e2294560580c1011bccc035_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a49a08a884e2294560580c1011bccc035_icgraph" id="anamespaceiobridge__mod_a49a08a884e2294560580c1011bccc035_icgraph">
<area shape="rect" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="1220,53,1415,94"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="996,5,1172,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="996,85,1172,141"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="785,17,944,58"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,54,733,95"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,54,552,95"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,21,371,62"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,86,365,127"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,54,156,95"/>
<area shape="rect" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c" title="Packs scalar fields into the send bufer." alt="" coords="781,86,948,127"/>
</map>
</div>

</div>
</div>
<a id="afe137d163c985cbadba27f2ab7830751"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe137d163c985cbadba27f2ab7830751">&#9670;&nbsp;</a></span>get_definition_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::get_definition_index </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Looks up a specific definition based upon its name and returns the index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The defintion name to search for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index where the corresponding definition can be found or -1 if no definition is located with that name </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00729">729</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: name</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(data_definitions)</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (data_definitions(i)%name .eq. name) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;        get_definition_index=i</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;        <span class="keywordflow">return</span></div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    get_definition_index=-1</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_afe137d163c985cbadba27f2ab7830751_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_afe137d163c985cbadba27f2ab7830751_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_afe137d163c985cbadba27f2ab7830751_icgraph" id="anamespaceiobridge__mod_afe137d163c985cbadba27f2ab7830751_icgraph">
<area shape="rect" title="Looks up a specific definition based upon its name and returns the index." alt="" coords="811,5,992,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6a67433b766989cb8736c9646c6d7dd8" title="Based upon the received data and field definitions this will configure the IO bridge internal represe..." alt="" coords="571,5,763,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a9d0138f6ab5b606d7e1d3d44a7dd4c78" title="Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol,..." alt="" coords="375,5,523,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="a8ef0275c630a206b31728ec8cde19f48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ef0275c630a206b31728ec8cde19f48">&#9670;&nbsp;</a></span>get_sendable_field_sizing()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structiobridge__mod_1_1io__server__sendable__field__sizing.html">io_server_sendable_field_sizing</a>) function iobridge_mod::get_sendable_field_sizing </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(out), optional&#160;</td>
          <td class="paramname"><em>field_found</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieves the sizing information associated with a specific field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_name</td><td>The field name to look up </td></tr>
    <tr><td class="paramname">field_found</td><td>Optional flag depicting whether the field was found or not </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00588">588</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordtype">logical</span>, <span class="keywordtype">intent(out)</span>, <span class="keywordtype">optional</span> :: field_found</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160; </div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160; </div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">present</span>(field_found)) field_found=.false.</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;    <span class="keywordflow">if</span> (c_contains(sendable_fields, field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      generic=&gt;c_get_generic(sendable_fields, field_name)</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      <span class="keywordflow">select type</span>(generic)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="keywordflow">      type is</span> (io_server_sendable_field_sizing)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        get_sendable_field_sizing=generic</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">present</span>(field_found)) field_found=.true.</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="keywordflow">      end select</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a8ef0275c630a206b31728ec8cde19f48_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a8ef0275c630a206b31728ec8cde19f48_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a8ef0275c630a206b31728ec8cde19f48_icgraph" id="anamespaceiobridge__mod_a8ef0275c630a206b31728ec8cde19f48_icgraph">
<area shape="rect" title="Retrieves the sizing information associated with a specific field." alt="" coords="808,41,991,83"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6c8cd54f14009e4ac21dea06a3fe216e" title="Builds the MPI data type for a specific definition with sizing information." alt="" coords="567,5,760,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="594,70,733,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a13945858ddf4ab5bf1cc04c95900a2d2" title="Builds the MPI data types that correspond to the field descriptions and sizings." alt="" coords="381,5,513,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,41,327,83"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,41,156,83"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="375,70,519,126"/>
</map>
</div>

</div>
</div>
<a id="a72a9a954ffcbffaed0b5cefad8e0ed7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72a9a954ffcbffaed0b5cefad8e0ed7b">&#9670;&nbsp;</a></span>get_total_number_of_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::get_total_number_of_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structio__server__client__mod_1_1definition__description__type.html">definition_description_type</a>), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>definition_descriptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_defns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retrieve the total number of fields, which is all the fields in all the data definitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">definition_descriptions</td><td>Data definition descriptions </td></tr>
    <tr><td class="paramname">number_defns</td><td>The number of data definitions </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The total number of fields </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00676">676</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keywordtype">type</span>(definition_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: definition_descriptions</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: number_defns</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    get_total_number_of_fields=0</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">do</span> i=1, number_defns</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      get_total_number_of_fields=get_total_number_of_fields+definition_descriptions(i)%number_fields</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="keywordflow">    end do</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a72a9a954ffcbffaed0b5cefad8e0ed7b_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a72a9a954ffcbffaed0b5cefad8e0ed7b_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a72a9a954ffcbffaed0b5cefad8e0ed7b_icgraph" id="anamespaceiobridge__mod_a72a9a954ffcbffaed0b5cefad8e0ed7b_icgraph">
<area shape="rect" title="Retrieve the total number of fields, which is all the fields in all the data definitions." alt="" coords="571,5,725,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a9d0138f6ab5b606d7e1d3d44a7dd4c78" title="Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol,..." alt="" coords="375,5,523,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="ab0524fecf44a3a034da9a6645602fc0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0524fecf44a3a034da9a6645602fc0c">&#9670;&nbsp;</a></span>handle_component_field_array_packing_into_send_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::handle_component_field_array_packing_into_send_buffer </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>data_definition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__field__type.html">io_configuration_field_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>current_buffer_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs a components field array into the send buffer, these are fields that are served up by components rather than explicitly available. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_definition</td><td>The data definition description </td></tr>
    <tr><td class="paramname">field</td><td>The specific field we are looking up </td></tr>
    <tr><td class="paramname">current_buffer_point</td><td>The current point in the buffer where this data will be entered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new current buffer point which is after the data addition has taken place </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l01036">1036</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;    <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">intent(inout)</span> :: data_definition</div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;    <span class="keywordtype">type</span>(io_configuration_field_type), <span class="keywordtype">intent(in)</span> :: field</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: current_buffer_point</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordtype">type</span>(component_field_information_type) :: field_descriptor</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    <span class="keywordtype">type</span>(component_field_value_type) :: published_value</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;    field_descriptor=get_component_field_descriptor(field%name)</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;    published_value=get_component_field_value(current_state, field%name)</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;    <span class="keywordflow">if</span> (field_descriptor%data_type == component_double_data_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> (field_descriptor%number_dimensions == 1) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        handle_component_field_array_packing_into_send_buffer=pack_array_field(data_definition%send_buffer, &amp;</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;             current_buffer_point, real_array_1d=published_value%real_1d_array)</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keyword">deallocate</span>(published_value%real_1d_array)</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_descriptor%number_dimensions == 2) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        handle_component_field_array_packing_into_send_buffer=pack_array_field(data_definition%send_buffer, &amp;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;             current_buffer_point, real_array_2d=published_value%real_2d_array)</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <span class="keyword">deallocate</span>(published_value%real_2d_array)</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_descriptor%number_dimensions == 3) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;        handle_component_field_array_packing_into_send_buffer=pack_array_field(data_definition%send_buffer, &amp;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;             current_buffer_point, real_array_3d=published_value%real_3d_array)</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;        <span class="keyword">deallocate</span>(published_value%real_3d_array)</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_descriptor%number_dimensions == 4) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;        handle_component_field_array_packing_into_send_buffer=pack_array_field(data_definition%send_buffer, &amp;</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;             current_buffer_point, real_array_4d=published_value%real_4d_array)</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;        <span class="keyword">deallocate</span>(published_value%real_4d_array)</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_cgraph" id="anamespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_cgraph">
<area shape="rect" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="5,5,181,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="229,13,424,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_icgraph" id="anamespaceiobridge__mod_ab0524fecf44a3a034da9a6645602fc0c_icgraph">
<area shape="rect" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="988,31,1164,87"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="781,39,940,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="ab26738bfa682205a534b51881d149d66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab26738bfa682205a534b51881d149d66">&#9670;&nbsp;</a></span>handle_component_field_scalar_packing_into_send_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::handle_component_field_scalar_packing_into_send_buffer </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>data_definition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__field__type.html">io_configuration_field_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>current_buffer_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs a components field scalar into the send buffer, these are fields that are served up by components rather than explicitly available. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_definition</td><td>The data definition description </td></tr>
    <tr><td class="paramname">field</td><td>The specific field we are looking up </td></tr>
    <tr><td class="paramname">current_buffer_point</td><td>The current point in the buffer where this data will be entered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new current buffer point which is after the data addition has taken place </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00853">853</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">intent(inout)</span> :: data_definition</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="keywordtype">type</span>(io_configuration_field_type), <span class="keywordtype">intent(in)</span> :: field</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: current_buffer_point</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160; </div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="keywordtype">type</span>(component_field_information_type) :: field_descriptor</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    <span class="keywordtype">type</span>(component_field_value_type) :: published_value</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    field_descriptor=get_component_field_descriptor(field%name)</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    published_value=get_component_field_value(current_state, field%name)</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">if</span> (field_descriptor%data_type == component_double_data_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      handle_component_field_scalar_packing_into_send_buffer=pack_scalar_field(data_definition%send_buffer, &amp;</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;           current_buffer_point, real_value=published_value%scalar_real)</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field_descriptor%data_type == component_integer_data_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      handle_component_field_scalar_packing_into_send_buffer=pack_scalar_field(data_definition%send_buffer, &amp;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;           current_buffer_point, int_value=published_value%scalar_int)         </div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_cgraph" id="anamespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_cgraph">
<area shape="rect" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="5,5,181,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="229,13,424,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_icgraph" id="anamespaceiobridge__mod_ab26738bfa682205a534b51881d149d66_icgraph">
<area shape="rect" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="996,31,1172,87"/>
<area shape="rect" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c" title="Packs scalar fields into the send bufer." alt="" coords="781,39,948,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="a62439f3fcbbf2ab618d4b03bbaa3436f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62439f3fcbbf2ab618d4b03bbaa3436f">&#9670;&nbsp;</a></span>init_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::init_callback </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialisation call back, called at the start of the model run. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00074">74</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordtype">integer</span> :: mpi_type_data_sizing_description, mpi_type_definition_description, mpi_type_field_description, ierr</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160; </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (.not. options_get_logical(current_state%options_database, <span class="stringliteral">&quot;enable_io_server&quot;</span>)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      io_server_enabled=.false.</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keyword">call </span><a class="code" href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">log_master_log</a>(<a class="code" href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">log_warn</a>, <span class="stringliteral">&quot;Enabled IO bridge but missing IO server compilation, therefore ignoring IO bridge component&quot;</span>)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <span class="keywordflow">return</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    io_server_enabled=.true.</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    in_finalisation_callback=.false.</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keyword">call </span>populate_sendable_fields(current_state)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    mpi_type_data_sizing_description=build_mpi_type_data_sizing_description()</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    mpi_type_definition_description=build_mpi_type_definition_description()</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    mpi_type_field_description=build_mpi_type_field_description()</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keyword">call </span>register_with_io_server(current_state, mpi_type_definition_description, mpi_type_field_description)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keyword">call </span>send_monc_specific_data_to_server(current_state, mpi_type_data_sizing_description)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160; </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keyword">call </span>mpi_type_free(mpi_type_data_sizing_description, ierr)</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">call </span>mpi_type_free(mpi_type_definition_description, ierr)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keyword">call </span>mpi_type_free(mpi_type_field_description, ierr)</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">call </span>build_mpi_data_types()</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_cgraph" id="anamespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_cgraph">
<area shape="rect" title="Initialisation call back, called at the start of the model run." alt="" coords="5,249,128,290"/>
<area shape="rect" href="namespaceiobridge__mod.html#a13945858ddf4ab5bf1cc04c95900a2d2" title="Builds the MPI data types that correspond to the field descriptions and sizings." alt="" coords="187,281,319,322"/>
<area shape="rect" href="namespaceiobridge__mod.html#a3d0b41aac7bd5b00ad7effce26888fa6" title="Populates the sendable field definitions with the field sizing information." alt="" coords="176,85,331,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a9d0138f6ab5b606d7e1d3d44a7dd4c78" title="Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol,..." alt="" coords="179,215,327,257"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="181,345,325,401"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6c8cd54f14009e4ac21dea06a3fe216e" title="Builds the MPI data type for a specific definition with sizing information." alt="" coords="379,281,572,322"/>
<area shape="rect" href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48" title="Retrieves the sizing information associated with a specific field." alt="" coords="622,310,805,351"/>
<area shape="rect" href="namespaceiobridge__mod.html#a5feca2e9026e84280592878c633c310e" title="Populates the field information for a specific publically available field offered by one of the compo..." alt="" coords="393,85,557,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe4a3c9b65dc951b29f3c1eb5a39dce9" title="Populates the globally visible sendable fields which is a key value pair mapping between name and des..." alt="" coords="388,5,563,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a809fd286beeeeca69659d6305ebe9ea2" title="Generates a sendable description based upon the dimension information supplied, missing arguments mea..." alt="" coords="636,13,791,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a72a9a954ffcbffaed0b5cefad8e0ed7b" title="Retrieve the total number of fields, which is all the fields in all the data definitions." alt="" coords="398,215,553,257"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6a67433b766989cb8736c9646c6d7dd8" title="Based upon the received data and field definitions this will configure the IO bridge internal represe..." alt="" coords="379,150,571,191"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe137d163c985cbadba27f2ab7830751" title="Looks up a specific definition based upon its name and returns the index." alt="" coords="623,150,804,191"/>
<area shape="rect" href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="406,425,545,481"/>
<area shape="rect" href="namespaceiobridge__mod.html#a0bb9b5e93e13258d4d07383805a1fac0" title="Sends the general MONC information (ZN field and Q field names) to the IO server." alt="" coords="385,345,566,401"/>
<area shape="rect" href="namespaceiobridge__mod.html#a40984bca5926f25f857eb79536ffbb30" title="Will assemble an individual description of an array data field." alt="" coords="855,433,1016,474"/>
<area shape="rect" href="namespaceiobridge__mod.html#a116dd9a1dd530d8225607946a31731d7" title="Packages the local MONC decomposition information into descriptions for communication." alt="" coords="620,457,807,513"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_icgraph" id="anamespaceiobridge__mod_a62439f3fcbbf2ab618d4b03bbaa3436f_icgraph">
<area shape="rect" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="a24dcc29fe104bea3b0254ae43b7007e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24dcc29fe104bea3b0254ae43b7007e4">&#9670;&nbsp;</a></span>iobridge_get_descriptor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structmonc__component__mod_1_1component__descriptor__type.html">component_descriptor_type</a>) function, public iobridge_mod::iobridge_get_descriptor</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00064">64</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    iobridge_get_descriptor%name=<span class="stringliteral">&quot;iobridge&quot;</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    iobridge_get_descriptor%version=0.1</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    iobridge_get_descriptor%initialisation=&gt;init_callback</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    iobridge_get_descriptor%timestep=&gt;timestep_callback</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    iobridge_get_descriptor%finalisation=&gt;finalisation_callback</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a24dcc29fe104bea3b0254ae43b7007e4_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a24dcc29fe104bea3b0254ae43b7007e4_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a24dcc29fe104bea3b0254ae43b7007e4_cgraph" id="anamespaceiobridge__mod_a24dcc29fe104bea3b0254ae43b7007e4_cgraph">
<area shape="rect" title=" " alt="" coords="5,230,156,271"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,165,371,206"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="226,381,349,422"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,230,365,271"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="429,165,563,206"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="651,123,785,165"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="877,157,1035,198"/>
<area shape="rect" href="namespaceiobridge__mod.html#a4c0c3fb5c64b2528d8034a7ea25b9aa0" title="Packs map fields into the send buffer." alt="" coords="878,26,1034,67"/>
<area shape="rect" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c" title="Packs scalar fields into the send bufer." alt="" coords="873,91,1039,133"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="1097,149,1273,205"/>
<area shape="rect" href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57" title="Packs the data of a specific prognostic field into a buffer." alt="" coords="1111,229,1260,270"/>
<area shape="rect" href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c" title="Packs the Q fields into the send buffer." alt="" coords="1119,85,1252,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="1321,85,1516,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="1097,5,1273,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a13945858ddf4ab5bf1cc04c95900a2d2" title="Builds the MPI data types that correspond to the field descriptions and sizings." alt="" coords="430,381,562,422"/>
<area shape="rect" href="namespaceiobridge__mod.html#a3d0b41aac7bd5b00ad7effce26888fa6" title="Populates the sendable field definitions with the field sizing information." alt="" coords="419,446,573,487"/>
<area shape="rect" href="namespaceiobridge__mod.html#a9d0138f6ab5b606d7e1d3d44a7dd4c78" title="Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol,..." alt="" coords="422,590,570,631"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="424,301,568,357"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6c8cd54f14009e4ac21dea06a3fe216e" title="Builds the MPI data type for a specific definition with sizing information." alt="" coords="621,381,815,422"/>
<area shape="rect" href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48" title="Retrieves the sizing information associated with a specific field." alt="" coords="865,374,1047,415"/>
<area shape="rect" href="namespaceiobridge__mod.html#a5feca2e9026e84280592878c633c310e" title="Populates the field information for a specific publically available field offered by one of the compo..." alt="" coords="636,446,800,487"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe4a3c9b65dc951b29f3c1eb5a39dce9" title="Populates the globally visible sendable fields which is a key value pair mapping between name and des..." alt="" coords="631,511,805,567"/>
<area shape="rect" href="namespaceiobridge__mod.html#a809fd286beeeeca69659d6305ebe9ea2" title="Generates a sendable description based upon the dimension information supplied, missing arguments mea..." alt="" coords="879,518,1033,559"/>
<area shape="rect" href="namespaceiobridge__mod.html#a72a9a954ffcbffaed0b5cefad8e0ed7b" title="Retrieve the total number of fields, which is all the fields in all the data definitions." alt="" coords="641,590,795,631"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6a67433b766989cb8736c9646c6d7dd8" title="Based upon the received data and field definitions this will configure the IO bridge internal represe..." alt="" coords="622,655,814,697"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe137d163c985cbadba27f2ab7830751" title="Looks up a specific definition based upon its name and returns the index." alt="" coords="865,655,1047,697"/>
<area shape="rect" href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="649,221,787,277"/>
<area shape="rect" href="namespaceiobridge__mod.html#a0bb9b5e93e13258d4d07383805a1fac0" title="Sends the general MONC information (ZN field and Q field names) to the IO server." alt="" coords="627,301,809,357"/>
<area shape="rect" href="namespaceiobridge__mod.html#a40984bca5926f25f857eb79536ffbb30" title="Will assemble an individual description of an array data field." alt="" coords="1105,294,1266,335"/>
<area shape="rect" href="namespaceiobridge__mod.html#a116dd9a1dd530d8225607946a31731d7" title="Packages the local MONC decomposition information into descriptions for communication." alt="" coords="863,287,1049,343"/>
</map>
</div>

</div>
</div>
<a id="afbe2c82d31a1a851ad23dc1cc0b58872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbe2c82d31a1a851ad23dc1cc0b58872">&#9670;&nbsp;</a></span>pack_array_into_send_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::pack_array_into_send_buffer </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>data_definition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__field__type.html">io_configuration_field_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>current_buffer_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs array fields into the send bufer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_definition</td><td>The data definition description </td></tr>
    <tr><td class="paramname">field</td><td>The specific field we are looking up </td></tr>
    <tr><td class="paramname">current_buffer_point</td><td>The current point in the buffer where this data will be entered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new current buffer point which is after the data addition has taken place </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00910">910</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">intent(inout)</span> :: data_definition</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;    <span class="keywordtype">type</span>(io_configuration_field_type), <span class="keywordtype">intent(in)</span> :: field</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: current_buffer_point</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;local_grid_size&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;           int_array=current_state%local_grid%size)</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;local_grid_start&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;           int_array=current_state%local_grid%start)</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;z&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%z)</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olubar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%olubar)</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olzubar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%olzubar)</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olvbar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%olvbar)</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olzvbar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%olzvbar)</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olthbar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%olthbar)</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olzthbar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%olzthbar)</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olqbar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;           real_array_2d=current_state%global_grid%configuration%vertical%olqbar)</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;olzqbar&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;           real_array_2d=current_state%global_grid%configuration%vertical%olzqbar)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;thref&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%thref)</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;prefn&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%prefn)</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;rhon&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%rhon)</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;rho&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%rho)</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;u&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      current_state%u%data=current_state%u%data+current_state%ugal</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%u, &amp;</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;           current_buffer_point, current_state%local_grid)</div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      current_state%u%data=current_state%u%data-current_state%ugal</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;u_nogal&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%u, current_buffer_point, &amp;</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;zu&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%zu, current_buffer_point,&amp;</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;v&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      current_state%v%data=current_state%v%data+current_state%vgal</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%v, current_buffer_point, &amp;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      current_state%v%data=current_state%v%data-current_state%vgal</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;v_nogal&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%v, current_buffer_point, &amp;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;zv&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%zv, current_buffer_point,&amp;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;w&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%w, current_buffer_point, &amp;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;zw&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%zw, current_buffer_point,&amp;</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;q&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      pack_array_into_send_buffer=pack_q_fields(data_definition%send_buffer, current_state%q, current_state%number_q_fields, &amp;</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;           current_buffer_point, current_state%local_grid)</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;zq&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      pack_array_into_send_buffer=pack_q_fields(data_definition%send_buffer, current_state%zq, current_state%number_q_fields, &amp;</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;           current_buffer_point, current_state%local_grid)</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;th&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%th, current_buffer_point,&amp;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;zth&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%zth, current_buffer_point,&amp;</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;p&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer, current_state%p, current_buffer_point, &amp;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;           current_state%local_grid)</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;sth_lw&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer,  &amp;</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;            current_state%sth_lw, current_buffer_point, current_state%local_grid) </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;sth_sw&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer,  &amp;</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            current_state%sth_sw, current_buffer_point, current_state%local_grid)</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;w_up&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%w_up)</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;w_dwn&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      pack_array_into_send_buffer=pack_array_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;           real_array_1d=current_state%global_grid%configuration%vertical%w_dwn)</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">!!$    else if (field%name .eq. &quot;sw_down_surf&quot;) then</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">!!$      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer,  &amp;</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment">!!$            current_state%sth_sw, current_buffer_point, current_state%local_grid)</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">!!$    else if (field%name .eq. &quot;lww_down_surf&quot;) then</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">!!$      pack_array_into_send_buffer=pack_prognostic_flow_field(data_definition%send_buffer,  &amp;</span></div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">!!$            current_state%sth_sw, current_buffer_point, current_state%local_grid)  </span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;       <span class="comment">! Handle component field here</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;       pack_array_into_send_buffer=handle_component_field_array_packing_into_send_buffer(current_state, &amp;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            data_definition, field, current_buffer_point)</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_cgraph" id="anamespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_cgraph">
<area shape="rect" title="Packs array fields into the send bufer." alt="" coords="5,85,164,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="212,5,388,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57" title="Packs the data of a specific prognostic field into a buffer." alt="" coords="225,85,375,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c" title="Packs the Q fields into the send buffer." alt="" coords="233,150,367,191"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="436,13,631,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_icgraph" id="anamespaceiobridge__mod_afbe2c82d31a1a851ad23dc1cc0b58872_icgraph">
<area shape="rect" title="Packs array fields into the send bufer." alt="" coords="781,39,940,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="a4c0c3fb5c64b2528d8034a7ea25b9aa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0c3fb5c64b2528d8034a7ea25b9aa0">&#9670;&nbsp;</a></span>pack_map_into_send_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::pack_map_into_send_buffer </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>data_definition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__field__type.html">io_configuration_field_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>current_buffer_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs map fields into the send buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_definition</td><td>The data definition description </td></tr>
    <tr><td class="paramname">field</td><td>The specific field we are looking up </td></tr>
    <tr><td class="paramname">current_buffer_point</td><td>The current point in the buffer where this data will be entered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new current buffer point which is after the data addition has taken place </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00880">880</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">intent(inout)</span> :: data_definition</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;    <span class="keywordtype">type</span>(io_configuration_field_type), <span class="keywordtype">intent(in)</span> :: field</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: current_buffer_point</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;    <span class="keywordtype">type</span>(q_metadata_type) :: specific_q_data</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    <span class="keywordtype">type</span>(hashmap_type) :: q_indicies_map</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160; </div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;options_database&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      pack_map_into_send_buffer=pack_map_field(data_definition%send_buffer, current_buffer_point, current_state%options_database)</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;q_indicies&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <span class="keywordflow">do</span> i=1, get_max_number_q_indices()</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        specific_q_data=get_indices_descriptor(i)</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        <span class="keywordflow">if</span> (specific_q_data%l_used) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;          <span class="keyword">call </span>c_put_integer(q_indicies_map, specific_q_data%name, i)</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      pack_map_into_send_buffer=pack_map_field(data_definition%send_buffer, current_buffer_point, q_indicies_map)</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keyword">call </span>c_free(q_indicies_map)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;<span class="keywordflow">    end if</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a4c0c3fb5c64b2528d8034a7ea25b9aa0_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a4c0c3fb5c64b2528d8034a7ea25b9aa0_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a4c0c3fb5c64b2528d8034a7ea25b9aa0_icgraph" id="anamespaceiobridge__mod_a4c0c3fb5c64b2528d8034a7ea25b9aa0_icgraph">
<area shape="rect" title="Packs map fields into the send buffer." alt="" coords="781,39,937,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="a056ea7a2bc074a5b33fc18823238aa57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a056ea7a2bc074a5b33fc18823238aa57">&#9670;&nbsp;</a></span>pack_prognostic_flow_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::pack_prognostic_flow_field </td>
          <td>(</td>
          <td class="paramtype">character, dimension(:), intent(inout), allocatable&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structprognostics__mod_1_1prognostic__field__type.html">prognostic_field_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>prognostic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>start_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1local__grid__type.html">local_grid_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>local_grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs the data of a specific prognostic field into a buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The buffer to pack the field into </td></tr>
    <tr><td class="paramname">prognostic</td><td>The prognostic field <br  />
 </td></tr>
    <tr><td class="paramname">start_offset</td><td>The starting offset to write into the buffer </td></tr>
    <tr><td class="paramname">local_grid</td><td>Description of the local grid </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The next location in the buffer to write to (next start offset) </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l01075">1075</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span> :: buffer</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;    <span class="keywordtype">type</span>(prognostic_field_type), <span class="keywordtype">intent(inout)</span> :: prognostic</div>
<div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: start_offset</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordtype">type</span>(local_grid_type), <span class="keywordtype">intent(inout)</span> :: local_grid    </div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    <span class="keywordtype">integer</span> :: target_end</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    target_end=start_offset + (local_grid%size(z_index)*local_grid%size(y_index)*local_grid%size(x_index)*kind(prognostic%data)-1)</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160; </div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;    buffer(start_offset : target_end) = transfer(prognostic%data(&amp;</div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;         local_grid%local_domain_start_index(z_index): local_grid%local_domain_end_index(z_index),&amp;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;         local_grid%local_domain_start_index(y_index): local_grid%local_domain_end_index(y_index), &amp;</div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;         local_grid%local_domain_start_index(x_index): local_grid%local_domain_end_index(x_index)), &amp;</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;         buffer(start_offset : target_end))</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;    pack_prognostic_flow_field=target_end+1</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a056ea7a2bc074a5b33fc18823238aa57_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a056ea7a2bc074a5b33fc18823238aa57_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a056ea7a2bc074a5b33fc18823238aa57_icgraph" id="anamespaceiobridge__mod_a056ea7a2bc074a5b33fc18823238aa57_icgraph">
<area shape="rect" title="Packs the data of a specific prognostic field into a buffer." alt="" coords="988,39,1137,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="781,39,940,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="a1542c1cdf01e4cb8fe48c00e1c0e5c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1542c1cdf01e4cb8fe48c00e1c0e5c9c">&#9670;&nbsp;</a></span>pack_q_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::pack_q_fields </td>
          <td>(</td>
          <td class="paramtype">character, dimension(:), intent(inout), allocatable&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structprognostics__mod_1_1prognostic__field__type.html">prognostic_field_type</a>), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>q_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_q_fields</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>start_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structgrids__mod_1_1local__grid__type.html">local_grid_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>local_grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs the Q fields into the send buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The send buffer to pack into </td></tr>
    <tr><td class="paramname">q_fields</td><td>Q prognostic fields </td></tr>
    <tr><td class="paramname">number_q_fields</td><td>The number of Q fields </td></tr>
    <tr><td class="paramname">start_offset</td><td>Starting offset in the buffer to pack into </td></tr>
    <tr><td class="paramname">local_grid</td><td>Local grid description </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Updated write location, which is the next location in the buffer to write to </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l01100">1100</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span>, <span class="keywordtype">intent(inout)</span> :: buffer</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    <span class="keywordtype">type</span>(prognostic_field_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: q_fields</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: start_offset, number_q_fields</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;    <span class="keywordtype">type</span>(local_grid_type), <span class="keywordtype">intent(inout)</span> :: local_grid    </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;    <span class="keywordtype">integer</span> :: target_end, i, current_starting_index</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160; </div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;    current_starting_index=start_offset</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160; </div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;    <span class="keywordflow">do</span> i=1,number_q_fields</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      target_end=current_starting_index + (local_grid%size(z_index)*local_grid%size(y_index)*&amp;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;           local_grid%size(x_index)*kind(q_fields(i)%data)-1)</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      buffer(current_starting_index : target_end) = transfer(q_fields(i)%data(&amp;</div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;           local_grid%local_domain_start_index(z_index): local_grid%local_domain_end_index(z_index),&amp;</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;           local_grid%local_domain_start_index(y_index): local_grid%local_domain_end_index(y_index), &amp;</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;           local_grid%local_domain_start_index(x_index): local_grid%local_domain_end_index(x_index)), &amp;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;           buffer(current_starting_index : target_end))</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      current_starting_index=target_end+1      </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    pack_q_fields=target_end+1</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a1542c1cdf01e4cb8fe48c00e1c0e5c9c_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a1542c1cdf01e4cb8fe48c00e1c0e5c9c_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a1542c1cdf01e4cb8fe48c00e1c0e5c9c_icgraph" id="anamespaceiobridge__mod_a1542c1cdf01e4cb8fe48c00e1c0e5c9c_icgraph">
<area shape="rect" title="Packs the Q fields into the send buffer." alt="" coords="988,39,1121,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="781,39,940,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="aeb4bf18f8774bcdab06ceae4599ab43c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb4bf18f8774bcdab06ceae4599ab43c">&#9670;&nbsp;</a></span>pack_scalar_into_send_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::pack_scalar_into_send_buffer </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>data_definition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__field__type.html">io_configuration_field_type</a>), intent(in)&#160;</td>
          <td class="paramname"><em>field</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>current_buffer_point</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs scalar fields into the send bufer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_definition</td><td>The data definition description </td></tr>
    <tr><td class="paramname">field</td><td>The specific field we are looking up </td></tr>
    <tr><td class="paramname">current_buffer_point</td><td>The current point in the buffer where this data will be entered </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The new current buffer point which is after the data addition has taken place </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00775">775</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">intent(inout)</span> :: data_definition</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;    <span class="keywordtype">type</span>(io_configuration_field_type), <span class="keywordtype">intent(in)</span> :: field</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: current_buffer_point</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;timestep&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;           int_value=current_state%timestep)</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;terminated&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;           logical_value=.not. current_state%continue_timestep .and. in_finalisation_callback)</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;z_size&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;           int_value=current_state%global_grid%size(z_index))</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;y_size&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;           int_value=current_state%global_grid%size(y_index))</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;y_bottom&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;           real_value=current_state%global_grid%bottom(y_index))</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;y_top&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;           real_value=current_state%global_grid%top(y_index))</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;y_resolution&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;           real_value=current_state%global_grid%resolution(y_index))</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;x_size&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;           int_value=current_state%global_grid%size(x_index))</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;x_bottom&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;           real_value=current_state%global_grid%bottom(x_index))</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;x_top&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;           real_value=current_state%global_grid%top(x_index))</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;x_resolution&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;           real_value=current_state%global_grid%resolution(x_index))</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;time&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="comment">! The time is incremented with dtm as the model was about to increment for the next step and this is needed for diagnostics</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;           real_value=current_state%time+current_state%dtm)</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;ugal&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;           real_value=current_state%ugal)</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;vgal&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;           real_value=current_state%vgal)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;nqfields&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;           int_value=current_state%number_q_fields)</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;dtm&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;           real_value=current_state%dtm)</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;dtm_new&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;           real_value=current_state%dtm_new)</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;absolute_new_dtm&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;           real_value=current_state%absolute_new_dtm)</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (field%name .eq. <span class="stringliteral">&quot;rad_last_time&quot;</span>) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;       pack_scalar_into_send_buffer=pack_scalar_field(data_definition%send_buffer, current_buffer_point, &amp;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;            real_value=current_state%rad_last_time)</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="comment">! Handle component field here</span></div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      pack_scalar_into_send_buffer=handle_component_field_scalar_packing_into_send_buffer(current_state, &amp;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;           data_definition, field, current_buffer_point)</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_cgraph" id="anamespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_cgraph">
<area shape="rect" title="Packs scalar fields into the send bufer." alt="" coords="5,13,172,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="220,5,396,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="444,13,639,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_icgraph" id="anamespaceiobridge__mod_aeb4bf18f8774bcdab06ceae4599ab43c_icgraph">
<area shape="rect" title="Packs scalar fields into the send bufer." alt="" coords="781,39,948,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="ab1fb7de25506e362a1211db206352067"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1fb7de25506e362a1211db206352067">&#9670;&nbsp;</a></span>pack_send_buffer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::pack_send_buffer </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), intent(inout)&#160;</td>
          <td class="paramname"><em>data_definition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packs the current state into the send buffer. This iterates through each field in the data description and adds it to the send buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_definition</td><td>The definition of the data which hold the send buffer and the fields </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00746">746</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">intent(inout)</span> :: data_definition</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordtype">integer</span> :: current_buffer_point, i</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160; </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    current_buffer_point=1</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <span class="keywordflow">do</span> i=1, data_definition%number_of_data_fields</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      <span class="keywordflow">if</span> (data_definition%fields(i)%enabled) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;        <span class="keywordflow">if</span> (data_definition%fields(i)%field_type == array_field_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;          current_buffer_point=pack_array_into_send_buffer(current_state, data_definition, data_definition%fields(i), &amp;</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;               current_buffer_point)</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data_definition%fields(i)%field_type == map_field_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;          current_buffer_point=pack_map_into_send_buffer(current_state, data_definition, data_definition%fields(i), &amp;</div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;               current_buffer_point)</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (data_definition%fields(i)%field_type == scalar_field_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;          current_buffer_point=pack_scalar_into_send_buffer(current_state, data_definition, data_definition%fields(i), &amp;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;               current_buffer_point)</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_cgraph" id="anamespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_cgraph">
<area shape="rect" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="5,153,139,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="191,86,349,127"/>
<area shape="rect" href="namespaceiobridge__mod.html#a4c0c3fb5c64b2528d8034a7ea25b9aa0" title="Packs map fields into the send buffer." alt="" coords="192,153,348,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c" title="Packs scalar fields into the send bufer." alt="" coords="187,219,353,261"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="401,5,577,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57" title="Packs the data of a specific prognostic field into a buffer." alt="" coords="415,85,564,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c" title="Packs the Q fields into the send buffer." alt="" coords="423,150,556,191"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="625,118,820,159"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="401,215,577,271"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_icgraph" id="anamespaceiobridge__mod_ab1fb7de25506e362a1211db206352067_icgraph">
<area shape="rect" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="600,39,733,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="a116dd9a1dd530d8225607946a31731d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a116dd9a1dd530d8225607946a31731d7">&#9670;&nbsp;</a></span>package_local_monc_decomposition_into_descriptions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::package_local_monc_decomposition_into_descriptions </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structio__server__client__mod_1_1data__sizing__description__type.html">data_sizing_description_type</a>), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>data_description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packages the local MONC decomposition information into descriptions for communication. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_description</td><td>THe data description to pack into </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00561">561</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <span class="keywordtype">type</span>(data_sizing_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: data_description</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    <span class="keywordtype">type</span>(io_server_sendable_field_sizing) :: sizing_info</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160; </div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    sizing_info%number_dimensions=3</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    sizing_info%dimensions(z_index)=current_state%local_grid%size(z_index)</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    sizing_info%dimensions(y_index)=current_state%local_grid%size(y_index)</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    sizing_info%dimensions(x_index)=current_state%local_grid%size(x_index)</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keyword">call </span>assemble_individual_description(data_description, 1, local_sizes_key, sizing_info)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    sizing_info%dimensions(z_index)=current_state%local_grid%start(z_index)</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    sizing_info%dimensions(y_index)=current_state%local_grid%start(y_index)</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    sizing_info%dimensions(x_index)=current_state%local_grid%start(x_index)</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keyword">call </span>assemble_individual_description(data_description, 2, local_start_points_key, sizing_info)</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;    sizing_info%dimensions(z_index)=current_state%local_grid%end(z_index)</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    sizing_info%dimensions(y_index)=current_state%local_grid%end(y_index)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;    sizing_info%dimensions(x_index)=current_state%local_grid%end(x_index)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;    <span class="keyword">call </span>assemble_individual_description(data_description, 3, local_end_points_key, sizing_info)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    sizing_info%number_dimensions=1</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    sizing_info%dimensions(1)=get_number_active_q_indices()</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keyword">call </span>assemble_individual_description(data_description, 4, number_q_indicies_key, sizing_info)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_cgraph" id="anamespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_cgraph">
<area shape="rect" title="Packages the local MONC decomposition information into descriptions for communication." alt="" coords="5,5,192,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a40984bca5926f25f857eb79536ffbb30" title="Will assemble an individual description of an array data field." alt="" coords="240,13,401,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_icgraph" id="anamespaceiobridge__mod_a116dd9a1dd530d8225607946a31731d7_icgraph">
<area shape="rect" title="Packages the local MONC decomposition information into descriptions for communication." alt="" coords="753,5,940,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="567,5,705,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="375,5,519,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,13,327,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,13,156,54"/>
</map>
</div>

</div>
</div>
<a id="a5feca2e9026e84280592878c633c310e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5feca2e9026e84280592878c633c310e">&#9670;&nbsp;</a></span>populate_component_public_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::populate_component_public_field </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>field_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Populates the field information for a specific publically available field offered by one of the components. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">field_visibility_descriptor</td><td>The field descriptor which contains sizing information </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00282">282</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keywordtype">character(len=*)</span>, <span class="keywordtype">intent(in)</span> :: field_name</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: generic_data</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <span class="keywordtype">type</span>(io_server_sendable_field_sizing), <span class="keywordtype">pointer</span> :: field_sizing</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordtype">type</span>(component_field_information_type) :: field_information</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordtype">type</span>(component_field_information_type), <span class="keywordtype">pointer</span> :: field_information_info_alloc</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160; </div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    field_information=get_component_field_information(current_state, field_name)</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (field_information%enabled) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      <span class="keyword">allocate</span>(field_information_info_alloc, source=field_information)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      generic_data=&gt;field_information_info_alloc</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="keyword">call </span>c_put_generic(component_field_descriptions, field_name, generic_data, .false.)</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="keyword">allocate</span>(field_sizing)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      field_sizing%number_dimensions=field_information%number_dimensions</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      field_sizing%dimensions=field_information%dimension_sizes</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      generic_data=&gt;field_sizing</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, field_name, generic_data, .false.)</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="keywordflow">    end if</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a5feca2e9026e84280592878c633c310e_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a5feca2e9026e84280592878c633c310e_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a5feca2e9026e84280592878c633c310e_icgraph" id="anamespaceiobridge__mod_a5feca2e9026e84280592878c633c310e_icgraph">
<area shape="rect" title="Populates the field information for a specific publically available field offered by one of the compo..." alt="" coords="577,5,741,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a3d0b41aac7bd5b00ad7effce26888fa6" title="Populates the sendable field definitions with the field sizing information." alt="" coords="375,5,529,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="a6a67433b766989cb8736c9646c6d7dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a67433b766989cb8736c9646c6d7dd8">&#9670;&nbsp;</a></span>populate_data_definition_configuration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::populate_data_definition_configuration </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structio__server__client__mod_1_1definition__description__type.html">definition_description_type</a>), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>definition_descriptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_defns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structio__server__client__mod_1_1field__description__type.html">field_description_type</a>), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>field_descriptions</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Based upon the received data and field definitions this will configure the IO bridge internal representation of these facets, which is a structured tree, data defintions holding their own fields rather than the unstructured data we get from the IO server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">definition_descriptions</td><td>data definitions received from the IO server </td></tr>
    <tr><td class="paramname">number_defns</td><td>The number of data definitions </td></tr>
    <tr><td class="paramname">field_descriptions</td><td>The field descriptions that we received from the IO server </td></tr>
    <tr><td class="paramname">number_fields</td><td>The total number of field descriptions received </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00695">695</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordtype">type</span>(definition_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: definition_descriptions</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordtype">type</span>(field_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: field_descriptions</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: number_defns, number_fields</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160; </div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <span class="keywordtype">integer</span> :: i, definition_index, field_index</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160; </div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="keyword">allocate</span>(data_definitions(number_defns))</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">do</span> i=1, number_defns</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      data_definitions(i)%name=definition_descriptions(i)%definition_name</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      data_definitions(i)%send_on_terminate=definition_descriptions(i)%send_on_terminate</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      data_definitions(i)%number_of_data_fields=0 <span class="comment">! Will increment this for each field</span></div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      data_definitions(i)%frequency=definition_descriptions(i)%frequency</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keyword">allocate</span>(data_definitions(i)%fields(definition_descriptions(i)%number_fields))</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <span class="keywordflow">do</span> i=1, number_fields</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      definition_index=get_definition_index(field_descriptions(i)%definition_name)</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      field_index=data_definitions(definition_index)%number_of_data_fields+1</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      data_definitions(definition_index)%number_of_data_fields=field_index</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      data_definitions(definition_index)%fields(field_index)%name=field_descriptions(i)%field_name</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      data_definitions(definition_index)%fields(field_index)%field_type=field_descriptions(i)%field_type      </div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      data_definitions(definition_index)%fields(field_index)%data_type=field_descriptions(i)%data_type</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;      data_definitions(definition_index)%fields(field_index)%optional=field_descriptions(i)%optional</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">if</span> (field_descriptions(i)%optional .or. field_descriptions(i)%field_type == array_field_type .or. &amp;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;           field_descriptions(i)%field_type == map_field_type) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="keyword">call </span>c_put_integer(unique_field_names, field_descriptions(i)%field_name, 1)</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">if</span> (.not. field_descriptions(i)%optional) data_definitions(definition_index)%fields(field_index)%enabled=.true.</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="keywordflow">    end do</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_cgraph" id="anamespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_cgraph">
<area shape="rect" title="Based upon the received data and field definitions this will configure the IO bridge internal represe..." alt="" coords="5,5,197,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe137d163c985cbadba27f2ab7830751" title="Looks up a specific definition based upon its name and returns the index." alt="" coords="245,5,427,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_icgraph" id="anamespaceiobridge__mod_a6a67433b766989cb8736c9646c6d7dd8_icgraph">
<area shape="rect" title="Based upon the received data and field definitions this will configure the IO bridge internal represe..." alt="" coords="571,5,763,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a9d0138f6ab5b606d7e1d3d44a7dd4c78" title="Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol,..." alt="" coords="375,5,523,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="afe4a3c9b65dc951b29f3c1eb5a39dce9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4a3c9b65dc951b29f3c1eb5a39dce9">&#9670;&nbsp;</a></span>populate_globally_visible_sendable_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::populate_globally_visible_sendable_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Populates the globally visible sendable fields which is a key value pair mapping between name and description of that field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00308">308</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordtype">integer</span> :: x_size, y_size, z_size</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="keywordtype">class</span>(*), <span class="keywordtype">pointer</span> :: raw_generic</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160; </div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    z_size=current_state%local_grid%size(z_index)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    y_size=current_state%local_grid%size(y_index)</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    x_size=current_state%local_grid%size(x_index)</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    raw_generic=&gt;generate_sendable_description(options_size(current_state%options_database))</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;options_database&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (get_number_active_q_indices() .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      raw_generic=&gt;generate_sendable_description(get_number_active_q_indices())</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;q_indicies&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    raw_generic=&gt;generate_sendable_description(3)</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;local_grid_size&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;local_grid_start&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#ifdef U_ACTIVE</span></div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor"></span>    raw_generic=&gt;generate_sendable_description()</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;x_size&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;x_bottom&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;x_resolution&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    raw_generic=&gt;generate_sendable_description(z_size, y_size, x_size)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;u&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;u_nogal&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;zu&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olubar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      raw_generic=&gt;generate_sendable_description(z_size)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olubar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olzubar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef V_ACTIVE</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="preprocessor"></span>    raw_generic=&gt;generate_sendable_description()</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;y_size&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;y_bottom&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;y_resolution&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    raw_generic=&gt;generate_sendable_description(z_size, y_size, x_size)</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;v&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;v_nogal&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;zv&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olvbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      raw_generic=&gt;generate_sendable_description(z_size)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olvbar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olzvbar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#ifdef W_ACTIVE</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor"></span>    raw_generic=&gt;generate_sendable_description(z_size)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;z&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;thref&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;prefn&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;rhon&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;rho&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    raw_generic=&gt;generate_sendable_description(z_size, y_size, x_size)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;w&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;zw&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="preprocessor">#endif          </span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (current_state%number_q_fields .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      raw_generic=&gt;generate_sendable_description(z_size, y_size, x_size, current_state%number_q_fields)</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;q&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;zq&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olqbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        raw_generic=&gt;generate_sendable_description(z_size, current_state%number_q_fields)</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olqbar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olzqbar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <span class="keywordflow">if</span> (current_state%th%active) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      raw_generic=&gt;generate_sendable_description(z_size, y_size, x_size)</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;th&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;zth&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%olthbar)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        raw_generic=&gt;generate_sendable_description(z_size)</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olthbar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;olzthbar&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">if</span> (current_state%p%active) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      raw_generic=&gt;generate_sendable_description(z_size, y_size, x_size)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;p&quot;</span>, raw_generic, .false.)   </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="comment">! need to dump heating rate tendency from socrates radiation</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <span class="keywordflow">if</span> (is_component_enabled(current_state%options_database, <span class="stringliteral">&quot;socrates_couple&quot;</span>)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;       raw_generic=&gt;generate_sendable_description(z_size, y_size, x_size)</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;       <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;sth_lw&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;       <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;sth_sw&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="keywordflow">    endif</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;       </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="keywordflow">if</span> (is_component_enabled(current_state%options_database, <span class="stringliteral">&quot;pdf_analysis&quot;</span>)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%w_up)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        raw_generic=&gt;generate_sendable_description(z_size)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;w_up&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160; </div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">if</span> (<span class="keyword">allocated</span>(current_state%global_grid%configuration%vertical%w_dwn)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        raw_generic=&gt;generate_sendable_description(z_size)</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        <span class="keyword">call </span>c_put_generic(sendable_fields, <span class="stringliteral">&quot;w_dwn&quot;</span>, raw_generic, .false.)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="keywordflow">    end if</span> </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160; </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_cgraph" id="anamespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_cgraph">
<area shape="rect" title="Populates the globally visible sendable fields which is a key value pair mapping between name and des..." alt="" coords="5,5,180,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a809fd286beeeeca69659d6305ebe9ea2" title="Generates a sendable description based upon the dimension information supplied, missing arguments mea..." alt="" coords="228,13,383,54"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_icgraph" id="anamespaceiobridge__mod_afe4a3c9b65dc951b29f3c1eb5a39dce9_icgraph">
<area shape="rect" title="Populates the globally visible sendable fields which is a key value pair mapping between name and des..." alt="" coords="577,5,752,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a3d0b41aac7bd5b00ad7effce26888fa6" title="Populates the sendable field definitions with the field sizing information." alt="" coords="375,13,529,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,13,327,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,13,156,54"/>
</map>
</div>

</div>
</div>
<a id="a3d0b41aac7bd5b00ad7effce26888fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d0b41aac7bd5b00ad7effce26888fa6">&#9670;&nbsp;</a></span>populate_sendable_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::populate_sendable_fields </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Populates the sendable field definitions with the field sizing information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00267">267</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160; </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="keywordtype">type</span>(list_type) :: published_field_descriptors</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keyword">call </span>populate_globally_visible_sendable_fields(current_state)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    published_field_descriptors=get_all_component_published_fields()</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <span class="keywordflow">do</span> i=1, c_size(published_field_descriptors)</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keyword">call </span>populate_component_public_field(current_state, c_get_string(published_field_descriptors, i))</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keywordflow">    end do</span>    </div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_cgraph" id="anamespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_cgraph">
<area shape="rect" title="Populates the sendable field definitions with the field sizing information." alt="" coords="5,41,160,83"/>
<area shape="rect" href="namespaceiobridge__mod.html#a5feca2e9026e84280592878c633c310e" title="Populates the field information for a specific publically available field offered by one of the compo..." alt="" coords="213,5,377,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe4a3c9b65dc951b29f3c1eb5a39dce9" title="Populates the globally visible sendable fields which is a key value pair mapping between name and des..." alt="" coords="208,70,383,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a809fd286beeeeca69659d6305ebe9ea2" title="Generates a sendable description based upon the dimension information supplied, missing arguments mea..." alt="" coords="431,77,585,119"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_icgraph" id="anamespaceiobridge__mod_a3d0b41aac7bd5b00ad7effce26888fa6_icgraph">
<area shape="rect" title="Populates the sendable field definitions with the field sizing information." alt="" coords="375,5,529,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="a9d0138f6ab5b606d7e1d3d44a7dd4c78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d0138f6ab5b606d7e1d3d44a7dd4c78">&#9670;&nbsp;</a></span>register_with_io_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::register_with_io_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>mpi_type_definition_description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>mpi_type_field_description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol, which is sending the registration command, receiving the data and field definitions from the IO server and then sending back the sizing for the fields that this MONC will contribute. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">mpi_type_definition_description</td><td>MPI data type for data definition message </td></tr>
    <tr><td class="paramname">mpi_type_field_description</td><td>MPI data type for field definition message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00646">646</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: mpi_type_definition_description, mpi_type_field_description</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160; </div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <span class="keywordtype">type</span>(definition_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: definition_descriptions</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    <span class="keywordtype">type</span>(field_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: field_descriptions</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordtype">integer</span> :: number_defns, number_fields, status(MPI_STATUS_SIZE), ierr</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160; </div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;    <span class="keyword">call </span>mpi_send(register_command, 1, mpi_int, current_state%parallel%corresponding_io_server_process, &amp;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         command_tag, mpi_comm_world, ierr)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160; </div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keyword">call </span>mpi_probe(current_state%parallel%corresponding_io_server_process, data_tag, mpi_comm_world, status, ierr)</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keyword">call </span>mpi_get_count(status, mpi_type_definition_description, number_defns, ierr)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="keyword">allocate</span>(definition_descriptions(number_defns))</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keyword">call </span>mpi_recv(definition_descriptions, number_defns, mpi_type_definition_description, &amp;</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         current_state%parallel%corresponding_io_server_process, data_tag, mpi_comm_world, mpi_status_ignore, ierr)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    number_fields=get_total_number_of_fields(definition_descriptions, number_defns)</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160; </div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keyword">allocate</span>(field_descriptions(number_fields))</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keyword">call </span>mpi_recv(field_descriptions, number_fields, mpi_type_field_description, &amp;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;         current_state%parallel%corresponding_io_server_process, data_tag, mpi_comm_world, mpi_status_ignore, ierr)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keyword">call </span>populate_data_definition_configuration(definition_descriptions, number_defns, field_descriptions, number_fields)</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="keyword">deallocate</span>(definition_descriptions)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_cgraph" id="anamespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_cgraph">
<area shape="rect" title="Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol,..." alt="" coords="5,39,153,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#a72a9a954ffcbffaed0b5cefad8e0ed7b" title="Retrieve the total number of fields, which is all the fields in all the data definitions." alt="" coords="220,5,375,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a6a67433b766989cb8736c9646c6d7dd8" title="Based upon the received data and field definitions this will configure the IO bridge internal represe..." alt="" coords="201,71,393,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#afe137d163c985cbadba27f2ab7830751" title="Looks up a specific definition based upon its name and returns the index." alt="" coords="441,71,623,112"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_icgraph" id="anamespaceiobridge__mod_a9d0138f6ab5b606d7e1d3d44a7dd4c78_icgraph">
<area shape="rect" title="Registers this MONC with the corresponding IO server. This will encapsulate the entire protocol,..." alt="" coords="375,5,523,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,5,327,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<a id="aea7ebb2c43679108eb4989eb41c5b28b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea7ebb2c43679108eb4989eb41c5b28b">&#9670;&nbsp;</a></span>send_data_field_sizes_to_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::send_data_field_sizes_to_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>mpi_type_data_sizing_description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">type(<a class="el" href="structio__server__client__mod_1_1data__sizing__description__type.html">data_sizing_description_type</a>), dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>data_description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>number_unique_fields</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Assembles all the data field sizing information and sends this to the IO server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">mpi_type_data_sizing_description</td><td>MPI data type representing the sizing message </td></tr>
    <tr><td class="paramname">data_description</td><td>Data descriptions which will be populated and then sent </td></tr>
    <tr><td class="paramname">number_unique_fields</td><td>The number of unique fields that we are sending over </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00481">481</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: mpi_type_data_sizing_description, number_unique_fields</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    <span class="keywordtype">type</span>(data_sizing_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: data_description</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordtype">integer</span> :: ierr, i, next_index, request_handle</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: field_name</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keyword">call </span>package_local_monc_decomposition_into_descriptions(current_state, data_description)</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    next_index=5</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">do</span> i=1, number_unique_fields</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      field_name=c_key_at(unique_field_names, i)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <span class="keywordflow">if</span> (c_contains(sendable_fields, field_name)) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keyword">call </span>assemble_individual_description(data_description, next_index, field_name, get_sendable_field_sizing(field_name))</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        next_index=next_index+1</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="keywordflow">      end if</span>      </div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="keywordflow">    end do</span>    </div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160; </div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keyword">call </span>mpi_isend(data_description, next_index-1, mpi_type_data_sizing_description, &amp;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         current_state%parallel%corresponding_io_server_process, data_tag, mpi_comm_world, request_handle, ierr)</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    send_data_field_sizes_to_server=request_handle</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_cgraph" id="anamespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_cgraph">
<area shape="rect" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="5,20,144,76"/>
<area shape="rect" href="namespaceiobridge__mod.html#a40984bca5926f25f857eb79536ffbb30" title="Will assemble an individual description of an array data field." alt="" coords="427,34,588,75"/>
<area shape="rect" href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48" title="Retrieves the sizing information associated with a specific field." alt="" coords="194,27,377,69"/>
<area shape="rect" href="namespaceiobridge__mod.html#a116dd9a1dd530d8225607946a31731d7" title="Packages the local MONC decomposition information into descriptions for communication." alt="" coords="192,92,379,148"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_icgraph" id="anamespaceiobridge__mod_aea7ebb2c43679108eb4989eb41c5b28b_icgraph">
<area shape="rect" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="567,5,705,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="375,5,519,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,13,327,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,13,156,54"/>
</map>
</div>

</div>
</div>
<a id="ac38d8fafb33a172133fb9e2624bcca61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac38d8fafb33a172133fb9e2624bcca61">&#9670;&nbsp;</a></span>send_data_to_io_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::send_data_to_io_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>data_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends data to the IO server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">data_index</td><td>The specific data index to send over </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00125">125</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: data_index</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">integer</span> :: command_to_send, ierr</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="keywordflow">if</span> (data_definitions(data_index)%dump_requests(1) .ne. mpi_request_null .or. &amp;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;         data_definitions(data_index)%dump_requests(2) .ne. mpi_request_null) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="comment">! Here wait for previous data dump to complete (consider extending to using buffers for performance)</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <span class="keyword">call </span>mpi_waitall(2, data_definitions(data_index)%dump_requests, mpi_statuses_ignore, ierr)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">! Pack the send buffer and send it to the IO server</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keyword">call </span>pack_send_buffer(current_state, data_definitions(data_index))</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    command_to_send=data_command_start+data_index</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keyword">call </span>mpi_issend(command_to_send, 1, mpi_int, current_state%parallel%corresponding_io_server_process, &amp;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;         command_tag, mpi_comm_world, data_definitions(data_index)%dump_requests(1), ierr)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keyword">call </span>mpi_issend(data_definitions(data_index)%send_buffer, 1, data_definitions(data_index)%mpi_datatype, &amp;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;         current_state%parallel%corresponding_io_server_process, data_tag+data_index, mpi_comm_world, &amp;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;         data_definitions(data_index)%dump_requests(2), ierr)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_cgraph" id="anamespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_cgraph">
<area shape="rect" title="Sends data to the IO server." alt="" coords="5,153,139,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="187,153,320,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="372,86,531,127"/>
<area shape="rect" href="namespaceiobridge__mod.html#a4c0c3fb5c64b2528d8034a7ea25b9aa0" title="Packs map fields into the send buffer." alt="" coords="373,153,529,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c" title="Packs scalar fields into the send bufer." alt="" coords="368,219,535,261"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="583,5,759,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57" title="Packs the data of a specific prognostic field into a buffer." alt="" coords="596,85,745,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c" title="Packs the Q fields into the send buffer." alt="" coords="604,150,737,191"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="807,118,1001,159"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="583,215,759,271"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_icgraph" id="anamespaceiobridge__mod_ac38d8fafb33a172133fb9e2624bcca61_icgraph">
<area shape="rect" title="Sends data to the IO server." alt="" coords="419,39,552,80"/>
<area shape="rect" href="namespaceiobridge__mod.html#af141f60003d4019b095cc211553a90a8" title="Finalisation call back, called at the end of the model run." alt="" coords="204,5,371,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#af0293031aeb28752394b7a3a0709c1ec" title="Model dump call back, called for each model dump phase." alt="" coords="210,71,365,112"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,39,156,80"/>
</map>
</div>

</div>
</div>
<a id="a0bb9b5e93e13258d4d07383805a1fac0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb9b5e93e13258d4d07383805a1fac0">&#9670;&nbsp;</a></span>send_general_monc_information_to_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">integer function iobridge_mod::send_general_monc_information_to_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">character, dimension(:), intent(inout)&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends the general MONC information (ZN field and Q field names) to the IO server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">buffer</td><td>The communication buffer to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Handle to nonblocking send </dd></dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00509">509</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">intent(inout)</span> :: buffer</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordtype">character(len=STRING_LENGTH)</span> :: q_field_name, cd_field_name</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordtype">type</span>(q_metadata_type) :: q_meta_data</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordtype">integer</span> :: current_loc, n, ierr, request_handle    </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    current_loc=1</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    current_loc=pack_array_field(buffer, current_loc, real_array_1d=current_state%global_grid%configuration%vertical%zn)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <span class="keywordflow">if</span> (current_state%number_q_fields .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <span class="keywordflow">do</span> n=1, current_state%number_q_fields</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        q_meta_data=get_indices_descriptor(n)       </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span> (q_meta_data%l_used) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;          q_field_name=q_meta_data%name</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;          q_field_name=<span class="stringliteral">&quot;qfield_&quot;</span>//trim(conv_to_string(n))</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="keywordflow">        end if</span>        </div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        current_loc=pack_scalar_field(buffer, current_loc, string_value=q_field_name)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="keywordflow">      end do</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="keywordflow">    end if</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    current_loc=pack_array_field(buffer, current_loc, real_array_1d=current_state%global_grid%configuration%vertical%z)</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">do</span> n=1,ncond*2 </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">if</span> (n .le. ncond) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        cd_field_name = cond_request(n)</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        current_loc=pack_scalar_field(buffer, current_loc, string_value=cd_field_name)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;       cd_field_name = cond_long(n)</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        current_loc=pack_scalar_field(buffer, current_loc, string_value=cd_field_name)</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        cd_field_name = .not.<span class="stringliteral">&quot; &quot;</span>//trim(cond_request(n-ncond))</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        current_loc=pack_scalar_field(buffer, current_loc, string_value=cd_field_name)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        cd_field_name = .not.<span class="stringliteral">&quot; &quot;</span>//trim(cond_long(n-ncond))</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        current_loc=pack_scalar_field(buffer, current_loc, string_value=cd_field_name)</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="keywordflow">    end do</span>    </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;    <span class="keywordflow">do</span> n=1,ndiag</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      cd_field_name = diag_request(n)</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      current_loc=pack_scalar_field(buffer, current_loc, string_value=cd_field_name)</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      cd_field_name = diag_long(n)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      current_loc=pack_scalar_field(buffer, current_loc, string_value=cd_field_name)</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="keywordflow">    end do</span></div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160; </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160; </div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keyword">call </span>mpi_isend(buffer, current_loc-1, mpi_byte, current_state%parallel%corresponding_io_server_process, &amp;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;         data_tag, mpi_comm_world, request_handle, ierr)    </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    send_general_monc_information_to_server=request_handle</div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_a0bb9b5e93e13258d4d07383805a1fac0_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_a0bb9b5e93e13258d4d07383805a1fac0_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_a0bb9b5e93e13258d4d07383805a1fac0_icgraph" id="anamespaceiobridge__mod_a0bb9b5e93e13258d4d07383805a1fac0_icgraph">
<area shape="rect" title="Sends the general MONC information (ZN field and Q field names) to the IO server." alt="" coords="567,5,748,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac011e3d47c9276581877360ce56c5e36" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="375,5,519,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,13,327,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,13,156,54"/>
</map>
</div>

</div>
</div>
<a id="ac011e3d47c9276581877360ce56c5e36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac011e3d47c9276581877360ce56c5e36">&#9670;&nbsp;</a></span>send_monc_specific_data_to_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::send_monc_specific_data_to_server </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in)&#160;</td>
          <td class="paramname"><em>mpi_type_data_sizing_description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as well as meta data such as ZN field and Q field names. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
    <tr><td class="paramname">mpi_type_data_sizing_description</td><td>MPI data type representing the sizing message </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00454">454</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;    <span class="keywordtype">integer</span>, <span class="keywordtype">intent(in)</span> :: mpi_type_data_sizing_description</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160; </div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">type</span>(data_sizing_description_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: data_description</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="keywordtype">character</span>, <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: buffer</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordtype">integer</span> :: number_unique_fields, buffer_size, request_handles(2), ierr</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="keywordtype">    real</span>(kind=<a class="code" href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">default_precision</a>) :: dreal</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    number_unique_fields=c_size(unique_field_names)</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keyword">allocate</span>(data_description(number_unique_fields+4))</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    request_handles(1)=send_data_field_sizes_to_server(current_state, mpi_type_data_sizing_description, &amp;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;       data_description, number_unique_fields)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    buffer_size=(kind(dreal)*current_state%local_grid%size(z_index))*2 + (string_length * current_state%number_q_fields &amp;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                 + 4*ncond*string_length + 2*ndiag*string_length )</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keyword">allocate</span>(buffer(buffer_size))</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    request_handles(2)=send_general_monc_information_to_server(current_state, buffer)</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="keyword">call </span>mpi_waitall(2, request_handles, mpi_statuses_ignore, ierr)</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keyword">deallocate</span>(data_description)</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keyword">deallocate</span>(buffer)</div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_cgraph" id="anamespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_cgraph">
<area shape="rect" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="5,59,149,115"/>
<area shape="rect" href="namespaceiobridge__mod.html#aea7ebb2c43679108eb4989eb41c5b28b" title="Assembles all the data field sizing information and sends this to the IO server." alt="" coords="219,19,357,75"/>
<area shape="rect" href="namespaceiobridge__mod.html#a0bb9b5e93e13258d4d07383805a1fac0" title="Sends the general MONC information (ZN field and Q field names) to the IO server." alt="" coords="197,99,379,155"/>
<area shape="rect" href="namespaceiobridge__mod.html#a40984bca5926f25f857eb79536ffbb30" title="Will assemble an individual description of an array data field." alt="" coords="661,33,823,75"/>
<area shape="rect" href="namespaceiobridge__mod.html#a8ef0275c630a206b31728ec8cde19f48" title="Retrieves the sizing information associated with a specific field." alt="" coords="429,27,611,68"/>
<area shape="rect" href="namespaceiobridge__mod.html#a116dd9a1dd530d8225607946a31731d7" title="Packages the local MONC decomposition information into descriptions for communication." alt="" coords="427,91,613,147"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_icgraph" id="anamespaceiobridge__mod_ac011e3d47c9276581877360ce56c5e36_icgraph">
<area shape="rect" title="Sends this MONC specific information to the IO server, which is field info (sizing &amp; availability) as..." alt="" coords="375,5,519,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a62439f3fcbbf2ab618d4b03bbaa3436f" title="Initialisation call back, called at the start of the model run." alt="" coords="204,13,327,54"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,13,156,54"/>
</map>
</div>

</div>
</div>
<a id="af0293031aeb28752394b7a3a0709c1ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0293031aeb28752394b7a3a0709c1ec">&#9670;&nbsp;</a></span>timestep_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">subroutine iobridge_mod::timestep_callback </td>
          <td>(</td>
          <td class="paramtype">type(<a class="el" href="structstate__mod_1_1model__state__type.html">model_state_type</a>), intent(inout), target&#160;</td>
          <td class="paramname"><em>current_state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Model dump call back, called for each model dump phase. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">current_state</td><td>The current model state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00106">106</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="keywordtype">type</span>(model_state_type), <span class="keywordtype">target</span>, <span class="keywordtype">intent(inout)</span> :: current_state</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160; </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">integer</span> :: i</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span> (.not. io_server_enabled) <span class="keywordflow">return</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">do</span> i=1, <span class="keyword">size</span>(data_definitions)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">if</span> (data_definitions(i)%frequency .gt. 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keywordflow">if</span> (mod(current_state%timestep, data_definitions(i)%frequency) == 0) <span class="keywordflow">then</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;          <span class="keyword">call </span>send_data_to_io_server(current_state, i)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="keywordflow">        end if</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keywordflow">      end if</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="keywordflow">    end do</span></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_cgraph.png" border="0" usemap="#anamespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_cgraph" alt=""/></div>
<map name="namespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_cgraph" id="anamespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_cgraph">
<area shape="rect" title="Model dump call back, called for each model dump phase." alt="" coords="5,153,160,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#ac38d8fafb33a172133fb9e2624bcca61" title="Sends data to the IO server." alt="" coords="208,153,341,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab1fb7de25506e362a1211db206352067" title="Packs the current state into the send buffer. This iterates through each field in the data descriptio..." alt="" coords="389,153,523,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#afbe2c82d31a1a851ad23dc1cc0b58872" title="Packs array fields into the send bufer." alt="" coords="575,86,733,127"/>
<area shape="rect" href="namespaceiobridge__mod.html#a4c0c3fb5c64b2528d8034a7ea25b9aa0" title="Packs map fields into the send buffer." alt="" coords="576,153,732,194"/>
<area shape="rect" href="namespaceiobridge__mod.html#aeb4bf18f8774bcdab06ceae4599ab43c" title="Packs scalar fields into the send bufer." alt="" coords="571,219,737,261"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab0524fecf44a3a034da9a6645602fc0c" title="Packs a components field array into the send buffer, these are fields that are served up by component..." alt="" coords="785,5,961,61"/>
<area shape="rect" href="namespaceiobridge__mod.html#a056ea7a2bc074a5b33fc18823238aa57" title="Packs the data of a specific prognostic field into a buffer." alt="" coords="799,85,948,126"/>
<area shape="rect" href="namespaceiobridge__mod.html#a1542c1cdf01e4cb8fe48c00e1c0e5c9c" title="Packs the Q fields into the send buffer." alt="" coords="807,150,940,191"/>
<area shape="rect" href="namespaceiobridge__mod.html#a49a08a884e2294560580c1011bccc035" title="Retrieves the descriptor associated with some component&#39;s field based upon the field name." alt="" coords="1009,118,1204,159"/>
<area shape="rect" href="namespaceiobridge__mod.html#ab26738bfa682205a534b51881d149d66" title="Packs a components field scalar into the send buffer, these are fields that are served up by componen..." alt="" coords="785,215,961,271"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="namespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_icgraph.png" border="0" usemap="#anamespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_icgraph" alt=""/></div>
<map name="namespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_icgraph" id="anamespaceiobridge__mod_af0293031aeb28752394b7a3a0709c1ec_icgraph">
<area shape="rect" title="Model dump call back, called for each model dump phase." alt="" coords="204,5,359,47"/>
<area shape="rect" href="namespaceiobridge__mod.html#a24dcc29fe104bea3b0254ae43b7007e4" title=" " alt="" coords="5,5,156,47"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ade4a180b331928b565f45e42584aedec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade4a180b331928b565f45e42584aedec">&#9670;&nbsp;</a></span>component_field_descriptions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>) iobridge_mod::component_field_descriptions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00057">57</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>

</div>
</div>
<a id="a56f8d63e796d7b6b37fa32b991d83e65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56f8d63e796d7b6b37fa32b991d83e65">&#9670;&nbsp;</a></span>data_definitions</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structiobridge__mod_1_1io__configuration__data__definition__type.html">io_configuration_data_definition_type</a>), dimension(:), allocatable iobridge_mod::data_definitions</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00056">56</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordtype">type</span>(io_configuration_data_definition_type), <span class="keywordtype">dimension(:)</span>, <span class="keywordtype">allocatable</span> :: data_definitions</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3a555f52a9f8ef07688d1ef12488e0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3a555f52a9f8ef07688d1ef12488e0c">&#9670;&nbsp;</a></span>in_finalisation_callback</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical iobridge_mod::in_finalisation_callback</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00058">58</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>

</div>
</div>
<a id="aae481a212f8f86fce3c0b544116e528c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae481a212f8f86fce3c0b544116e528c">&#9670;&nbsp;</a></span>io_server_enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">logical iobridge_mod::io_server_enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00058">58</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">logical</span> :: io_server_enabled, in_finalisation_callback</div>
</div><!-- fragment -->
</div>
</div>
<a id="afe975f2e5d71e81a7651fc3755bcc46f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe975f2e5d71e81a7651fc3755bcc46f">&#9670;&nbsp;</a></span>sendable_fields</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>) iobridge_mod::sendable_fields</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00057">57</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>

</div>
</div>
<a id="acf93bd04a3be10eae71b620ccf2ef5b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf93bd04a3be10eae71b620ccf2ef5b3">&#9670;&nbsp;</a></span>unique_field_names</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">type(<a class="el" href="structcollections__mod_1_1map__type.html">map_type</a>) iobridge_mod::unique_field_names</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="iobridge_8F90_source.html#l00057">57</a> of file <a class="el" href="iobridge_8F90_source.html">iobridge.F90</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">type</span>(map_type) :: unique_field_names, sendable_fields, component_field_descriptions</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<div class="ttc" id="anamespacelogging__mod_html_ad68309846cd8f9e77edaa6abd02f65a0"><div class="ttname"><a href="namespacelogging__mod.html#ad68309846cd8f9e77edaa6abd02f65a0">logging_mod::log_error</a></div><div class="ttdeci">integer, parameter, public log_error</div><div class="ttdoc">Only log ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00011">logging.F90:11</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_a10e28447dd10ef9f92d205bc98fb26d3"><div class="ttname"><a href="namespacelogging__mod.html#a10e28447dd10ef9f92d205bc98fb26d3">logging_mod::log_warn</a></div><div class="ttdeci">integer, parameter, public log_warn</div><div class="ttdoc">Log WARNING and ERROR messages.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00012">logging.F90:12</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ac4f13ac385499c85190cb184030e4f45"><div class="ttname"><a href="namespacelogging__mod.html#ac4f13ac385499c85190cb184030e4f45">logging_mod::log_log</a></div><div class="ttdeci">subroutine, public log_log(level, message, str)</div><div class="ttdoc">Logs a message at the specified level. If the level is above the current level then the message is ig...</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00074">logging.F90:75</a></div></div>
<div class="ttc" id="anamespacelogging__mod_html_ad95937a250467334622daeb5cff78c20"><div class="ttname"><a href="namespacelogging__mod.html#ad95937a250467334622daeb5cff78c20">logging_mod::log_master_log</a></div><div class="ttdeci">subroutine, public log_master_log(level, message)</div><div class="ttdoc">Will log just from the master process.</div><div class="ttdef"><b>Definition:</b> <a href="logging_8F90_source.html#l00046">logging.F90:47</a></div></div>
<div class="ttc" id="anamespacedatadefn__mod_html_a39b79f8cc843d236d3b47f5c81b64368"><div class="ttname"><a href="namespacedatadefn__mod.html#a39b79f8cc843d236d3b47f5c81b64368">datadefn_mod::default_precision</a></div><div class="ttdeci">integer, parameter, public default_precision</div><div class="ttdoc">MPI communication type which we use for the prognostic and calculation data.</div><div class="ttdef"><b>Definition:</b> <a href="datadefn_8F90_source.html#l00017">datadefn.F90:17</a></div></div>
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20
</small></address>
</body>
</html>
